<<<<<<< HEAD
{"version":3,"file":"pdb-rna-viewer-plugin-0.1.0.js","mappings":"uBAEIA,EACAC,EACAC,EACAC,EACAC,EACAC,E,eCHJ,IAAWC,EAHXC,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQH,kBAAe,GAEZA,EAmEOG,EAAQH,eAAiBG,EAAQH,aAAe,CAAC,IA/ClDK,OAnBb,SAAgBC,GAEZ,IADA,IAAIC,EAAW,CAAC,EACPC,EAAK,EAAGC,EAAKH,EAAaI,OAAQF,EAAKC,EAAID,IAAM,CACtD,IAAIG,EAAYL,EAAaE,GACzBI,OAAU,EACW,mBAAdC,WAEPD,EAAU,IAAIC,WAAWF,EAAW,CAAE,KAAQG,OAAQ,SAAW,EAAM,YAAc,IAEjD,mBAAxBC,SAASC,cAErBJ,EAAUG,SAASC,YAAY,gBACvBC,UAAUN,GAAW,GAAoB,GAErDJ,EAASI,GAAaC,CAC1B,CAEA,OAAOL,CACX,EAMAP,EAAakB,oBAJb,SAA6BC,EAAOC,EAAWC,GAC3CF,EAAiB,UAAIC,EACrBC,EAAcC,cAAcH,EAChC,EA0CAnB,EAAauB,2BAxCb,SAAoCC,GAChCT,SAASU,iBAAiB,mBAAmB,SAAUC,GACnD,QAAwB,IAAbA,EAAEC,OAAwB,CACjC,IAAIC,EAAeC,SAASH,EAAEC,OAAOG,OACjCC,EAAaF,SAASH,EAAEC,OAAOK,KACnCR,EAAUS,iBACV,IAAK,IAAIC,EAAIN,EAAcM,GAAKH,EAAYG,IACxCV,EAAUW,cAAcD,EAAGR,EAAEC,OAAOS,MAE5C,CACJ,IACArB,SAASU,iBAAiB,uBAAuB,SAAUC,GACvD,QAAwB,IAAbA,EAAEC,OAAwB,CACjC,IAAIC,EAAeC,SAASH,EAAEC,OAAOG,OACjCC,EAAaF,SAASH,EAAEC,OAAOK,KACnCR,EAAUa,iBACV,IAAK,IAAIH,EAAIN,EAAcM,GAAKH,EAAYG,IACxCV,EAAUc,iBAAiBJ,EAAGR,EAAEC,OAAOS,MAE/C,CACJ,IACArB,SAASU,iBAAiB,sBAAsB,SAAUC,GACtDF,EAAUa,gBACd,IACAtB,SAASU,iBAAiB,qBAAqB,SAAUC,QAC1B,IAAhBA,EAAEN,gBAAkE,IAA9BM,EAAEN,UAAUmB,eAAiCb,EAAEN,UAAUoB,eAAiBhB,EAAUiB,QAAQC,UACzIlB,EAAUS,iBACVT,EAAUW,cAAcT,EAAEN,UAAUmB,eAE5C,IACAxB,SAASU,iBAAiB,yBAAyB,SAAUC,QAC9B,IAAhBA,EAAEN,gBAAkE,IAA9BM,EAAEN,UAAUmB,eAAiCb,EAAEN,UAAUoB,eAAiBhB,EAAUiB,QAAQC,UACzIlB,EAAUa,iBACVb,EAAUc,iBAAiBZ,EAAEN,UAAUmB,eAE/C,IACAxB,SAASU,iBAAiB,wBAAwB,WAC9CD,EAAUa,gBACd,GACJ,C,gBCpEJpC,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQwC,cAAgBxC,EAAQyC,iBAAc,EAC9C,IAAIlD,EAAU,EAAQ,KAClBkD,EAA6B,WAC7B,SAASA,IACT,CAgFA,OA/EAA,EAAYC,UAAUC,WAAa,SAAUC,EAAUL,EAASM,GAC5D,OAAOtD,EAAQuD,UAAUC,UAAM,OAAQ,GAAQ,WAC3C,IAAIC,EAAQC,EACZ,OAAO1D,EAAQ2D,YAAYH,MAAM,SAAUI,GACvC,OAAQA,EAAGC,OACP,KAAK,EAGD,OAFAD,EAAGE,KAAKC,KAAK,CAAC,EAAG,EAAG,CAAE,IACtBN,EAAS,2CAA2CO,OAAOV,EAAMW,cAAe,KAAKD,OAAOX,EAAU,KAAKW,OAAOhB,EAAS,SACpH,CAAC,EAAakB,MAAMT,IAC/B,KAAK,EAAG,MAAO,CAAC,EAAcG,EAAGO,OAAQC,QACzC,KAAK,EAAG,MAAO,CAAC,EAAcR,EAAGO,QACjC,KAAK,EAGD,OAFAT,EAAME,EAAGO,OACTX,KAAKa,YAAYX,GACV,CAAC,OAAc,GAC1B,KAAK,EAED,MAAO,CAAC,GAEpB,GACJ,GACJ,EACAR,EAAYC,UAAUmB,YAAc,SAAUhB,EAAON,GACjD,OAAOhD,EAAQuD,UAAUC,UAAM,OAAQ,GAAQ,WAC3C,IAAIe,EAAQC,EACZ,OAAOxE,EAAQ2D,YAAYH,MAAM,SAAUI,GACvC,OAAQA,EAAGC,OACP,KAAK,EAGD,OAFAD,EAAGE,KAAKC,KAAK,CAAC,EAAG,EAAG,CAAE,IACtBQ,EAAS,oHAAoHP,OAAOV,EAAMW,cAAe,WAAWD,OAAOhB,EAAS,sBAC7K,CAAC,EAAakB,MAAMK,IAC/B,KAAK,EAAG,MAAO,CAAC,EAAcX,EAAGO,OAAQC,QACzC,KAAK,EAIL,MAAO,CAAC,EAAcR,EAAGO,QACzB,KAAK,EAGD,OAFAK,EAAMZ,EAAGO,OACTX,KAAKiB,gBAAgBD,GACd,CAAC,OAAc,GAC1B,KAAK,EAED,MAAO,CAAC,GAEpB,GACJ,GACJ,EACAtB,EAAYC,UAAUuB,kBAAoB,SAAUpB,EAAON,GACvD,OAAOhD,EAAQuD,UAAUC,UAAM,OAAQ,GAAQ,WAC3C,IAAIe,EAAQI,EACZ,OAAO3E,EAAQ2D,YAAYH,MAAM,SAAUI,GACvC,OAAQA,EAAGC,OACP,KAAK,EAGD,OAFAD,EAAGE,KAAKC,KAAK,CAAC,EAAG,EAAG,CAAE,IACtBQ,EAAS,oHAAoHP,OAAOV,EAAMW,cAAe,WAAWD,OAAOhB,EAAS,qBAC7K,CAAC,EAAakB,MAAMK,IAC/B,KAAK,EAAG,MAAO,CAAC,EAAcX,EAAGO,OAAQC,QACzC,KAAK,EAGL,MAAO,CAAC,EAAcR,EAAGO,QACzB,KAAK,EAGD,OAFAQ,EAAMf,EAAGO,OACTX,KAAKiB,gBAAgBE,GACd,CAAC,OAAc,GAC1B,KAAK,EAED,MAAO,CAAC,GAEpB,GACJ,GACJ,EACAzB,EAAYC,UAAUkB,YAAc,SAAUrC,GAC1C4C,QAAQC,IAAI,mCAAoC7C,EACpD,EACAkB,EAAYC,UAAUsB,gBAAkB,SAAUzC,GAC9C4C,QAAQC,IAAI,mCAAoC7C,EACpD,EACOkB,CACX,CAnFgC,GAoFhCzC,EAAQyC,YAAcA,EACtB,IAAID,EAA+B,WAC/B,SAASA,IACT,CAuBA,OAtBAA,EAAc6B,WAAa,SAAUxB,EAAOyB,GACxC,OAAO/E,EAAQuD,UAAUC,UAAM,OAAQ,GAAQ,WAC3C,IAAIC,EACJ,OAAOzD,EAAQ2D,YAAYH,MAAM,SAAUI,GACvC,OAAQA,EAAGC,OACP,KAAK,EAGD,OAFAD,EAAGE,KAAKC,KAAK,CAAC,EAAG,EAAG,CAAE,IACtBN,EAAS,gEAAgEO,OAAOV,EAAO,kBAAkBU,OAAOe,EAAU,gBACnH,CAAC,EAAab,MAAMT,IAC/B,KAAK,EAAG,MAAO,CAAC,EAAcG,EAAGO,OAAQC,QACzC,KAAK,EAAG,MAAO,CAAC,EAAcR,EAAGO,QACjC,KAAK,EAGD,OAFMP,EAAGO,OAEF,CAAC,OAAc,GAC1B,KAAK,EAED,MAAO,CAAC,GAEpB,GACJ,GACJ,EACOlB,CACX,CA1BkC,GA2BlCxC,EAAQwC,cAAgBA,C,gBCnHxB1C,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQuE,sBAAmB,EAC3B,IAAI5E,EAAiB,EAAQ,KACzB4E,EAAkC,WAClC,SAASA,EAAiB1B,GACtBE,KAAKF,MAAQA,CACjB,CAgOA,OA/NA0B,EAAiB7B,UAAU8B,mBAAqB,WAC5C,IAAIC,EAAQ1B,KACR2B,EAASC,GAAGC,OAAO,eAEnBC,EAAQF,GAAGG,OAAOC,GAAG,QAAQ,WAC7BJ,GAAGC,OAAO,eAAerB,OAAOkB,EAAM5B,QAAQmC,KAAK,YAAaL,GAAG3D,MAAMiE,WACzEN,GAAGC,OAAO,wBAAwBrB,OAAOkB,EAAM5B,QAAQmC,KAAK,YAAaL,GAAG3D,MAAMiE,WAClFN,GAAGC,OAAO,wBAAwBrB,OAAOkB,EAAM5B,QAAQmC,KAAK,YAAaL,GAAG3D,MAAMiE,UACtF,IACAN,GAAGC,OAAO,eAAeM,KAAKL,GACzBE,GAAG,gBAAiB,MACpBA,GAAG,aAAc,MACjBA,GAAG,kBAAmB,MAE3BJ,GAAGC,OAAO,sBAAsBrB,OAAOR,KAAKF,QACvCkC,GAAG,SAAS,WACbJ,GAAG3D,MAAMmE,kBACTN,EAAMO,QAAQV,EAAOW,aAAaC,SAAS,KAAM,IACrD,IAEAX,GAAGC,OAAO,uBAAuBrB,OAAOR,KAAKF,QACxCkC,GAAG,SAAS,WACbJ,GAAG3D,MAAMmE,kBACT,IACII,EADaZ,GAAGC,OAAO,eAAerB,OAAOkB,EAAM5B,QACvB2C,QAAQ,GAAG,GAAGC,aAAa,aAC3D,GAAIF,GAAqC,KAAnBA,EAAuB,CACzC,GAAuB,OAAnBA,EACA,OACJ,IAAIG,GAAqBH,EAAeI,MAAM,mBAAmB,GACjE,GAAID,GAAqB,GAAMA,EAAoB,IAAO,EAEtD,YADAhB,EAAOW,aAAaC,SAAS,KAAKJ,KAAKL,EAAMI,UAAWN,GAAGiB,aAGnE,CACAf,EAAMO,QAAQT,GAAGC,OAAO,eAAeS,aAAaC,SAAS,KAAM,GACvE,IAEAX,GAAGC,OAAO,qBAAqBrB,OAAOR,KAAKF,QACtCkC,GAAG,SAAS,WACbJ,GAAG3D,MAAMmE,kBACTT,EAAOW,aAAaC,SAAS,KAAKJ,KAAKL,EAAMI,UAAWN,GAAGiB,aAC/D,IAEAjB,GAAGC,OAAO,2BAA2BrB,OAAOR,KAAKF,QAC5CkC,GAAG,SAAS,WACbJ,GAAG3D,MAAMmE,kBACTZ,EAAiBrC,eAAeuC,EAAM5B,OACtC0B,EAAiBzC,eAAe2C,EAAM5B,MAC1C,GACJ,EACA0B,EAAiBsB,mBAAqB,SAAUhD,EAAOD,EAAUkD,EAAcC,EAAc/E,EAAOiB,GAChGjB,SAA8CA,EAAMgF,2BACpDzB,EAAiBrC,eAAeW,GAChC,IAAIoD,EAAQrF,SAASsF,eAAe,GAAG3C,OAAOV,EAAO,wBAIrD,GAHIoD,IACAA,EAAME,MAAMC,QAAU,SAErBL,IACmBM,MAAhBP,IACAA,EAAe/C,KAAKuD,cAEpBR,GAAgB,GAAG,CACnB,IAAIS,EAAS,CAAE1D,MAAOA,EAAOiD,aAAcA,EAAclD,SAAUA,GAC/D4D,EAAc5F,SAAS6F,cAAc,YAAYlD,OAAOV,EAAO,KAAKU,OAAOuC,IAC3EU,GACA7G,EAAeE,aAAakB,oBAAoBwD,EAAiBmC,UAAU,2BAA4BH,EAAQC,EAEvH,CAER,EACAjC,EAAiBoC,eAAiB,WAC9B,IAAIC,EAAahG,SAASsF,eAAe,cACpCnD,KAAK8D,UAKND,EAAWT,MAAMC,QAAU,OAC3BrD,KAAK8D,UAAW,IALhBD,EAAWT,MAAMC,QAAU,QAC3BrD,KAAK8D,UAAW,EAMxB,EACAtC,EAAiBrC,eAAiB,SAAUW,GACxC,GAAIE,KAAK+D,UAAY,EAAG,CACpB,IAAIC,EAAanG,SAAS6F,cAAc,kBAAkBO,uBAAuB,yBAAyBzD,OAAOV,EAAO,aAAaU,OAAOV,EAAO,KAAKU,OAAOR,KAAK+D,WAAW,GAC3K/D,KAAKkE,eAAiBF,EACK,QAAvBA,EAAWG,SACXH,EAAWI,aAAa,OAAQ5C,EAAiB0C,eAGjDF,EAAWI,aAAa,SAAU5C,EAAiB0C,eAGlDF,IACsB,QAAvBA,EAAWG,SACXH,EAAWI,aAAa,OAAQ,WAGhCJ,EAAWI,aAAa,SAAU,YAG1CpE,KAAK+D,UAAY,CACrB,CAEJ,EACAvC,EAAiBzC,eAAiB,SAAUe,GACxCjC,SAAS6F,cAAc,wBAAwBlD,OAAOV,MAAUjC,SAAS6F,cAAc,wBAAwBlD,OAAOV,IAAQuE,UAAY,GAC9I,EACA7C,EAAiB8C,YAAc,SAAUC,EAAKC,EAAMC,EAAMvF,EAAOwF,GAC7D,IAAIC,EAAU9G,SAASsF,eAAe,WACtCwB,EAAQC,GAAK,UACbD,EAAQN,UAAYG,EACpBG,EAAQvB,MAAMC,QAAU,QACxBsB,EAAQvB,MAAMyB,KAAON,EAAIO,OAAS,KAClCH,EAAQvB,MAAM2B,IAAMR,EAAIS,OAAS,KACjCxD,EAAiByD,gBAAkB/F,EACnCsC,EAAiB0D,YAAcR,EAC/B,IAAIS,EAAOtH,SAAS6F,cAAc,kBAAkBO,uBAAuBQ,GAAM,GAC5D,QAAjBU,EAAKhB,UACLgB,EAAKf,aAAa,SAAU,UAEhCe,EAAKf,aAAa,OAAQ,SAC9B,EACA5C,EAAiB4D,YAAc,SAAUX,GACvB5G,SAASsF,eAAe,WAC9BC,MAAMC,QAAU,OACxB,IAAI8B,EAAOtH,SAAS6F,cAAc,kBAAkBO,uBAAuBQ,GAAM,GAC5D,QAAjBU,EAAKhB,UACLgB,EAAKf,aAAa,SAAU,GAAG5D,OAAOgB,EAAiByD,kBAE3DE,EAAKf,aAAa,OAAQ,GAAG5D,OAAOgB,EAAiB0D,aACzD,EACA1D,EAAiB6D,WAAa,SAAUC,EAAOpG,EAAOY,GAClD,IAAIyF,EAAS1H,SAAS6F,cAAc,kBAAkBO,uBAAuB,UAAUzD,OAAOV,EAAO,KAAKU,OAAO8E,IAAQ,GAErHE,EADa3H,SAAS6F,cAAc,kBAAkBO,uBAAuB,yBAAyBzD,OAAOV,EAAO,aAAaU,OAAOV,EAAO,KAAKU,OAAO8E,IAAQ,GACjJG,UAClBC,EAAMF,EAAKG,EAAIH,EAAKI,MAAQ,EAC5BC,EAAML,EAAKM,EAAIN,EAAKO,OAAS,EACjCR,EAAOnB,aAAa,KAAMsB,GAC1BH,EAAOnB,aAAa,KAAMyB,GAC1BN,EAAOnB,aAAa,SAAU,GAAG5D,OAAOtB,IACxCqG,EAAOnB,aAAa,OAAQ,GAAG5D,OAAOtB,IACtCqG,EAAOnC,MAAMC,QAAU,OAC3B,EACA7B,EAAiBmC,UAAY/G,EAAeE,aAAaK,OAAO,CAAC,uBAAwB,2BAA4B,4BACrHqE,EAAiB+B,cAAgB,EACjC/B,EAAiBuC,UAAY,EAC7BvC,EAAiBwE,aAAe,GAChCxE,EAAiByD,gBAAkB,GACnCzD,EAAiB0D,YAAc,GAC/B1D,EAAiB0C,cAAgB,GACjC1C,EAAiBsC,UAAW,EAC5BtC,EAAiByE,iBAAmB,SAAUnG,EAAOD,EAAUkD,EAActF,EAAWuF,EAAckD,EAASjI,EAAOiB,GAElH,GADAjB,SAA8CA,EAAMgF,2BAChDpF,SAAS6F,cAAc,kBAAmB,CAC1ClC,EAAiBrC,eAAeW,GAChC0B,EAAiB2E,gBAAgBrG,EAAOiD,EAAc7D,EAAO,aAC7DsC,EAAiBuC,SAAWhB,EAC5BvB,EAAiB+B,aAAeR,EAChC,IAAIG,EAAQrF,SAASsF,eAAe,GAAG3C,OAAOV,EAAO,wBAGrD,GAFAoD,EAAME,MAAMC,QAAU,SACtBH,EAAMmB,UAAY,WAAW7D,OAAOwC,EAAe,cAAgB,GAAI,YAAYxC,OAAO0F,GAAoB,GAAI,KAAK1F,OAAOuC,EAAc,cACvIC,EAAc,CACf,IAAIoD,EAA2B,UAAd3I,EAAyB,uBAAyB,2BAC/D+F,EAAS,CAAE1D,MAAOA,EAAOiD,aAAcA,EAAclD,SAAUA,GAC/D4D,EAAc5F,SAAS6F,cAAc,YAAYlD,OAAOV,EAAO,KAAKU,OAAOuC,IAC3EU,GACA7G,EAAeE,aAAakB,oBAAoBwD,EAAiBmC,UAAUyC,GAAY5C,EAAQC,EAEvG,CACJ,CACJ,EACAjC,EAAiB2E,gBAAkB,SAAUrG,EAAOiD,EAAc7D,EAAOmH,EAAMC,GAG3E,IAAIC,EAAcrH,GAAS,SAU3B,GAAa,UAAToH,EAAmB,CACnB,IAAIf,EAAS1H,SAAS6F,cAAc,kBAAkBO,uBAAuB,UAAUzD,OAAOV,EAAO,KAAKU,OAAOuC,IAAe,GACpH,aAARsD,GACId,EAAO7C,aAAa,YACpBlB,EAAiB0C,cAAgBqB,EAAO7C,aAAa,WAGzD6C,IACAA,EAAOnB,aAAa,SAAU,GAAG5D,OAAOtB,IACxCqG,EAAOnB,aAAa,OAAQ,GAAG5D,OAAOtB,IACtCqG,EAAOnC,MAAMC,QAAU,QAE/B,CACA,IAAIW,EAAanG,SAAS6F,cAAc,kBAAkBO,uBAAuB,yBAAyBzD,OAAOV,EAAO,aAAaU,OAAOV,EAAO,KAAKU,OAAOuC,IAAe,GAC1KiB,IAC2B,QAAvBA,EAAWG,UACC,aAARkC,IACIrC,EAAWtB,aAAa,UACxBlB,EAAiB0C,cAAgBF,EAAWtB,aAAa,UAGzDlB,EAAiB0C,cAAgB,WAGzCF,EAAWI,aAAa,SAAUmC,IAEN,QAAvBvC,EAAWG,WACJ,aAARkC,IACIrC,EAAWtB,aAAa,QACxBlB,EAAiB0C,cAAgBF,EAAWtB,aAAa,QAGzDlB,EAAiB0C,cAAgB,WAGzCF,EAAWI,aAAa,OAAQmC,IAG5C,EACO/E,CACX,CApOqC,GAqOrCvE,EAAQuE,iBAAmBA,EAC3B5D,OAAO4D,iBAAmBA,C,gBCzO1BzE,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQuJ,uBAAoB,EAC5B,IAAI7J,EAAc,EAAQ,KACtBF,EAAS,EAAQ,KACjB+J,EAAmC,WACnC,SAASA,EAAkBC,EAAkBC,EAAeC,GACxD,IAAIC,EAAU5G,KACdA,KAAK6G,mBAAqBjJ,OAAOiJ,mBACjC7G,KAAK8G,oBAAsBlJ,OAAOkJ,oBAClC9G,KAAK+G,qBAAuBnJ,OAAOmJ,qBACnC/G,KAAKgH,YAAcpJ,OAAOoJ,YAC1BhH,KAAKiH,YAAcrJ,OAAOqJ,YAC1BjH,KAAKkH,sBAAwBtJ,OAAOsJ,sBACpClH,KAAKmH,kBAAoBvJ,OAAOuJ,kBAChCnH,KAAKoH,qBAAuBxJ,OAAOwJ,qBACnCpH,KAAKqH,mBAAqBzJ,OAAOyJ,mBACjCrH,KAAKsH,gBAAkB1J,OAAO2J,GAC9BvH,KAAKwH,UAAY,IAAIC,IACrBzH,KAAK0H,UAAY,kKACjB1H,KAAK2H,SAAW,GAChB3H,KAAK4H,eAAiB,GACtB5H,KAAK6H,WAAa,GAClB7H,KAAK8H,SAAW,IAAIL,IACpBzH,KAAK+H,eAAiB,IAAIN,IAC1BzH,KAAKgI,YAAc,GACnBhI,KAAKiI,aAAe,GACpBjI,KAAKkI,oBAAqB,EAC1BlI,KAAKmI,aAAe,IAAIV,IACxBzH,KAAKoI,SAAW,IAAIX,IACpBzH,KAAKqI,SAAW,IAAIZ,IACpBzH,KAAKsI,mBAAqB,GAC1BtI,KAAKuI,eAAiB,CAClBC,gBAAiB,eACjBC,UAAW,mBACXC,YAAa,aACbC,aAAc,8BACdC,WAAY,8BACZC,cAAe,6DACfC,kBAAmB,mBACnBC,cAAe,+CACfC,aAAc,oBAElBhJ,KAAKiJ,cAAgB,IAAIC,IACzBlJ,KAAKmJ,qBAAuB,IAAID,IAChClJ,KAAKqF,WAAa,SAAUvF,EAAOd,EAAGE,GAClC,IAAIqG,EAAS1H,SAAS6F,cAAc,kBAAkBO,uBAAuB,UAAUzD,OAAOV,EAAO,KAAKU,OAAOxB,IAAI,GAOrHuG,EAAOnB,aAAa,SAAU,GAAG5D,OAAOtB,IACxCqG,EAAOnB,aAAa,OAAQ,GAAG5D,OAAOtB,IACtCqG,EAAOnC,MAAMC,QAAU,OAC3B,EACArD,KAAKoJ,SAAW,WACZ,IAAIC,EAAezC,EAAQH,iBAAiB/C,cAAc,qBACtD4F,EAAgB3K,SAAS0K,EAAanM,OAC1C,GAAIoM,EAAe,CACf,IAAIC,EAAiB3C,EAAQ4C,YAAYF,GACrCC,EAAeE,MACfF,EAAeE,KAAKC,SAAQ,SAAUC,EAAK3K,GAC5BsE,MAAPqG,GAAiCrG,MAAbqG,EAAIzK,OACpByK,EAAIzK,MAAM0K,QAAQ,OAAS,GAG3BjN,EAAY6E,iBAAiB2E,gBAAgBS,EAAQF,cAAc5G,MAAO6J,EAAI/K,MAAO+K,EAAIzK,WAAOoE,EAAWsD,EAAQqB,aAG/H,GAER,KACK,CACD,IAAI4B,EAAajD,EAAQ4C,YAAY,GACjCK,EAAWJ,MACXI,EAAWJ,KAAKC,SAAQ,SAAUC,EAAK3K,GACxBsE,MAAPqG,GAAiCrG,MAAbqG,EAAI/K,OACxBjC,EAAY6E,iBAAiB2E,gBAAgBS,EAAQF,cAAc5G,MAAO6J,EAAI/K,MAAO,kBAAc0E,EAAWsD,EAAQqB,aAE9H,GAER,CACJ,EACAjI,KAAK8J,eAAiB,WAClB,IAAIC,EAAkBnD,EAAQH,iBAAiB/C,cAAc,qBACzDsG,GAAOD,EAAgB7M,MAC3BW,SAASsF,eAAe,2BAA2BjG,MAAQ6M,EAAgBxK,QAAQyK,GAAKxF,KACxFoC,EAAQU,gBAAgB2C,kBAAoBF,EAAgBxK,QAAQyK,GAAKxF,IAC7E,EACAxE,KAAKkK,iBAAmB,WA+BpB,IAAK,IAAIP,KA9BL/C,EAAQU,gBAAgB6C,SAAS3M,OAAS,GAAkD,eAA7CoJ,EAAQU,gBAAgB2C,oBACvErD,EAAQU,gBAAgB2C,kBAAoB,eAEhDrD,EAAQqC,cAAcS,SAAQ,SAAUC,GACpC,IAAK/C,EAAQU,gBAAgB6C,SAASC,SAAST,GAAM,CACjD,IAAK,IAAI3K,KAAK4H,EAAQU,gBAAgB+C,iBAAiBV,GAAM,CACzDhN,EAAY6E,iBAAiB2E,gBAAgBS,EAAQF,cAAc5G,MAAO8G,EAAQU,gBAAgB+C,iBAAiBV,GAAK3K,GAAI,eAAWsE,EAAWsD,EAAQqB,cAC1J,IAAIqC,EAAQ,yBAAyB9J,OAAOoG,EAAQF,cAAc5G,MAAO,aAAaU,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAOoG,EAAQU,gBAAgB+C,iBAAiBV,GAAK3K,IAChLuL,EAAQ,UAAU/J,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAOoG,EAAQU,gBAAgB+C,iBAAiBV,GAAK3K,IAChHnB,SAASoG,uBAAuBqG,GAAO9M,OAAS,IAChDK,SAASoG,uBAAuBqG,GAAO,GAAGlG,aAAa,cAAevG,SAASoG,uBAAuBqG,GAAO,GAAG5H,aAAa,eAAe8H,MAAM,KAAK,IACvJ3M,SAASoG,uBAAuBqG,GAAO,GAAGlG,aAAa,aAAcvG,SAASoG,uBAAuBqG,GAAO,GAAG5H,aAAa,cAAc8H,MAAM,KAAK,KAIrJ3M,SAASoG,uBAAuBsG,GAAO/M,OAAS,IAChDK,SAASoG,uBAAuBsG,GAAO,GAAGnG,aAAa,cAAevG,SAASoG,uBAAuBsG,GAAO,GAAG7H,aAAa,eAAe8H,MAAM,KAAK,IACvJ3M,SAASoG,uBAAuBsG,GAAO,GAAGnG,aAAa,aAAcvG,SAASoG,uBAAuBsG,GAAO,GAAG7H,aAAa,cAAc8H,MAAM,KAAK,IAS7J,CACA5D,EAAQqC,cAAcwB,OAAOd,EACjC,CACJ,IACgB/C,EAAQU,gBAAgB6C,SAAU,CAC9C,IAAIO,EAAQ9D,EAAQU,gBAAgB6C,SAASR,GAC7C,IAAK,IAAI3K,KAAK4H,EAAQU,gBAAgB+C,iBAAiBK,GACnD/N,EAAY6E,iBAAiB2E,gBAAgBS,EAAQF,cAAc5G,MAAO8G,EAAQU,gBAAgB+C,iBAAiBK,GAAO1L,GAAI4H,EAAQU,gBAAgBqD,gBAAgBC,IAAIF,QAAQpH,EAAWsD,EAAQqB,cAEzMrB,EAAQqC,cAAc4B,IAAIH,EAC9B,CACA9D,EAAQkE,UAAUlE,EAAQD,QAASlK,EAAOgD,cAAc6B,WAAWsF,EAAQF,cAAc5G,MAAO,IACpG,EACAE,KAAK+K,sBAAwB,WA4BzB,IAAK,IAAIpB,KA3BT/C,EAAQuC,qBAAqBO,SAAQ,SAAUC,GAC3C,IAAK/C,EAAQU,gBAAgB0D,cAAcZ,SAAST,GAAM,CACtD,IAAK,IAAI3K,KAAK4H,EAAQU,gBAAgB2D,kBAAkBL,IAAIjB,GAAM,CAC9DhN,EAAY6E,iBAAiB2E,gBAAgBS,EAAQF,cAAc5G,MAAO8G,EAAQU,gBAAgB2D,kBAAkBL,IAAIjB,GAAK3K,GAAI,eAAWsE,EAAWsD,EAAQqB,cAC/J,IAAIqC,EAAQ,yBAAyB9J,OAAOoG,EAAQF,cAAc5G,MAAO,aAAaU,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAOoG,EAAQU,gBAAgB2D,kBAAkBL,IAAIjB,GAAK3K,IACrLuL,EAAQ,UAAU/J,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAOoG,EAAQU,gBAAgB2D,kBAAkBL,IAAIjB,GAAK3K,IACrHnB,SAASoG,uBAAuBqG,GAAO9M,OAAS,IAChDK,SAASoG,uBAAuBqG,GAAO,GAAGlG,aAAa,cAAevG,SAASoG,uBAAuBqG,GAAO,GAAG5H,aAAa,eAAe8H,MAAM,KAAK,IACvJ3M,SAASoG,uBAAuBqG,GAAO,GAAGlG,aAAa,aAAcvG,SAASoG,uBAAuBqG,GAAO,GAAG5H,aAAa,cAAc8H,MAAM,KAAK,KAIrJ3M,SAASoG,uBAAuBsG,GAAO/M,OAAS,IAChDK,SAASoG,uBAAuBsG,GAAO,GAAGnG,aAAa,cAAevG,SAASoG,uBAAuBsG,GAAO,GAAG7H,aAAa,eAAe8H,MAAM,KAAK,IACvJ3M,SAASoG,uBAAuBsG,GAAO,GAAGnG,aAAa,aAAcvG,SAASoG,uBAAuBsG,GAAO,GAAG7H,aAAa,cAAc8H,MAAM,KAAK,IAS7J,CACA5D,EAAQuC,qBAAqBsB,OAAOd,EACxC,CACJ,IACgB/C,EAAQU,gBAAgB0D,cAAe,CACnD,IAAIE,EAAMtE,EAAQU,gBAAgB0D,cAAcrB,GAChD,IAAK,IAAI3K,KAAK4H,EAAQU,gBAAgB2D,kBAAkBL,IAAIM,GACxDvO,EAAY6E,iBAAiB2E,gBAAgBS,EAAQF,cAAc5G,MAAO8G,EAAQU,gBAAgB2D,kBAAkBL,IAAIM,GAAKlM,GAAI4H,EAAQU,gBAAgB6D,iBAAiBP,IAAIM,QAAM5H,EAAWsD,EAAQqB,cAE3MrB,EAAQuC,qBAAqB0B,IAAIK,EACrC,CACAtE,EAAQkE,UAAUlE,EAAQD,QAC9B,EACA3G,KAAKyG,iBAAmBA,EACxBzG,KAAK0G,cAAgBA,EACrB1G,KAAK2G,QAAUA,EACf3G,KAAKoL,iBAAmB,IAAIzO,EAAY6E,iBAAiBxB,KAAK0G,cAAc5G,MAChF,CA8uBA,OA7uBA0G,EAAkB7G,UAAU0L,OAAS,SAAU1E,EAAS2E,EAAUC,EAAgBC,GAC9ExL,KAAKyG,iBAAiBpC,UAClB,6DAA8D7D,OAAOR,KAAK0G,cAAc5G,MAAO,oBAAqBU,OAAOR,KAAKyL,YAAY9E,EAAS2E,EAAUC,GAAiB,kBAAkB/K,OAAOR,KAAK0L,QAAS,kBAAkBlL,OAAOR,KAAK2E,UAAW,kBAAkBnE,OAAOR,KAAK2L,gBAAiB,0CAA2CnL,OAAOR,KAAK0H,UAAW,oxCAGrX1H,KAAK4L,qBACL5L,KAAK6L,mBACL7L,KAAKoL,iBAAiB3J,qBACtBzB,KAAK8K,UAAUnE,EAAS6E,GACxB3N,SAAS6F,cAAc,YAAYnF,iBAAiB,QAASyB,KAAK8L,QAAQC,KAAK/L,OAC/EA,KAAKgM,4BAA4BhM,KAAK+G,qBAE1C,EACAP,EAAkB7G,UAAUsM,YAAc,SAAUtF,GAChD,IAAIC,EAAU5G,KACV2B,EAAS9D,SAAS6F,cAAc,6BAA6BlD,OAAOR,KAAK0G,cAAc5G,QACvFoM,EAAU,EACVC,EAAU,EACdxF,EAAQyF,SAAS5B,MAAM,IAAId,SAAQ,SAAU2C,EAAMrN,GAC/C,GAAU,IAANA,GAAWA,IAAO2H,EAAQyF,SAAe,OAA7C,CAGA,IAAIE,EAAM3K,EAAOsC,uBAAuB,yBAAyBzD,OAAOoG,EAAQF,cAAc5G,MAAO,aAAaU,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAOmG,EAAQ4F,cAAcvN,KAAK,GACzLwN,EAAU7K,EAAOsC,uBAAuB,yBAAyBzD,OAAOoG,EAAQF,cAAc5G,MAAO,aAAaU,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAOmG,EAAQ4F,cAAcvN,EAAI,KAAK,GACrMwN,EAAQpI,aAAa,IAAKqI,OAAOD,EAAQ9J,aAAa,MAAQyJ,GAC9DK,EAAQpI,aAAa,IAAKqI,OAAOD,EAAQ9J,aAAa,MAAQwJ,GAC9D,IAAIQ,EAAY9F,EAAQ+F,iBAAiBL,EAAI7G,UAAW+G,EAAQ/G,WAChE,GAAIiH,EAAW,CAEX,IADA,IAAIE,EAAS,EACJC,EAAI,EAAGA,EAAIH,EAAUlP,OAAQqP,IAC9BH,EAAUG,GAAKH,EAAUE,KACzBA,EAASC,GAEF,IAAXD,GACAJ,EAAQpI,aAAa,IAAKqI,OAAOD,EAAQ9J,aAAa,MAAQ+J,OAAOC,EAAU,KAC/EP,GAAoBM,OAAOC,EAAU,KAErB,IAAXE,GACLJ,EAAQpI,aAAa,IAAKqI,OAAOD,EAAQ9J,aAAa,MAAQ+J,OAAOC,EAAU,KAC/EP,GAAoBM,OAAOC,EAAU,KAErB,IAAXE,GACLJ,EAAQpI,aAAa,IAAKqI,OAAOD,EAAQ9J,aAAa,MAAQ+J,OAAOC,EAAU,KAC/ER,GAAoBO,OAAOC,EAAU,KAErB,IAAXE,IACLJ,EAAQpI,aAAa,IAAKqI,OAAOD,EAAQ9J,aAAa,MAAQ+J,OAAOC,EAAU,KAC/ER,GAAoBO,OAAOC,EAAU,IAE7C,CA5BA,CA6BJ,GACJ,EACAlG,EAAkB7G,UAAUmN,SAAW,SAAUnD,EAAKoD,GAClD,IAAInG,EAAU5G,UACD,IAAT+M,IAAmBA,OAAOzJ,GAC9BtD,KAAKgN,gBAAkB,GACvBhN,KAAKiN,sBAAwB,GAC7B,IAAIC,EAAQlN,KAAKyG,iBAAiB/C,cAAc,iBAAiByJ,QACrD,OAAPxD,EACD3J,KAAK8H,SAAS4B,SAAQ,SAAUxM,EAAOkQ,GACnCxG,EAAQkB,SAASuF,IAAID,EAAK,CAACF,EAAOhQ,EAAM,KACxC0J,EAAQmB,eAAesF,IAAID,EAAK,CAACF,EAAOtG,EAAQmB,eAAe6C,IAAIwC,GAAK,KACxEvP,SAASsF,eAAe,YAAY3C,OAAO4M,IAAMD,QAAUD,EACvDA,IACAtG,EAAQoG,iBAAmB9P,EAAM,GAAGoQ,KAAK,IACzC1G,EAAQqG,uBAAyBrG,EAAQmB,eAAe6C,IAAIwC,GAAK,GAAGE,KAAK,IAEjF,MAGIP,QAAmCA,EAAO/M,KAAK8H,SAAS8C,IAAIjB,GAAK,KACjE3J,KAAK8H,SAASuF,IAAI1D,EAAK,EAAC,EAAO3J,KAAK8H,SAAS8C,IAAIjB,GAAK,KACtD3J,KAAK+H,eAAesF,IAAI1D,EAAK,EAAC,EAAO3J,KAAK+H,eAAe6C,IAAIjB,GAAK,OAGlE3J,KAAK8H,SAASuF,IAAI1D,EAAK,EAAC,EAAM3J,KAAK8H,SAAS8C,IAAIjB,GAAK,KACrD3J,KAAK+H,eAAesF,IAAI1D,EAAK,EAAC,EAAM3J,KAAK+H,eAAe6C,IAAIjB,GAAK,MAErE3J,KAAK8H,SAAS4B,SAAQ,SAAUxM,EAAOkQ,GAC/BlQ,EAAM,KACN0J,EAAQoG,iBAAmB9P,EAAM,GAAGoQ,KAAK,IACzC1G,EAAQqG,uBAAyBrG,EAAQmB,eAAe6C,IAAIwC,GAAK,GAAGE,KAAK,IAEjF,KAEJtN,KAAKuN,kBACT,EACA/G,EAAkB7G,UAAUkM,iBAAmB,WAC3C,IACIzL,EADAwG,EAAU5G,KAEd,GAAIA,KAAK8H,SAAS0F,KAAO,EAAG,CACxB,IAAIC,EAAe,0GACfzO,EAAI,EACRgB,KAAK8H,SAAS4B,SAAQ,SAAUxM,EAAOkQ,GAC/BpO,EAAI,GAAK,IACTyO,EAAe,GAAGjN,OAAOiN,EAAc,SAGvCA,EADO,OAAPL,EACe,GAAG5M,OAAOiN,EAAc,+BAAgCjN,OAAO4M,EAAK,0CAA8C5M,OAAO4M,EAAK,uBAAwB5M,OAAO4M,EAAK,iBAGlK,GAAG5M,OAAOiN,EAAc,+BAAgCjN,OAAO4M,EAAK,0CAA8C5M,OAAO4M,EAAK,QAAS5M,OAAO4M,EAAK,iBAElKpO,EAAI,GAAK,IACTyO,EAAe,GAAGjN,OAAOiN,EAAc,UAE3CzO,GAAK,CACT,IACAyO,EAAe,GAAGjN,OAAOiN,EAAc,YACpB5P,SAASsF,eAAe,cAC9BkB,UAAYoJ,EAC0B,QAAlDrN,EAAKvC,SAASsF,eAAe,uBAAoC,IAAP/C,GAAyBA,EAAG7B,iBAAiB,SAAUyB,KAAK8M,SAASf,KAAK/L,KAAM,QAC3IA,KAAK8H,SAAS4B,SAAQ,SAAUxM,EAAOkQ,GACnC,IAAIhN,EACwD,QAA3DA,EAAKvC,SAASsF,eAAe,YAAY3C,OAAO4M,WAA0B,IAAPhN,GAAyBA,EAAG7B,iBAAiB,SAAUqI,EAAQkG,SAASf,KAAKnF,EAASwG,GAC9J,GAEJ,CACJ,EACA5G,EAAkB7G,UAAUiM,mBAAqB,WAC7C,IACIvC,EAAerJ,KAAKyG,iBAAiB/C,cAAc,kBACvD2F,EAAahF,UAFI,yGAGjBjD,QAAQC,IAAIrB,KAAKuN,iBAAiBxB,KAAK/L,OACvCqJ,EAAa9K,iBAAiB,SAAUyB,KAAKuN,iBAAiBxB,KAAK/L,OACpDA,KAAKyG,iBAAiB/C,cAAc,aAC1CnF,iBAAiB,SAAUyB,KAAKuN,iBAAiBxB,KAAK/L,MACnE,EACAwG,EAAkB7G,UAAU+N,qBAAuB,WAE/C,GADA1N,KAAKuJ,eAAiBvJ,KAAKwJ,YAAY,GACnCxJ,KAAKwJ,YAAYhM,OAAS,EAAG,CAC7B,IAAImQ,EAAe,GACnB3N,KAAKwJ,YAAYE,SAAQ,SAAUkE,EAAK5O,GACpC2O,EAAe,GAAGnN,OAAOmN,EAAc,mBAAoBnN,OAAOxB,EAAG,MAAOwB,OAAOoN,EAAIvN,MAAO,YAClG,IACA,IAAIgJ,EAAerJ,KAAKyG,iBAAiB/C,cAAc,qBACvD2F,EAAahF,UAAYsJ,EACzBtE,EAAa9K,iBAAiB,SAAUyB,KAAK8J,eAAeiC,KAAK/L,MAIrE,MAEIA,KAAKyG,iBAAiB/C,cAAc,gBAAgBN,MAAMC,QAAU,MAE5E,EACAmD,EAAkB7G,UAAUkO,sBAAwB,SAAUC,EAAMC,EAAgBC,EAAWC,EAASlH,EAAsBmH,EAAaC,GACvI,IAAIzM,EAAQ1B,KAoDZ,OAnDAiO,EAAQvE,SAAQ,SAAUxM,EAAOoI,GAC7B,GAAI4I,GAAe5I,GAASA,GAAS6I,EAAW,CAC5C,IAAIC,EAAYJ,EAAUpD,IAAItF,GAC9B1H,OAAOiJ,mBAAmB+D,IAAIkD,GAAMvN,KAAK,CACrC8N,UAAW3M,EAAMgF,cAAc7G,SAG/ByO,eAAgBhJ,EAChBpG,MAAOkP,EAAU,GACjBG,WAAW,IAEf7M,EAAM6G,eAAeO,kBAAoB,IAAM0F,OAAOJ,EAAU,GAAGd,KAAK,KACxE,IAAImB,EAAS,OAASD,OAAOJ,EAAU,GAAGd,KAAK,MAAQ,IAEvDS,EAAexN,KAAK,CAChB3B,MAAO0G,EACPxG,IAAKwG,EACLpG,MAAOuP,EACPC,WAAYjC,OAAOkC,WAAWzR,GAAO0R,YAAY,GACjDC,gBAAiB,UAGzB,CACJ,IA4BOd,CACX,EACAvH,EAAkB7G,UAAUqM,4BAA8B,SAAUjF,GAChE,IAAIH,EAAU5G,KACV0B,EAAQ1B,KACRpB,EAAQoB,KAAK2G,QAAU3G,KAAK2G,QAAQ4F,cAAc,GAAK,OAE3B,IAArB7K,EAAM8H,cACb9H,EAAM8H,YAAc,CAAC,CACbnJ,MAAO,cACPoJ,KAAM,QAGlBzJ,KAAK6G,mBAAqBjJ,OAAOiJ,mBACjC7G,KAAK6G,mBAAmBwG,IAAI,cAAe,CAAC,CAAEgB,UAAW3M,EAAMgF,cAAc7G,SACrEiP,OAAO,KAOf9O,KAAK8G,oBAAsBlJ,OAAOkJ,oBAClC9G,KAAKgH,YAAcpJ,OAAOoJ,YACtBD,IACAA,EAAqB2C,SAAQ,SAAUxM,EAAOoI,GAC1C,IAAIyI,EAAiB,CAAC,CAKlB,GACAD,EAAOxI,EACPyJ,EAAgB7R,EACpB0J,EAAQC,mBAAmBwG,IAAIS,EAAM,IACrC,IAAIkB,EAAMC,KAAKD,IAAIE,MAAMD,KAAMrI,EAAQE,oBAAoB8D,IAAIkD,IAC3DqB,EAAMF,KAAKE,IAAID,MAAMD,KAAMrI,EAAQE,oBAAoB8D,IAAIkD,IAC3DsB,EAAgBxI,EAAQI,YAAY4D,IAAIkD,GAChC,mBAARA,GACAlH,EAAQM,sBAAsB6H,EAAeC,EAAKG,EAAKvI,EAAQF,cAAclH,SAIrE,YAARsO,GACAlH,EAAQO,kBAAkB4H,EAAeC,EAAKG,EAAKvI,EAAQF,cAAclH,SAIjE,eAARsO,GACAlH,EAAQQ,qBAAqB2H,EAAeC,EAAKG,EAAKvI,EAAQF,cAAclH,SAIhF,IAGI6P,EACArQ,EAJAoB,EAAKwG,EAAQK,YAAY8H,EAAeC,EAAKG,EAAKC,GAAgBpB,EAAY5N,EAAG,GAAI6N,EAAU7N,EAAG,GAClGkP,EAAerB,EAAQsB,OAI3B,IAAKvQ,EAAI,EAAGA,EAAIiP,EAAQT,KAAMxO,GAAK,EAC/BqQ,EAAeC,EAAaE,OAAOtS,MAEvCkE,QAAQC,IAAIgO,GACZjO,QAAQC,IAAI,oBAAqB4M,EAASA,EAAQT,KAAMS,EAAQwB,OAAOC,YAAaJ,GACpF1I,EAAQC,mBAAmB+D,IAAIkD,GAAMvN,KAAK,CAAE8N,UAAW3M,EAAMgF,cAAc7G,SAAUiP,OAAO,IAE5F,IAAIhQ,EAAMuQ,EACV,QAAI,IAAWpB,GAEP,GADJF,EAAiBrM,EAAMmM,sBAAsBC,EAAMC,EAAgBC,EAAWC,EAASlH,EAAsBnI,EAAOE,IAC7FtB,OAAQ,CAC3B,IAAImS,EAAUjO,EAAM8H,YAAYoG,QAAO,SAAUC,GAAS,OAAQA,EAAMxP,QAAUyN,CAAO,IAAG,GACxF6B,GAAsB,MAAXA,EACXA,EAAQlG,KAAOsE,EAGfrM,EAAM8H,YAAYjJ,KAAK,CACnBF,MAAOyN,EACPrE,KAAMsE,GAGlB,CAER,IACA/N,KAAK0N,uBACL1N,KAAKsH,gBAAgBwI,iBAAkB,EAM/C,EACAtJ,EAAkB7G,UAAUgN,iBAAmB,SAAUoD,EAAMC,GAC3D,IAAIC,EAAQF,EAAKpK,EACbuK,EAASH,EAAKpK,EAAIoK,EAAKnK,MACvBuK,EAAOJ,EAAKjK,EACZsK,EAAUL,EAAKjK,EAAIiK,EAAKhK,OACxBsK,EAAQL,EAAKrK,EACb2K,EAASN,EAAKrK,EAAIqK,EAAKpK,MACvB2K,EAAOP,EAAKlK,EACZ0K,EAAUR,EAAKlK,EAAIkK,EAAKjK,OAC5B,QAAIkK,GAASK,GAAUH,GAAQK,GAC3BN,GAAUG,GAASD,GAAWG,IAIvB,CAACD,EAASL,EAAOO,EAAUL,EAAMD,EAASG,EAAOD,EAAUG,EAE1E,EACA/J,EAAkB7G,UAAU8Q,kBAAoB,SAAU9J,GACtD,IAAI+J,EAAQ,GACRC,EAAQ,GACRC,EAAO,GACPC,EAAgBlK,EAAQmK,UAAUtT,OAAS,EAC/CmJ,EAAQmK,UAAUpH,SAAQ,SAAUqH,EAASC,GACzC,GAAoB,IAAhBA,GAAqBA,IAAgBH,EAAzC,CAEA,IAAII,EAAgBF,EAAQvG,MAAM,KAAK8C,KAAK,KAAK9C,MAAM,KAGvD,GAFAkG,EAAMM,IAAgBvE,OAAOwE,EAAc,IAAMxE,OAAOwE,EAAc,KAAO,EAC7EN,EAAMK,IAAgBvE,OAAOwE,EAAc,IAAMxE,OAAOwE,EAAc,KAAO,EACzED,EAAc,EAAG,CACjB,IAAIE,EAAQR,EAAMM,GAAeN,EAAMM,EAAc,GACjDG,EAAQR,EAAMK,GAAeL,EAAMK,EAAc,GACrDJ,EAAKI,GAAe/B,KAAKmC,IAAKnC,KAAKmC,IAAID,EAAO,GAAKlC,KAAKmC,IAAIF,EAAO,GAAK,GAC5E,CARU,CASd,IACA,IAAIG,EAAaT,EAAKU,MAAK,SAAUC,EAAGC,GAAK,OAAOD,EAAIC,CAAG,IAC3D,MAAO,GAAMH,EAAWpC,KAAKwC,MAA0B,IAApBJ,EAAW7T,QAClD,EACAgJ,EAAkB7G,UAAU+R,SAAW,SAAUjI,EAAMkI,EAAUtL,GAC7D,IAAIuL,EAAO,IAAIC,KAAK,CAACpI,GAAO,CAAEpD,KAAMA,IAChCkL,EAAI1T,SAASiU,cAAc,KAAMC,EAAMC,IAAIC,gBAAgBL,GAC/DL,EAAEW,KAAOH,EACTR,EAAEG,SAAWC,EACb9T,SAASsU,KAAKC,YAAYb,GAC1BA,EAAEc,QACFC,YAAW,WACPzU,SAASsU,KAAKI,YAAYhB,GAC1B3T,OAAOoU,IAAIQ,gBAAgBT,EAC/B,GAAG,EACP,EACAvL,EAAkB7G,UAAU8S,aAAe,SAAUC,EAASC,EAASC,GACnE,IAAIhU,GAAS8T,EAAQG,QACjB/T,GAAO4T,EAAQI,QACnB,GAAIJ,GAAW9T,GAASE,EAAK,CACzB,IAAIuH,EAAOqM,EAAQK,GACfC,EAAS,uBAAuBxS,OAAOR,KAAK0G,cAAc5G,MAAO,KAAKU,OAAOR,KAAK0G,cAAclH,QAAS,KAAKgB,OAAO6F,EAAM,KAAK7F,OAAO5B,EAAO,KAAK4B,OAAO1B,GAC1JmU,EAAKP,EAAQQ,IACbC,EAAKT,EAAQU,IACjB,GAAY,OAAR/M,GAAyB,OAARA,GAAyB,OAARA,GAAyB,OAARA,GAAyB,OAARA,GAAyB,OAARA,EAAe,CACpG,IAAIgN,EAAOvU,EACXA,EAAMF,EACNA,EAAQyU,EACR,IAAIC,EAAQL,EACZA,EAAKE,EACLA,EAAKG,EACLjN,EAAOA,EAAKkN,OAAO,GAAKlN,EAAKmN,OAAO,GAAGhJ,MAAM,IAAIiJ,UAAUnG,KAAK,GACpE,CACA,IAAIoG,EAAK1T,KAAKwH,UAAUoD,IAAIhM,GAAO,GAAKgU,EAAY,IAChDe,EAAK3T,KAAKwH,UAAUoD,IAAI9L,GAAK,GAAK8T,EAAY,IAC9CgB,EAAK5T,KAAKwH,UAAUoD,IAAIhM,GAAO,GAAKgU,EAAY,IAChDiB,EAAK7T,KAAKwH,UAAUoD,IAAI9L,GAAK,GAAK8T,EAAY,IAC9CkB,EAAW7E,KAAKmC,IAAInC,KAAKmC,IAAKsC,EAAKC,EAAK,GAAK1E,KAAKmC,IAAKwC,EAAKC,EAAK,GAAI,IACrEE,EAAWvN,EAAkBwN,oBAAoBN,EAAIC,EAAIf,EAAYkB,GACrEG,EAAWzN,EAAkBwN,oBAAoBJ,EAAIC,EAAIjB,EAAYkB,GACrEI,EAAW1N,EAAkBwN,oBAAoBN,EAAIC,EAAI,EAAIf,EAAYkB,GACzEK,EAAW3N,EAAkBwN,oBAAoBJ,EAAIC,EAAI,EAAIjB,EAAYkB,GACzEM,EAAS,OACb,GAAsB,KAAlB/N,EAAKkN,OAAO,GACZ,IAAI7O,EAAO,YAGPA,EAAO,OAEf,IAAI2P,GAAMN,EAAWG,GAAY,EAC7BI,GAAML,EAAWE,GAAY,EAC7BI,EAAYT,EAAW,EAAIlB,EAC3B7M,EAAS6M,EAAY,IACrB4B,EAAgB,gBAAiBhU,OAAOwS,EAAQ,uDAAwDxS,OAAOyS,GAAIzS,OAAO5B,EAAO,OAAO4B,OAAO2S,GAAI3S,OAAO1B,EAAK,MAAM0B,OAAO6F,EAAM,QAAQ7F,OAAOwS,EAAQ,QAAQxS,OAAO4T,EAAQ,QAAQ5T,OAAOkE,EAAM,qDAAqDlE,OAAOwS,EAAQ,SACzTyB,EAAM,IAAyC,IAAnCxF,KAAKyF,MAAOd,EAAKC,EAAMH,EAAKC,GAAa1E,KAAK0F,GAC9D,GAAY,OAARtO,EACU,KAAN4M,GAAmB,KAANE,GAAmB,KAANF,GAAmB,KAANE,EACvCR,EAAQ/H,IAAIvE,GAAM,GAAG9F,KAAK,gBAAiBC,OAAOwS,EAAQ,uDAAwDxS,OAAOyS,GAAIzS,OAAO5B,EAAO,OAAO4B,OAAO2S,GAAI3S,OAAO1B,EAAK,MAAM0B,OAAO6F,EAAM,QAAQ7F,OAAOwS,EAAQ,0FAA0FxS,OAAOwS,EAAQ,0DAA2DxS,QAAQuT,EAAWG,GAAY,EAAItB,EAAY,EAAG,MAAMpS,QAAQyT,EAAWE,GAAY,EAAG,4BAA4B3T,OAAOoS,EAAY,EAAG,KAAKpS,OAAOoS,EAAY,EAAG,WAAWpS,OAAOoS,EAAY,EAAG,8BAA8BpS,OAAOoS,EAAY,EAAG,KAAKpS,OAAOoS,EAAY,EAAG,WAAWpS,QAAQ,EAAIoS,EAAY,EAAG,+EAAmFpS,OAAOoS,EAAY,EAAG,sCAG7xBD,EAAQ/H,IAAIvE,GAAM,GAAG9F,KAAK,gBAAiBC,OAAOwS,EAAQ,wDAAyDxS,OAAOyS,GAAIzS,OAAO5B,EAAO,OAAO4B,OAAO2S,GAAI3S,OAAO1B,EAAK,MAAM0B,OAAO6F,EAAM,QAAQ7F,OAAOwS,EAAQ,qEAAqExS,OAAOwS,EAAQ,wBAAyBxS,OAAOoS,EAAY,EAAG,iDAAuDpS,OAAOuT,EAAU,KAAKvT,OAAOyT,EAAU,KAAKzT,OAAO0T,EAAU,KAAK1T,OAAO2T,EAAU,mBAGpe,GAAY,OAAR9N,EAAe,CACpB,IAAIuO,EAAMpO,EAAkBwN,oBAAoBD,EAAUM,EAAI,EAAKzB,EAAY,GAAMkB,EAAW,IAC5Fe,EAAMrO,EAAkBwN,oBAAoBC,EAAUK,EAAI,EAAK1B,EAAY,GAAMkB,EAAW,IAC5FgB,EAAMtO,EAAkBwN,oBAAoBK,EAAIH,EAAWtB,EAAY,GAAMkB,EAAW,IACxFiB,EAAMvO,EAAkBwN,oBAAoBM,EAAIH,EAAWvB,EAAY,GAAMkB,EAAW,IAC5FnB,EAAQ/H,IAAIvE,GAAM,GAAG9F,KAAKiU,EACtB,8BAA+BhU,OAAOuT,EAAU,KAAKvT,OAAOyT,EAAU,KAAKzT,OAAOoU,EAAK,KAAKpU,OAAOqU,EAAK,4BAA4BrU,OAAO6T,EAAKzB,EAAY,EAAG,KAAKpS,OAAO8T,EAAI,4BAA4B9T,OAAOoS,EAAY,EAAG,KAAKpS,OAAOoS,EAAY,EAAG,WAAWpS,OAAOoS,EAAY,IAAK,8BAA8BpS,OAAOoS,EAAY,EAAG,KAAKpS,OAAOoS,EAAY,EAAG,WAAWpS,QAAQ,EAAIoS,EAAY,IAAK,8BAA8BpS,OAAOsU,EAAK,KAAKtU,OAAOuU,EAAK,KAAKvU,OAAO0T,EAAU,KAAK1T,OAAO2T,EAAU,mCAAqC3T,OAAO4T,EAAQ,oBAAsB5T,OAAOoS,EAAY,EAAG,cAAgBpS,OAAOkE,EAAM,OACloB,KACiB,OAAR2B,GAAyB,OAARA,EACtBsM,EAAQ/H,IAAIvE,GAAM,GAAG9F,KAAKiU,EAAgB,4CAA6ChU,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKC,EAAY,EAAG,KAAK/T,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAAS,EAAG,yBAAyBvF,OAAOuF,EAAS,EAAG,2BAA2BvF,OAAOuF,EAAS,EAAG,MAAMvF,OAAOuF,EAAQ,0BAA0BvF,OAAOuF,EAAS,EAAG,KAAKvF,OAAOuF,EAAQ,wBAAwBvF,OAAOuF,EAAS,EAAG,0BAA0BvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAAS,EAAG,KAAKvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKC,EAAY,EAAG,+BAAiC/T,OAAO4T,EAAQ,oBAAsB5T,OAAOoS,EAAY,EAAG,cAAgBpS,OAAOkE,EAAM,0BAA4BlE,OAAOiU,EAAK,KAAKjU,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAI,SAEhrB,OAARjO,GAAyB,OAARA,EACtBsM,EAAQ/H,IAAIvE,GAAM,GAAG9F,KAAKiU,EAAgB,4CAA6ChU,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKC,EAAY,EAAG,KAAK/T,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAASA,EAAS,EAAG,0BAA0BvF,OAAOuF,EAAS,EAAG,yBAAyBvF,OAAOuF,EAAQ,wBAAwBvF,OAAOuF,EAAQ,wBAAwBvF,OAAOuF,EAAQ,yBAAyBvF,OAAOuF,EAAS,EAAG,wBAAwBvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAAS,EAAG,KAAKvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAAS,EAAG,wBAAwBvF,OAAOuF,EAAS,EAAG,2BAA2BvF,OAAOuF,EAAS,EAAG,MAAMvF,OAAOuF,EAAQ,0BAA0BvF,OAAOuF,EAAS,EAAG,KAAKvF,OAAOuF,EAAQ,wBAAwBvF,OAAOuF,EAAS,EAAG,0BAA0BvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAASA,EAAS,EAAG,KAAKvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKC,EAAY,EAAG,+BAAiC/T,OAAO4T,EAAQ,oBAAsB5T,OAAOoS,EAAY,EAAG,cAAgBpS,OAAOkE,EAAM,0BAA4BlE,OAAOiU,EAAK,KAAKjU,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAI,SAE7/B,OAARjO,GAAyB,OAARA,EACtBsM,EAAQ/H,IAAIvE,GAAM,GAAG9F,KAAKiU,EAAgB,4CAA6ChU,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKC,EAAY,EAAG,KAAK/T,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAASA,EAAS,EAAG,yBAAyBvF,OAAO6T,EAAKtO,EAAS,EAAG,KAAKvF,OAAO8T,EAAK,EAAIvO,EAAS,EAAG,yBAAyBvF,OAAOuF,EAAS,EAAG,KAAKvF,OAAOuF,EAAS,EAAG,WAAWvF,OAAOuF,EAAQ,0BAA0BvF,OAAOuF,EAAS,EAAG,KAAKvF,OAAOuF,EAAS,EAAG,WAAWvF,QAAQ,EAAIuF,EAAQ,0BAA0BvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAAS,EAAG,KAAKvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAAS,EAAG,wBAAwBvF,OAAOuF,EAAS,EAAG,2BAA2BvF,OAAOuF,EAAS,EAAG,MAAMvF,OAAOuF,EAAQ,0BAA0BvF,OAAOuF,EAAS,EAAG,KAAKvF,OAAOuF,EAAQ,wBAAwBvF,OAAOuF,EAAS,EAAG,0BAA0BvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAASA,EAAS,EAAG,KAAKvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKC,EAAY,EAAG,+BAAiC/T,OAAO4T,EAAQ,oBAAsB5T,OAAOoS,EAAY,EAAG,cAAgBpS,OAAOkE,EAAM,0BAA4BlE,OAAOiU,EAAK,KAAKjU,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAI,SAEpkC,OAARjO,GAAyB,OAARA,EACtBsM,EAAQ/H,IAAIvE,GAAM,GAAG9F,KAAKiU,EAAgB,4CAA6ChU,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKC,EAAY,EAAG,KAAK/T,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAASA,EAAS,EAAG,yBAAyBvF,OAAO6T,EAAKtO,EAAS,EAAG,KAAKvF,OAAO8T,EAAK,EAAIvO,EAAS,EAAG,yBAAyBvF,OAAOuF,EAAS,EAAG,KAAKvF,OAAOuF,EAAS,EAAG,WAAWvF,OAAOuF,EAAQ,0BAA0BvF,OAAOuF,EAAS,EAAG,KAAKvF,OAAOuF,EAAS,EAAG,WAAWvF,QAAQ,EAAIuF,EAAQ,0BAA0BvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAAS,EAAG,KAAKvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAAS,EAAG,yBAAyBvF,OAAOuF,EAAS,EAAG,yBAAyBvF,OAAOuF,EAAQ,wBAAwBvF,OAAOuF,EAAQ,wBAAwBvF,OAAOuF,EAAQ,yBAAyBvF,OAAOuF,EAAS,EAAG,wBAAwBvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAASA,EAAS,EAAG,KAAKvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKC,EAAY,EAAG,+BAAiC/T,OAAO4T,EAAQ,oBAAsB5T,OAAOoS,EAAY,EAAG,cAAgBpS,OAAOkE,EAAM,0BAA4BlE,OAAOiU,EAAK,KAAKjU,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAI,SAEtjC,OAARjO,GAAyB,OAARA,GACtBsM,EAAQ/H,IAAIvE,GAAM,GAAG9F,KAAKiU,EAAgB,4CAA6ChU,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKC,EAAY,EAAG,KAAK/T,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAAS,EAAG,0BAA0BvF,OAAOuF,EAAS,EAAG,yBAAyBvF,OAAOuF,EAAQ,wBAAwBvF,OAAOuF,EAAQ,wBAAwBvF,OAAOuF,EAAQ,yBAAyBvF,OAAOuF,EAAS,EAAG,wBAAwBvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKvO,EAAS,EAAG,KAAKvF,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAKC,EAAY,EAAG,+BAAiC/T,OAAO4T,EAAQ,oBAAsB5T,OAAOoS,EAAY,EAAG,cAAgBpS,OAAOkE,EAAM,0BAA4BlE,OAAOiU,EAAK,KAAKjU,OAAO6T,EAAI,KAAK7T,OAAO8T,EAAI,QAEvrB,CACJ,EAsBA9N,EAAkBwN,oBAAsB,SAAUgB,EAAIC,EAAIC,GAEtD,OAAQ,EAAIA,GAAuBF,EAAKE,EAAsBD,CAClE,EACAzO,EAAkB7G,UAAU4N,iBAAmB,SAAU/O,GACrD,IAAI6K,EAAerJ,KAAKyG,iBAAiB/C,cAAc,kBACnD4F,EAAgB3K,SAAS0K,EAAanM,OAG1C,GAFA8C,KAAKiI,aAAe,GACLjI,KAAKyG,iBAAiB/C,cAAc,aACtCyJ,QACT,IAAIgI,EAAYnV,KAAKiN,2BAGjBkI,EAAYnV,KAAKgN,gBAEJ,GAAjB1D,EACAzL,SAAS6F,cAAc,kBAAkBO,uBAAuB,cAAczD,OAAOR,KAAK0G,cAAc5G,QAAQ,GAAGuE,UAAYrE,KAAK4H,eAAe0F,KAAK,IAAMtN,KAAK6H,WAAWyF,KAAK,IAAM6H,EAEnK,GAAjB7L,EACLzL,SAAS6F,cAAc,kBAAkBO,uBAAuB,cAAczD,OAAOR,KAAK0G,cAAc5G,QAAQ,GAAGuE,UAAYrE,KAAK2H,SAAS2F,KAAK,IAAMtN,KAAK6H,WAAWyF,KAAK,IAAM6H,EAE7J,GAAjB7L,IACLtJ,KAAKiI,aAAe,UAEpBzJ,GAEAwB,KAAKoJ,WAETpJ,KAAKkK,mBACLlK,KAAK+K,uBACT,EACAvE,EAAkB7G,UAAUmL,UAAY,SAAUnE,EAAS6E,GACvD,IAAI5E,EAAU5G,UACE,IAAZwL,IAAsBA,OAAUlI,GAgCpC,IAAI8R,EAAW,IAAI3N,IACnBzH,KAAKiJ,cAAcS,SAAQ,SAAUC,GAEjC,IAAK,IAAI3K,KAAK4H,EAAQU,gBAAgB+C,iBAAiBV,GAAM,CACzD,IAAIlF,EAAO,UAAUjE,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAOoG,EAAQU,gBAAgB+C,iBAAiBV,GAAK3K,IACnH,GAAInB,SAASoG,uBAAuBQ,GAAM,GACtC,GAAI2Q,EAASxK,IAAIhE,EAAQU,gBAAgB+C,iBAAiBV,GAAK3K,IAAK,CAChE,IAAIqW,EAAUD,EAASxK,IAAIhE,EAAQU,gBAAgB+C,iBAAiBV,GAAK3K,IACzEqW,EAAQ9U,KAAKoJ,GACbyL,EAAS/H,IAAIzG,EAAQU,gBAAgB+C,iBAAiBV,GAAK3K,GAAIqW,EACnE,MAEID,EAAS/H,IAAIzG,EAAQU,gBAAgB+C,iBAAiBV,GAAK3K,GAAI,CAAC2K,GAK5E,CACJ,IACA,IAAI2L,EAAY,IAAI7N,IACpBzH,KAAKmJ,qBAAqBO,SAAQ,SAAUC,GAExC,IAAK,IAAI3K,KAAK4H,EAAQU,gBAAgB2D,kBAAkBL,IAAIjB,GAAM,CAE9D,IAAIlF,EAAO,UAAUjE,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAOoG,EAAQU,gBAAgB2D,kBAAkBL,IAAIjB,GAAK3K,IACxH,GAAInB,SAASoG,uBAAuBQ,GAAM,GACtC,GAAI6Q,EAAU1K,IAAIhE,EAAQU,gBAAgB2D,kBAAkBL,IAAIjB,GAAK3K,IAAK,CACtE,IAAIqW,EAAUC,EAAU1K,IAAIhE,EAAQU,gBAAgB2D,kBAAkBL,IAAIjB,GAAK3K,IAC/EqW,EAAQ9U,KAAKoJ,GACb2L,EAAUjI,IAAIzG,EAAQU,gBAAgB2D,kBAAkBL,IAAIjB,GAAK3K,GAAIqW,EACzE,MAEIC,EAAUjI,IAAIzG,EAAQU,gBAAgB2D,kBAAkBL,IAAIjB,GAAK3K,GAAI,CAAC2K,GAKlF,CACJ,IACAyL,EAAS1L,SAAQ,SAAUxM,EAAOkQ,GAC9B,IAAIzI,EAAU,WACV4Q,EAAa,UAAU/U,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAO4M,GACvE3I,EAAO,yBAAyBjE,OAAOoG,EAAQF,cAAc5G,MAAO,aAAaU,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAO4M,GACjI1C,EAAQ,GACR8K,EAAW,GAEf,IAAK,IAAI7L,KAAOzM,EACZsY,EAASjV,KAAK9D,EAAOgD,cAAc6B,WAAWsF,EAAQF,cAAc5G,MAAO5C,EAAMyM,KACjFe,EAAQxN,EAAMyM,GAElB8L,QAAQC,IAAIF,GAAUG,MAAK,SAAUC,GACjCA,EAASlM,SAAQ,SAAU8B,GACnBA,EAAQhO,OAAS,EACjBmH,GAAW,IAAM6G,EAAQ,GAAK,YAAcd,EAG5C/F,EAAU,UAAY+F,CAE9B,IACA9D,EAAQyB,SAASgF,IAAID,EAAKzI,GAC1B9G,SAASoG,uBAAuBsR,GAAY,GAAGnR,aAAa,cAAevG,SAASoG,uBAAuBsR,GAAY,GAAG7S,aAAa,eAAe8H,MAAM,KAAK,GAAK,uCAAuChK,OAAOmE,EAAS,QAAQnE,OAAO+U,EAAY,QAAQ/U,OAAOoG,EAAQU,gBAAgBqD,gBAAgBC,IAAIF,GAAQ,QAAQlK,OAAOoG,EAAQU,gBAAgBqD,gBAAgBC,IAAIF,GAAQ,OAC9X7M,SAASoG,uBAAuBsR,GAAY,GAAGnR,aAAa,aAAcvG,SAASoG,uBAAuBsR,GAAY,GAAG7S,aAAa,cAAc8H,MAAM,KAAK,GAAK,kCAAkChK,OAAO+U,EAAY,OACrN1X,SAASoG,uBAAuBQ,GAAM,KACtC5G,SAASoG,uBAAuBQ,GAAM,GAAGL,aAAa,cAAevG,SAASoG,uBAAuBQ,GAAM,GAAG/B,aAAa,eAAe8H,MAAM,KAAK,GAAK,uCAAuChK,OAAOmE,EAAS,QAAQnE,OAAOiE,EAAM,QAAQjE,OAAOoG,EAAQU,gBAAgBqD,gBAAgBC,IAAIF,GAAQ,QAAQlK,OAAOoG,EAAQU,gBAAgBqD,gBAAgBC,IAAIF,GAAQ,OAG5W7M,SAASoG,uBAAuBQ,GAAM,GAAGL,aAAa,aAAcvG,SAASoG,uBAAuBQ,GAAM,GAAG/B,aAAa,cAAc8H,MAAM,KAAK,GAAK,kCAAkChK,OAAOiE,EAAM,OAE/M,GACJ,IACA6Q,EAAU5L,SAAQ,SAAUxM,EAAOkQ,GAC/B,IAAIzI,EAAU,uBACV4Q,EAAa,UAAU/U,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAO4M,GACvE3I,EAAO,yBAAyBjE,OAAOoG,EAAQF,cAAc5G,MAAO,aAAaU,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAO4M,GACjIlC,EAAM,GACV,IAAK,IAAIvB,KAAOzM,EACZyH,GAAW,IAAMzH,EAAMyM,GACvBuB,EAAMhO,EAAMyM,GAEhB/C,EAAQyB,SAASgF,IAAID,EAAKzI,GAI1B9G,SAASoG,uBAAuBsR,GAAY,GAAGnR,aAAa,cAAevG,SAASoG,uBAAuBsR,GAAY,GAAG7S,aAAa,eAAe8H,MAAM,KAAK,GAAK,uCAAuChK,OAAOmE,EAAS,QAAQnE,OAAO+U,EAAY,QAAQ/U,OAAOoG,EAAQU,gBAAgB6D,iBAAiBP,IAAIM,GAAM,QAAQ1K,OAAOoG,EAAQU,gBAAgB6D,iBAAiBP,IAAIM,GAAM,OAE5XrN,SAASoG,uBAAuBsR,GAAY,GAAGnR,aAAa,aAAcvG,SAASoG,uBAAuBsR,GAAY,GAAG7S,aAAa,cAAc8H,MAAM,KAAK,GAAK,kCAAkChK,OAAO+U,EAAY,OAIrN1X,SAASoG,uBAAuBQ,GAAM,KACtC5G,SAASoG,uBAAuBQ,GAAM,GAAGL,aAAa,cAAevG,SAASoG,uBAAuBQ,GAAM,GAAG/B,aAAa,eAAe8H,MAAM,KAAK,GAAK,uCAAuChK,OAAOmE,EAAS,QAAQnE,OAAOiE,EAAM,QAAQjE,OAAOoG,EAAQU,gBAAgB6D,iBAAiBP,IAAIM,GAAM,QAAQ1K,OAAOoG,EAAQU,gBAAgB6D,iBAAiBP,IAAIM,GAAM,OAG1WrN,SAASoG,uBAAuBQ,GAAM,GAAGL,aAAa,aAAcvG,SAASoG,uBAAuBQ,GAAM,GAAG/B,aAAa,cAAc8H,MAAM,KAAK,GAAK,kCAAkChK,OAAOiE,EAAM,OAE/M,GACJ,EACA+B,EAAkB7G,UAAUkW,oBAAsB,SAAUC,GACxD,IAAIC,EAAWD,EAAQE,WAAW,GAAGA,WACrC,IAAK,IAAIhX,KAAK+W,EAAU,CACpB,IAAIxY,EAAKwY,EAAS/W,GAClB,GAAIzB,EAAG0Y,WAEH,IADA,IAAIA,EAAa,GAAGzC,MAAMrR,KAAK5E,EAAG0Y,YACzBC,EAAM,EAAGA,EAAMD,EAAWzY,OAAQ0Y,IAAO,CAC9C,IAAIC,EAAMF,EAAWC,GAAKpI,KACA,IAAtBqI,EAAIvM,QAAQ,OACZrM,EAAG0Y,WAAWG,gBAAgBD,EAEtC,CAER,CACA,OAAOL,CACX,EACAtP,EAAkB7G,UAAU8L,YAAc,SAAU9E,EAAS2E,EAAUC,GACnE,IAAI3E,EAAU5G,KACV4S,EAAY5S,KAAKyQ,kBAAkB9J,GACnCkK,EAAgBlK,EAAQmK,UAAUtT,OAAS,EAC3C6Y,EAAa,IAAI5O,IACrBd,EAAQmK,UAAUpH,SAAQ,SAAUqH,EAASC,GACzC,GAAoB,IAAhBA,GAAqC,IAAhBA,GAAqBA,IAAgBH,EAAgB,EAA9E,CAEA,IAAII,EAAgBF,EAAQvG,MAAM,KAAK8C,KAAK,KAAK9C,MAAM,KACnD8L,EAAQ7J,OAAOwE,EAAc,IAC7BsF,EAAQ9J,OAAOwE,EAAc,IAC7BuF,EAAO/J,OAAOwE,EAAc,IAC5BwF,EAAOhK,OAAOwE,EAAc,IAC5ByF,GAAQF,EAAOF,GAAS,EACxBK,GAAQF,EAAOF,GAAS,EAC5BF,EAAWhJ,IAAI1G,EAAQ4F,cAAcyE,EAAc,GAAI,CAAC0F,EAAMC,IAC9D/P,EAAQY,UAAU6F,IAAI1G,EAAQ4F,cAAcyE,EAAc,GAAI,CAACwF,EAAMC,GAT3D,CAUd,IACA9P,EAAQmK,UAAUpH,SAAQ,SAAUqH,EAASC,GACzC,IAAI5Q,EAAIwW,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EACpC,GAAoB,IAAhBnG,GAAqC,IAAhBA,GAAqBA,IAAiBH,EAAgB,EAA/E,CAEA,IAAIuG,EAAe,yBAAyB5W,OAAOoG,EAAQF,cAAc5G,MAAO,aAAaU,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAOmG,EAAQ4F,cAAcyE,EAAc,IAC7KzK,GAAsD,QAAtCnG,EAAKwG,EAAQF,cAAc2Q,aAA0B,IAAPjX,OAAgB,EAASA,EAAGlB,QAAU,UACpGoY,GAAqD,QAAtCV,EAAKhQ,EAAQF,cAAc2Q,aAA0B,IAAPT,OAAgB,EAASA,EAAGW,cAAgB,IACzGvU,GAAe,EACf2D,EAAQ6Q,0BAA4B7Q,EAAQ6Q,yBAAyB5N,QAAQjD,EAAQ4F,cAAcyE,EAAc,KAAO,IACxHzK,GAAsD,QAAtCsQ,EAAKjQ,EAAQF,cAAc2Q,aAA0B,IAAPR,OAAgB,EAASA,EAAGY,kBAAoB,OAC9GzU,GAAe,GAEnB,IAKI0U,EALAzG,EAAgBF,EAAQvG,MAAM,KAAK8C,KAAK,KAAK9C,MAAM,KACnDgM,EAAO/J,OAAOwE,EAAc,IAC5BwF,EAAOhK,OAAOwE,EAAc,IAC5B0G,EAAS/E,EAAY,EACrBgF,EAAShF,EAAY,EAEzB,GAAI5B,EAAc,EAAiB,CAC/B,IAAI6G,EAAOxB,EAAWzL,IAAIjE,EAAQ4F,cAAcyE,EAAc,IAAI,GAC9D8G,EAAQzB,EAAWzL,IAAIjE,EAAQ4F,cAAcyE,IAAc,GAC3D+G,EAAO1B,EAAWzL,IAAIjE,EAAQ4F,cAAcyE,EAAc,IAAI,GAC9DgH,EAAQ3B,EAAWzL,IAAIjE,EAAQ4F,cAAcyE,IAAc,GAC/D0G,EAAa,IAAIlX,OAAOqX,EAAOF,EAAQ,KAAKnX,OAAOuX,EAAOH,EAAQ,KAAKpX,OAAOsX,EAAQH,EAAQ,KAAKnX,OAAOwX,EAAQJ,EACtH,MAIQE,EAAQ,EAAItB,GAFZqB,EAAOxB,EAAWzL,IAAIjE,EAAQ4F,cAAcyE,EAAc,IAAI,IAG9DgH,EAAQ,EAAIvB,GAFZsB,EAAO1B,EAAWzL,IAAIjE,EAAQ4F,cAAcyE,EAAc,IAAI,IAGlE0G,EAAa,IAAIlX,OAAOqX,EAAOF,EAAQ,KAAKnX,OAAOuX,EAAOH,EAAQ,KAAKpX,OAAOsX,EAAQH,EAAQ,KAAKnX,OAAOwX,EAAQJ,GAEtH7G,EAAU2G,EACV9Q,EAAQe,SAASpH,KAAK,sCAAuCC,OAAO4W,EAAc,oBAAsB5W,OAAO8W,EAAY,cAAgB9W,OAAO+F,EAAa,SAAW/F,OAAOuQ,EAAS,+CAAiDvQ,OAAO+F,EAAa,yEAA0E/F,OAAOoG,EAAQF,cAAc5G,MAAO,QAAQU,OAAOoG,EAAQF,cAAc7G,SAAU,OAAOW,OAAOmG,EAAQ4F,cAAcyE,EAAc,GAAI,eAAexQ,OAAOwC,EAAc,OAAOxC,OAAOmG,EAAQyF,SAAS4E,EAAc,GAAI,cAAcxQ,QAA+C,QAAtCsW,EAAKlQ,EAAQF,cAAc2Q,aAA0B,IAAPP,OAAgB,EAASA,EAAGmB,gBAAkB,IAAMrR,EAAQF,cAAc2Q,MAAMY,eAAiB,SAAM3U,EAAW,8EAA+E9C,OAAOoG,EAAQF,cAAc5G,MAAO,QAAQU,OAAOoG,EAAQF,cAAc7G,SAAU,OAAOW,OAAOmG,EAAQ4F,cAAcyE,EAAc,GAAI,mBAAmBxQ,OAAOwC,EAAc,OAAOxC,OAAOmG,EAAQyF,SAAS4E,EAAc,GAAI,cAAcxQ,QAA+C,QAAtCuW,EAAKnQ,EAAQF,cAAc2Q,aAA0B,IAAPN,OAAgB,EAASA,EAAGkB,gBAAkB,IAAMrR,EAAQF,cAAc2Q,MAAMY,eAAiB,SAAM3U,EAAW,+EAAgF9C,OAAOoG,EAAQF,cAAc5G,MAAO,QAAQU,OAAOoG,EAAQF,cAAc7G,SAAU,OAAOW,OAAOmG,EAAQ4F,cAAcyE,EAAc,GAAI,MAAMxQ,OAAOwC,EAAc,cAAcxC,OAAO+F,EAAa,mCAC59CK,EAAQiB,WAAWtH,KAAK,yBAA0BC,OAAOoG,EAAQF,cAAc5G,MAAO,KAAKU,OAAOmG,EAAQ4F,cAAcyE,EAAc,GAAI,UAAYxQ,OAAOgW,EAAOmB,EAAQ,UAAYnX,OAAOiW,EAAOmB,EAAQ,SAAWpX,OAAO,EAAIoS,EAAY,EAAG,+DAAqEpS,OAAOoS,EAAY,EAAG,mDAAoDpS,OAAOoG,EAAQF,cAAc5G,MAAO,QAAQU,OAAOoG,EAAQF,cAAc7G,SAAU,OAAOW,OAAOmG,EAAQ4F,cAAcyE,EAAc,GAAI,eAAexQ,OAAOwC,EAAc,OAAOxC,OAAOmG,EAAQyF,SAAS4E,EAAc,GAAI,cAAcxQ,QAA+C,QAAtCwW,EAAKpQ,EAAQF,cAAc2Q,aAA0B,IAAPL,OAAgB,EAASA,EAAGiB,gBAAkB,IAAMrR,EAAQF,cAAc2Q,MAAMY,eAAiB,SAAM3U,EAAW,0EAA2E9C,OAAOoG,EAAQF,cAAc5G,MAAO,QAAQU,OAAOoG,EAAQF,cAAc7G,SAAU,OAAOW,OAAOmG,EAAQ4F,cAAcyE,EAAc,GAAI,mBAAmBxQ,OAAOwC,EAAc,OAAOxC,OAAOmG,EAAQyF,SAAS4E,EAAc,GAAI,cAAcxQ,QAA+C,QAAtCyW,EAAKrQ,EAAQF,cAAc2Q,aAA0B,IAAPJ,OAAgB,EAASA,EAAGgB,gBAAkB,IAAMrR,EAAQF,cAAc2Q,MAAMY,eAAiB,SAAM3U,EAAW,2EAA4E9C,OAAOoG,EAAQF,cAAc5G,MAAO,QAAQU,OAAOoG,EAAQF,cAAc7G,SAAU,OAAOW,OAAOmG,EAAQ4F,cAAcyE,EAAc,GAAI,MAAMxQ,OAAOwC,EAAc,cAAcxC,OAAO+F,EAAa,WAC7gDK,EAAQgB,eAAerH,KAAK,gBAAiBC,OAAO4W,EAAc,aAAe5W,OAAO4W,EAAc,SAAW5W,OAAOgW,EAAM,SAAWhW,OAAOiW,EAAM,mBAAqBjW,OAAOoS,EAAW,qDAAsDpS,OAAOoG,EAAQF,cAAc5G,MAAO,QAAQU,OAAOoG,EAAQF,cAAc7G,SAAU,OAAOW,OAAOmG,EAAQ4F,cAAcyE,EAAc,GAAI,eAAexQ,OAAOwC,EAAc,OAAOxC,OAAOmG,EAAQyF,SAAS4E,EAAc,GAAI,cAAcxQ,QAA+C,QAAtC0W,EAAKtQ,EAAQF,cAAc2Q,aAA0B,IAAPH,OAAgB,EAASA,EAAGe,gBAAkB,IAAMrR,EAAQF,cAAc2Q,MAAMY,eAAiB,SAAM3U,EAAW,0EAA2E9C,OAAOoG,EAAQF,cAAc5G,MAAO,QAAQU,OAAOoG,EAAQF,cAAc7G,SAAU,OAAOW,OAAOmG,EAAQ4F,cAAcyE,EAAc,GAAI,mBAAmBxQ,OAAOwC,EAAc,OAAOxC,OAAOmG,EAAQyF,SAAS4E,EAAc,GAAI,cAAcxQ,QAA+C,QAAtC2W,EAAKvQ,EAAQF,cAAc2Q,aAA0B,IAAPF,OAAgB,EAASA,EAAGc,gBAAkB,IAAMrR,EAAQF,cAAc2Q,MAAMY,eAAiB,SAAM3U,EAAW,2EAA4E9C,OAAOoG,EAAQF,cAAc5G,MAAO,QAAQU,OAAOoG,EAAQF,cAAc7G,SAAU,OAAOW,OAAOmG,EAAQ4F,cAAcyE,EAAc,GAAI,MAAMxQ,OAAOwC,EAAc,cAAcxC,OAAO+F,EAAa,SAAS/F,OAAOmG,EAAQyF,SAAS4E,EAAc,GAAI,WAhCv6C,CAiCd,IACA,IAAIkH,EAAY5M,EAAS6M,YACrBC,EAAkB7M,EAAe4M,YAuCrC,OAtCAnY,KAAK8H,SAASuF,IAAI,MAAO,EAAC,EAAM,KAChCrN,KAAK8H,SAASuF,IAAI,MAAO,EAAC,EAAO,KACjCrN,KAAK8H,SAASuF,IAAI,MAAO,EAAC,EAAO,KACjCrN,KAAK8H,SAASuF,IAAI,MAAO,EAAC,EAAO,KACjCrN,KAAK8H,SAASuF,IAAI,MAAO,EAAC,EAAO,KACjCrN,KAAK8H,SAASuF,IAAI,MAAO,EAAC,EAAO,KACjCrN,KAAK8H,SAASuF,IAAI,MAAO,EAAC,EAAO,KACjCrN,KAAK8H,SAASuF,IAAI,MAAO,EAAC,EAAO,KACjCrN,KAAK8H,SAASuF,IAAI,MAAO,EAAC,EAAO,KACjCrN,KAAK8H,SAASuF,IAAI,MAAO,EAAC,EAAO,KACjCrN,KAAK8H,SAASuF,IAAI,MAAO,EAAC,EAAO,KACjCrN,KAAK8H,SAASuF,IAAI,MAAO,EAAC,EAAO,KACjCrN,KAAK+H,eAAesF,IAAI,MAAO,EAAC,EAAM,KACtCrN,KAAK+H,eAAesF,IAAI,MAAO,EAAC,EAAO,KACvCrN,KAAK+H,eAAesF,IAAI,MAAO,EAAC,EAAO,KACvCrN,KAAK+H,eAAesF,IAAI,MAAO,EAAC,EAAO,KACvCrN,KAAK+H,eAAesF,IAAI,MAAO,EAAC,EAAO,KACvCrN,KAAK+H,eAAesF,IAAI,MAAO,EAAC,EAAO,KACvCrN,KAAK+H,eAAesF,IAAI,MAAO,EAAC,EAAO,KACvCrN,KAAK+H,eAAesF,IAAI,MAAO,EAAC,EAAO,KACvCrN,KAAK+H,eAAesF,IAAI,MAAO,EAAC,EAAO,KACvCrN,KAAK+H,eAAesF,IAAI,MAAO,EAAC,EAAO,KACvCrN,KAAK+H,eAAesF,IAAI,MAAO,EAAC,EAAO,KACvCrN,KAAK+H,eAAesF,IAAI,MAAO,EAAC,EAAO,KACvC+K,EAAgB1O,SAAQ,SAAUgJ,GAC9B9L,EAAQ6L,aAAaC,EAAS9L,EAAQmB,eAAgB6K,EAC1D,IACAsF,EAAUxO,SAAQ,SAAUgJ,GACxB9L,EAAQ6L,aAAaC,EAAS9L,EAAQkB,SAAU8K,EACpD,IACA5S,KAAK8H,SAAS4B,SAAQ,SAAUxM,EAAOkQ,GAC/BlQ,EAAM,KACN0J,EAAQoG,iBAAmB9P,EAAM,GAAGoQ,KAAK,KAEzC1G,EAAQmB,eAAe6C,IAAIwC,GAAK,KAChCxG,EAAQqG,uBAAyBrG,EAAQmB,eAAe6C,IAAIwC,GAAK,GAAGE,KAAK,IAEjF,IACO,gKAAqK9M,OAAOmG,EAAQ0R,WAAWzS,MAAO,KAAKpF,OAAOmG,EAAQ0R,WAAWtS,OAAQ,0IAA8IvF,OAAOR,KAAK0G,cAAc5G,MAAO,0MAAgNU,OAAOmG,EAAQ0R,WAAWzS,MAAO,KAAKpF,OAAOmG,EAAQ0R,WAAWtS,OAAQ,0IAA8IvF,OAAOR,KAAK0G,cAAc5G,MAAO,0UAAwVU,OAAOmG,EAAQ0R,WAAWzS,MAAO,KAAKpF,OAAOmG,EAAQ0R,WAAWtS,OAAQ,2GAA+GvF,OAAOR,KAAK0G,cAAc5G,MAAO,MAAOU,OAAOR,KAAK4H,eAAe0F,KAAK,KAAK9M,OAAOR,KAAK6H,WAAWyF,KAAK,KAAK9M,OAAOR,KAAKgN,gBAAiB,mDACxgD,EACAxG,EAAkB7G,UAAU+L,MAAQ,WAChC,MAAO,oCAAsClL,OAAOR,KAAK0G,cAAc5G,MAAMwY,cAAe,WAAW9X,OAAOR,KAAK0G,cAAclH,QAAS,UAC9I,EACAgH,EAAkB7G,UAAUgF,QAAU,WAClC,MAAO,0CAA6CnE,OAAOR,KAAK0G,cAAc5G,MAAO,+BACzF,EACA0G,EAAkB7G,UAAUgM,cAAgB,WACxC,MAAO,2HAAkInL,OAAOR,KAAK0G,cAAc5G,MAAO,yRAAuSU,OAAOR,KAAK0G,cAAc5G,MAAO,+jBAA6kBU,OAAOR,KAAK0G,cAAc5G,MAAO,whBAAsiBU,OAAOR,KAAK0G,cAAc5G,MAAO,6aAC3qD,EACA0G,EAAkB7G,UAAU4Y,YAAc,SAAUlS,GAChD,IAAImS,EAAe,qEACN,aAATnS,IACAmS,EAAe,2EAA6EhY,OAAOR,KAAK0G,cAAc5G,MAAMwY,cAAe,OAAO9X,OAAOR,KAAK0G,cAAc7G,SAAU,OAAOW,OAAOR,KAAK0G,cAAclH,QAAQ8Y,cAAe,2CAElPtY,KAAKyG,iBAAiBpC,UAAY,uCAAyC7D,OAAOgY,EAAc,SACpG,EACAhS,EAAkB7G,UAAUmM,QAAU,WAOlC,IACI2M,EADW5a,SAAS6F,cAAc,kBACPgV,WAAU,GACzCD,EAAkBzY,KAAK6V,oBAAoB4C,GAC3C,IAAIE,EATJ,SAAiBC,EAAGC,GAEhB,IAAK,IAAIC,KADTF,EAAI/a,SAASkb,gBAAgB,6BAA8BH,GAC7CC,EACVD,EAAEI,eAAe,KAAMF,EAAEG,QAAQ,SAAU,KAAKA,QAAQ,MAAO,KAAKA,QAAQ,MAAO,KAAKA,QAAQ,UAAU,SAAUC,EAAGJ,EAAGK,EAAGC,GAAK,MAAO,IAAMF,EAAEzY,aAAe,IAAIoY,EAAEC,IAC1K,OAAOF,CACX,CAIUS,CAAQ,OAClBV,EAAIvG,YAAYqG,GAChB,SAAkBa,EAAOxL,GACrBwL,EAAMlV,aAAa,QAAS,8BAC5B,IAAI0R,EAAUwD,EAAMC,UAEhBC,EAAU,IAAI3H,KAAK,CADT,4CACmBiE,GAAU,CAAEzP,KAAM,gCAC/CoT,EAASzH,IAAIC,gBAAgBuH,GAC7BE,EAAe7b,SAASiU,cAAc,KAC1C4H,EAAaxH,KAAOuH,EACpBC,EAAahI,SAKH,kBAJV7T,SAASsU,KAAKC,YAAYsH,GAC1BA,EAAarH,QACbxU,SAASsU,KAAKI,YAAYmH,EAC9B,CACAC,CAAShB,EACb,EACOnS,CACX,CAt5BsC,GAu5BtCvJ,EAAQuJ,kBAAoBA,C,6pBC54B5B,IAAIoT,EAAgB,SAASC,EAAGrI,GAI9B,OAHAoI,EAAgB7c,OAAO+c,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUH,EAAGrI,GAAKqI,EAAEE,UAAYvI,CAAG,GAC1E,SAAUqI,EAAGrI,GAAK,IAAK,IAAIsH,KAAKtH,EAAOzU,OAAO4C,UAAUsa,eAAe9X,KAAKqP,EAAGsH,KAAIe,EAAEf,GAAKtH,EAAEsH,GAAI,EAC7Fc,EAAcC,EAAGrI,EAC1B,EAEO,SAAS0I,EAAUL,EAAGrI,GAC3B,GAAiB,mBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAI2I,UAAU,uBAAyB3L,OAAOgD,GAAK,iCAE7D,SAAS4I,IAAOpa,KAAKqa,YAAcR,CAAG,CADtCD,EAAcC,EAAGrI,GAEjBqI,EAAEla,UAAkB,OAAN6R,EAAazU,OAAOI,OAAOqU,IAAM4I,EAAGza,UAAY6R,EAAE7R,UAAW,IAAIya,EACjF,CAEO,IAAIE,EAAW,WAQpB,OAPAA,EAAWvd,OAAOwd,QAAU,SAAkBC,GAC1C,IAAK,IAAIpB,EAAGpa,EAAI,EAAG4Z,EAAI6B,UAAUjd,OAAQwB,EAAI4Z,EAAG5Z,IAE5C,IAAK,IAAI8Z,KADTM,EAAIqB,UAAUzb,GACOjC,OAAO4C,UAAUsa,eAAe9X,KAAKiX,EAAGN,KAAI0B,EAAE1B,GAAKM,EAAEN,IAE9E,OAAO0B,CACX,EACOF,EAASpL,MAAMlP,KAAMya,UAC9B,EAEO,SAASC,EAAOtB,EAAG5a,GACxB,IAAIgc,EAAI,CAAC,EACT,IAAK,IAAI1B,KAAKM,EAAOrc,OAAO4C,UAAUsa,eAAe9X,KAAKiX,EAAGN,IAAMta,EAAEoL,QAAQkP,GAAK,IAC9E0B,EAAE1B,GAAKM,EAAEN,IACb,GAAS,MAALM,GAAqD,mBAAjCrc,OAAO4d,sBACtB,KAAI3b,EAAI,EAAb,IAAgB8Z,EAAI/b,OAAO4d,sBAAsBvB,GAAIpa,EAAI8Z,EAAEtb,OAAQwB,IAC3DR,EAAEoL,QAAQkP,EAAE9Z,IAAM,GAAKjC,OAAO4C,UAAUib,qBAAqBzY,KAAKiX,EAAGN,EAAE9Z,MACvEwb,EAAE1B,EAAE9Z,IAAMoa,EAAEN,EAAE9Z,IAF4B,CAItD,OAAOwb,CACT,CAEO,SAASK,EAAWC,EAAYC,EAAQ3N,EAAK4N,GAClD,IAA2HnB,EAAvHoB,EAAIR,UAAUjd,OAAQ0d,EAAID,EAAI,EAAIF,EAAkB,OAATC,EAAgBA,EAAOje,OAAOoe,yBAAyBJ,EAAQ3N,GAAO4N,EACrH,GAAuB,iBAAZI,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAYC,EAAQ3N,EAAK4N,QACpH,IAAK,IAAIhc,EAAI8b,EAAWtd,OAAS,EAAGwB,GAAK,EAAGA,KAAS6a,EAAIiB,EAAW9b,MAAIkc,GAAKD,EAAI,EAAIpB,EAAEqB,GAAKD,EAAI,EAAIpB,EAAEkB,EAAQ3N,EAAK8N,GAAKrB,EAAEkB,EAAQ3N,KAAS8N,GAChJ,OAAOD,EAAI,GAAKC,GAAKne,OAAOC,eAAe+d,EAAQ3N,EAAK8N,GAAIA,CAC9D,CAEO,SAASI,EAAQC,EAAYC,GAClC,OAAO,SAAUT,EAAQ3N,GAAOoO,EAAUT,EAAQ3N,EAAKmO,EAAa,CACtE,CAEO,SAASE,EAAaC,EAAMC,EAAcb,EAAYc,EAAWC,EAAcC,GACpF,SAASC,EAAOC,GAAK,QAAU,IAANA,GAA6B,mBAANA,EAAkB,MAAM,IAAI7B,UAAU,qBAAsB,OAAO6B,CAAG,CAKtH,IAJA,IAGIC,EAHAC,EAAON,EAAUM,KAAM9O,EAAe,WAAT8O,EAAoB,MAAiB,WAATA,EAAoB,MAAQ,QACrFnB,GAAUY,GAAgBD,EAAOE,EAAkB,OAAIF,EAAOA,EAAK/b,UAAY,KAC/Ewc,EAAaR,IAAiBZ,EAAShe,OAAOoe,yBAAyBJ,EAAQa,EAAU9N,MAAQ,CAAC,GAC/FsO,GAAO,EACLpd,EAAI8b,EAAWtd,OAAS,EAAGwB,GAAK,EAAGA,IAAK,CAC7C,IAAIqd,EAAU,CAAC,EACf,IAAK,IAAIvD,KAAK8C,EAAWS,EAAQvD,GAAW,WAANA,EAAiB,CAAC,EAAI8C,EAAU9C,GACtE,IAAK,IAAIA,KAAK8C,EAAUU,OAAQD,EAAQC,OAAOxD,GAAK8C,EAAUU,OAAOxD,GACrEuD,EAAQE,eAAiB,SAAUP,GAAK,GAAII,EAAM,MAAM,IAAIjC,UAAU,0DAA2D2B,EAAkBvb,KAAKwb,EAAOC,GAAK,MAAQ,EAC5K,IAAIQ,GAAS,EAAI1B,EAAW9b,IAAa,aAATkd,EAAsB,CAAEtR,IAAKuR,EAAWvR,IAAKyC,IAAK8O,EAAW9O,KAAQ8O,EAAW/O,GAAMiP,GACtH,GAAa,aAATH,EAAqB,CACrB,QAAe,IAAXM,EAAmB,SACvB,GAAe,OAAXA,GAAqC,iBAAXA,EAAqB,MAAM,IAAIrC,UAAU,oBACnE8B,EAAIF,EAAOS,EAAO5R,QAAMuR,EAAWvR,IAAMqR,IACzCA,EAAIF,EAAOS,EAAOnP,QAAM8O,EAAW9O,IAAM4O,IACzCA,EAAIF,EAAOS,EAAOC,QAAOZ,EAAaa,QAAQT,EACtD,MACSA,EAAIF,EAAOS,MACH,UAATN,EAAkBL,EAAaa,QAAQT,GACtCE,EAAW/O,GAAO6O,EAE/B,CACIlB,GAAQhe,OAAOC,eAAe+d,EAAQa,EAAU9N,KAAMqO,GAC1DC,GAAO,CACT,CAEO,SAASO,EAAkBC,EAASf,EAAc3e,GAEvD,IADA,IAAI2f,EAAWpC,UAAUjd,OAAS,EACzBwB,EAAI,EAAGA,EAAI6c,EAAare,OAAQwB,IACrC9B,EAAQ2f,EAAWhB,EAAa7c,GAAGmD,KAAKya,EAAS1f,GAAS2e,EAAa7c,GAAGmD,KAAKya,GAEnF,OAAOC,EAAW3f,OAAQ,CAC5B,CAEO,SAAS4f,EAAUnX,GACxB,MAAoB,iBAANA,EAAiBA,EAAI,GAAGnF,OAAOmF,EAC/C,CAEO,SAASoX,EAAkBf,EAAGlO,EAAMkP,GAEzC,MADoB,iBAATlP,IAAmBA,EAAOA,EAAKmP,YAAc,IAAIzc,OAAOsN,EAAKmP,YAAa,KAAO,IACrFlgB,OAAOC,eAAegf,EAAG,OAAQ,CAAEkB,cAAc,EAAMhgB,MAAO8f,EAAS,GAAGxc,OAAOwc,EAAQ,IAAKlP,GAAQA,GAC/G,CAEO,SAASqP,EAAWC,EAAaC,GACtC,GAAuB,iBAAZjC,SAAoD,mBAArBA,QAAQkC,SAAyB,OAAOlC,QAAQkC,SAASF,EAAaC,EAClH,CAEO,SAAStd,EAAU6c,EAASW,EAAYC,EAAGC,GAEhD,OAAO,IAAKD,IAAMA,EAAI/H,WAAU,SAAUiI,EAASC,GAC/C,SAASC,EAAU1gB,GAAS,IAAM2gB,EAAKJ,EAAUjO,KAAKtS,GAAS,CAAE,MAAOsB,GAAKmf,EAAOnf,EAAI,CAAE,CAC1F,SAASsf,EAAS5gB,GAAS,IAAM2gB,EAAKJ,EAAiB,MAAEvgB,GAAS,CAAE,MAAOsB,GAAKmf,EAAOnf,EAAI,CAAE,CAC7F,SAASqf,EAAKrB,GAJlB,IAAetf,EAIasf,EAAOJ,KAAOsB,EAAQlB,EAAOtf,QAJ1CA,EAIyDsf,EAAOtf,MAJhDA,aAAiBsgB,EAAItgB,EAAQ,IAAIsgB,GAAE,SAAUE,GAAWA,EAAQxgB,EAAQ,KAIjByY,KAAKiI,EAAWE,EAAW,CAC7GD,GAAMJ,EAAYA,EAAUvO,MAAM0N,EAASW,GAAc,KAAK/N,OAClE,GACF,CAEO,SAASrP,EAAYyc,EAASzK,GACnC,IAAsG6J,EAAGlW,EAAG0U,EAAGuD,EAA3G9B,EAAI,CAAE5b,MAAO,EAAGM,KAAM,WAAa,GAAW,EAAP6Z,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,EAAI,EAAGla,KAAM,GAAI0d,IAAK,IAChG,OAAOD,EAAI,CAAEvO,KAAMyO,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXxO,SAA0BsO,EAAEtO,OAAOC,UAAY,WAAa,OAAO1P,IAAM,GAAI+d,EACvJ,SAASE,EAAKrF,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcqF,GACV,GAAIlC,EAAG,MAAM,IAAI7B,UAAU,mCAC3B,KAAO4D,IAAMA,EAAI,EAAGG,EAAG,KAAOjC,EAAI,IAAKA,OACnC,GAAID,EAAI,EAAGlW,IAAM0U,EAAY,EAAR0D,EAAG,GAASpY,EAAU,OAAIoY,EAAG,GAAKpY,EAAS,SAAO0U,EAAI1U,EAAU,SAAM0U,EAAErY,KAAK2D,GAAI,GAAKA,EAAE0J,SAAWgL,EAAIA,EAAErY,KAAK2D,EAAGoY,EAAG,KAAK9B,KAAM,OAAO5B,EAE3J,OADI1U,EAAI,EAAG0U,IAAG0D,EAAK,CAAS,EAARA,EAAG,GAAQ1D,EAAEtd,QACzBghB,EAAG,IACP,KAAK,EAAG,KAAK,EAAG1D,EAAI0D,EAAI,MACxB,KAAK,EAAc,OAAXjC,EAAE5b,QAAgB,CAAEnD,MAAOghB,EAAG,GAAI9B,MAAM,GAChD,KAAK,EAAGH,EAAE5b,QAASyF,EAAIoY,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKjC,EAAE+B,IAAIG,MAAOlC,EAAE3b,KAAK6d,MAAO,SACxC,QACI,MAAkB3D,GAAZA,EAAIyB,EAAE3b,MAAY9C,OAAS,GAAKgd,EAAEA,EAAEhd,OAAS,KAAkB,IAAV0gB,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEjC,EAAI,EAAG,QAAU,CAC3G,GAAc,IAAViC,EAAG,MAAc1D,GAAM0D,EAAG,GAAK1D,EAAE,IAAM0D,EAAG,GAAK1D,EAAE,IAAM,CAAEyB,EAAE5b,MAAQ6d,EAAG,GAAI,KAAO,CACrF,GAAc,IAAVA,EAAG,IAAYjC,EAAE5b,MAAQma,EAAE,GAAI,CAAEyB,EAAE5b,MAAQma,EAAE,GAAIA,EAAI0D,EAAI,KAAO,CACpE,GAAI1D,GAAKyB,EAAE5b,MAAQma,EAAE,GAAI,CAAEyB,EAAE5b,MAAQma,EAAE,GAAIyB,EAAE+B,IAAIzd,KAAK2d,GAAK,KAAO,CAC9D1D,EAAE,IAAIyB,EAAE+B,IAAIG,MAChBlC,EAAE3b,KAAK6d,MAAO,SAEtBD,EAAK/L,EAAKhQ,KAAKya,EAASX,EAC5B,CAAE,MAAOzd,GAAK0f,EAAK,CAAC,EAAG1f,GAAIsH,EAAI,CAAG,CAAE,QAAUkW,EAAIxB,EAAI,CAAG,CACzD,GAAY,EAAR0D,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEhhB,MAAOghB,EAAG,GAAKA,EAAG,QAAK,EAAQ9B,MAAM,EAC9E,CAtBgDyB,CAAK,CAACjF,EAAGC,GAAK,CAAG,CAuBnE,CAEO,IAAIuF,EAAkBrhB,OAAOI,OAAS,SAAUgc,EAAGD,EAAGmF,EAAGC,QACnDhb,IAAPgb,IAAkBA,EAAKD,GAC3B,IAAIrD,EAAOje,OAAOoe,yBAAyBjC,EAAGmF,GACzCrD,KAAS,QAASA,GAAQ9B,EAAEqF,WAAavD,EAAKwD,UAAYxD,EAAKkC,gBAChElC,EAAO,CAAEyD,YAAY,EAAM7T,IAAK,WAAa,OAAOsO,EAAEmF,EAAI,IAE9DthB,OAAOC,eAAemc,EAAGmF,EAAItD,EAC9B,EAAI,SAAU7B,EAAGD,EAAGmF,EAAGC,QACXhb,IAAPgb,IAAkBA,EAAKD,GAC3BlF,EAAEmF,GAAMpF,EAAEmF,EACX,EAEM,SAASK,EAAaxF,EAAGC,GAC9B,IAAK,IAAIL,KAAKI,EAAa,YAANJ,GAAoB/b,OAAO4C,UAAUsa,eAAe9X,KAAKgX,EAAGL,IAAIsF,EAAgBjF,EAAGD,EAAGJ,EAC7G,CAEO,SAAS6F,EAASxF,GACvB,IAAIC,EAAsB,mBAAX3J,QAAyBA,OAAOC,SAAUwJ,EAAIE,GAAKD,EAAEC,GAAIpa,EAAI,EAC5E,GAAIka,EAAG,OAAOA,EAAE/W,KAAKgX,GACrB,GAAIA,GAAyB,iBAAbA,EAAE3b,OAAqB,MAAO,CAC1CgS,KAAM,WAEF,OADI2J,GAAKna,GAAKma,EAAE3b,SAAQ2b,OAAI,GACrB,CAAEjc,MAAOic,GAAKA,EAAEna,KAAMod,MAAOjD,EACxC,GAEJ,MAAM,IAAIgB,UAAUf,EAAI,0BAA4B,kCACtD,CAEO,SAASwF,EAAOzF,EAAGP,GACxB,IAAIM,EAAsB,mBAAXzJ,QAAyB0J,EAAE1J,OAAOC,UACjD,IAAKwJ,EAAG,OAAOC,EACf,IAAmB+B,EAAY1c,EAA3BQ,EAAIka,EAAE/W,KAAKgX,GAAO0F,EAAK,GAC3B,IACI,WAAc,IAANjG,GAAgBA,KAAM,MAAQsC,EAAIlc,EAAEwQ,QAAQ4M,MAAMyC,EAAGte,KAAK2a,EAAEhe,MACxE,CACA,MAAO4hB,GAAStgB,EAAI,CAAEsgB,MAAOA,EAAS,CACtC,QACI,IACQ5D,IAAMA,EAAEkB,OAASlD,EAAIla,EAAU,SAAIka,EAAE/W,KAAKnD,EAClD,CACA,QAAU,GAAIR,EAAG,MAAMA,EAAEsgB,KAAO,CACpC,CACA,OAAOD,CACT,CAGO,SAASE,IACd,IAAK,IAAIF,EAAK,GAAI7f,EAAI,EAAGA,EAAIyb,UAAUjd,OAAQwB,IAC3C6f,EAAKA,EAAGre,OAAOoe,EAAOnE,UAAUzb,KACpC,OAAO6f,CACT,CAGO,SAASG,IACd,IAAK,IAAI5F,EAAI,EAAGpa,EAAI,EAAGigB,EAAKxE,UAAUjd,OAAQwB,EAAIigB,EAAIjgB,IAAKoa,GAAKqB,UAAUzb,GAAGxB,OACxE,IAAI0d,EAAIlB,MAAMZ,GAAIiF,EAAI,EAA3B,IAA8Brf,EAAI,EAAGA,EAAIigB,EAAIjgB,IACzC,IAAK,IAAIuS,EAAIkJ,UAAUzb,GAAI6N,EAAI,EAAGqS,EAAK3N,EAAE/T,OAAQqP,EAAIqS,EAAIrS,IAAKwR,IAC1DnD,EAAEmD,GAAK9M,EAAE1E,GACjB,OAAOqO,CACT,CAEO,SAASiE,EAAcC,EAAIC,EAAMC,GACtC,GAAIA,GAA6B,IAArB7E,UAAUjd,OAAc,IAAK,IAA4BqhB,EAAxB7f,EAAI,EAAGugB,EAAIF,EAAK7hB,OAAYwB,EAAIugB,EAAGvgB,KACxE6f,GAAQ7f,KAAKqgB,IACRR,IAAIA,EAAK7E,MAAMra,UAAU6T,MAAMrR,KAAKkd,EAAM,EAAGrgB,IAClD6f,EAAG7f,GAAKqgB,EAAKrgB,IAGrB,OAAOogB,EAAG5e,OAAOqe,GAAM7E,MAAMra,UAAU6T,MAAMrR,KAAKkd,GACpD,CAEO,SAASG,EAAQ3G,GACtB,OAAO7Y,gBAAgBwf,GAAWxf,KAAK6Y,EAAIA,EAAG7Y,MAAQ,IAAIwf,EAAQ3G,EACpE,CAEO,SAAS4G,EAAiB7C,EAASW,EAAYE,GACpD,IAAKhO,OAAOiQ,cAAe,MAAM,IAAIvF,UAAU,wCAC/C,IAAoDnb,EAAhD+e,EAAIN,EAAUvO,MAAM0N,EAASW,GAAc,IAAQoC,EAAI,GAC3D,OAAO3gB,EAAI,CAAC,EAAGif,EAAK,QAASA,EAAK,SAAUA,EAAK,UAAWjf,EAAEyQ,OAAOiQ,eAAiB,WAAc,OAAO1f,IAAM,EAAGhB,EACpH,SAASif,EAAKrF,GAASmF,EAAEnF,KAAI5Z,EAAE4Z,GAAK,SAAUC,GAAK,OAAO,IAAIpD,SAAQ,SAAUlE,EAAGC,GAAKmO,EAAEpf,KAAK,CAACqY,EAAGC,EAAGtH,EAAGC,IAAM,GAAKoO,EAAOhH,EAAGC,EAAI,GAAI,EAAG,CACzI,SAAS+G,EAAOhH,EAAGC,GAAK,KACVqC,EADqB6C,EAAEnF,GAAGC,IACnB3b,iBAAiBsiB,EAAU/J,QAAQiI,QAAQxC,EAAEhe,MAAM2b,GAAGlD,KAAKkK,EAASlC,GAAUmC,EAAOH,EAAE,GAAG,GAAIzE,EADtE,CAAE,MAAO1c,GAAKshB,EAAOH,EAAE,GAAG,GAAInhB,EAAI,CAC/E,IAAc0c,CADmE,CAEjF,SAAS2E,EAAQ3iB,GAAS0iB,EAAO,OAAQ1iB,EAAQ,CACjD,SAASygB,EAAOzgB,GAAS0iB,EAAO,QAAS1iB,EAAQ,CACjD,SAAS4iB,EAAO9D,EAAGnD,GAASmD,EAAEnD,GAAI8G,EAAEI,QAASJ,EAAEniB,QAAQoiB,EAAOD,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAK,CACnF,CAEO,SAASK,EAAiB7G,GAC/B,IAAIna,EAAG8Z,EACP,OAAO9Z,EAAI,CAAC,EAAGif,EAAK,QAASA,EAAK,SAAS,SAAUzf,GAAK,MAAMA,CAAG,IAAIyf,EAAK,UAAWjf,EAAEyQ,OAAOC,UAAY,WAAc,OAAO1P,IAAM,EAAGhB,EAC1I,SAASif,EAAKrF,EAAGoD,GAAKhd,EAAE4Z,GAAKO,EAAEP,GAAK,SAAUC,GAAK,OAAQC,GAAKA,GAAK,CAAE5b,MAAOsiB,EAAQrG,EAAEP,GAAGC,IAAKuD,MAAM,GAAUJ,EAAIA,EAAEnD,GAAKA,CAAG,EAAImD,CAAG,CACvI,CAEO,SAASiE,EAAc9G,GAC5B,IAAK1J,OAAOiQ,cAAe,MAAM,IAAIvF,UAAU,wCAC/C,IAAiCnb,EAA7Bka,EAAIC,EAAE1J,OAAOiQ,eACjB,OAAOxG,EAAIA,EAAE/W,KAAKgX,IAAMA,EAAqCwF,EAASxF,GAA2Bna,EAAI,CAAC,EAAGif,EAAK,QAASA,EAAK,SAAUA,EAAK,UAAWjf,EAAEyQ,OAAOiQ,eAAiB,WAAc,OAAO1f,IAAM,EAAGhB,GAC9M,SAASif,EAAKrF,GAAK5Z,EAAE4Z,GAAKO,EAAEP,IAAM,SAAUC,GAAK,OAAO,IAAIpD,SAAQ,SAAUiI,EAASC,IACvF,SAAgBD,EAASC,EAAQ9D,EAAGhB,GAAKpD,QAAQiI,QAAQ7E,GAAGlD,MAAK,SAASkD,GAAK6E,EAAQ,CAAExgB,MAAO2b,EAAGuD,KAAMvC,GAAM,GAAG8D,EAAS,CADbmC,CAAOpC,EAASC,GAA7B9E,EAAIM,EAAEP,GAAGC,IAA8BuD,KAAMvD,EAAE3b,MAAQ,GAAI,CAAG,CAEjK,CAEO,SAASgjB,EAAqBC,EAAQC,GAE3C,OADIrjB,OAAOC,eAAkBD,OAAOC,eAAemjB,EAAQ,MAAO,CAAEjjB,MAAOkjB,IAAiBD,EAAOC,IAAMA,EAClGD,CACT,CAEA,IAAIE,EAAqBtjB,OAAOI,OAAS,SAAUgc,EAAGN,GACpD9b,OAAOC,eAAemc,EAAG,UAAW,CAAEsF,YAAY,EAAMvhB,MAAO2b,GAChE,EAAI,SAASM,EAAGN,GACfM,EAAW,QAAIN,CACjB,EAEO,SAASyH,EAAapV,GAC3B,GAAIA,GAAOA,EAAIqT,WAAY,OAAOrT,EAClC,IAAIsR,EAAS,CAAC,EACd,GAAW,MAAPtR,EAAa,IAAK,IAAImT,KAAKnT,EAAe,YAANmT,GAAmBthB,OAAO4C,UAAUsa,eAAe9X,KAAK+I,EAAKmT,IAAID,EAAgB5B,EAAQtR,EAAKmT,GAEtI,OADAgC,EAAmB7D,EAAQtR,GACpBsR,CACT,CAEO,SAAS+D,EAAgBrV,GAC9B,OAAQA,GAAOA,EAAIqT,WAAcrT,EAAM,CAAEsV,QAAStV,EACpD,CAEO,SAASuV,EAAuBC,EAAUC,EAAOzE,EAAMF,GAC5D,GAAa,MAATE,IAAiBF,EAAG,MAAM,IAAI7B,UAAU,iDAC5C,GAAqB,mBAAVwG,EAAuBD,IAAaC,IAAU3E,GAAK2E,EAAMC,IAAIF,GAAW,MAAM,IAAIvG,UAAU,4EACvG,MAAgB,MAAT+B,EAAeF,EAAa,MAATE,EAAeF,EAAE7Z,KAAKue,GAAY1E,EAAIA,EAAE9e,MAAQyjB,EAAM/V,IAAI8V,EACtF,CAEO,SAASG,EAAuBH,EAAUC,EAAOzjB,EAAOgf,EAAMF,GACnE,GAAa,MAATE,EAAc,MAAM,IAAI/B,UAAU,kCACtC,GAAa,MAAT+B,IAAiBF,EAAG,MAAM,IAAI7B,UAAU,iDAC5C,GAAqB,mBAAVwG,EAAuBD,IAAaC,IAAU3E,GAAK2E,EAAMC,IAAIF,GAAW,MAAM,IAAIvG,UAAU,2EACvG,MAAiB,MAAT+B,EAAeF,EAAE7Z,KAAKue,EAAUxjB,GAAS8e,EAAIA,EAAE9e,MAAQA,EAAQyjB,EAAMtT,IAAIqT,EAAUxjB,GAASA,CACtG,CAEO,SAAS4jB,EAAsBH,EAAOD,GAC3C,GAAiB,OAAbA,GAA0C,iBAAbA,GAA6C,mBAAbA,EAA0B,MAAM,IAAIvG,UAAU,0CAC/G,MAAwB,mBAAVwG,EAAuBD,IAAaC,EAAQA,EAAMC,IAAIF,EACtE,CAEO,SAASK,EAAwBC,EAAK9jB,EAAO+jB,GAClD,GAAI/jB,QAAoC,CACtC,GAAqB,iBAAVA,EAAoB,MAAM,IAAIid,UAAU,oBACnD,IAAI+G,EACJ,GAAID,EAAO,CACP,IAAKxR,OAAO0R,aAAc,MAAM,IAAIhH,UAAU,uCAC9C+G,EAAUhkB,EAAMuS,OAAO0R,aAC3B,CACA,QAAgB,IAAZD,EAAoB,CACpB,IAAKzR,OAAOyR,QAAS,MAAM,IAAI/G,UAAU,kCACzC+G,EAAUhkB,EAAMuS,OAAOyR,QAC3B,CACA,GAAuB,mBAAZA,EAAwB,MAAM,IAAI/G,UAAU,0BACvD6G,EAAII,MAAM7gB,KAAK,CAAErD,MAAOA,EAAOgkB,QAASA,EAASD,MAAOA,GAC1D,MACSA,GACPD,EAAII,MAAM7gB,KAAK,CAAE0gB,OAAO,IAE1B,OAAO/jB,CACT,CAEA,IAAImkB,EAA8C,mBAApBC,gBAAiCA,gBAAkB,SAAUxC,EAAOyC,EAAYC,GAC5G,IAAIhjB,EAAI,IAAIijB,MAAMD,GAClB,OAAOhjB,EAAEsP,KAAO,kBAAmBtP,EAAEsgB,MAAQA,EAAOtgB,EAAE+iB,WAAaA,EAAY/iB,CACjF,EAEO,SAASkjB,EAAmBV,GACjC,SAASW,EAAKnjB,GACZwiB,EAAIlC,MAAQkC,EAAIY,SAAW,IAAIP,EAAiB7iB,EAAGwiB,EAAIlC,MAAO,4CAA8CtgB,EAC5GwiB,EAAIY,UAAW,CACjB,CAcA,OAbA,SAASpS,IACP,KAAOwR,EAAII,MAAM5jB,QAAQ,CACvB,IAAIqkB,EAAMb,EAAII,MAAMjD,MACpB,IACE,IAAI3B,EAASqF,EAAIX,SAAWW,EAAIX,QAAQ/e,KAAK0f,EAAI3kB,OACjD,GAAI2kB,EAAIZ,MAAO,OAAOxL,QAAQiI,QAAQlB,GAAQ7G,KAAKnG,GAAM,SAAShR,GAAc,OAATmjB,EAAKnjB,GAAWgR,GAAQ,GACjG,CACA,MAAOhR,GACHmjB,EAAKnjB,EACT,CACF,CACA,GAAIwiB,EAAIY,SAAU,MAAMZ,EAAIlC,KAC9B,CACOtP,EACT,CAEA,SACE0K,YACAI,WACAI,SACAG,aACAS,UACA6B,aACApd,YACAI,cACAie,kBACAM,eACAC,WACAC,SACAG,WACAC,iBACAG,gBACAK,UACAC,mBACAO,mBACAC,gBACAC,uBACAI,eACAC,kBACAE,yBACAI,yBACAC,wBACAC,0BACAW,qB,GC/WEI,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB1e,IAAjB2e,EACH,OAAOA,EAAahlB,QAGrB,IAAIilB,EAASJ,EAAyBE,GAAY,CAGjD/kB,QAAS,CAAC,GAOX,OAHAklB,EAAoBH,GAAUE,EAAQA,EAAOjlB,QAAS8kB,GAG/CG,EAAOjlB,OACf,CCrBA8kB,EAAoBlI,EAAI,CAAC5c,EAASmlB,KACjC,IAAI,IAAIhV,KAAOgV,EACXL,EAAoB5I,EAAEiJ,EAAYhV,KAAS2U,EAAoB5I,EAAElc,EAASmQ,IAC5ErQ,OAAOC,eAAeC,EAASmQ,EAAK,CAAEqR,YAAY,EAAM7T,IAAKwX,EAAWhV,IAE1E,ECND2U,EAAoB5I,EAAI,CAACkJ,EAAKC,IAAUvlB,OAAO4C,UAAUsa,eAAe9X,KAAKkgB,EAAKC,GCClFP,EAAoB7G,EAAKje,IACH,oBAAXwS,QAA0BA,OAAO8S,aAC1CxlB,OAAOC,eAAeC,EAASwS,OAAO8S,YAAa,CAAErlB,MAAO,WAE7DH,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,GAAO,ETH1DV,EAAU,EAAQ,KAClBC,EAAS,EAAQ,KACjBC,EAAe,EAAQ,KACvBC,EAAc,EAAQ,KACtBC,EAAiB,EAAQ,KACzBC,EAAoC,WACpC,SAASA,IACLmD,KAAKwiB,OAAQ,EACbxiB,KAAKyiB,YAAc,IAAIhmB,EAAOiD,WAClC,CAmFA,OAjFA7C,EAAmB8C,UAAU0L,OAAS,SAAU0P,EAAQxb,GACpD,OAAO/C,EAAQuD,UAAUC,UAAM,OAAQ,GAAQ,WAC3C,IAAII,EAAIwW,EAAIC,EAAIC,EAAIvP,EAAImb,EACpBhhB,EAAQ1B,KACZ,OAAOxD,EAAQ2D,YAAYH,MAAM,SAAU+W,GACvC,OAAQA,EAAG1W,OACP,KAAK,EACD,OAAK0a,GAAWxb,EAAQO,OAAUP,EAAQC,SAAYD,EAAQM,UAI9DG,KAAKT,QAAUA,EACfa,EAAKJ,KACE,CAAC,EAAaA,KAAKyiB,YAAY7iB,WAAWI,KAAKT,QAAQM,SAAUG,KAAKT,QAAQC,QAASQ,KAAKT,QAAQO,UALvGsB,QAAQC,IAAI,yBACL,CAAC,IAKhB,KAAK,EAGD,OAFAjB,EAAGuG,QAAUoQ,EAAGpW,OAChBiW,EAAK5W,KACE,CAAC,EAAaA,KAAKyiB,YAAY3hB,YAAYd,KAAKT,QAAQO,MAAOE,KAAKT,QAAQC,UACvF,KAAK,EAGD,OAFAoX,EAAGtL,SAAWyL,EAAGpW,OACjBkW,EAAK7W,KACE,CAAC,EAAaA,KAAKyiB,YAAYvhB,kBAAkBlB,KAAKT,QAAQO,MAAOE,KAAKT,QAAQC,UAC7F,KAAK,EAGD,OAFAqX,EAAGtL,eAAiBwL,EAAGpW,OACvBmW,EAAK9W,KACE,CAAC,EAAavD,EAAOgD,cAAc6B,WAAWtB,KAAKT,QAAQO,MAAO,MAC7E,KAAK,EAsCD,OArCAgX,EAAGtL,QAAUuL,EAAGpW,OAChBX,KAAK2iB,UAAY5H,EACjB/a,KAAK4iB,kBAAoB,IAAIlmB,EAAa8J,kBAAkBxG,KAAK2iB,UAAW3iB,KAAKT,QAASS,KAAK2G,SAC/FvF,QAAQC,IAAI,MAAOrB,KAAKT,QAAQO,MAAOE,KAAK2G,SACxC3G,KAAK2G,SAEL3G,KAAK4iB,kBAAkBvX,OAAOrL,KAAK2G,QAAS3G,KAAKsL,SAAUtL,KAAKuL,eAAgBvL,KAAKwL,SAEjFxL,KAAKT,QAAQsjB,iBACbjmB,EAAeE,aAAauB,2BAA2B2B,QAItC,GAAjBT,EAAQijB,QACRxiB,KAAKwiB,OAAQ,GACbxiB,KAAKwiB,QACLjb,EAAK3J,OAAO2J,GACZmb,EAAWnb,EAAGub,0BACd9iB,KAAK2G,QAAU+b,EAASK,YACxB/iB,KAAKsL,SAAWoX,EAASM,YACzBhjB,KAAKuL,eAAiBmX,EAASM,cAQvCnlB,SAASU,iBAAiB,yBAAyB,SAAWC,GACtDA,EAAEN,WAAaM,EAAEN,UAAU+kB,aAAezkB,EAAEN,UAAUoB,eAAiBoC,EAAMnC,QAAQC,SACrFkC,EAAMzC,cAAcT,EAAEN,UAAU+kB,YAGvC,IACGplB,SAASU,iBAAiB,wBAAwB,SAAWC,GACzDkD,EAAM3C,eAAeP,EAAEN,UAAUmB,cACpC,IACE,CAAC,GAEpB,GACJ,GACJ,EACAxC,EAAmB8C,UAAUV,cAAgB,SAAU8D,EAAc7D,GACjEvC,EAAY6E,iBAAiByE,iBAAiBjG,KAAKT,QAAQO,MAAOE,KAAKT,QAAQM,SAAUkD,EAAc,aAAa,EAAO7D,EAC/H,EACArC,EAAmB8C,UAAUZ,eAAiB,SAAUgE,GACpDpG,EAAY6E,iBAAiBsB,mBAAmB9C,KAAKT,QAAQO,MAAOE,KAAKT,QAAQM,SAAUkD,GAAc,EAC7G,EACAlG,EAAmB8C,UAAUP,iBAAmB,SAAU2D,EAAc7D,GACpEvC,EAAY6E,iBAAiB2E,gBAAgBnG,KAAKT,QAAQO,MAAOiD,EAAc7D,EAAO,YAC1F,EACArC,EAAmB8C,UAAUR,eAAiB,WAC1CxC,EAAY6E,iBAAiBrC,eAAea,KAAKT,QAAQO,MAC7D,EACOjD,CACX,CAxFuC,GAyFvCe,OAAOf,mBAAqBA,C","sources":["webpack://pdb-rna-viewer/./lib/index.js","webpack://pdb-rna-viewer/./lib/customEvents.js","webpack://pdb-rna-viewer/./lib/data.js","webpack://pdb-rna-viewer/./lib/uiActions.js","webpack://pdb-rna-viewer/./lib/uiTemplate.js","webpack://pdb-rna-viewer/./node_modules/tslib/tslib.es6.mjs","webpack://pdb-rna-viewer/webpack/bootstrap","webpack://pdb-rna-viewer/webpack/runtime/define property getters","webpack://pdb-rna-viewer/webpack/runtime/hasOwnProperty shorthand","webpack://pdb-rna-viewer/webpack/runtime/make namespace object"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar data_1 = require(\"./data\");\nvar uiTemplate_1 = require(\"./uiTemplate\");\nvar uiActions_1 = require(\"./uiActions\");\nvar customEvents_1 = require(\"./customEvents\");\nvar PdbRnaViewerPlugin = /** @class */ (function () {\n    function PdbRnaViewerPlugin() {\n        this.rvAPI = false;\n        this.dataService = new data_1.DataService();\n    }\n    ;\n    PdbRnaViewerPlugin.prototype.render = function (target, options) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, _b, _c, _d, vm, r2dtjson;\n            var _this = this;\n            return tslib_1.__generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        if (!target || !options.pdbId || !options.chainId || !options.entityId) {\n                            console.log('Invalid plugin input!');\n                            return [2 /*return*/];\n                        }\n                        this.options = options;\n                        _a = this;\n                        return [4 /*yield*/, this.dataService.getApiData(this.options.entityId, this.options.chainId, this.options.pdbId)];\n                    case 1:\n                        _a.apiData = _e.sent();\n                        _b = this;\n                        return [4 /*yield*/, this.dataService.getFR3DData(this.options.pdbId, this.options.chainId)];\n                    case 2:\n                        _b.FR3DData = _e.sent();\n                        _c = this;\n                        return [4 /*yield*/, this.dataService.getFR3DNestedData(this.options.pdbId, this.options.chainId)];\n                    case 3:\n                        _c.FR3DNestedData = _e.sent();\n                        _d = this;\n                        return [4 /*yield*/, data_1.BanNameHelper.getBanName(this.options.pdbId, 'H')];\n                    case 4:\n                        _d.BanName = _e.sent();\n                        this.targetEle = target;\n                        this.uiTemplateService = new uiTemplate_1.UiTemplateService(this.targetEle, this.options, this.apiData);\n                        console.log(\"API\", this.options.pdbId, this.apiData);\n                        if (this.apiData) {\n                            // draw topology\n                            this.uiTemplateService.render(this.apiData, this.FR3DData, this.FR3DNestedData, this.BanName);\n                            // Bind to other PDB Component events\n                            if (this.options.subscribeEvents) {\n                                customEvents_1.CustomEvents.subscribeToComponentEvents(this);\n                            }\n                        }\n                        else {\n                            if (options.rvAPI == true)\n                                this.rvAPI = true;\n                            if (this.rvAPI) {\n                                vm = window.vm;\n                                r2dtjson = vm.json_structures_from_r2dt;\n                                this.apiData = r2dtjson.RNA_2D_json;\n                                this.FR3DData = r2dtjson.RNA_BP_json;\n                                this.FR3DNestedData = r2dtjson.RNA_BP_json;\n                                // console.log('dataUrls', this.apiData);\n                                // console.log('dataUrls', this.FR3DData);\n                                // draw topology\n                                //this.uiTemplateService.render(this.apiData, this.FR3DData, this.FR3DNestedData, this.BanName);\n                            }\n                            ;\n                        }\n                        document.addEventListener(\"PDB.molstar.mouseover\", (function (e) {\n                            if (e.eventData && e.eventData.auth_seq_id && e.eventData.auth_asym_id === _this.options.chainId) {\n                                _this.selectResidue(e.eventData.auth_seq_id);\n                                //this.clearHighlight()\n                            }\n                        })),\n                            document.addEventListener(\"PDB.molstar.mouseout\", (function (e) {\n                                _this.clearSelection(e.eventData.residueNumber);\n                            }));\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PdbRnaViewerPlugin.prototype.selectResidue = function (label_seq_id, color) {\n        uiActions_1.UiActionsService.selectNucleotide(this.options.pdbId, this.options.entityId, label_seq_id, 'mouseover', false, color);\n    };\n    PdbRnaViewerPlugin.prototype.clearSelection = function (label_seq_id) {\n        uiActions_1.UiActionsService.unSelectNucleotide(this.options.pdbId, this.options.entityId, label_seq_id, false);\n    };\n    PdbRnaViewerPlugin.prototype.highlightResidue = function (label_seq_id, color) {\n        uiActions_1.UiActionsService.colorNucleotide(this.options.pdbId, label_seq_id, color, 'highlight');\n    };\n    PdbRnaViewerPlugin.prototype.clearHighlight = function () {\n        uiActions_1.UiActionsService.clearHighlight(this.options.pdbId);\n    };\n    return PdbRnaViewerPlugin;\n}());\nwindow.PdbRnaViewerPlugin = PdbRnaViewerPlugin;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CustomEvents = void 0;\nvar CustomEvents;\n(function (CustomEvents) {\n    function create(eventTypeArr) {\n        var eventObj = {};\n        for (var ei = 0, el = eventTypeArr.length; ei < el; ei++) {\n            var eventType = eventTypeArr[ei];\n            var event_1 = void 0;\n            if (typeof MouseEvent == 'function') {\n                // current standard\n                event_1 = new MouseEvent(eventType, { 'view': window, 'bubbles': true, 'cancelable': true });\n            }\n            else if (typeof document.createEvent == 'function') {\n                // older standard\n                event_1 = document.createEvent('MouseEvents');\n                event_1.initEvent(eventType, true /* bubbles */, true /* cancelable */);\n            }\n            eventObj[eventType] = event_1;\n        }\n        ;\n        return eventObj;\n    }\n    CustomEvents.create = create;\n    function dispatchCustomEvent(event, eventData, targetElement) {\n        event['eventData'] = eventData;\n        targetElement.dispatchEvent(event);\n    }\n    CustomEvents.dispatchCustomEvent = dispatchCustomEvent;\n    function subscribeToComponentEvents(pluginCtx) {\n        document.addEventListener('protvista-click', function (e) {\n            if (typeof e.detail !== 'undefined') {\n                var startResidue = parseInt(e.detail.start);\n                var endResidue = parseInt(e.detail.end);\n                pluginCtx.clearSelection();\n                for (var i = startResidue; i <= endResidue; i++) {\n                    pluginCtx.selectResidue(i, e.detail.color);\n                }\n            }\n        });\n        document.addEventListener('protvista-mouseover', function (e) {\n            if (typeof e.detail !== 'undefined') {\n                var startResidue = parseInt(e.detail.start);\n                var endResidue = parseInt(e.detail.end);\n                pluginCtx.clearHighlight();\n                for (var i = startResidue; i <= endResidue; i++) {\n                    pluginCtx.highlightResidue(i, e.detail.color);\n                }\n            }\n        });\n        document.addEventListener('protvista-mouseout', function (e) {\n            pluginCtx.clearHighlight();\n        });\n        document.addEventListener(\"PDB.molstar.click\", function (e) {\n            if (typeof e.eventData !== 'undefined' && typeof e.eventData.residueNumber !== 'undefined' && e.eventData.auth_asym_id === pluginCtx.options.chainId) {\n                pluginCtx.clearSelection();\n                pluginCtx.selectResidue(e.eventData.residueNumber);\n            }\n        });\n        document.addEventListener(\"PDB.molstar.mouseover\", function (e) {\n            if (typeof e.eventData !== 'undefined' && typeof e.eventData.residueNumber !== 'undefined' && e.eventData.auth_asym_id === pluginCtx.options.chainId) {\n                pluginCtx.clearHighlight();\n                pluginCtx.highlightResidue(e.eventData.residueNumber);\n            }\n        });\n        document.addEventListener(\"PDB.molstar.mouseout\", function () {\n            pluginCtx.clearHighlight();\n        });\n    }\n    CustomEvents.subscribeToComponentEvents = subscribeToComponentEvents;\n})(CustomEvents = exports.CustomEvents || (exports.CustomEvents = {}));\n//# sourceMappingURL=customEvents.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BanNameHelper = exports.DataService = void 0;\nvar tslib_1 = require(\"tslib\");\nvar DataService = /** @class */ (function () {\n    function DataService() {\n    }\n    DataService.prototype.getApiData = function (entityId, chainId, pdbId) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var apiUrl, e_1;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        apiUrl = \"https://www.ebi.ac.uk/pdbe/static/entry/\".concat(pdbId.toLowerCase(), \"_\").concat(entityId, \"_\").concat(chainId, \".json\");\n                        return [4 /*yield*/, fetch(apiUrl)];\n                    case 1: return [4 /*yield*/, (_a.sent()).json()];\n                    case 2: return [2 /*return*/, _a.sent()];\n                    case 3:\n                        e_1 = _a.sent();\n                        this.handleError(e_1);\n                        return [2 /*return*/, void 0];\n                    case 4:\n                        ;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    DataService.prototype.getFR3DData = function (pdbId, chainId) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var csvUrl, e_2;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        csvUrl = \"https://rnacentral.org/api/internal/proxy?url=http://rna.bgsu.edu/rna3dhub/rest/getChainSequenceBasePairs?pdb_id=\".concat(pdbId.toLowerCase(), \"&chain=\").concat(chainId, \"&only_nested=False\");\n                        return [4 /*yield*/, fetch(csvUrl)];\n                    case 1: return [4 /*yield*/, (_a.sent()).json()];\n                    case 2: \n                    //const csvUrl = `http://rna.bgsu.edu/rna3dhub/rest/getSequenceBasePairs?pdb_id=${pdbId.toLowerCase()}&chain=${chainId}`\n                    //const csvUrl = `https://rnacentral.org/api/internal/proxy?url=http://rna.bgsu.edu/rna3dhub/rest/getSequenceBasePairs?pdb_id=${pdbId.toLowerCase()}&chain=${chainId}&only_nested=True`\n                    //const csvUrl = `http://rna.bgsu.edu/rna3dhub/pdb/${pdbId.toLowerCase()}/interactions/fr3d/basepairs/csv`;\n                    return [2 /*return*/, _a.sent()];\n                    case 3:\n                        e_2 = _a.sent();\n                        this.handleFR3DError(e_2);\n                        return [2 /*return*/, void 0];\n                    case 4:\n                        ;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    DataService.prototype.getFR3DNestedData = function (pdbId, chainId) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var csvUrl, e_3;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        csvUrl = \"https://rnacentral.org/api/internal/proxy?url=http://rna.bgsu.edu/rna3dhub/rest/getChainSequenceBasePairs?pdb_id=\".concat(pdbId.toLowerCase(), \"&chain=\").concat(chainId, \"&only_nested=True\");\n                        return [4 /*yield*/, fetch(csvUrl)];\n                    case 1: return [4 /*yield*/, (_a.sent()).json()];\n                    case 2: \n                    //const csvUrl = `https://rnacentral.org/api/internal/proxy?url=http://rna.bgsu.edu/rna3dhub/rest/getSequenceBasePairs?pdb_id=${pdbId.toLowerCase()}&chain=${chainId}&only_nested=True`\n                    //const csvUrl = `http://rna.bgsu.edu/rna3dhub/pdb/${pdbId.toLowerCase()}/interactions/fr3d/basepairs/csv`;\n                    return [2 /*return*/, _a.sent()];\n                    case 3:\n                        e_3 = _a.sent();\n                        this.handleFR3DError(e_3);\n                        return [2 /*return*/, void 0];\n                    case 4:\n                        ;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    DataService.prototype.handleError = function (e) {\n        console.log(\"RNA topology data not available!\", e);\n    };\n    DataService.prototype.handleFR3DError = function (e) {\n        console.log(\"FR3D mapping data not available!\", e);\n    };\n    return DataService;\n}());\nexports.DataService = DataService;\nvar BanNameHelper = /** @class */ (function () {\n    function BanNameHelper() {\n    }\n    BanNameHelper.getBanName = function (pdbId, PchainId) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var apiUrl, e_4;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        apiUrl = \"https://api.ribosome.xyz/neo4j/get_banclass_for_chain/?pdbid=\".concat(pdbId, \"&auth_asym_id=\").concat(PchainId, \"&format=json\");\n                        return [4 /*yield*/, fetch(apiUrl)];\n                    case 1: return [4 /*yield*/, (_a.sent()).json()];\n                    case 2: return [2 /*return*/, _a.sent()];\n                    case 3:\n                        e_4 = _a.sent();\n                        //console.log(`Ban naming is not available!`, e);\n                        return [2 /*return*/, void 0];\n                    case 4:\n                        ;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return BanNameHelper;\n}());\nexports.BanNameHelper = BanNameHelper;\n//# sourceMappingURL=data.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UiActionsService = void 0;\nvar customEvents_1 = require(\"./customEvents\");\nvar UiActionsService = /** @class */ (function () {\n    function UiActionsService(pdbId) {\n        this.pdbId = pdbId;\n    }\n    UiActionsService.prototype.applyButtonActions = function () {\n        var _this = this;\n        var svgEle = d3.select('.rnaTopoSvg');\n        // initialize SVG zoom behaviour and remove mouse wheel zoom events\n        var zoom1 = d3.zoom().on('zoom', function () {\n            d3.select(\".rnaTopoSvg_\".concat(_this.pdbId)).attr(\"transform\", d3.event.transform);\n            d3.select(\".rnaTopoSvgHighlight_\".concat(_this.pdbId)).attr(\"transform\", d3.event.transform);\n            d3.select(\".rnaTopoSvgSelection_\".concat(_this.pdbId)).attr(\"transform\", d3.event.transform);\n        });\n        d3.select(\".rnaTopoSvg\").call(zoom1)\n            .on('dblclick.zoom', null)\n            .on('wheel.zoom', null)\n            .on('mousewheel.zoom', null);\n        // zoom-in button behaviour\n        d3.select(\"#rnaTopologyZoomIn-\".concat(this.pdbId))\n            .on(\"click\", function () {\n            d3.event.stopPropagation();\n            zoom1.scaleBy(svgEle.transition().duration(300), 1.2);\n        });\n        // zoom-out button behaviour\n        d3.select(\"#rnaTopologyZoomOut-\".concat(this.pdbId))\n            .on(\"click\", function () {\n            d3.event.stopPropagation();\n            var rnaTopoSvg = d3.select(\".rnaTopoSvg_\".concat(_this.pdbId));\n            var transformValue = rnaTopoSvg._groups[0][0].getAttribute('transform');\n            if (transformValue && transformValue !== '') {\n                if (transformValue === null)\n                    return;\n                var transformValMatch = +transformValue.match(/.+scale\\((.*)\\)/)[1];\n                if (transformValMatch <= 1 || (transformValMatch - 0.3 <= 1)) {\n                    svgEle.transition().duration(300).call(zoom1.transform, d3.zoomIdentity);\n                    return;\n                }\n            }\n            zoom1.scaleBy(d3.select(\".rnaTopoSvg\").transition().duration(300), 0.8);\n        });\n        // reset button behaviour\n        d3.select(\"#rnaTopologyReset-\".concat(this.pdbId))\n            .on(\"click\", function () {\n            d3.event.stopPropagation();\n            svgEle.transition().duration(300).call(zoom1.transform, d3.zoomIdentity);\n        });\n        // selection and highlight reset on canvas click\n        d3.select(\".pdb-rna-view-container-\".concat(this.pdbId))\n            .on(\"click\", function () {\n            d3.event.stopPropagation();\n            UiActionsService.clearHighlight(_this.pdbId);\n            UiActionsService.clearSelection(_this.pdbId);\n        });\n    };\n    UiActionsService.unSelectNucleotide = function (pdbId, entityId, label_seq_id, isUnobserved, event, color) {\n        event === null || event === void 0 ? void 0 : event.stopImmediatePropagation();\n        UiActionsService.clearHighlight(pdbId);\n        var ttEle = document.getElementById(\"\".concat(pdbId, \"-rnaTopologyTooltip\"));\n        if (ttEle) {\n            ttEle.style.display = 'none';\n        }\n        if (!isUnobserved) {\n            if (label_seq_id == undefined) {\n                label_seq_id = this.lastSelected;\n            }\n            if (label_seq_id > -1) {\n                var evData = { pdbId: pdbId, label_seq_id: label_seq_id, entityId: entityId };\n                var textElement = document.querySelector(\".rnaview_\".concat(pdbId, \"_\").concat(label_seq_id));\n                if (textElement) {\n                    customEvents_1.CustomEvents.dispatchCustomEvent(UiActionsService.pdbevents['PDB.RNA.viewer.mouseout'], evData, textElement);\n                }\n            }\n        }\n    };\n    UiActionsService.showCheckboxes = function () {\n        var checkboxes = document.getElementById(\"checkboxes\");\n        if (!this.expanded) {\n            checkboxes.style.display = \"block\";\n            this.expanded = true;\n        }\n        else {\n            checkboxes.style.display = \"none\";\n            this.expanded = false;\n        }\n    };\n    UiActionsService.clearHighlight = function (pdbId) {\n        if (this.selected > -1) {\n            var nucleotide = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"rnaviewEle rnaviewEle_\".concat(pdbId, \" rnaview_\").concat(pdbId, \"_\").concat(this.selected))[0];\n            if (this.selectedColor && nucleotide) {\n                if (nucleotide.nodeName == 'text') {\n                    nucleotide.setAttribute(\"fill\", UiActionsService.selectedColor);\n                }\n                else {\n                    nucleotide.setAttribute(\"stroke\", UiActionsService.selectedColor);\n                }\n            }\n            else if (nucleotide) {\n                if (nucleotide.nodeName == 'text') {\n                    nucleotide.setAttribute(\"fill\", \"#323232\");\n                }\n                else {\n                    nucleotide.setAttribute(\"stroke\", \"#323232\");\n                }\n            }\n            this.selected = -1;\n        }\n        //document.querySelector(`.rnaTopoSvgHighlight_${pdbId}`)!.innerHTML = \"\";\n    };\n    UiActionsService.clearSelection = function (pdbId) {\n        document.querySelector(\".rnaTopoSvgSelection_\".concat(pdbId)) ? document.querySelector(\".rnaTopoSvgSelection_\".concat(pdbId)).innerHTML = \"\" : null;\n    };\n    UiActionsService.showTooltip = function (evt, text, path, color, fill) {\n        var tooltip = document.getElementById(\"tooltip\");\n        tooltip.id = \"tooltip\";\n        tooltip.innerHTML = text;\n        tooltip.style.display = \"block\";\n        tooltip.style.left = evt.layerX + 'px';\n        tooltip.style.top = evt.layerY + 'px';\n        UiActionsService.selectedBPColor = color;\n        UiActionsService.fillBPColor = fill;\n        var node = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(path)[0];\n        if (node.nodeName != 'text') {\n            node.setAttribute(\"stroke\", \"orange\");\n        }\n        node.setAttribute(\"fill\", \"orange\");\n    };\n    UiActionsService.hideTooltip = function (path) {\n        var tooltip = document.getElementById(\"tooltip\");\n        tooltip.style.display = \"none\";\n        var node = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(path)[0];\n        if (node.nodeName != 'text') {\n            node.setAttribute(\"stroke\", \"\".concat(UiActionsService.selectedBPColor));\n        }\n        node.setAttribute(\"fill\", \"\".concat(UiActionsService.fillBPColor));\n    };\n    UiActionsService.drawCircle = function (index, color, pdbId) {\n        var circle = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"circle_\".concat(pdbId, \"_\").concat(index))[0];\n        var nucleotide = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"rnaviewEle rnaviewEle_\".concat(pdbId, \" rnaview_\").concat(pdbId, \"_\").concat(index))[0];\n        var BBox = nucleotide.getBBox();\n        var nx = (BBox.x + BBox.width / 2);\n        var ny = (BBox.y + BBox.height / 2);\n        circle.setAttribute(\"cx\", nx);\n        circle.setAttribute(\"cy\", ny);\n        circle.setAttribute(\"stroke\", \"\".concat(color));\n        circle.setAttribute(\"fill\", \"\".concat(color));\n        circle.style.display = \"block\";\n    };\n    UiActionsService.pdbevents = customEvents_1.CustomEvents.create(['PDB.RNA.viewer.click', 'PDB.RNA.viewer.mouseover', 'PDB.RNA.viewer.mouseout']);\n    UiActionsService.lastSelected = -1;\n    UiActionsService.selected = -1;\n    UiActionsService.selectedPath = '';\n    UiActionsService.selectedBPColor = '';\n    UiActionsService.fillBPColor = '';\n    UiActionsService.selectedColor = '';\n    UiActionsService.expanded = false;\n    UiActionsService.selectNucleotide = function (pdbId, entityId, label_seq_id, eventType, isUnobserved, residue, event, color) {\n        event === null || event === void 0 ? void 0 : event.stopImmediatePropagation();\n        if (document.querySelector(\"svg.rnaTopoSvg\")) {\n            UiActionsService.clearHighlight(pdbId);\n            UiActionsService.colorNucleotide(pdbId, label_seq_id, color, 'highlight');\n            UiActionsService.selected = label_seq_id;\n            UiActionsService.lastSelected = label_seq_id;\n            var ttEle = document.getElementById(\"\".concat(pdbId, \"-rnaTopologyTooltip\"));\n            ttEle.style.display = 'inline';\n            ttEle.innerHTML = \"<strong>\".concat(isUnobserved ? 'Unobserved ' : '', \"Residue \").concat(residue ? residue : '', \" \").concat(label_seq_id, \"</strong>\");\n            if (!isUnobserved) {\n                var eventName = (eventType === 'click') ? 'PDB.RNA.viewer.click' : 'PDB.RNA.viewer.mouseover';\n                var evData = { pdbId: pdbId, label_seq_id: label_seq_id, entityId: entityId };\n                var textElement = document.querySelector(\".rnaview_\".concat(pdbId, \"_\").concat(label_seq_id));\n                if (textElement) {\n                    customEvents_1.CustomEvents.dispatchCustomEvent(UiActionsService.pdbevents[eventName], evData, textElement);\n                }\n            }\n        }\n    };\n    UiActionsService.colorNucleotide = function (pdbId, label_seq_id, color, type, shape) {\n        //const textElement: any = document.querySelector(`.rnaview_${pdbId}_${label_seq_id}`);\n        //const textEleStrokeWidth = parseInt(textElement.getAttribute('stroke-width'));\n        var strokeColor = color || 'orange';\n        //const svgClassPrefix = (type === 'highlight') ? 'rnaTopoSvgHighlight' : 'rnaTopoSvgSelection';\n        //const highlightSvg = document.querySelector(`.${svgClassPrefix}_${pdbId}`);\n        /*\n        const newTextEle = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        newTextEle.setAttribute('stroke-width', (textEleStrokeWidth * 3).toString());\n        newTextEle.setAttribute('stroke', strokeColor);\n        newTextEle.setAttribute('fill', strokeColor);\n        highlightSvg!.appendChild(newTextEle);\n        */\n        if (shape == 'circle') {\n            var circle = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"circle_\".concat(pdbId, \"_\").concat(label_seq_id))[0];\n            if (type == 'highlight') {\n                if (circle.getAttribute(\"stroke\")) {\n                    UiActionsService.selectedColor = circle.getAttribute(\"stroke\");\n                }\n            }\n            if (circle) {\n                circle.setAttribute(\"stroke\", \"\".concat(color));\n                circle.setAttribute(\"fill\", \"\".concat(color));\n                circle.style.display = \"block\";\n            }\n        }\n        var nucleotide = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"rnaviewEle rnaviewEle_\".concat(pdbId, \" rnaview_\").concat(pdbId, \"_\").concat(label_seq_id))[0];\n        if (nucleotide) {\n            if (nucleotide.nodeName == 'path') {\n                if (type == 'highlight') {\n                    if (nucleotide.getAttribute(\"stroke\")) {\n                        UiActionsService.selectedColor = nucleotide.getAttribute(\"stroke\");\n                    }\n                    else {\n                        UiActionsService.selectedColor = \"#323232\";\n                    }\n                }\n                nucleotide.setAttribute(\"stroke\", strokeColor);\n            }\n            else if (nucleotide.nodeName == 'text') {\n                if (type == 'highlight') {\n                    if (nucleotide.getAttribute(\"fill\")) {\n                        UiActionsService.selectedColor = nucleotide.getAttribute(\"fill\");\n                    }\n                    else {\n                        UiActionsService.selectedColor = \"#323232\";\n                    }\n                }\n                nucleotide.setAttribute(\"fill\", strokeColor);\n            }\n        }\n    };\n    return UiActionsService;\n}());\nexports.UiActionsService = UiActionsService;\nwindow.UiActionsService = UiActionsService;\n//# sourceMappingURL=uiActions.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UiTemplateService = void 0;\nvar uiActions_1 = require(\"./uiActions\");\nvar data_1 = require(\"./data\");\nvar UiTemplateService = /** @class */ (function () {\n    function UiTemplateService(containerElement, pluginOptions, apiData) {\n        var _this_1 = this;\n        this.selectSections_RV1 = window.selectSections_RV1;\n        this.aaPropertyConstants = window.aaPropertyConstants;\n        this.mapped_aa_properties = window.mapped_aa_properties;\n        this.aaColorData = window.aaColorData;\n        this.parsePVData = window.parsePVData;\n        this.getEntropyAnnotations = window.getEntropyAnnotations;\n        this.getTWCAnnotations = window.getTWCAnnotations;\n        this.getCustomAnnotations = window.getCustomAnnotations;\n        this.getAnnotationArray = window.getAnnotationArray;\n        this.rv3VUEcomponent = window.vm;\n        this.locations = new Map();\n        this.menuStyle = 'position:relative;z-index:10;height:7%;width:500px;line-height:7%;background-color:#696969;padding: 0 10px;font-size:16px; color: #efefef;display:inline-block;';\n        this.pathStrs = [];\n        this.nucleotideStrs = [];\n        this.circleStrs = [];\n        this.baseStrs = new Map();\n        this.nestedBaseStrs = new Map();\n        this.basePairIDs = [];\n        this.mappingValue = '';\n        this.showAllNucleotides = false;\n        this.mouseOverMap = new Map();\n        this.eventMap = new Map();\n        this.toolTips = new Map();\n        this.selectSectionsTest = [];\n        this.defaultColours = {\n            domainSelection: 'rgb(255,0,0)',\n            mouseOver: 'rgb(105,105,105)',\n            borderColor: 'rgb(0,0,0)',\n            qualityGreen: 'rgb(0,182.85714285714286,0)',\n            qualityRed: 'rgb(291.42857142857144,0,0)',\n            qualityYellow: 'rgb(364.2857142857143,364.2857142857143,75.71428571428572)',\n            qualityRiboVision: \"rgb(203,203,203)\",\n            qualityOrange: 'rgb(291.42857142857144,121.42857142857143,0)',\n            qualityBlank: 'rgb(255,255,255)'\n        };\n        this.mapped_chains = new Set();\n        this.mapped_modifications = new Set();\n        this.drawCircle = function (pdbId, i, color) {\n            var circle = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"circle_\".concat(pdbId, \"_\").concat(i))[0];\n            //const nucleotide = <SVGSVGElement>document.querySelector(`svg.rnaTopoSvg`)!.getElementsByClassName(`rnaviewEle rnaviewEle_${pdbId} rnaview_${pdbId}_${i}`)[0]\n            //const BBox = nucleotide.getBBox()\n            //const nx = `${BBox.x + BBox.width/2}`\n            //const ny = `${BBox.y + BBox.height/2}`\n            //circle.setAttribute(\"cx\", nx)\n            //circle.setAttribute(\"cy\", ny)\n            circle.setAttribute(\"stroke\", \"\".concat(color));\n            circle.setAttribute(\"fill\", \"\".concat(color));\n            circle.style.display = \"block\";\n        };\n        this.colorMap = function () {\n            var selectBoxEle = _this_1.containerElement.querySelector('.mappingSelectbox');\n            var selectedValue = parseInt(selectBoxEle.value);\n            if (selectedValue) {\n                var selectedDomain = _this_1.domainTypes[selectedValue];\n                if (selectedDomain.data) {\n                    selectedDomain.data.forEach(function (val, i) {\n                        if (val != undefined && val.color != undefined) {\n                            if (val.color.indexOf('NaN') < 0) {\n                                //this.drawCircle(this.pluginOptions.pdbId, val.start, val.color);\n                                //UiActionsService.colorNucleotide(this.pluginOptions.pdbId, val.start, val.color);\n                                uiActions_1.UiActionsService.colorNucleotide(_this_1.pluginOptions.pdbId, val.start, val.color, undefined, _this_1.mappingValue);\n                            }\n                        }\n                    });\n                }\n            }\n            else {\n                var tempDomain = _this_1.domainTypes[1];\n                if (tempDomain.data) {\n                    tempDomain.data.forEach(function (val, i) {\n                        if (val != undefined && val.start != undefined) {\n                            uiActions_1.UiActionsService.colorNucleotide(_this_1.pluginOptions.pdbId, val.start, 'rgb(0,0,0)', undefined, _this_1.mappingValue);\n                        }\n                    });\n                }\n            }\n        };\n        this.colorMapHelper = function () {\n            var mappingDropdown = _this_1.containerElement.querySelector('.mappingSelectbox');\n            var num = +mappingDropdown.value;\n            document.getElementById('selectColorMappingProps').value = mappingDropdown.options[num].text;\n            _this_1.rv3VUEcomponent.selected_property = mappingDropdown.options[num].text;\n        };\n        this.colorMapContacts = function () {\n            if (_this_1.rv3VUEcomponent.pchainid.length > 0 && _this_1.rv3VUEcomponent.selected_property != \"Select data\") {\n                _this_1.rv3VUEcomponent.selected_property = \"Select data\";\n            }\n            _this_1.mapped_chains.forEach(function (val) {\n                if (!_this_1.rv3VUEcomponent.pchainid.includes(val)) {\n                    for (var i in _this_1.rv3VUEcomponent.protein_contacts[val]) {\n                        uiActions_1.UiActionsService.colorNucleotide(_this_1.pluginOptions.pdbId, _this_1.rv3VUEcomponent.protein_contacts[val][i], '#323232', undefined, _this_1.mappingValue);\n                        var nPath = \"rnaviewEle rnaviewEle_\".concat(_this_1.pluginOptions.pdbId, \" rnaview_\").concat(_this_1.pluginOptions.pdbId, \"_\").concat(_this_1.rv3VUEcomponent.protein_contacts[val][i]);\n                        var cPath = \"circle_\".concat(_this_1.pluginOptions.pdbId, \"_\").concat(_this_1.rv3VUEcomponent.protein_contacts[val][i]);\n                        if (document.getElementsByClassName(nPath).length > 0) {\n                            document.getElementsByClassName(nPath)[0].setAttribute('onmouseover', document.getElementsByClassName(nPath)[0].getAttribute('onmouseover').split(';')[0]);\n                            document.getElementsByClassName(nPath)[0].setAttribute('onmouseout', document.getElementsByClassName(nPath)[0].getAttribute('onmouseout').split(';')[0]);\n                            //document.getElementsByClassName(nPath)[0].removeEventListener('mouseover', this.mouseOverMap.get(nPath))\n                            //document.getElementsByClassName(nPath)[0].removeEventListener('mouseout',this.eventMap.get(nPath))\n                        }\n                        if (document.getElementsByClassName(cPath).length > 0) {\n                            document.getElementsByClassName(cPath)[0].setAttribute('onmouseover', document.getElementsByClassName(cPath)[0].getAttribute('onmouseover').split(';')[0]);\n                            document.getElementsByClassName(cPath)[0].setAttribute('onmouseout', document.getElementsByClassName(cPath)[0].getAttribute('onmouseout').split(';')[0]);\n                            //document.getElementsByClassName(cPath)[0].removeEventListener('mouseover', this.mouseOverMap.get(cPath))\n                            //document.getElementsByClassName(cPath)[0].removeEventListener('mouseout',this.eventMap.get(cPath))\n                        }\n                        /*\n                        var circle = (<any>document.querySelector(`svg.rnaTopoSvg`))!.getElementsByClassName(cPath)[0];\n                        if(circle) {\n                            circle.style.display=\"none\";\n                        }*/\n                    }\n                    _this_1.mapped_chains.delete(val);\n                }\n            });\n            for (var val in _this_1.rv3VUEcomponent.pchainid) {\n                var chain = _this_1.rv3VUEcomponent.pchainid[val];\n                for (var i in _this_1.rv3VUEcomponent.protein_contacts[chain]) {\n                    uiActions_1.UiActionsService.colorNucleotide(_this_1.pluginOptions.pdbId, _this_1.rv3VUEcomponent.protein_contacts[chain][i], _this_1.rv3VUEcomponent.proteinColorMap.get(chain), undefined, _this_1.mappingValue);\n                }\n                _this_1.mapped_chains.add(chain);\n            }\n            _this_1.addEvents(_this_1.apiData, data_1.BanNameHelper.getBanName(_this_1.pluginOptions.pdbId, ''));\n        };\n        this.colorMapModifications = function () {\n            _this_1.mapped_modifications.forEach(function (val) {\n                if (!_this_1.rv3VUEcomponent.modifications.includes(val)) {\n                    for (var i in _this_1.rv3VUEcomponent.modified_residues.get(val)) {\n                        uiActions_1.UiActionsService.colorNucleotide(_this_1.pluginOptions.pdbId, _this_1.rv3VUEcomponent.modified_residues.get(val)[i], '#323232', undefined, _this_1.mappingValue);\n                        var nPath = \"rnaviewEle rnaviewEle_\".concat(_this_1.pluginOptions.pdbId, \" rnaview_\").concat(_this_1.pluginOptions.pdbId, \"_\").concat(_this_1.rv3VUEcomponent.modified_residues.get(val)[i]);\n                        var cPath = \"circle_\".concat(_this_1.pluginOptions.pdbId, \"_\").concat(_this_1.rv3VUEcomponent.modified_residues.get(val)[i]);\n                        if (document.getElementsByClassName(nPath).length > 0) {\n                            document.getElementsByClassName(nPath)[0].setAttribute('onmouseover', document.getElementsByClassName(nPath)[0].getAttribute('onmouseover').split(';')[0]);\n                            document.getElementsByClassName(nPath)[0].setAttribute('onmouseout', document.getElementsByClassName(nPath)[0].getAttribute('onmouseout').split(';')[0]);\n                            //document.getElementsByClassName(nPath)[0].removeEventListener('mouseover', this.mouseOverMap.get(nPath))\n                            //document.getElementsByClassName(nPath)[0].removeEventListener('mouseout',this.eventMap.get(nPath))\n                        }\n                        if (document.getElementsByClassName(cPath).length > 0) {\n                            document.getElementsByClassName(cPath)[0].setAttribute('onmouseover', document.getElementsByClassName(cPath)[0].getAttribute('onmouseover').split(';')[0]);\n                            document.getElementsByClassName(cPath)[0].setAttribute('onmouseout', document.getElementsByClassName(cPath)[0].getAttribute('onmouseout').split(';')[0]);\n                            //document.getElementsByClassName(cPath)[0].removeEventListener('mouseover', this.mouseOverMap.get(cPath))\n                            //document.getElementsByClassName(cPath)[0].removeEventListener('mouseout',this.eventMap.get(cPath))\n                        }\n                        /*\n                        var circle = (<any>document.querySelector(`svg.rnaTopoSvg`))!.getElementsByClassName(cPath)[0];\n                        if(circle) {\n                            circle.style.display=\"none\";\n                        } */\n                    }\n                    _this_1.mapped_modifications.delete(val);\n                }\n            });\n            for (var val in _this_1.rv3VUEcomponent.modifications) {\n                var mod = _this_1.rv3VUEcomponent.modifications[val];\n                for (var i in _this_1.rv3VUEcomponent.modified_residues.get(mod)) {\n                    uiActions_1.UiActionsService.colorNucleotide(_this_1.pluginOptions.pdbId, _this_1.rv3VUEcomponent.modified_residues.get(mod)[i], _this_1.rv3VUEcomponent.modifiedColorMap.get(mod), undefined, _this_1.mappingValue);\n                }\n                _this_1.mapped_modifications.add(mod);\n            }\n            _this_1.addEvents(_this_1.apiData);\n        };\n        this.containerElement = containerElement;\n        this.pluginOptions = pluginOptions;\n        this.apiData = apiData;\n        this.uiActionsService = new uiActions_1.UiActionsService(this.pluginOptions.pdbId);\n    }\n    UiTemplateService.prototype.render = function (apiData, FR3DData, FR3DNestedData, BanName) {\n        this.containerElement.innerHTML =\n            \"<div class=\\\"pdb-rna-view-container pdb-rna-view-container-\".concat(this.pluginOptions.pdbId, \"\\\">\\n            \").concat(this.svgTemplate(apiData, FR3DData, FR3DNestedData), \"\\n            \").concat(this.title(), \"\\n            \").concat(this.tooltip(), \"\\n            \").concat(this.actionButtons(), \"\\n        </div>\\n        <div style=\\\"\").concat(this.menuStyle, \"\\\">\\n                <div class=\\\"menuOptions\\\" style=\\\"width:95%;float:center;display:inline-block;\\\">\\n                    <form>\\n                    <input type=\\\"checkbox\\\" id=\\\"nestedBP\\\" name=\\\"nestedBP\\\" style=\\\"width:5%; display: inline-block; float: left;>\\n                    <label for=\\\"nestedBP\\\" style=\\\"width:20%; display: inline-block; float: left;\\\"> Only nested BPs</label>\\n                    <select class=\\\"menuSelectbox\\\" style=\\\"width:20%; display: inline-block;\\\"><option value=\\\"\\\">Nucleotides</option></select>\\n                    <select class=\\\"mappingSelectbox\\\" style=\\\"width:20%; display: inline-block;\\\"><option value=\\\"\\\">Mapping</option></select>\\n                    <div class=\\\"multiselect\\\">\\n                        <div class=\\\"selectBox\\\" onclick=\\\"UiActionsService.showCheckboxes()\\\" style=\\\"display:inline-block;float:right;width:25%\\\">\\n                            <select id=\\\"basePairingSelectElement\\\">\\n                                <option>Base Pairings</option>\\n                            </select>\\n                            <div class=\\\"overSelect\\\"></div>\\n                        </div>\\n                        <div id=\\\"checkboxes\\\">\\n                        </div>\\n                    </div>\\n                    </form>\\n                </div>\\n        </div>\\n        \");\n        //this.getJSON(apiData)\n        //this.fixOverlaps(apiData)\n        this.createModeDropdown();\n        this.createBPDropdown();\n        this.uiActionsService.applyButtonActions();\n        this.addEvents(apiData, BanName);\n        document.querySelector(\".saveSVG\").addEventListener(\"click\", this.saveSVG.bind(this));\n        this.getAnnotationFromRibovision(this.mapped_aa_properties);\n        //this.rv3VUEcomponent.topology_loaded=true;\n    };\n    UiTemplateService.prototype.fixOverlaps = function (apiData) {\n        var _this_1 = this;\n        var svgEle = document.querySelector(\"svg.rnaTopoSvg.rnaTopoSvg_\".concat(this.pluginOptions.pdbId));\n        var xAdjust = 0;\n        var yAdjust = 0;\n        apiData.sequence.split('').forEach(function (char, i) {\n            if (i === 0 || i === (apiData.sequence.length)) {\n                return;\n            }\n            var ele = svgEle.getElementsByClassName(\"rnaviewEle rnaviewEle_\".concat(_this_1.pluginOptions.pdbId, \" rnaview_\").concat(_this_1.pluginOptions.pdbId, \"_\").concat(apiData.label_seq_ids[i]))[0];\n            var nextEle = svgEle.getElementsByClassName(\"rnaviewEle rnaviewEle_\".concat(_this_1.pluginOptions.pdbId, \" rnaview_\").concat(_this_1.pluginOptions.pdbId, \"_\").concat(apiData.label_seq_ids[i + 1]))[0];\n            nextEle.setAttribute(\"y\", Number(nextEle.getAttribute(\"y\")) + yAdjust);\n            nextEle.setAttribute(\"x\", Number(nextEle.getAttribute(\"x\")) + xAdjust);\n            var distances = _this_1.getIntersections(ele.getBBox(), nextEle.getBBox());\n            if (distances) {\n                var lowest = 0;\n                for (var j = 1; j < distances.length; j++) {\n                    if (distances[j] < distances[lowest])\n                        lowest = j;\n                }\n                if (lowest === 1) {\n                    nextEle.setAttribute(\"y\", Number(nextEle.getAttribute(\"y\")) - Number(distances[1]));\n                    yAdjust = yAdjust - Number(distances[1]);\n                }\n                else if (lowest === 3) {\n                    nextEle.setAttribute(\"y\", Number(nextEle.getAttribute(\"y\")) + Number(distances[3]));\n                    yAdjust = yAdjust + Number(distances[3]);\n                }\n                else if (lowest === 0) {\n                    nextEle.setAttribute(\"x\", Number(nextEle.getAttribute(\"x\")) - Number(distances[0]));\n                    xAdjust = xAdjust - Number(distances[0]);\n                }\n                else if (lowest === 2) {\n                    nextEle.setAttribute(\"x\", Number(nextEle.getAttribute(\"x\")) + Number(distances[2]));\n                    xAdjust = xAdjust + Number(distances[2]);\n                }\n            }\n        });\n    };\n    UiTemplateService.prototype.changeBP = function (val, flag) {\n        var _this_1 = this;\n        if (flag === void 0) { flag = undefined; }\n        this.displayBaseStrs = '';\n        this.displayNestedBaseStrs = '';\n        var allBP = this.containerElement.querySelector('#Checkbox_All').checked;\n        if ((val == 'All')) {\n            this.baseStrs.forEach(function (value, key) {\n                _this_1.baseStrs.set(key, [allBP, value[1]]);\n                _this_1.nestedBaseStrs.set(key, [allBP, _this_1.nestedBaseStrs.get(key)[1]]);\n                document.getElementById(\"Checkbox_\".concat(key)).checked = allBP;\n                if (allBP) {\n                    _this_1.displayBaseStrs += value[1].join('');\n                    _this_1.displayNestedBaseStrs += _this_1.nestedBaseStrs.get(key)[1].join('');\n                }\n            });\n        }\n        else {\n            if (flag !== null && flag !== void 0 ? flag : this.baseStrs.get(val)[0]) {\n                this.baseStrs.set(val, [false, this.baseStrs.get(val)[1]]);\n                this.nestedBaseStrs.set(val, [false, this.nestedBaseStrs.get(val)[1]]);\n            }\n            else {\n                this.baseStrs.set(val, [true, this.baseStrs.get(val)[1]]);\n                this.nestedBaseStrs.set(val, [true, this.nestedBaseStrs.get(val)[1]]);\n            }\n            this.baseStrs.forEach(function (value, key) {\n                if (value[0]) {\n                    _this_1.displayBaseStrs += value[1].join('');\n                    _this_1.displayNestedBaseStrs += _this_1.nestedBaseStrs.get(key)[1].join('');\n                }\n            });\n        }\n        this.PathOrNucleotide();\n    };\n    UiTemplateService.prototype.createBPDropdown = function () {\n        var _this_1 = this;\n        var _a;\n        if (this.baseStrs.size > 0) {\n            var optionList_1 = '<table><tr><td><label for = \"Checkbox_All\"><input type=\"checkbox\" id=\"Checkbox_All\" /> All</label></td>';\n            var i = 1;\n            this.baseStrs.forEach(function (value, key) {\n                if (i % 2 == 0) {\n                    optionList_1 = \"\".concat(optionList_1, \"<tr>\");\n                }\n                if (key == 'cWW') {\n                    optionList_1 = \"\".concat(optionList_1, \"<td><label for = \\\"Checkbox_\").concat(key, \"\\\"><input type=\\\"checkbox\\\" id=\\\"Checkbox_\").concat(key, \"\\\" checked = true/> \").concat(key, \"</label></td>\");\n                }\n                else {\n                    optionList_1 = \"\".concat(optionList_1, \"<td><label for = \\\"Checkbox_\").concat(key, \"\\\"><input type=\\\"checkbox\\\" id=\\\"Checkbox_\").concat(key, \"\\\"/> \").concat(key, \"</label></td>\");\n                }\n                if (i % 2 == 1) {\n                    optionList_1 = \"\".concat(optionList_1, \"</tr>\");\n                }\n                i += 1;\n            });\n            optionList_1 = \"\".concat(optionList_1, \"</table>\");\n            var selectBoxEle = document.getElementById('checkboxes');\n            selectBoxEle.innerHTML = optionList_1;\n            (_a = document.getElementById(\"Checkbox_All\")) === null || _a === void 0 ? void 0 : _a.addEventListener(\"change\", this.changeBP.bind(this, \"All\"));\n            this.baseStrs.forEach(function (value, key) {\n                var _a;\n                (_a = document.getElementById(\"Checkbox_\".concat(key))) === null || _a === void 0 ? void 0 : _a.addEventListener(\"change\", _this_1.changeBP.bind(_this_1, key));\n            });\n            //selectBoxEle!.addEventListener(\"change\", this.ChangeBP.bind(this));\n        }\n    };\n    UiTemplateService.prototype.createModeDropdown = function () {\n        var optionList = \"<option value=\\\"0\\\">Nucleotides</option><option value=\\\"1\\\">Path</option><option value=\\\"2\\\">Circle</option>\";\n        var selectBoxEle = this.containerElement.querySelector('.menuSelectbox');\n        selectBoxEle.innerHTML = optionList;\n        console.log(this.PathOrNucleotide.bind(this));\n        selectBoxEle.addEventListener(\"change\", this.PathOrNucleotide.bind(this));\n        var nestedBP = this.containerElement.querySelector('#nestedBP');\n        nestedBP.addEventListener(\"change\", this.PathOrNucleotide.bind(this));\n    };\n    UiTemplateService.prototype.createDomainDropdown = function () {\n        this.selectedDomain = this.domainTypes[0];\n        if (this.domainTypes.length > 0) {\n            var optionList_2 = '';\n            this.domainTypes.forEach(function (opt, i) {\n                optionList_2 = \"\".concat(optionList_2, \"<option value=\\\"\").concat(i, \"\\\">\").concat(opt.label, \"</option>\");\n            });\n            var selectBoxEle = this.containerElement.querySelector('.mappingSelectbox');\n            selectBoxEle.innerHTML = optionList_2;\n            selectBoxEle.addEventListener(\"change\", this.colorMapHelper.bind(this));\n            //selectBoxEle!.addEventListener(\"change\", this.updateProperty.bind(this));\n            //const resetIconEle = this.containerElement.querySelector('.resetIcon');\n            //resetIconEle.addEventListener(\"click\", this.resetDisplay.bind(this));\n        }\n        else {\n            this.containerElement.querySelector('.menuOptions').style.display = 'none';\n        }\n    };\n    UiTemplateService.prototype.create2D3DAnnotations = function (name, residueDetails, TWCrgbMap, TWCData, mapped_aa_properties, chain_start, chain_end) {\n        var _this = this;\n        TWCData.forEach(function (value, index) {\n            if (chain_start <= index && index <= chain_end) {\n                var rgb_color = TWCrgbMap.get(index);\n                window.selectSections_RV1.get(name).push({\n                    entity_id: _this.pluginOptions.entityId,\n                    //start_residue_number: index, \n                    //end_residue_number: index,\n                    residue_number: index,\n                    color: rgb_color[1],\n                    sideChain: false,\n                });\n                _this.defaultColours.qualityRiboVision = '#' + String(rgb_color[0].join(''));\n                var colors = \"rgb(\" + String(rgb_color[0].join(',')) + \")\";\n                //_this.drawValidationShape(index, \"circle\", _this.defaultColours.qualityRiboVision);\n                residueDetails.push({\n                    start: index,\n                    end: index,\n                    color: colors,\n                    tooltipMsg: Number.parseFloat(value).toPrecision(3),\n                    tooltipPosition: \"prefix\"\n                });\n                //_this.drawValidationShape(index, \"circle\", colors);\n            }\n        });\n        /*\n         if (TWCData.size < mapped_aa_properties.get(\"Shannon entropy\")!.length) {\n             console.log(\"2D3D2\", mapped_aa_properties);\n             for(var i = TWCData.size - 1; i < this.mapped_aa_properties.get(\"Shannon entropy\").length; i++) {\n                 (window as any).selectSections_RV1.get(name).push({ //3d\n                     entity_id: _this.pluginOptions.entityId,\n                     //start_residue_number: i,\n                     //end_residue_number: i,\n                     residue_number: i,\n                     color: {r:255, g:255, b:255},\n                     sideChain: false,\n                 });\n             }\n         }*/\n        /*\n        if (TWCData.size < mapped_aa_properties.get(\"TwinCons\")!.length) {\n            for(var i = TWCData.size - 1; i < this.mapped_aa_properties.get(\"TwinCons\").length; i++) {\n                (window as any).selectSections_RV1.get(name).push({ //3d\n                    entity_id: _this.pluginOptions.entityId,\n                    //start_residue_number: i,\n                    //end_residue_number: i,\n                    residue_number: i,\n                    color: {r:255, g:255, b:255},\n                    sideChain: false,\n                });\n            }\n        }*/\n        return residueDetails;\n    };\n    UiTemplateService.prototype.getAnnotationFromRibovision = function (mapped_aa_properties) {\n        var _this_1 = this;\n        var _this = this;\n        var start = this.apiData ? this.apiData.label_seq_ids[1] : 0;\n        //const end = this.apiData?this.apiData.label_seq_ids[this.apiData.label_seq_ids.length - 2]:0\n        if (typeof _this.domainTypes == 'undefined') {\n            _this.domainTypes = [{\n                    label: 'Select data',\n                    data: null\n                }];\n        }\n        this.selectSections_RV1 = window.selectSections_RV1;\n        this.selectSections_RV1.set(\"Select data\", [{ entity_id: _this.pluginOptions.entityId,\n                focus: true } /*{entity_id: _this.pluginOptions.entityId,\n                                start_residue_number: 0,\n                                end_residue_number: 1000,\n                                color: {r: 255, g: 255, b: 255},\n                                sideChain: false,\n                            }*/\n        ]);\n        this.aaPropertyConstants = window.aaPropertyConstants;\n        this.aaColorData = window.aaColorData;\n        if (mapped_aa_properties) {\n            mapped_aa_properties.forEach(function (value, index) {\n                var residueDetails = [{\n                    //start: chainRange.start,\n                    //end: chainRange.end,\n                    //color: _this.defaultColours.qualityBlank,\n                    //tooltipMsg: 'No data for '\n                    }];\n                var name = index;\n                var separatedData = value;\n                _this_1.selectSections_RV1.set(name, []);\n                var min = Math.min.apply(Math, _this_1.aaPropertyConstants.get(name));\n                var max = Math.max.apply(Math, _this_1.aaPropertyConstants.get(name));\n                var colormapArray = _this_1.aaColorData.get(name);\n                if (name == \"Shannon entropy\") {\n                    _this_1.getEntropyAnnotations(separatedData, min, max, _this_1.pluginOptions.chainId);\n                    //console.log('name_SE', name,  this.getEntropyAnnotations(separatedData, min, max, this.pluginOptions.chainId));\n                }\n                ;\n                if (name == \"TwinCons\") {\n                    _this_1.getTWCAnnotations(separatedData, min, max, _this_1.pluginOptions.chainId);\n                    //console.log('name_TWC', name, this.getTWCAnnotations(separatedData, min, max, this.pluginOptions.chainId));\n                }\n                ;\n                if (name == \"Custom Data\") {\n                    _this_1.getCustomAnnotations(separatedData, min, max, _this_1.pluginOptions.chainId);\n                    //console.log('name_CD', name,  this.getEntropyAnnotations(separatedData, min, max, this.pluginOptions.chainId));\n                }\n                ;\n                var _a = _this_1.parsePVData(separatedData, min, max, colormapArray), TWCrgbMap = _a[0], TWCData = _a[1];\n                var TWCData_keys = TWCData.keys();\n                //const last_item  = 0;\n                var mapLastValue;\n                var i;\n                for (i = 0; i < TWCData.size; i += 1) {\n                    mapLastValue = TWCData_keys.next().value;\n                }\n                console.log(mapLastValue);\n                console.log('RNAViewer_TWCData', TWCData, TWCData.size, TWCData[Symbol.iterator](), TWCData_keys);\n                _this_1.selectSections_RV1.get(name).push({ entity_id: _this.pluginOptions.entityId, focus: true });\n                //const end = TWCData.size;\n                var end = mapLastValue;\n                if (void 0 !== TWCData) {\n                    residueDetails = _this.create2D3DAnnotations(name, residueDetails, TWCrgbMap, TWCData, mapped_aa_properties, start, end);\n                    if (0 < residueDetails.length) {\n                        var current = _this.domainTypes.filter(function (order) { return (order.label === name); })[0];\n                        if (current && current != null) {\n                            current.data = residueDetails;\n                        }\n                        else {\n                            _this.domainTypes.push({\n                                label: name,\n                                data: residueDetails\n                            });\n                        }\n                    }\n                }\n            });\n            this.createDomainDropdown();\n            this.rv3VUEcomponent.topology_loaded = true;\n        }\n        else {\n            //catch block\n        }\n        ;\n    };\n    UiTemplateService.prototype.getIntersections = function (obj1, obj2) {\n        var left1 = obj1.x;\n        var right1 = obj1.x + obj1.width;\n        var top1 = obj1.y;\n        var bottom1 = obj1.y + obj1.height;\n        var left2 = obj2.x;\n        var right2 = obj2.x + obj2.width;\n        var top2 = obj2.y;\n        var bottom2 = obj2.y + obj2.height;\n        if (left1 >= right2 || top1 >= bottom2 ||\n            right1 <= left2 || bottom1 <= top2) {\n            return false;\n        }\n        else {\n            return [right2 - left1, bottom2 - top1, right1 - left2, bottom1 - top2];\n        }\n    };\n    UiTemplateService.prototype.calculateFontSize = function (apiData) {\n        var xVals = [];\n        var yVals = [];\n        var dist = [];\n        var lastPathIndex = apiData.svg_paths.length - 1;\n        apiData.svg_paths.forEach(function (pathStr, recordIndex) {\n            if (recordIndex === 0 || recordIndex === lastPathIndex)\n                return;\n            var pathStrParsed = pathStr.split('M').join(',').split(',');\n            xVals[recordIndex] = (Number(pathStrParsed[1]) + Number(pathStrParsed[3])) / 2;\n            yVals[recordIndex] = (Number(pathStrParsed[2]) + Number(pathStrParsed[4])) / 2;\n            if (recordIndex > 1) {\n                var xDiff = xVals[recordIndex] - xVals[recordIndex - 1];\n                var yDiff = yVals[recordIndex] - yVals[recordIndex - 1];\n                dist[recordIndex] = Math.pow((Math.pow(yDiff, 2) + Math.pow(xDiff, 2)), 0.5);\n            }\n        });\n        var sortedDist = dist.sort(function (a, b) { return a - b; });\n        return 0.9 * sortedDist[Math.floor(sortedDist.length * 0.05)];\n    };\n    UiTemplateService.prototype.download = function (data, filename, type) {\n        var file = new Blob([data], { type: type });\n        var a = document.createElement(\"a\"), url = URL.createObjectURL(file);\n        a.href = url;\n        a.download = filename;\n        document.body.appendChild(a);\n        a.click();\n        setTimeout(function () {\n            document.body.removeChild(a);\n            window.URL.revokeObjectURL(url);\n        }, 0);\n    };\n    UiTemplateService.prototype.calcBaseStrs = function (baseStr, baseMap, font_size) {\n        var start = +baseStr.seq_id1;\n        var end = +baseStr.seq_id2;\n        if (baseStr && start && end) {\n            var type = baseStr.bp;\n            var pathID = \"rnaviewBP rnaviewBP_\".concat(this.pluginOptions.pdbId, \"_\").concat(this.pluginOptions.chainId, \" \").concat(type, \"_\").concat(start, \"_\").concat(end);\n            var n1 = baseStr.nt1;\n            var n2 = baseStr.nt2;\n            if (type == 'cSH' || type == 'tSH' || type == 'cSW' || type == 'tSW' || type == 'cHW' || type == 'tHW') {\n                var temp = end;\n                end = start;\n                start = temp;\n                var temp2 = n1;\n                n1 = n2;\n                n2 = temp2;\n                type = type.charAt(0) + type.slice(-2).split('').reverse().join('');\n            }\n            var x1 = this.locations.get(start)[0] + font_size / 2.5;\n            var x2 = this.locations.get(end)[0] + font_size / 2.5;\n            var y1 = this.locations.get(start)[1] - font_size / 2.5;\n            var y2 = this.locations.get(end)[1] - font_size / 2.5;\n            var distance = Math.pow(Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2), 0.5);\n            var x1_prime = UiTemplateService.linearlyInterpolate(x1, x2, font_size / distance);\n            var y1_prime = UiTemplateService.linearlyInterpolate(y1, y2, font_size / distance);\n            var x2_prime = UiTemplateService.linearlyInterpolate(x1, x2, 1 - font_size / distance);\n            var y2_prime = UiTemplateService.linearlyInterpolate(y1, y2, 1 - font_size / distance);\n            var stroke = \"#ccc\";\n            if (type.charAt(0) == 't') {\n                var fill = \"none\";\n            }\n            else {\n                var fill = \"#ccc\";\n            }\n            var xm = (x1_prime + x2_prime) / 2;\n            var ym = (y1_prime + y2_prime) / 2;\n            var distance2 = distance - 2 * font_size;\n            var height = font_size / 1.5;\n            var defaultAction = \"<path class=\\\"\".concat(pathID, \"\\\" onmouseover=\\\"UiActionsService.showTooltip(evt, '\").concat(n1).concat(start, \" - \").concat(n2).concat(end, \"; \").concat(type, \"', '\").concat(pathID, \"', '\").concat(stroke, \"', '\").concat(fill, \"');\\\" onmouseout=\\\"UiActionsService.hideTooltip('\").concat(pathID, \"');\\\"\");\n            var phi = 270 + Math.atan2((y1 - y2), (x1 - x2)) * 180 / Math.PI;\n            if (type == 'cWW') {\n                if (n1 == 'G' && n2 == 'U' || n1 == 'U' && n2 == 'G') {\n                    baseMap.get(type)[1].push(\"<path class=\\\"\".concat(pathID, \"\\\" onmouseover=\\\"UiActionsService.showTooltip(evt, '\").concat(n1).concat(start, \" - \").concat(n2).concat(end, \"; \").concat(type, \"', '\").concat(pathID, \"', '#000', '#000');\\\"\\n                    onmouseout=\\\"UiActionsService.hideTooltip('\").concat(pathID, \"');\\\"\\n                    d=\\\"\\n                    M \").concat((x1_prime + x2_prime) / 2 - font_size / 4, \", \").concat((y1_prime + y2_prime) / 2, \"\\n                    a \").concat(font_size / 4, \",\").concat(font_size / 4, \" 0 1,0 \").concat(font_size / 2, \",0\\n                    a \").concat(font_size / 4, \",\").concat(font_size / 4, \" 0 1,0 \").concat(-1 * font_size / 2, \",0\\n                    \\\"\\n                    stroke=\\\"#000\\\" stroke-width=\\\"\").concat(font_size / 6, \"\\\" fill=\\\"#000\\\"\\n                />\"));\n                }\n                else {\n                    baseMap.get(type)[1].push(\"<path class=\\\"\".concat(pathID, \"\\\" onmouseover=\\\"UiActionsService.showTooltip(evt,  '\").concat(n1).concat(start, \" - \").concat(n2).concat(end, \"; \").concat(type, \"', '\").concat(pathID, \"', '#000', '#000');\\\" onmouseout=\\\"UiActionsService.hideTooltip('\").concat(pathID, \"');\\\" stroke-width=\\\"\").concat(font_size / 6, \"\\\" data-stroke-color=\\\"#000\\\" stroke=\\\"#000\\\" d=\\\"M\").concat(x1_prime, \" \").concat(y1_prime, \" \").concat(x2_prime, \" \").concat(y2_prime, \"\\\"></path>\"));\n                }\n            }\n            else if (type == 'tWW') {\n                var xm1 = UiTemplateService.linearlyInterpolate(x1_prime, xm, 1 - (font_size / 3) / (distance / 2));\n                var ym1 = UiTemplateService.linearlyInterpolate(y1_prime, ym, 1 - (font_size / 3) / (distance / 2));\n                var xm2 = UiTemplateService.linearlyInterpolate(xm, x2_prime, (font_size / 3) / (distance / 2));\n                var ym2 = UiTemplateService.linearlyInterpolate(ym, y2_prime, (font_size / 3) / (distance / 2));\n                baseMap.get(type)[1].push(defaultAction +\n                    \"d=\\\"\\n                    M \".concat(x1_prime, \" \").concat(y1_prime, \" \").concat(xm1, \" \").concat(ym1, \"\\n                    M \").concat(xm - font_size / 3, \" \").concat(ym, \"\\n                    a \").concat(font_size / 3, \",\").concat(font_size / 3, \" 0 1,0 \").concat(font_size / 1.5, \",0\\n                    a \").concat(font_size / 3, \",\").concat(font_size / 3, \" 0 1,0 \").concat(-1 * font_size / 1.5, \",0\\n                    M \").concat(xm2, \" \").concat(ym2, \" \").concat(x2_prime, \" \").concat(y2_prime, \"\\\"\\n                    stroke=\\\"\").concat(stroke, \"\\\" stroke-width=\\\"\").concat(font_size / 6, \"\\\" fill = \\\"\").concat(fill, \"\\\"/>\"));\n            }\n            else if (type == 'cSS' || type == 'tSS') {\n                baseMap.get(type)[1].push(defaultAction + \"\\n                d=\\\"\\n                M \".concat(xm, \" \").concat(ym + distance2 / 2, \" \").concat(xm, \" \").concat(ym + height / 2, \" \\n                l \").concat(height / 2, \" 0\\n                l -\").concat(height / 2, \" -\").concat(height, \" \\n                l -\").concat(height / 2, \" \").concat(height, \"\\n                l \").concat(height / 2, \" 0\\n                M \").concat(xm, \" \").concat(ym - height / 2, \" \").concat(xm, \" \").concat(ym - distance2 / 2, \"\\n                \\\"stroke=\\\"\").concat(stroke, \"\\\" stroke-width=\\\"\").concat(font_size / 6, \"\\\" fill = \\\"\").concat(fill, \"\\\" transform = \\\"rotate(\").concat(phi, \" \").concat(xm, \" \").concat(ym, \")\\\"/>\"));\n            }\n            else if (type == 'tHS' || type == 'cHS') {\n                baseMap.get(type)[1].push(defaultAction + \"\\n                d=\\\"\\n                M \".concat(xm, \" \").concat(ym + distance2 / 2, \" \").concat(xm, \" \").concat(ym + height + height / 4, \" \\n                h -\").concat(height / 2, \"\\n                v -\").concat(height, \"\\n                h \").concat(height, \"\\n                v \").concat(height, \"\\n                h -\").concat(height / 2, \"\\n                M \").concat(xm, \" \").concat(ym + height / 4, \" \").concat(xm, \" \").concat(ym - height / 4, \"\\n                l \").concat(height / 2, \" 0\\n                l -\").concat(height / 2, \" -\").concat(height, \" \\n                l -\").concat(height / 2, \" \").concat(height, \"\\n                l \").concat(height / 2, \" 0\\n                M \").concat(xm, \" \").concat(ym - height - height / 4, \" \").concat(xm, \" \").concat(ym - distance2 / 2, \"\\n                \\\"stroke=\\\"\").concat(stroke, \"\\\" stroke-width=\\\"\").concat(font_size / 6, \"\\\" fill = \\\"\").concat(fill, \"\\\" transform = \\\"rotate(\").concat(phi, \" \").concat(xm, \" \").concat(ym, \")\\\"/>\"));\n            }\n            else if (type == 'tWS' || type == 'cWS') {\n                baseMap.get(type)[1].push(defaultAction + \"\\n                d=\\\"\\n                M \".concat(xm, \" \").concat(ym + distance2 / 2, \" \").concat(xm, \" \").concat(ym + height + height / 4, \" \\n                M \").concat(xm - height / 2, \" \").concat(ym + 3 * height / 4, \" \\n                a \").concat(height / 2, \",\").concat(height / 2, \" 0 1,0 \").concat(height, \",0\\n                a \").concat(height / 2, \",\").concat(height / 2, \" 0 1,0 \").concat(-1 * height, \",0\\n                M \").concat(xm, \" \").concat(ym + height / 4, \" \").concat(xm, \" \").concat(ym - height / 4, \"\\n                l \").concat(height / 2, \" 0\\n                l -\").concat(height / 2, \" -\").concat(height, \" \\n                l -\").concat(height / 2, \" \").concat(height, \"\\n                l \").concat(height / 2, \" 0\\n                M \").concat(xm, \" \").concat(ym - height - height / 4, \" \").concat(xm, \" \").concat(ym - distance2 / 2, \"\\n                \\\"stroke=\\\"\").concat(stroke, \"\\\" stroke-width=\\\"\").concat(font_size / 6, \"\\\" fill = \\\"\").concat(fill, \"\\\" transform = \\\"rotate(\").concat(phi, \" \").concat(xm, \" \").concat(ym, \")\\\"/>\"));\n            }\n            else if (type == 'tWH' || type == 'cWH') {\n                baseMap.get(type)[1].push(defaultAction + \"\\n                d=\\\"\\n                M \".concat(xm, \" \").concat(ym + distance2 / 2, \" \").concat(xm, \" \").concat(ym + height + height / 4, \" \\n                M \").concat(xm - height / 2, \" \").concat(ym + 3 * height / 4, \" \\n                a \").concat(height / 2, \",\").concat(height / 2, \" 0 1,0 \").concat(height, \",0\\n                a \").concat(height / 2, \",\").concat(height / 2, \" 0 1,0 \").concat(-1 * height, \",0\\n                M \").concat(xm, \" \").concat(ym + height / 4, \" \").concat(xm, \" \").concat(ym - height / 4, \"\\n                h -\").concat(height / 2, \"\\n                v -\").concat(height, \"\\n                h \").concat(height, \"\\n                v \").concat(height, \"\\n                h -\").concat(height / 2, \"\\n                M \").concat(xm, \" \").concat(ym - height - height / 4, \" \").concat(xm, \" \").concat(ym - distance2 / 2, \"\\n                \\\"stroke=\\\"\").concat(stroke, \"\\\" stroke-width=\\\"\").concat(font_size / 6, \"\\\" fill = \\\"\").concat(fill, \"\\\" transform = \\\"rotate(\").concat(phi, \" \").concat(xm, \" \").concat(ym, \")\\\"/>\"));\n            }\n            else if (type == 'tHH' || type == 'cHH') {\n                baseMap.get(type)[1].push(defaultAction + \"\\n                d=\\\"\\n                M \".concat(xm, \" \").concat(ym + distance2 / 2, \" \").concat(xm, \" \").concat(ym + height / 2, \" \\n                h -\").concat(height / 2, \"\\n                v -\").concat(height, \"\\n                h \").concat(height, \"\\n                v \").concat(height, \"\\n                h -\").concat(height / 2, \"\\n                M \").concat(xm, \" \").concat(ym - height / 2, \" \").concat(xm, \" \").concat(ym - distance2 / 2, \"\\n                \\\"stroke=\\\"\").concat(stroke, \"\\\" stroke-width=\\\"\").concat(font_size / 6, \"\\\" fill = \\\"\").concat(fill, \"\\\" transform = \\\"rotate(\").concat(phi, \" \").concat(xm, \" \").concat(ym, \")\\\"/>\"));\n            }\n        }\n    };\n    /*\n    private getJSON(apiData: ApiData){\n        let JSON =\n        `{\n        \"pdbId\": ${this.pluginOptions.pdbId},\n        \"entityId\": ${this.pluginOptions.entityId},\n        \"chainId\": ${this.pluginOptions.chainId},\n        \"nucleotides\":[\n        `\n        const lastPathIndex = apiData.svg_paths.length - 1;\n        apiData.svg_paths.forEach((pathStr: string, recordIndex: number) => {\n        if(recordIndex === 0 || recordIndex === lastPathIndex) return;\n            JSON +=\n        `   {\"position\": ${apiData.label_seq_ids[recordIndex]}, \"value\": ${apiData.sequence[recordIndex - 1]}, \"x\": ${this.locations[recordIndex - 1][0]}, \"y\": ${this.locations[recordIndex - 1][1]}},\n        `\n        });\n        JSON +=\n            `]\n        }`\n        this.download(JSON, \"Test\", \"JSON\")\n    }*/\n    UiTemplateService.linearlyInterpolate = function (v0, v1, interpolationFactor) {\n        // See https://en.wikipedia.org/wiki/Linear_interpolation\n        return (1 - interpolationFactor) * v0 + interpolationFactor * v1;\n    };\n    UiTemplateService.prototype.PathOrNucleotide = function (e) {\n        var selectBoxEle = this.containerElement.querySelector('.menuSelectbox');\n        var selectedValue = parseInt(selectBoxEle.value);\n        this.mappingValue = '';\n        var nestedBP = this.containerElement.querySelector('#nestedBP');\n        if (nestedBP.checked) {\n            var displayBP = this.displayNestedBaseStrs;\n        }\n        else {\n            var displayBP = this.displayBaseStrs;\n        }\n        if (selectedValue == 0) {\n            document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"rnaTopoSvg_\".concat(this.pluginOptions.pdbId))[0].innerHTML = this.nucleotideStrs.join('') + this.circleStrs.join('') + displayBP;\n        }\n        else if (selectedValue == 1) {\n            document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"rnaTopoSvg_\".concat(this.pluginOptions.pdbId))[0].innerHTML = this.pathStrs.join('') + this.circleStrs.join('') + displayBP;\n        }\n        else if (selectedValue == 2) {\n            this.mappingValue = 'circle';\n        }\n        if (e) {\n            //this.containerElement.querySelector<HTMLInputElement>('.mappingSelectbox')!.value=\"0\";\n            this.colorMap();\n        }\n        this.colorMapContacts();\n        this.colorMapModifications();\n    };\n    UiTemplateService.prototype.addEvents = function (apiData, BanName) {\n        var _this_1 = this;\n        if (BanName === void 0) { BanName = undefined; }\n        /*\n        const lastPathIndex = apiData.svg_paths.length - 1;\n        let strokeColor = this.pluginOptions.theme?.color || '#323232';\n        \n        apiData.svg_paths.forEach((pathStr: string, recordIndex: number) => {\n            let isUnobserved = false;\n            if(apiData.unobserved_label_seq_ids && apiData.unobserved_label_seq_ids.indexOf(apiData.label_seq_ids[recordIndex - 1]) > -1) {\n                strokeColor = this.pluginOptions.theme?.unobservedColor || '#ccc';\n                isUnobserved = true;\n            }\n            if(recordIndex === 0 || recordIndex === 1 || recordIndex === lastPathIndex + 1) return;\n            let classPath = `rnaviewEle rnaviewEle_${this.pluginOptions.pdbId} rnaview_${this.pluginOptions.pdbId}_${apiData.label_seq_ids[recordIndex - 1]}`\n            let circlePath = `circle_${this.pluginOptions.pdbId}_${apiData.label_seq_ids[recordIndex - 1]}`\n            document.getElementsByClassName(circlePath)[0].addEventListener('click', UiActionsService.selectNucleotide.bind(this, this.pluginOptions.pdbId, this.pluginOptions.entityId, apiData.label_seq_ids[recordIndex - 1]))\n            document.getElementsByClassName(circlePath)[0].addEventListener('mouseover', UiActionsService.selectNucleotide.bind(this, this.pluginOptions.pdbId, this.pluginOptions.entityId, apiData.label_seq_ids[recordIndex - 1], 'mouseover', isUnobserved, apiData.sequence[recordIndex - 2], undefined, this.pluginOptions.theme?.highlightColor ? \"'\"+this.pluginOptions.theme.highlightColor+\"'\" : undefined))\n            document.getElementsByClassName(circlePath)[0].addEventListener('mouseout', UiActionsService.unSelectNucleotide.bind(this, this.pluginOptions.pdbId, this.pluginOptions.entityId, apiData.label_seq_ids[recordIndex - 1], isUnobserved, undefined, strokeColor))\n\n            document.getElementsByClassName(classPath)[0].addEventListener('click', UiActionsService.selectNucleotide.bind(this, this.pluginOptions.pdbId, this.pluginOptions.entityId, apiData.label_seq_ids[recordIndex - 1]))\n            document.getElementsByClassName(classPath)[0].addEventListener('mouseover', UiActionsService.selectNucleotide.bind(this, this.pluginOptions.pdbId, this.pluginOptions.entityId, apiData.label_seq_ids[recordIndex - 1], 'mouseover', isUnobserved, apiData.sequence[recordIndex - 2], undefined, this.pluginOptions.theme?.highlightColor ? \"'\"+this.pluginOptions.theme.highlightColor+\"'\" : undefined))\n            document.getElementsByClassName(classPath)[0].addEventListener('mouseout', UiActionsService.unSelectNucleotide.bind(this, this.pluginOptions.pdbId, this.pluginOptions.entityId, apiData.label_seq_ids[recordIndex - 1], isUnobserved, undefined, strokeColor))\n        });\n        */\n        /*if(!whichEvents) {\n            for (let i in this.basePairIDs) {\n                let pathInfo = this.basePairIDs[i]\n                if(this.baseStrs.get(pathInfo[7])![0]) {\n                    document.getElementsByClassName(pathInfo[0])[0].addEventListener('mouseover', (e) =>  {UiActionsService.showTooltip(e, `${pathInfo[3]}${pathInfo[1]} - ${pathInfo[4]}${pathInfo[2]}; ${pathInfo[7]}`, pathInfo[0], pathInfo[6], pathInfo[5])})\n                    document.getElementsByClassName(pathInfo[0])[0].addEventListener('mouseout', UiActionsService.hideTooltip.bind(this, pathInfo[0]))\n                }\n            }\n        }*/\n        var contacts = new Map();\n        this.mapped_chains.forEach(function (val) {\n            //let tooltip = \"Contacts: \" + val;\n            for (var i in _this_1.rv3VUEcomponent.protein_contacts[val]) {\n                var path = \"circle_\".concat(_this_1.pluginOptions.pdbId, \"_\").concat(_this_1.rv3VUEcomponent.protein_contacts[val][i]);\n                if (document.getElementsByClassName(path)[0]) {\n                    if (contacts.get(_this_1.rv3VUEcomponent.protein_contacts[val][i])) {\n                        var newList = contacts.get(_this_1.rv3VUEcomponent.protein_contacts[val][i]);\n                        newList.push(val);\n                        contacts.set(_this_1.rv3VUEcomponent.protein_contacts[val][i], newList);\n                    }\n                    else {\n                        contacts.set(_this_1.rv3VUEcomponent.protein_contacts[val][i], [val]);\n                    }\n                    //document.getElementsByClassName(path)[0].addEventListener('mouseover', (e) =>  {UiActionsService.showTooltip(e, tooltip, path, this.rv3VUEcomponent.proteinColorMap.get(val), this.rv3VUEcomponent.proteinColorMap.get(val))})\n                    //document.getElementsByClassName(path)[0].addEventListener('mouseout', UiActionsService.hideTooltip.bind(this, path))\n                }\n            }\n        });\n        var chem_mods = new Map();\n        this.mapped_modifications.forEach(function (val) {\n            //let tooltip = \"Contacts: \" + val;\n            for (var i in _this_1.rv3VUEcomponent.modified_residues.get(val)) {\n                //let path = `circle_${this.pluginOptions.pdbId}_${this.rv3VUEcomponent.modified_residues[val][i]}`\n                var path = \"circle_\".concat(_this_1.pluginOptions.pdbId, \"_\").concat(_this_1.rv3VUEcomponent.modified_residues.get(val)[i]);\n                if (document.getElementsByClassName(path)[0]) {\n                    if (chem_mods.get(_this_1.rv3VUEcomponent.modified_residues.get(val)[i])) {\n                        var newList = chem_mods.get(_this_1.rv3VUEcomponent.modified_residues.get(val)[i]);\n                        newList.push(val);\n                        chem_mods.set(_this_1.rv3VUEcomponent.modified_residues.get(val)[i], newList);\n                    }\n                    else {\n                        chem_mods.set(_this_1.rv3VUEcomponent.modified_residues.get(val)[i], [val]);\n                    }\n                    //document.getElementsByClassName(path)[0].addEventListener('mouseover', (e) =>  {UiActionsService.showTooltip(e, tooltip, path, this.rv3VUEcomponent.proteinColorMap.get(val), this.rv3VUEcomponent.proteinColorMap.get(val))})\n                    //document.getElementsByClassName(path)[0].addEventListener('mouseout', UiActionsService.hideTooltip.bind(this, path))\n                }\n            }\n        });\n        contacts.forEach(function (value, key) {\n            var tooltip = \"Contact:\";\n            var circlePath = \"circle_\".concat(_this_1.pluginOptions.pdbId, \"_\").concat(key);\n            var path = \"rnaviewEle rnaviewEle_\".concat(_this_1.pluginOptions.pdbId, \" rnaview_\").concat(_this_1.pluginOptions.pdbId, \"_\").concat(key);\n            var chain = '';\n            var promises = [];\n            //let BanProtName = ''\n            for (var val in value) {\n                promises.push(data_1.BanNameHelper.getBanName(_this_1.pluginOptions.pdbId, value[val]));\n                chain = value[val];\n            }\n            Promise.all(promises).then(function (banNames) {\n                banNames.forEach(function (BanName) {\n                    if (BanName.length > 0) {\n                        tooltip += \" \" + BanName[0] + \"; chain: \" + chain;\n                    }\n                    else {\n                        tooltip = \"chain: \" + chain;\n                    }\n                });\n                _this_1.toolTips.set(key, tooltip);\n                document.getElementsByClassName(circlePath)[0].setAttribute('onmouseover', document.getElementsByClassName(circlePath)[0].getAttribute('onmouseover').split(';')[0] + \";UiActionsService.showTooltip(evt, '\".concat(tooltip, \"', '\").concat(circlePath, \"', '\").concat(_this_1.rv3VUEcomponent.proteinColorMap.get(chain), \"', '\").concat(_this_1.rv3VUEcomponent.proteinColorMap.get(chain), \"')\"));\n                document.getElementsByClassName(circlePath)[0].setAttribute('onmouseout', document.getElementsByClassName(circlePath)[0].getAttribute('onmouseout').split(';')[0] + \";UiActionsService.hideTooltip('\".concat(circlePath, \"')\"));\n                if (document.getElementsByClassName(path)[0]) {\n                    document.getElementsByClassName(path)[0].setAttribute('onmouseover', document.getElementsByClassName(path)[0].getAttribute('onmouseover').split(';')[0] + \";UiActionsService.showTooltip(evt, '\".concat(tooltip, \"', '\").concat(path, \"', '\").concat(_this_1.rv3VUEcomponent.proteinColorMap.get(chain), \"', '\").concat(_this_1.rv3VUEcomponent.proteinColorMap.get(chain), \"')\"));\n                    //this.eventMap.set(path, UiActionsService.hideTooltip.bind(this, path))\n                    //document.getElementsByClassName(path)[0].addEventListener('mouseout', this.eventMap.get(path))\n                    document.getElementsByClassName(path)[0].setAttribute('onmouseout', document.getElementsByClassName(path)[0].getAttribute('onmouseout').split(';')[0] + \";UiActionsService.hideTooltip('\".concat(path, \"')\"));\n                }\n            });\n        });\n        chem_mods.forEach(function (value, key) {\n            var tooltip = \"Modified_nucleotide:\";\n            var circlePath = \"circle_\".concat(_this_1.pluginOptions.pdbId, \"_\").concat(key);\n            var path = \"rnaviewEle rnaviewEle_\".concat(_this_1.pluginOptions.pdbId, \" rnaview_\").concat(_this_1.pluginOptions.pdbId, \"_\").concat(key);\n            var mod = '';\n            for (var val in value) {\n                tooltip += \" \" + value[val];\n                mod = value[val];\n            }\n            _this_1.toolTips.set(key, tooltip);\n            //this.mouseOverMap.set(circlePath, (e: Event) =>  {UiActionsService.showTooltip(e, tooltip, circlePath, this.rv3VUEcomponent.proteinColorMap.get(chain), this.rv3VUEcomponent.proteinColorMap.get(chain))})\n            //document.getElementsByClassName(circlePath)[0].addEventListener('mouseover', this.mouseOverMap.get(circlePath))\n            //(<HTMLElement>document.getElementsByClassName(circlePath)[0]).setAttribute('onmouseover', document.getElementsByClassName(circlePath)[0].getAttribute('onmouseover')!.split(';')[0] + `;UiActionsService.showTooltip(evt, '${tooltip}', '${circlePath}', '${this.rv3VUEcomponent.proteinColorMap.get(chain)}', '${this.rv3VUEcomponent.proteinColorMap.get(chain)}')`);\n            document.getElementsByClassName(circlePath)[0].setAttribute('onmouseover', document.getElementsByClassName(circlePath)[0].getAttribute('onmouseover').split(';')[0] + \";UiActionsService.showTooltip(evt, '\".concat(tooltip, \"', '\").concat(circlePath, \"', '\").concat(_this_1.rv3VUEcomponent.modifiedColorMap.get(mod), \"', '\").concat(_this_1.rv3VUEcomponent.modifiedColorMap.get(mod), \"')\"));\n            //this.eventMap.set(path, UiActionsService.hideTooltip.bind(this, circlePath))\n            document.getElementsByClassName(circlePath)[0].setAttribute('onmouseout', document.getElementsByClassName(circlePath)[0].getAttribute('onmouseout').split(';')[0] + \";UiActionsService.hideTooltip('\".concat(circlePath, \"')\"));\n            //document.getElementsByClassName(circlePath)[0].addEventListener('mouseout', this.eventMap.get(circlePath))\n            //this.mouseOverMap.set(path, (e: Event) =>  {UiActionsService.showTooltip(e, tooltip, path, this.rv3VUEcomponent.proteinColorMap.get(chain), this.rv3VUEcomponent.proteinColorMap.get(chain))})\n            //document.getElementsByClassName(path)[0].addEventListener('mouseover', this.mouseOverMap.get(path))\n            if (document.getElementsByClassName(path)[0]) {\n                document.getElementsByClassName(path)[0].setAttribute('onmouseover', document.getElementsByClassName(path)[0].getAttribute('onmouseover').split(';')[0] + \";UiActionsService.showTooltip(evt, '\".concat(tooltip, \"', '\").concat(path, \"', '\").concat(_this_1.rv3VUEcomponent.modifiedColorMap.get(mod), \"', '\").concat(_this_1.rv3VUEcomponent.modifiedColorMap.get(mod), \"')\"));\n                //this.eventMap.set(path, UiActionsService.hideTooltip.bind(this, path))\n                //document.getElementsByClassName(path)[0].addEventListener('mouseout', this.eventMap.get(path))\n                document.getElementsByClassName(path)[0].setAttribute('onmouseout', document.getElementsByClassName(path)[0].getAttribute('onmouseout').split(';')[0] + \";UiActionsService.hideTooltip('\".concat(path, \"')\"));\n            }\n        });\n    };\n    UiTemplateService.prototype.removeEventHandlers = function (svgData) {\n        var nodeList = svgData.childNodes[1].childNodes;\n        for (var i in nodeList) {\n            var el = nodeList[i];\n            if (el.attributes) {\n                var attributes = [].slice.call(el.attributes);\n                for (var i_1 = 0; i_1 < attributes.length; i_1++) {\n                    var att = attributes[i_1].name;\n                    if (att.indexOf(\"on\") === 0) {\n                        el.attributes.removeNamedItem(att);\n                    }\n                }\n            }\n        }\n        return svgData;\n    };\n    UiTemplateService.prototype.svgTemplate = function (apiData, FR3DData, FR3DNestedData) {\n        var _this_1 = this;\n        var font_size = this.calculateFontSize(apiData);\n        var lastPathIndex = apiData.svg_paths.length - 1;\n        var locations2 = new Map();\n        apiData.svg_paths.forEach(function (pathStr, recordIndex) {\n            if (recordIndex === 0 || recordIndex === 1 || recordIndex === lastPathIndex + 1)\n                return;\n            var pathStrParsed = pathStr.split('M').join(',').split(',');\n            var x1Val = Number(pathStrParsed[1]);\n            var y1Val = Number(pathStrParsed[2]);\n            var xVal = Number(pathStrParsed[3]);\n            var yVal = Number(pathStrParsed[4]);\n            var midX = (xVal + x1Val) / 2;\n            var midY = (yVal + y1Val) / 2;\n            locations2.set(apiData.label_seq_ids[recordIndex - 1], [midX, midY]);\n            _this_1.locations.set(apiData.label_seq_ids[recordIndex - 1], [xVal, yVal]);\n        });\n        apiData.svg_paths.forEach(function (pathStr, recordIndex) {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n            if (recordIndex === 0 || recordIndex === 1 || recordIndex === (lastPathIndex + 1))\n                return;\n            var pathEleClass = \"rnaviewEle rnaviewEle_\".concat(_this_1.pluginOptions.pdbId, \" rnaview_\").concat(_this_1.pluginOptions.pdbId, \"_\").concat(apiData.label_seq_ids[recordIndex - 1]);\n            var strokeColor = ((_a = _this_1.pluginOptions.theme) === null || _a === void 0 ? void 0 : _a.color) || '#323232';\n            var strokeWide = ((_b = _this_1.pluginOptions.theme) === null || _b === void 0 ? void 0 : _b.strokeWidth) || '2';\n            var isUnobserved = false;\n            if (apiData.unobserved_label_seq_ids && apiData.unobserved_label_seq_ids.indexOf(apiData.label_seq_ids[recordIndex - 1]) > -1) {\n                strokeColor = ((_c = _this_1.pluginOptions.theme) === null || _c === void 0 ? void 0 : _c.unobservedColor) || '#ccc';\n                isUnobserved = true;\n            }\n            var pathStrParsed = pathStr.split('M').join(',').split(',');\n            var xVal = Number(pathStrParsed[3]);\n            var yVal = Number(pathStrParsed[4]);\n            var deltaX = font_size / 2;\n            var deltaY = font_size / 2;\n            var newPathStr;\n            if (recordIndex < (lastPathIndex)) {\n                var newX = locations2.get(apiData.label_seq_ids[recordIndex - 1])[0];\n                var newX2 = locations2.get(apiData.label_seq_ids[recordIndex])[0];\n                var newY = locations2.get(apiData.label_seq_ids[recordIndex - 1])[1];\n                var newY2 = locations2.get(apiData.label_seq_ids[recordIndex])[1];\n                newPathStr = \"M\".concat(newX + deltaX, \",\").concat(newY - deltaY, \",\").concat(newX2 + deltaX, \",\").concat(newY2 - deltaY);\n            }\n            else {\n                var newX = locations2.get(apiData.label_seq_ids[recordIndex - 1])[0];\n                var newY = locations2.get(apiData.label_seq_ids[recordIndex - 1])[1];\n                var newX2 = 2 * xVal - newX;\n                var newY2 = 2 * yVal - newY;\n                newPathStr = \"M\".concat(newX + deltaX, \",\").concat(newY - deltaY, \",\").concat(newX2 + deltaX, \",\").concat(newY2 - deltaY);\n            }\n            pathStr = newPathStr;\n            _this_1.pathStrs.push(\"<path \\n                    class=\\\"\".concat(pathEleClass, \"\\\" stroke-width=\\\"\").concat(strokeWide, \"\\\" stroke=\\\"\").concat(strokeColor, \"\\\" d=\\\"\").concat(pathStr, \"\\\" \\n                    data-stroke-color=\\\"\").concat(strokeColor, \"\\\" \\n                    onclick=\\\"UiActionsService.selectNucleotide('\").concat(_this_1.pluginOptions.pdbId, \"', '\").concat(_this_1.pluginOptions.entityId, \"', \").concat(apiData.label_seq_ids[recordIndex - 1], \", 'click', \").concat(isUnobserved, \", '\").concat(apiData.sequence[recordIndex - 2], \"', event, \").concat(((_d = _this_1.pluginOptions.theme) === null || _d === void 0 ? void 0 : _d.highlightColor) ? \"'\" + _this_1.pluginOptions.theme.highlightColor + \"'\" : undefined, \")\\\" \\n                    onmouseover=\\\"UiActionsService.selectNucleotide('\").concat(_this_1.pluginOptions.pdbId, \"', '\").concat(_this_1.pluginOptions.entityId, \"', \").concat(apiData.label_seq_ids[recordIndex - 1], \", 'mouseover', \").concat(isUnobserved, \", '\").concat(apiData.sequence[recordIndex - 2], \"', event, \").concat(((_e = _this_1.pluginOptions.theme) === null || _e === void 0 ? void 0 : _e.highlightColor) ? \"'\" + _this_1.pluginOptions.theme.highlightColor + \"'\" : undefined, \")\\\" \\n                    onmouseout=\\\"UiActionsService.unSelectNucleotide('\").concat(_this_1.pluginOptions.pdbId, \"', '\").concat(_this_1.pluginOptions.entityId, \"', \").concat(apiData.label_seq_ids[recordIndex - 1], \", \").concat(isUnobserved, \", event, '\").concat(strokeColor, \"')\\\">\\n                </path>\"));\n            _this_1.circleStrs.push(\"<circle class=\\\"circle_\".concat(_this_1.pluginOptions.pdbId, \"_\").concat(apiData.label_seq_ids[recordIndex - 1], \"\\\" cx=\\\"\").concat(xVal + deltaX, \"\\\" cy=\\\"\").concat(yVal - deltaY, \"\\\" r=\\\"\").concat(2 * font_size / 3, \"\\\" display=\\\"none\\\" alignment-baseline=\\\"middle\\\" stroke-width=\\\"\").concat(font_size / 6, \"\\\" onclick=\\\"UiActionsService.selectNucleotide('\").concat(_this_1.pluginOptions.pdbId, \"', '\").concat(_this_1.pluginOptions.entityId, \"', \").concat(apiData.label_seq_ids[recordIndex - 1], \", 'click', \").concat(isUnobserved, \", '\").concat(apiData.sequence[recordIndex - 2], \"', event, \").concat(((_f = _this_1.pluginOptions.theme) === null || _f === void 0 ? void 0 : _f.highlightColor) ? \"'\" + _this_1.pluginOptions.theme.highlightColor + \"'\" : undefined, \")\\\" \\n                onmouseover=\\\"UiActionsService.selectNucleotide('\").concat(_this_1.pluginOptions.pdbId, \"', '\").concat(_this_1.pluginOptions.entityId, \"', \").concat(apiData.label_seq_ids[recordIndex - 1], \", 'mouseover', \").concat(isUnobserved, \", '\").concat(apiData.sequence[recordIndex - 2], \"', event, \").concat(((_g = _this_1.pluginOptions.theme) === null || _g === void 0 ? void 0 : _g.highlightColor) ? \"'\" + _this_1.pluginOptions.theme.highlightColor + \"'\" : undefined, \")\\\" \\n                onmouseout=\\\"UiActionsService.unSelectNucleotide('\").concat(_this_1.pluginOptions.pdbId, \"', '\").concat(_this_1.pluginOptions.entityId, \"', \").concat(apiData.label_seq_ids[recordIndex - 1], \", \").concat(isUnobserved, \", event, '\").concat(strokeColor, \"')\\\"/>\"));\n            _this_1.nucleotideStrs.push(\"<text href=\\\"#\".concat(pathEleClass, \"\\\" class=\\\"\").concat(pathEleClass, \"\\\" x=\\\"\").concat(xVal, \"\\\" y=\\\"\").concat(yVal, \"\\\" font-size = \\\"\").concat(font_size, \"px\\\" onclick=\\\"UiActionsService.selectNucleotide('\").concat(_this_1.pluginOptions.pdbId, \"', '\").concat(_this_1.pluginOptions.entityId, \"', \").concat(apiData.label_seq_ids[recordIndex - 1], \", 'click', \").concat(isUnobserved, \", '\").concat(apiData.sequence[recordIndex - 2], \"', event, \").concat(((_h = _this_1.pluginOptions.theme) === null || _h === void 0 ? void 0 : _h.highlightColor) ? \"'\" + _this_1.pluginOptions.theme.highlightColor + \"'\" : undefined, \")\\\" \\n                onmouseover=\\\"UiActionsService.selectNucleotide('\").concat(_this_1.pluginOptions.pdbId, \"', '\").concat(_this_1.pluginOptions.entityId, \"', \").concat(apiData.label_seq_ids[recordIndex - 1], \", 'mouseover', \").concat(isUnobserved, \", '\").concat(apiData.sequence[recordIndex - 2], \"', event, \").concat(((_j = _this_1.pluginOptions.theme) === null || _j === void 0 ? void 0 : _j.highlightColor) ? \"'\" + _this_1.pluginOptions.theme.highlightColor + \"'\" : undefined, \")\\\" \\n                onmouseout=\\\"UiActionsService.unSelectNucleotide('\").concat(_this_1.pluginOptions.pdbId, \"', '\").concat(_this_1.pluginOptions.entityId, \"', \").concat(apiData.label_seq_ids[recordIndex - 1], \", \").concat(isUnobserved, \", event, '\").concat(strokeColor, \"')\\\">\").concat(apiData.sequence[recordIndex - 2], \"</text>\"));\n        });\n        var baseArray = FR3DData.annotations;\n        var nestedBaseArray = FR3DNestedData.annotations;\n        this.baseStrs.set('cWW', [true, []]);\n        this.baseStrs.set('tWW', [false, []]);\n        this.baseStrs.set('cWH', [false, []]);\n        this.baseStrs.set('tWH', [false, []]);\n        this.baseStrs.set('cWS', [false, []]);\n        this.baseStrs.set('tWS', [false, []]);\n        this.baseStrs.set('cHH', [false, []]);\n        this.baseStrs.set('tHH', [false, []]);\n        this.baseStrs.set('cHS', [false, []]);\n        this.baseStrs.set('tHS', [false, []]);\n        this.baseStrs.set('cSS', [false, []]);\n        this.baseStrs.set('tSS', [false, []]);\n        this.nestedBaseStrs.set('cWW', [true, []]);\n        this.nestedBaseStrs.set('tWW', [false, []]);\n        this.nestedBaseStrs.set('cWH', [false, []]);\n        this.nestedBaseStrs.set('tWH', [false, []]);\n        this.nestedBaseStrs.set('cWS', [false, []]);\n        this.nestedBaseStrs.set('tWS', [false, []]);\n        this.nestedBaseStrs.set('cHH', [false, []]);\n        this.nestedBaseStrs.set('tHH', [false, []]);\n        this.nestedBaseStrs.set('cHS', [false, []]);\n        this.nestedBaseStrs.set('tHS', [false, []]);\n        this.nestedBaseStrs.set('cSS', [false, []]);\n        this.nestedBaseStrs.set('tSS', [false, []]);\n        nestedBaseArray.forEach(function (baseStr) {\n            _this_1.calcBaseStrs(baseStr, _this_1.nestedBaseStrs, font_size);\n        });\n        baseArray.forEach(function (baseStr) {\n            _this_1.calcBaseStrs(baseStr, _this_1.baseStrs, font_size);\n        });\n        this.baseStrs.forEach(function (value, key) {\n            if (value[0]) {\n                _this_1.displayBaseStrs += value[1].join('');\n            }\n            if (_this_1.nestedBaseStrs.get(key)[0]) {\n                _this_1.displayNestedBaseStrs += _this_1.nestedBaseStrs.get(key)[1].join('');\n            }\n        });\n        return \"\\n        <div style=\\\"width:100%;height:100%;z-index:0;position:absolute;\\\">\\n            <svg preserveAspectRatio=\\\"xMidYMid meet\\\" \\n            viewBox=\\\"0 0 \".concat(apiData.dimensions.width, \" \").concat(apiData.dimensions.height, \"\\\" \\n            style=\\\"width:100%;height:100%;position:relative;\\\">\\n                <g class=\\\"rnaTopoSvgSelection rnaTopoSvgSelection_\").concat(this.pluginOptions.pdbId, \"\\\"></g>\\n            </svg>\\n        </div>\\n        <div style=\\\"width:100%;height:100%;z-index:1;position:absolute;\\\">\\n            <svg preserveAspectRatio=\\\"xMidYMid meet\\\"\\n            viewBox=\\\"0 0 \").concat(apiData.dimensions.width, \" \").concat(apiData.dimensions.height, \"\\\" \\n            style=\\\"width:100%;height:100%;position:relative;\\\">\\n                <g class=\\\"rnaTopoSvgHighlight rnaTopoSvgHighlight_\").concat(this.pluginOptions.pdbId, \"\\\"></g>\\n            </svg>\\n        </div>\\n        <div id=\\\"tooltip\\\" display=\\\"none\\\" style=\\\"position:absolute; display: none;\\\"></div> \\n            <div style=\\\"width:100%;height:100%;z-index:2;position:absolute;\\\">\\n                <svg class=\\\"rnaTopoSvg\\\" preserveAspectRatio=\\\"xMidYMid meet\\\" \\n                    viewBox=\\\"0 0 \").concat(apiData.dimensions.width, \" \").concat(apiData.dimensions.height, \"\\\" \\n                    style=\\\"width:100%;height:100%;\\\">\\n                        <g class=\\\"rnaTopoSvg_\").concat(this.pluginOptions.pdbId, \"\\\">\").concat(this.nucleotideStrs.join('')).concat(this.circleStrs.join('')).concat(this.displayBaseStrs, \"</g>\\n                </svg>\\n            </div>\");\n    };\n    UiTemplateService.prototype.title = function () {\n        return \"<span class=\\\"pdb-rna-view-title\\\">\".concat(this.pluginOptions.pdbId.toUpperCase(), \" Chain \").concat(this.pluginOptions.chainId, \"</span>\");\n    };\n    UiTemplateService.prototype.tooltip = function () {\n        return \"<span class=\\\"pdb-rna-view-tooltip\\\" id=\\\"\".concat(this.pluginOptions.pdbId, \"-rnaTopologyTooltip\\\"></span>\");\n    };\n    UiTemplateService.prototype.actionButtons = function () {\n        return \"<div class=\\\"pdb-rna-view-btn-group\\\">\\n            <span class=\\\"pdb-rna-view-btn\\\" title=\\\"Zoom-in\\\" id=\\\"rnaTopologySaveSVG-\".concat(this.pluginOptions.pdbId, \"\\\">\\n                <img class=\\\"saveSVG\\\" src=\\\"static/alignments/png/Save.png\\\" style=\\\"height:24px; width: 24px; border:0;position: relative;cursor:pointer;\\\" title=\\\"saveSVG\\\"/>\\n            </span>\\n            <span class=\\\"pdb-rna-view-btn\\\" title=\\\"Zoom-in\\\" id=\\\"rnaTopologyZoomIn-\").concat(this.pluginOptions.pdbId, \"\\\">\\n                <svg style=\\\"width:24px;height:24px\\\" viewBox=\\\"0 0 24 24\\\">\\n                    <path fill=\\\"currentColor\\\" d=\\\"M15.5,14L20.5,19L19,20.5L14,15.5V14.71L13.73,14.43C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.43,13.73L14.71,14H15.5M9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14M12,10H10V12H9V10H7V9H9V7H10V9H12V10Z\\\" />\\n                </svg>\\n            </span>\\n            \\n            <span class=\\\"pdb-rna-view-btn\\\" title=\\\"Zoom-out\\\" id=\\\"rnaTopologyZoomOut-\").concat(this.pluginOptions.pdbId, \"\\\">\\n                <svg style=\\\"width:24px;height:24px\\\" viewBox=\\\"0 0 24 24\\\">\\n                    <path fill=\\\"currentColor\\\" d=\\\"M15.5,14H14.71L14.43,13.73C15.41,12.59 16,11.11 16,9.5A6.5,6.5 0 0,0 9.5,3A6.5,6.5 0 0,0 3,9.5A6.5,6.5 0 0,0 9.5,16C11.11,16 12.59,15.41 13.73,14.43L14,14.71V15.5L19,20.5L20.5,19L15.5,14M9.5,14C7,14 5,12 5,9.5C5,7 7,5 9.5,5C12,5 14,7 14,9.5C14,12 12,14 9.5,14M7,9H12V10H7V9Z\\\" />\\n                </svg>\\n            </span>\\n\\n            <span class=\\\"pdb-rna-view-btn\\\" title=\\\"Reset\\\" id=\\\"rnaTopologyReset-\").concat(this.pluginOptions.pdbId, \"\\\">\\n                <svg style=\\\"width:24px;height:24px\\\" viewBox=\\\"0 0 24 24\\\">\\n                    <path fill=\\\"currentColor\\\" d=\\\"M12,6V9L16,5L12,1V4A8,8 0 0,0 4,12C4,13.57 4.46,15.03 5.24,16.26L6.7,14.8C6.25,13.97 6,13 6,12A6,6 0 0,1 12,6M18.76,7.74L17.3,9.2C17.74,10.04 18,11 18,12A6,6 0 0,1 12,18V15L8,19L12,23V20A8,8 0 0,0 20,12C20,10.43 19.54,8.97 18.76,7.74Z\\\" />\\n                </svg>\\n            </span>\\n        </div>\");\n    };\n    UiTemplateService.prototype.renderError = function (type) {\n        var errorContent = \"<div class=\\\"pdb-rna-view-error\\\">Error! Something went wrong!</div>\";\n        if (type === 'apiError') {\n            errorContent = \"<div class=\\\"pdb-rna-view-error\\\">\\n                RNA topology data for \".concat(this.pluginOptions.pdbId.toUpperCase(), \" | \").concat(this.pluginOptions.entityId, \" | \").concat(this.pluginOptions.chainId.toUpperCase(), \" is not available!\\n            </div>\");\n        }\n        this.containerElement.innerHTML = \"<div class=\\\"pdb-rna-view-container\\\">\".concat(errorContent, \"</div>\");\n    };\n    UiTemplateService.prototype.saveSVG = function () {\n        function getNode(n, v) {\n            n = document.createElementNS(\"http://www.w3.org/2000/svg\", n);\n            for (var p in v)\n                n.setAttributeNS(null, p.replace(/[0-9]/g, 'o').replace(/\\$/g, 'd').replace(/\\[/g, 'b').replace(/[A-Z]/g, function (m, p, o, s) { return \"-\" + m.toLowerCase(); }), v[p]);\n            return n;\n        }\n        var svgData1 = document.querySelector(\"svg.rnaTopoSvg\");\n        var svgData_forsave = svgData1.cloneNode(true);\n        svgData_forsave = this.removeEventHandlers(svgData_forsave);\n        var svg = getNode(\"svg\");\n        svg.appendChild(svgData_forsave);\n        function saveSvg1(svgEl, name) {\n            svgEl.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n            var svgData = svgEl.outerHTML;\n            var preface = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n';\n            var svgBlob = new Blob([preface, svgData], { type: \"image/svg+xml;charset=utf-8\" });\n            var svgUrl = URL.createObjectURL(svgBlob);\n            var downloadLink = document.createElement(\"a\");\n            downloadLink.href = svgUrl;\n            downloadLink.download = name;\n            document.body.appendChild(downloadLink);\n            downloadLink.click();\n            document.body.removeChild(downloadLink);\n        }\n        saveSvg1(svg, 'rv3Topology.svg');\n    };\n    return UiTemplateService;\n}());\nexports.UiTemplateService = UiTemplateService;\n//# sourceMappingURL=uiTemplate.js.map","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n        if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n        dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n        if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n        dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["tslib_1","data_1","uiTemplate_1","uiActions_1","customEvents_1","PdbRnaViewerPlugin","CustomEvents","Object","defineProperty","exports","value","create","eventTypeArr","eventObj","ei","el","length","eventType","event_1","MouseEvent","window","document","createEvent","initEvent","dispatchCustomEvent","event","eventData","targetElement","dispatchEvent","subscribeToComponentEvents","pluginCtx","addEventListener","e","detail","startResidue","parseInt","start","endResidue","end","clearSelection","i","selectResidue","color","clearHighlight","highlightResidue","residueNumber","auth_asym_id","options","chainId","BanNameHelper","DataService","prototype","getApiData","entityId","pdbId","__awaiter","this","apiUrl","e_1","__generator","_a","label","trys","push","concat","toLowerCase","fetch","sent","json","handleError","getFR3DData","csvUrl","e_2","handleFR3DError","getFR3DNestedData","e_3","console","log","getBanName","PchainId","UiActionsService","applyButtonActions","_this","svgEle","d3","select","zoom1","zoom","on","attr","transform","call","stopPropagation","scaleBy","transition","duration","transformValue","_groups","getAttribute","transformValMatch","match","zoomIdentity","unSelectNucleotide","label_seq_id","isUnobserved","stopImmediatePropagation","ttEle","getElementById","style","display","undefined","lastSelected","evData","textElement","querySelector","pdbevents","showCheckboxes","checkboxes","expanded","selected","nucleotide","getElementsByClassName","selectedColor","nodeName","setAttribute","innerHTML","showTooltip","evt","text","path","fill","tooltip","id","left","layerX","top","layerY","selectedBPColor","fillBPColor","node","hideTooltip","drawCircle","index","circle","BBox","getBBox","nx","x","width","ny","y","height","selectedPath","selectNucleotide","residue","colorNucleotide","eventName","type","shape","strokeColor","UiTemplateService","containerElement","pluginOptions","apiData","_this_1","selectSections_RV1","aaPropertyConstants","mapped_aa_properties","aaColorData","parsePVData","getEntropyAnnotations","getTWCAnnotations","getCustomAnnotations","getAnnotationArray","rv3VUEcomponent","vm","locations","Map","menuStyle","pathStrs","nucleotideStrs","circleStrs","baseStrs","nestedBaseStrs","basePairIDs","mappingValue","showAllNucleotides","mouseOverMap","eventMap","toolTips","selectSectionsTest","defaultColours","domainSelection","mouseOver","borderColor","qualityGreen","qualityRed","qualityYellow","qualityRiboVision","qualityOrange","qualityBlank","mapped_chains","Set","mapped_modifications","colorMap","selectBoxEle","selectedValue","selectedDomain","domainTypes","data","forEach","val","indexOf","tempDomain","colorMapHelper","mappingDropdown","num","selected_property","colorMapContacts","pchainid","includes","protein_contacts","nPath","cPath","split","delete","chain","proteinColorMap","get","add","addEvents","colorMapModifications","modifications","modified_residues","mod","modifiedColorMap","uiActionsService","render","FR3DData","FR3DNestedData","BanName","svgTemplate","title","actionButtons","createModeDropdown","createBPDropdown","saveSVG","bind","getAnnotationFromRibovision","fixOverlaps","xAdjust","yAdjust","sequence","char","ele","label_seq_ids","nextEle","Number","distances","getIntersections","lowest","j","changeBP","flag","displayBaseStrs","displayNestedBaseStrs","allBP","checked","key","set","join","PathOrNucleotide","size","optionList_1","createDomainDropdown","optionList_2","opt","create2D3DAnnotations","name","residueDetails","TWCrgbMap","TWCData","chain_start","chain_end","rgb_color","entity_id","residue_number","sideChain","String","colors","tooltipMsg","parseFloat","toPrecision","tooltipPosition","focus","separatedData","min","Math","apply","max","colormapArray","mapLastValue","TWCData_keys","keys","next","Symbol","iterator","current","filter","order","topology_loaded","obj1","obj2","left1","right1","top1","bottom1","left2","right2","top2","bottom2","calculateFontSize","xVals","yVals","dist","lastPathIndex","svg_paths","pathStr","recordIndex","pathStrParsed","xDiff","yDiff","pow","sortedDist","sort","a","b","floor","download","filename","file","Blob","createElement","url","URL","createObjectURL","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","calcBaseStrs","baseStr","baseMap","font_size","seq_id1","seq_id2","bp","pathID","n1","nt1","n2","nt2","temp","temp2","charAt","slice","reverse","x1","x2","y1","y2","distance","x1_prime","linearlyInterpolate","y1_prime","x2_prime","y2_prime","stroke","xm","ym","distance2","defaultAction","phi","atan2","PI","xm1","ym1","xm2","ym2","v0","v1","interpolationFactor","displayBP","contacts","newList","chem_mods","circlePath","promises","Promise","all","then","banNames","removeEventHandlers","svgData","nodeList","childNodes","attributes","i_1","att","removeNamedItem","locations2","x1Val","y1Val","xVal","yVal","midX","midY","_b","_c","_d","_e","_f","_g","_h","_j","pathEleClass","theme","strokeWide","strokeWidth","unobserved_label_seq_ids","unobservedColor","newPathStr","deltaX","deltaY","newX","newX2","newY","newY2","highlightColor","baseArray","annotations","nestedBaseArray","dimensions","toUpperCase","renderError","errorContent","svgData_forsave","cloneNode","svg","n","v","p","createElementNS","setAttributeNS","replace","m","o","s","getNode","svgEl","outerHTML","svgBlob","svgUrl","downloadLink","saveSvg1","extendStatics","d","setPrototypeOf","__proto__","Array","hasOwnProperty","__extends","TypeError","__","constructor","__assign","assign","t","arguments","__rest","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__esDecorate","ctor","descriptorIn","contextIn","initializers","extraInitializers","accept","f","_","kind","descriptor","done","context","access","addInitializer","result","init","unshift","__runInitializers","thisArg","useValue","__propKey","__setFunctionName","prefix","description","configurable","__metadata","metadataKey","metadataValue","metadata","_arguments","P","generator","resolve","reject","fulfilled","step","rejected","g","ops","verb","op","pop","__createBinding","k","k2","__esModule","writable","enumerable","__exportStar","__values","__read","ar","error","__spread","__spreadArrays","il","jl","__spreadArray","to","from","pack","l","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__setModuleDefault","__importStar","__importDefault","default","__classPrivateFieldGet","receiver","state","has","__classPrivateFieldSet","__classPrivateFieldIn","__addDisposableResource","env","async","dispose","asyncDispose","stack","_SuppressedError","SuppressedError","suppressed","message","Error","__disposeResources","fail","hasError","rec","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","definition","obj","prop","toStringTag","rvAPI","dataService","r2dtjson","targetEle","uiTemplateService","subscribeEvents","json_structures_from_r2dt","RNA_2D_json","RNA_BP_json","auth_seq_id"],"sourceRoot":""}
=======
{"version":3,"file":"pdb-rna-viewer-plugin-0.1.0.js","mappings":"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","sources":["webpack://pdb-rna-viewer/./lib/index.js","webpack://pdb-rna-viewer/./lib/customEvents.js","webpack://pdb-rna-viewer/./lib/data.js","webpack://pdb-rna-viewer/./lib/uiActions.js","webpack://pdb-rna-viewer/./lib/uiTemplate.js","webpack://pdb-rna-viewer/./node_modules/tslib/tslib.es6.js","webpack://pdb-rna-viewer/webpack/bootstrap","webpack://pdb-rna-viewer/webpack/runtime/define property getters","webpack://pdb-rna-viewer/webpack/runtime/hasOwnProperty shorthand","webpack://pdb-rna-viewer/webpack/runtime/make namespace object"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar data_1 = require(\"./data\");\nvar uiTemplate_1 = require(\"./uiTemplate\");\nvar uiActions_1 = require(\"./uiActions\");\nvar customEvents_1 = require(\"./customEvents\");\nvar PdbRnaViewerPlugin = /** @class */ (function () {\n    function PdbRnaViewerPlugin() {\n        this.rvAPI = false;\n        this.dataService = new data_1.DataService();\n    }\n    ;\n    PdbRnaViewerPlugin.prototype.render = function (target, options) {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n            var _a, _b, _c, _d, dataUrls, _e, apiDataJ, FR3DDataJ, FR3DNestedDataJ;\n            var _this = this;\n            return (0, tslib_1.__generator)(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        if (!target || !options.pdbId || !options.chainId || !options.entityId) {\n                            console.log('Invalid plugin input!');\n                            return [2 /*return*/];\n                        }\n                        this.options = options;\n                        _a = this;\n                        return [4 /*yield*/, this.dataService.getApiData(this.options.entityId, this.options.chainId, this.options.pdbId)];\n                    case 1:\n                        _a.apiData = _f.sent();\n                        _b = this;\n                        return [4 /*yield*/, this.dataService.getFR3DData(this.options.pdbId, this.options.chainId)];\n                    case 2:\n                        _b.FR3DData = _f.sent();\n                        _c = this;\n                        return [4 /*yield*/, this.dataService.getFR3DNestedData(this.options.pdbId, this.options.chainId)];\n                    case 3:\n                        _c.FR3DNestedData = _f.sent();\n                        _d = this;\n                        return [4 /*yield*/, data_1.BanNameHelper.getBanName(this.options.pdbId, 'H')];\n                    case 4:\n                        _d.BanName = _f.sent();\n                        this.targetEle = target;\n                        this.uiTemplateService = new uiTemplate_1.UiTemplateService(this.targetEle, this.options, this.apiData);\n                        console.log(\"API\", this.options.pdbId, this.apiData);\n                        if (!this.apiData) return [3 /*break*/, 5];\n                        // draw topology\n                        this.uiTemplateService.render(this.apiData, this.FR3DData, this.FR3DNestedData, this.BanName);\n                        // Bind to other PDB Component events\n                        if (this.options.subscribeEvents) {\n                            customEvents_1.CustomEvents.subscribeToComponentEvents(this);\n                        }\n                        return [3 /*break*/, 9];\n                    case 5:\n                        if (options.rvAPI == true)\n                            this.rvAPI = true;\n                        if (!this.rvAPI) return [3 /*break*/, 8];\n                        dataUrls = window.vm.URL;\n                        return [4 /*yield*/, fetch(dataUrls)];\n                    case 6: return [4 /*yield*/, (_f.sent()).json().then(function (r2dtjson) { return ({\n                            apiDataJ: r2dtjson.RNA_2D_json,\n                            FR3DDataJ: r2dtjson.RNA_BP_json,\n                            FR3DNestedDataJ: r2dtjson.RNA_BP_json,\n                        }); })];\n                    case 7:\n                        _e = _f.sent(), apiDataJ = _e.apiDataJ, FR3DDataJ = _e.FR3DDataJ, FR3DNestedDataJ = _e.FR3DNestedDataJ;\n                        this.apiData = apiDataJ;\n                        this.FR3DData = FR3DDataJ;\n                        this.FR3DNestedData = FR3DNestedDataJ;\n                        console.log('dataUrls', this.apiData);\n                        console.log('dataUrls', this.FR3DData);\n                        // draw topology\n                        this.uiTemplateService.render(this.apiData, this.FR3DData, this.FR3DNestedData, this.BanName);\n                        _f.label = 8;\n                    case 8:\n                        ;\n                        _f.label = 9;\n                    case 9:\n                        document.addEventListener(\"PDB.molstar.mouseover\", (function (e) {\n                            if (e.eventData && e.eventData.auth_seq_id && e.eventData.auth_asym_id === _this.options.chainId) {\n                                _this.selectResidue(e.eventData.auth_seq_id);\n                                //this.clearHighlight()\n                            }\n                        })),\n                            document.addEventListener(\"PDB.molstar.mouseout\", (function (e) {\n                                _this.clearSelection(e.eventData.residueNumber);\n                            }));\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PdbRnaViewerPlugin.prototype.selectResidue = function (label_seq_id, color) {\n        uiActions_1.UiActionsService.selectNucleotide(this.options.pdbId, this.options.entityId, label_seq_id, 'mouseover', false, color);\n    };\n    PdbRnaViewerPlugin.prototype.clearSelection = function (label_seq_id) {\n        uiActions_1.UiActionsService.unSelectNucleotide(this.options.pdbId, this.options.entityId, label_seq_id, false);\n    };\n    PdbRnaViewerPlugin.prototype.highlightResidue = function (label_seq_id, color) {\n        uiActions_1.UiActionsService.colorNucleotide(this.options.pdbId, label_seq_id, color, 'highlight');\n    };\n    PdbRnaViewerPlugin.prototype.clearHighlight = function () {\n        uiActions_1.UiActionsService.clearHighlight(this.options.pdbId);\n    };\n    return PdbRnaViewerPlugin;\n}());\nwindow.PdbRnaViewerPlugin = PdbRnaViewerPlugin;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CustomEvents = void 0;\nvar CustomEvents;\n(function (CustomEvents) {\n    function create(eventTypeArr) {\n        var eventObj = {};\n        for (var ei = 0, el = eventTypeArr.length; ei < el; ei++) {\n            var eventType = eventTypeArr[ei];\n            var event_1 = void 0;\n            if (typeof MouseEvent == 'function') {\n                // current standard\n                event_1 = new MouseEvent(eventType, { 'view': window, 'bubbles': true, 'cancelable': true });\n            }\n            else if (typeof document.createEvent == 'function') {\n                // older standard\n                event_1 = document.createEvent('MouseEvents');\n                event_1.initEvent(eventType, true /* bubbles */, true /* cancelable */);\n            }\n            eventObj[eventType] = event_1;\n        }\n        ;\n        return eventObj;\n    }\n    CustomEvents.create = create;\n    function dispatchCustomEvent(event, eventData, targetElement) {\n        event['eventData'] = eventData;\n        targetElement.dispatchEvent(event);\n    }\n    CustomEvents.dispatchCustomEvent = dispatchCustomEvent;\n    function subscribeToComponentEvents(pluginCtx) {\n        document.addEventListener('protvista-click', function (e) {\n            if (typeof e.detail !== 'undefined') {\n                var startResidue = parseInt(e.detail.start);\n                var endResidue = parseInt(e.detail.end);\n                pluginCtx.clearSelection();\n                for (var i = startResidue; i <= endResidue; i++) {\n                    pluginCtx.selectResidue(i, e.detail.color);\n                }\n            }\n        });\n        document.addEventListener('protvista-mouseover', function (e) {\n            if (typeof e.detail !== 'undefined') {\n                var startResidue = parseInt(e.detail.start);\n                var endResidue = parseInt(e.detail.end);\n                pluginCtx.clearHighlight();\n                for (var i = startResidue; i <= endResidue; i++) {\n                    pluginCtx.highlightResidue(i, e.detail.color);\n                }\n            }\n        });\n        document.addEventListener('protvista-mouseout', function (e) {\n            pluginCtx.clearHighlight();\n        });\n        document.addEventListener(\"PDB.molstar.click\", function (e) {\n            if (typeof e.eventData !== 'undefined' && typeof e.eventData.residueNumber !== 'undefined' && e.eventData.auth_asym_id === pluginCtx.options.chainId) {\n                pluginCtx.clearSelection();\n                pluginCtx.selectResidue(e.eventData.residueNumber);\n            }\n        });\n        document.addEventListener(\"PDB.molstar.mouseover\", function (e) {\n            if (typeof e.eventData !== 'undefined' && typeof e.eventData.residueNumber !== 'undefined' && e.eventData.auth_asym_id === pluginCtx.options.chainId) {\n                pluginCtx.clearHighlight();\n                pluginCtx.highlightResidue(e.eventData.residueNumber);\n            }\n        });\n        document.addEventListener(\"PDB.molstar.mouseout\", function () {\n            pluginCtx.clearHighlight();\n        });\n    }\n    CustomEvents.subscribeToComponentEvents = subscribeToComponentEvents;\n})(CustomEvents = exports.CustomEvents || (exports.CustomEvents = {}));\n//# sourceMappingURL=customEvents.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BanNameHelper = exports.DataService = void 0;\nvar tslib_1 = require(\"tslib\");\nvar DataService = /** @class */ (function () {\n    function DataService() {\n    }\n    DataService.prototype.getApiData = function (entityId, chainId, pdbId) {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n            var apiUrl, e_1;\n            return (0, tslib_1.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        apiUrl = \"https://www.ebi.ac.uk/pdbe/static/entry/\" + pdbId.toLowerCase() + \"_\" + entityId + \"_\" + chainId + \".json\";\n                        return [4 /*yield*/, fetch(apiUrl)];\n                    case 1: return [4 /*yield*/, (_a.sent()).json()];\n                    case 2: return [2 /*return*/, _a.sent()];\n                    case 3:\n                        e_1 = _a.sent();\n                        this.handleError(e_1);\n                        return [2 /*return*/, void 0];\n                    case 4:\n                        ;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    DataService.prototype.getFR3DData = function (pdbId, chainId) {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n            var csvUrl, e_2;\n            return (0, tslib_1.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        csvUrl = \"https://rnacentral.org/api/internal/proxy?url=http://rna.bgsu.edu/rna3dhub/rest/getChainSequenceBasePairs?pdb_id=\" + pdbId.toLowerCase() + \"&chain=\" + chainId + \"&only_nested=False\";\n                        return [4 /*yield*/, fetch(csvUrl)];\n                    case 1: return [4 /*yield*/, (_a.sent()).json()];\n                    case 2: \n                    //const csvUrl = `http://rna.bgsu.edu/rna3dhub/rest/getSequenceBasePairs?pdb_id=${pdbId.toLowerCase()}&chain=${chainId}`\n                    //const csvUrl = `https://rnacentral.org/api/internal/proxy?url=http://rna.bgsu.edu/rna3dhub/rest/getSequenceBasePairs?pdb_id=${pdbId.toLowerCase()}&chain=${chainId}&only_nested=True`\n                    //const csvUrl = `http://rna.bgsu.edu/rna3dhub/pdb/${pdbId.toLowerCase()}/interactions/fr3d/basepairs/csv`;\n                    return [2 /*return*/, _a.sent()];\n                    case 3:\n                        e_2 = _a.sent();\n                        this.handleFR3DError(e_2);\n                        return [2 /*return*/, void 0];\n                    case 4:\n                        ;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    DataService.prototype.getFR3DNestedData = function (pdbId, chainId) {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n            var csvUrl, e_3;\n            return (0, tslib_1.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        csvUrl = \"https://rnacentral.org/api/internal/proxy?url=http://rna.bgsu.edu/rna3dhub/rest/getChainSequenceBasePairs?pdb_id=\" + pdbId.toLowerCase() + \"&chain=\" + chainId + \"&only_nested=True\";\n                        return [4 /*yield*/, fetch(csvUrl)];\n                    case 1: return [4 /*yield*/, (_a.sent()).json()];\n                    case 2: \n                    //const csvUrl = `https://rnacentral.org/api/internal/proxy?url=http://rna.bgsu.edu/rna3dhub/rest/getSequenceBasePairs?pdb_id=${pdbId.toLowerCase()}&chain=${chainId}&only_nested=True`\n                    //const csvUrl = `http://rna.bgsu.edu/rna3dhub/pdb/${pdbId.toLowerCase()}/interactions/fr3d/basepairs/csv`;\n                    return [2 /*return*/, _a.sent()];\n                    case 3:\n                        e_3 = _a.sent();\n                        this.handleFR3DError(e_3);\n                        return [2 /*return*/, void 0];\n                    case 4:\n                        ;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    DataService.prototype.handleError = function (e) {\n        console.log(\"RNA topology data not available!\", e);\n    };\n    DataService.prototype.handleFR3DError = function (e) {\n        console.log(\"FR3D mapping data not available!\", e);\n    };\n    return DataService;\n}());\nexports.DataService = DataService;\nvar BanNameHelper = /** @class */ (function () {\n    function BanNameHelper() {\n    }\n    BanNameHelper.getBanName = function (pdbId, PchainId) {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n            var apiUrl, e_4;\n            return (0, tslib_1.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        apiUrl = \"https://api.ribosome.xyz/neo4j/get_banclass_for_chain/?pdbid=\" + pdbId + \"&auth_asym_id=\" + PchainId + \"&format=json\";\n                        return [4 /*yield*/, fetch(apiUrl)];\n                    case 1: return [4 /*yield*/, (_a.sent()).json()];\n                    case 2: return [2 /*return*/, _a.sent()];\n                    case 3:\n                        e_4 = _a.sent();\n                        //console.log(`Ban naming is not available!`, e);\n                        return [2 /*return*/, void 0];\n                    case 4:\n                        ;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return BanNameHelper;\n}());\nexports.BanNameHelper = BanNameHelper;\n//# sourceMappingURL=data.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UiActionsService = void 0;\nvar customEvents_1 = require(\"./customEvents\");\nvar UiActionsService = /** @class */ (function () {\n    function UiActionsService(pdbId) {\n        this.pdbId = pdbId;\n    }\n    UiActionsService.prototype.applyButtonActions = function () {\n        var _this = this;\n        var svgEle = d3.select('.rnaTopoSvg');\n        // initialize SVG zoom behaviour and remove mouse wheel zoom events\n        var zoom1 = d3.zoom().on('zoom', function () {\n            d3.select(\".rnaTopoSvg_\" + _this.pdbId).attr(\"transform\", d3.event.transform);\n            d3.select(\".rnaTopoSvgHighlight_\" + _this.pdbId).attr(\"transform\", d3.event.transform);\n            d3.select(\".rnaTopoSvgSelection_\" + _this.pdbId).attr(\"transform\", d3.event.transform);\n        });\n        d3.select(\".rnaTopoSvg\").call(zoom1)\n            .on('dblclick.zoom', null)\n            .on('wheel.zoom', null)\n            .on('mousewheel.zoom', null);\n        // zoom-in button behaviour\n        d3.select(\"#rnaTopologyZoomIn-\" + this.pdbId)\n            .on(\"click\", function () {\n            d3.event.stopPropagation();\n            zoom1.scaleBy(svgEle.transition().duration(300), 1.2);\n        });\n        // zoom-out button behaviour\n        d3.select(\"#rnaTopologyZoomOut-\" + this.pdbId)\n            .on(\"click\", function () {\n            d3.event.stopPropagation();\n            var rnaTopoSvg = d3.select(\".rnaTopoSvg_\" + _this.pdbId);\n            var transformValue = rnaTopoSvg._groups[0][0].getAttribute('transform');\n            if (transformValue && transformValue !== '') {\n                if (transformValue === null)\n                    return;\n                var transformValMatch = +transformValue.match(/.+scale\\((.*)\\)/)[1];\n                if (transformValMatch <= 1 || (transformValMatch - 0.3 <= 1)) {\n                    svgEle.transition().duration(300).call(zoom1.transform, d3.zoomIdentity);\n                    return;\n                }\n            }\n            zoom1.scaleBy(d3.select(\".rnaTopoSvg\").transition().duration(300), 0.8);\n        });\n        // reset button behaviour\n        d3.select(\"#rnaTopologyReset-\" + this.pdbId)\n            .on(\"click\", function () {\n            d3.event.stopPropagation();\n            svgEle.transition().duration(300).call(zoom1.transform, d3.zoomIdentity);\n        });\n        // selection and highlight reset on canvas click\n        d3.select(\".pdb-rna-view-container-\" + this.pdbId)\n            .on(\"click\", function () {\n            d3.event.stopPropagation();\n            UiActionsService.clearHighlight(_this.pdbId);\n            UiActionsService.clearSelection(_this.pdbId);\n        });\n    };\n    UiActionsService.unSelectNucleotide = function (pdbId, entityId, label_seq_id, isUnobserved, event, color) {\n        event === null || event === void 0 ? void 0 : event.stopImmediatePropagation();\n        UiActionsService.clearHighlight(pdbId);\n        var ttEle = document.getElementById(pdbId + \"-rnaTopologyTooltip\");\n        if (ttEle) {\n            ttEle.style.display = 'none';\n        }\n        if (!isUnobserved) {\n            if (label_seq_id == undefined) {\n                label_seq_id = this.lastSelected;\n            }\n            if (label_seq_id > -1) {\n                var evData = { pdbId: pdbId, label_seq_id: label_seq_id, entityId: entityId };\n                var textElement = document.querySelector(\".rnaview_\" + pdbId + \"_\" + label_seq_id);\n                if (textElement) {\n                    customEvents_1.CustomEvents.dispatchCustomEvent(UiActionsService.pdbevents['PDB.RNA.viewer.mouseout'], evData, textElement);\n                }\n            }\n        }\n    };\n    UiActionsService.showCheckboxes = function () {\n        var checkboxes = document.getElementById(\"checkboxes\");\n        if (!this.expanded) {\n            checkboxes.style.display = \"block\";\n            this.expanded = true;\n        }\n        else {\n            checkboxes.style.display = \"none\";\n            this.expanded = false;\n        }\n    };\n    UiActionsService.clearHighlight = function (pdbId) {\n        if (this.selected > -1) {\n            var nucleotide = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"rnaviewEle rnaviewEle_\" + pdbId + \" rnaview_\" + pdbId + \"_\" + this.selected)[0];\n            if (this.selectedColor && nucleotide) {\n                if (nucleotide.nodeName == 'text') {\n                    nucleotide.setAttribute(\"fill\", UiActionsService.selectedColor);\n                }\n                else {\n                    nucleotide.setAttribute(\"stroke\", UiActionsService.selectedColor);\n                }\n            }\n            else if (nucleotide) {\n                if (nucleotide.nodeName == 'text') {\n                    nucleotide.setAttribute(\"fill\", \"#323232\");\n                }\n                else {\n                    nucleotide.setAttribute(\"stroke\", \"#323232\");\n                }\n            }\n            this.selected = -1;\n        }\n        //document.querySelector(`.rnaTopoSvgHighlight_${pdbId}`)!.innerHTML = \"\";\n    };\n    UiActionsService.clearSelection = function (pdbId) {\n        document.querySelector(\".rnaTopoSvgSelection_\" + pdbId) ? document.querySelector(\".rnaTopoSvgSelection_\" + pdbId).innerHTML = \"\" : null;\n    };\n    UiActionsService.showTooltip = function (evt, text, path, color, fill) {\n        var tooltip = document.getElementById(\"tooltip\");\n        tooltip.id = \"tooltip\";\n        tooltip.innerHTML = text;\n        tooltip.style.display = \"block\";\n        tooltip.style.left = evt.layerX + 'px';\n        tooltip.style.top = evt.layerY + 'px';\n        UiActionsService.selectedBPColor = color;\n        UiActionsService.fillBPColor = fill;\n        var node = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(path)[0];\n        if (node.nodeName != 'text') {\n            node.setAttribute(\"stroke\", \"orange\");\n        }\n        node.setAttribute(\"fill\", \"orange\");\n    };\n    UiActionsService.hideTooltip = function (path) {\n        var tooltip = document.getElementById(\"tooltip\");\n        tooltip.style.display = \"none\";\n        var node = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(path)[0];\n        if (node.nodeName != 'text') {\n            node.setAttribute(\"stroke\", \"\" + UiActionsService.selectedBPColor);\n        }\n        node.setAttribute(\"fill\", \"\" + UiActionsService.fillBPColor);\n    };\n    UiActionsService.drawCircle = function (index, color, pdbId) {\n        var circle = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"circle_\" + pdbId + \"_\" + index)[0];\n        var nucleotide = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"rnaviewEle rnaviewEle_\" + pdbId + \" rnaview_\" + pdbId + \"_\" + index)[0];\n        var BBox = nucleotide.getBBox();\n        var nx = (BBox.x + BBox.width / 2);\n        var ny = (BBox.y + BBox.height / 2);\n        circle.setAttribute(\"cx\", nx);\n        circle.setAttribute(\"cy\", ny);\n        circle.setAttribute(\"stroke\", \"\" + color);\n        circle.setAttribute(\"fill\", \"\" + color);\n        circle.style.display = \"block\";\n    };\n    UiActionsService.pdbevents = customEvents_1.CustomEvents.create(['PDB.RNA.viewer.click', 'PDB.RNA.viewer.mouseover', 'PDB.RNA.viewer.mouseout']);\n    UiActionsService.lastSelected = -1;\n    UiActionsService.selected = -1;\n    UiActionsService.selectedPath = '';\n    UiActionsService.selectedBPColor = '';\n    UiActionsService.fillBPColor = '';\n    UiActionsService.selectedColor = '';\n    UiActionsService.expanded = false;\n    UiActionsService.selectNucleotide = function (pdbId, entityId, label_seq_id, eventType, isUnobserved, residue, event, color) {\n        event === null || event === void 0 ? void 0 : event.stopImmediatePropagation();\n        if (document.querySelector(\"svg.rnaTopoSvg\")) {\n            UiActionsService.clearHighlight(pdbId);\n            UiActionsService.colorNucleotide(pdbId, label_seq_id, color, 'highlight');\n            UiActionsService.selected = label_seq_id;\n            UiActionsService.lastSelected = label_seq_id;\n            var ttEle = document.getElementById(pdbId + \"-rnaTopologyTooltip\");\n            ttEle.style.display = 'inline';\n            ttEle.innerHTML = \"<strong>\" + (isUnobserved ? 'Unobserved ' : '') + \"Residue \" + (residue ? residue : '') + \" \" + label_seq_id + \"</strong>\";\n            if (!isUnobserved) {\n                var eventName = (eventType === 'click') ? 'PDB.RNA.viewer.click' : 'PDB.RNA.viewer.mouseover';\n                var evData = { pdbId: pdbId, label_seq_id: label_seq_id, entityId: entityId };\n                var textElement = document.querySelector(\".rnaview_\" + pdbId + \"_\" + label_seq_id);\n                if (textElement) {\n                    customEvents_1.CustomEvents.dispatchCustomEvent(UiActionsService.pdbevents[eventName], evData, textElement);\n                }\n            }\n        }\n    };\n    UiActionsService.colorNucleotide = function (pdbId, label_seq_id, color, type, shape) {\n        //const textElement: any = document.querySelector(`.rnaview_${pdbId}_${label_seq_id}`);\n        //const textEleStrokeWidth = parseInt(textElement.getAttribute('stroke-width'));\n        var strokeColor = color || 'orange';\n        //const svgClassPrefix = (type === 'highlight') ? 'rnaTopoSvgHighlight' : 'rnaTopoSvgSelection';\n        //const highlightSvg = document.querySelector(`.${svgClassPrefix}_${pdbId}`);\n        /*\n        const newTextEle = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        newTextEle.setAttribute('stroke-width', (textEleStrokeWidth * 3).toString());\n        newTextEle.setAttribute('stroke', strokeColor);\n        newTextEle.setAttribute('fill', strokeColor);\n        highlightSvg!.appendChild(newTextEle);\n        */\n        if (shape == 'circle') {\n            var circle = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"circle_\" + pdbId + \"_\" + label_seq_id)[0];\n            if (type == 'highlight') {\n                if (circle.getAttribute(\"stroke\")) {\n                    UiActionsService.selectedColor = circle.getAttribute(\"stroke\");\n                }\n            }\n            if (circle) {\n                circle.setAttribute(\"stroke\", \"\" + color);\n                circle.setAttribute(\"fill\", \"\" + color);\n                circle.style.display = \"block\";\n            }\n        }\n        var nucleotide = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"rnaviewEle rnaviewEle_\" + pdbId + \" rnaview_\" + pdbId + \"_\" + label_seq_id)[0];\n        if (nucleotide) {\n            if (nucleotide.nodeName == 'path') {\n                if (type == 'highlight') {\n                    if (nucleotide.getAttribute(\"stroke\")) {\n                        UiActionsService.selectedColor = nucleotide.getAttribute(\"stroke\");\n                    }\n                    else {\n                        UiActionsService.selectedColor = \"#323232\";\n                    }\n                }\n                nucleotide.setAttribute(\"stroke\", strokeColor);\n            }\n            else if (nucleotide.nodeName == 'text') {\n                if (type == 'highlight') {\n                    if (nucleotide.getAttribute(\"fill\")) {\n                        UiActionsService.selectedColor = nucleotide.getAttribute(\"fill\");\n                    }\n                    else {\n                        UiActionsService.selectedColor = \"#323232\";\n                    }\n                }\n                nucleotide.setAttribute(\"fill\", strokeColor);\n            }\n        }\n    };\n    return UiActionsService;\n}());\nexports.UiActionsService = UiActionsService;\nwindow.UiActionsService = UiActionsService;\n//# sourceMappingURL=uiActions.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UiTemplateService = void 0;\nvar uiActions_1 = require(\"./uiActions\");\nvar data_1 = require(\"./data\");\nvar UiTemplateService = /** @class */ (function () {\n    function UiTemplateService(containerElement, pluginOptions, apiData) {\n        var _this_1 = this;\n        this.selectSections_RV1 = window.selectSections_RV1;\n        this.aaPropertyConstants = window.aaPropertyConstants;\n        this.mapped_aa_properties = window.mapped_aa_properties;\n        this.aaColorData = window.aaColorData;\n        this.parsePVData = window.parsePVData;\n        this.getEntropyAnnotations = window.getEntropyAnnotations;\n        this.getTWCAnnotations = window.getTWCAnnotations;\n        this.getCustomAnnotations = window.getCustomAnnotations;\n        this.getAnnotationArray = window.getAnnotationArray;\n        this.rv3VUEcomponent = window.vm;\n        this.locations = new Map();\n        this.menuStyle = 'position:relative;z-index:10;height:7%;width:500px;line-height:7%;background-color:#696969;padding: 0 10px;font-size:16px; color: #efefef;display:inline-block;';\n        this.pathStrs = [];\n        this.nucleotideStrs = [];\n        this.circleStrs = [];\n        this.baseStrs = new Map();\n        this.nestedBaseStrs = new Map();\n        this.basePairIDs = [];\n        this.mappingValue = '';\n        this.showAllNucleotides = false;\n        this.mouseOverMap = new Map();\n        this.eventMap = new Map();\n        this.toolTips = new Map();\n        this.selectSectionsTest = [];\n        this.defaultColours = {\n            domainSelection: 'rgb(255,0,0)',\n            mouseOver: 'rgb(105,105,105)',\n            borderColor: 'rgb(0,0,0)',\n            qualityGreen: 'rgb(0,182.85714285714286,0)',\n            qualityRed: 'rgb(291.42857142857144,0,0)',\n            qualityYellow: 'rgb(364.2857142857143,364.2857142857143,75.71428571428572)',\n            qualityRiboVision: \"rgb(203,203,203)\",\n            qualityOrange: 'rgb(291.42857142857144,121.42857142857143,0)',\n            qualityBlank: 'rgb(255,255,255)'\n        };\n        this.mapped_chains = new Set();\n        this.mapped_modifications = new Set();\n        this.drawCircle = function (pdbId, i, color) {\n            var circle = document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"circle_\" + pdbId + \"_\" + i)[0];\n            //const nucleotide = <SVGSVGElement>document.querySelector(`svg.rnaTopoSvg`)!.getElementsByClassName(`rnaviewEle rnaviewEle_${pdbId} rnaview_${pdbId}_${i}`)[0]\n            //const BBox = nucleotide.getBBox()\n            //const nx = `${BBox.x + BBox.width/2}`\n            //const ny = `${BBox.y + BBox.height/2}`\n            //circle.setAttribute(\"cx\", nx)\n            //circle.setAttribute(\"cy\", ny)\n            circle.setAttribute(\"stroke\", \"\" + color);\n            circle.setAttribute(\"fill\", \"\" + color);\n            circle.style.display = \"block\";\n        };\n        this.colorMap = function () {\n            var selectBoxEle = _this_1.containerElement.querySelector('.mappingSelectbox');\n            var selectedValue = parseInt(selectBoxEle.value);\n            if (selectedValue) {\n                var selectedDomain = _this_1.domainTypes[selectedValue];\n                if (selectedDomain.data) {\n                    selectedDomain.data.forEach(function (val, i) {\n                        if (val != undefined && val.color != undefined) {\n                            if (val.color.indexOf('NaN') < 0) {\n                                //this.drawCircle(this.pluginOptions.pdbId, val.start, val.color);\n                                //UiActionsService.colorNucleotide(this.pluginOptions.pdbId, val.start, val.color);\n                                uiActions_1.UiActionsService.colorNucleotide(_this_1.pluginOptions.pdbId, val.start, val.color, undefined, _this_1.mappingValue);\n                            }\n                        }\n                    });\n                }\n            }\n            else {\n                var tempDomain = _this_1.domainTypes[1];\n                if (tempDomain.data) {\n                    tempDomain.data.forEach(function (val, i) {\n                        if (val != undefined && val.start != undefined) {\n                            uiActions_1.UiActionsService.colorNucleotide(_this_1.pluginOptions.pdbId, val.start, 'rgb(0,0,0)', undefined, _this_1.mappingValue);\n                        }\n                    });\n                }\n                _this_1.colorMapContacts();\n                _this_1.colorMapModifications();\n            }\n        };\n        this.colorMapHelper = function () {\n            var mappingDropdown = _this_1.containerElement.querySelector('.mappingSelectbox');\n            var num = +mappingDropdown.value;\n            document.getElementById('selectColorMappingProps').value = mappingDropdown.options[num].text;\n            _this_1.rv3VUEcomponent.selected_property = mappingDropdown.options[num].text;\n        };\n        this.colorMapContacts = function () {\n            if (_this_1.rv3VUEcomponent.pchainid.length > 0 && _this_1.rv3VUEcomponent.selected_property != \"Select data\") {\n                _this_1.rv3VUEcomponent.selected_property = \"Select data\";\n            }\n            _this_1.mapped_chains.forEach(function (val) {\n                if (!_this_1.rv3VUEcomponent.pchainid.includes(val)) {\n                    for (var i in _this_1.rv3VUEcomponent.protein_contacts[val]) {\n                        uiActions_1.UiActionsService.colorNucleotide(_this_1.pluginOptions.pdbId, _this_1.rv3VUEcomponent.protein_contacts[val][i], '#323232', undefined, _this_1.mappingValue);\n                        var nPath = \"rnaviewEle rnaviewEle_\" + _this_1.pluginOptions.pdbId + \" rnaview_\" + _this_1.pluginOptions.pdbId + \"_\" + _this_1.rv3VUEcomponent.protein_contacts[val][i];\n                        var cPath = \"circle_\" + _this_1.pluginOptions.pdbId + \"_\" + _this_1.rv3VUEcomponent.protein_contacts[val][i];\n                        if (document.getElementsByClassName(nPath).length > 0) {\n                            document.getElementsByClassName(nPath)[0].setAttribute('onmouseover', document.getElementsByClassName(nPath)[0].getAttribute('onmouseover').split(';')[0]);\n                            document.getElementsByClassName(nPath)[0].setAttribute('onmouseout', document.getElementsByClassName(nPath)[0].getAttribute('onmouseout').split(';')[0]);\n                            //document.getElementsByClassName(nPath)[0].removeEventListener('mouseover', this.mouseOverMap.get(nPath))\n                            //document.getElementsByClassName(nPath)[0].removeEventListener('mouseout',this.eventMap.get(nPath))\n                        }\n                        if (document.getElementsByClassName(cPath).length > 0) {\n                            document.getElementsByClassName(cPath)[0].setAttribute('onmouseover', document.getElementsByClassName(cPath)[0].getAttribute('onmouseover').split(';')[0]);\n                            document.getElementsByClassName(cPath)[0].setAttribute('onmouseout', document.getElementsByClassName(cPath)[0].getAttribute('onmouseout').split(';')[0]);\n                            //document.getElementsByClassName(cPath)[0].removeEventListener('mouseover', this.mouseOverMap.get(cPath))\n                            //document.getElementsByClassName(cPath)[0].removeEventListener('mouseout',this.eventMap.get(cPath))\n                        }\n                        /*\n                        var circle = (<any>document.querySelector(`svg.rnaTopoSvg`))!.getElementsByClassName(cPath)[0];\n                        if(circle) {\n                            circle.style.display=\"none\";\n                        }*/\n                    }\n                    _this_1.mapped_chains.delete(val);\n                }\n            });\n            for (var val in _this_1.rv3VUEcomponent.pchainid) {\n                var chain = _this_1.rv3VUEcomponent.pchainid[val];\n                for (var i in _this_1.rv3VUEcomponent.protein_contacts[chain]) {\n                    uiActions_1.UiActionsService.colorNucleotide(_this_1.pluginOptions.pdbId, _this_1.rv3VUEcomponent.protein_contacts[chain][i], _this_1.rv3VUEcomponent.proteinColorMap.get(chain), undefined, _this_1.mappingValue);\n                }\n                _this_1.mapped_chains.add(chain);\n            }\n            _this_1.addEvents(_this_1.apiData, data_1.BanNameHelper.getBanName(_this_1.pluginOptions.pdbId, ''));\n        };\n        this.colorMapModifications = function () {\n            if (_this_1.rv3VUEcomponent.pchainid.length > 0 && _this_1.rv3VUEcomponent.selected_property != \"Select data\") {\n                _this_1.rv3VUEcomponent.selected_property = \"Select data\";\n            }\n            _this_1.mapped_modifications.forEach(function (val) {\n                if (!_this_1.rv3VUEcomponent.modifications.includes(val)) {\n                    for (var i in _this_1.rv3VUEcomponent.modified_residues.get(val)) {\n                        uiActions_1.UiActionsService.colorNucleotide(_this_1.pluginOptions.pdbId, _this_1.rv3VUEcomponent.modified_residues.get(val)[i], '#323232', undefined, _this_1.mappingValue);\n                        var nPath = \"rnaviewEle rnaviewEle_\" + _this_1.pluginOptions.pdbId + \" rnaview_\" + _this_1.pluginOptions.pdbId + \"_\" + _this_1.rv3VUEcomponent.modified_residues.get(val)[i];\n                        var cPath = \"circle_\" + _this_1.pluginOptions.pdbId + \"_\" + _this_1.rv3VUEcomponent.modified_residues.get(val)[i];\n                        if (document.getElementsByClassName(nPath).length > 0) {\n                            document.getElementsByClassName(nPath)[0].setAttribute('onmouseover', document.getElementsByClassName(nPath)[0].getAttribute('onmouseover').split(';')[0]);\n                            document.getElementsByClassName(nPath)[0].setAttribute('onmouseout', document.getElementsByClassName(nPath)[0].getAttribute('onmouseout').split(';')[0]);\n                            //document.getElementsByClassName(nPath)[0].removeEventListener('mouseover', this.mouseOverMap.get(nPath))\n                            //document.getElementsByClassName(nPath)[0].removeEventListener('mouseout',this.eventMap.get(nPath))\n                        }\n                        if (document.getElementsByClassName(cPath).length > 0) {\n                            document.getElementsByClassName(cPath)[0].setAttribute('onmouseover', document.getElementsByClassName(cPath)[0].getAttribute('onmouseover').split(';')[0]);\n                            document.getElementsByClassName(cPath)[0].setAttribute('onmouseout', document.getElementsByClassName(cPath)[0].getAttribute('onmouseout').split(';')[0]);\n                            //document.getElementsByClassName(cPath)[0].removeEventListener('mouseover', this.mouseOverMap.get(cPath))\n                            //document.getElementsByClassName(cPath)[0].removeEventListener('mouseout',this.eventMap.get(cPath))\n                        }\n                        /*\n                        var circle = (<any>document.querySelector(`svg.rnaTopoSvg`))!.getElementsByClassName(cPath)[0];\n                        if(circle) {\n                            circle.style.display=\"none\";\n                        } */\n                    }\n                    _this_1.mapped_modifications.delete(val);\n                }\n            });\n            for (var val in _this_1.rv3VUEcomponent.modifications) {\n                var mod = _this_1.rv3VUEcomponent.modifications[val];\n                for (var i in _this_1.rv3VUEcomponent.modified_residues.get(mod)) {\n                    uiActions_1.UiActionsService.colorNucleotide(_this_1.pluginOptions.pdbId, _this_1.rv3VUEcomponent.modified_residues.get(mod)[i], _this_1.rv3VUEcomponent.modifiedColorMap.get(mod), undefined, _this_1.mappingValue);\n                }\n                _this_1.mapped_modifications.add(mod);\n            }\n            _this_1.addEvents(_this_1.apiData);\n        };\n        this.containerElement = containerElement;\n        this.pluginOptions = pluginOptions;\n        this.apiData = apiData;\n        this.uiActionsService = new uiActions_1.UiActionsService(this.pluginOptions.pdbId);\n    }\n    UiTemplateService.prototype.render = function (apiData, FR3DData, FR3DNestedData, BanName) {\n        this.containerElement.innerHTML =\n            \"<div class=\\\"pdb-rna-view-container pdb-rna-view-container-\" + this.pluginOptions.pdbId + \"\\\">\\n            \" + this.svgTemplate(apiData, FR3DData, FR3DNestedData) + \"\\n            \" + this.title() + \"\\n            \" + this.tooltip() + \"\\n            \" + this.actionButtons() + \"\\n        </div>\\n        <div style=\\\"\" + this.menuStyle + \"\\\">\\n                <div class=\\\"menuOptions\\\" style=\\\"width:95%;float:center;display:inline-block;\\\">\\n                    <form>\\n                    <input type=\\\"checkbox\\\" id=\\\"nestedBP\\\" name=\\\"nestedBP\\\" style=\\\"width:5%; display: inline-block; float: left;>\\n                    <label for=\\\"nestedBP\\\" style=\\\"width:20%; display: inline-block; float: left;\\\"> Only nested BPs</label>\\n                    <select class=\\\"menuSelectbox\\\" style=\\\"width:20%; display: inline-block;\\\"><option value=\\\"\\\">Nucleotides</option></select>\\n                    <select class=\\\"mappingSelectbox\\\" style=\\\"width:20%; display: inline-block;\\\"><option value=\\\"\\\">Mapping</option></select>\\n                    <div class=\\\"multiselect\\\">\\n                        <div class=\\\"selectBox\\\" onclick=\\\"UiActionsService.showCheckboxes()\\\" style=\\\"display:inline-block;float:right;width:25%\\\">\\n                            <select id=\\\"basePairingSelectElement\\\">\\n                                <option>Base Pairings</option>\\n                            </select>\\n                            <div class=\\\"overSelect\\\"></div>\\n                        </div>\\n                        <div id=\\\"checkboxes\\\">\\n                        </div>\\n                    </div>\\n                    </form>\\n                </div>\\n        </div>\\n        \";\n        //this.getJSON(apiData)\n        //this.fixOverlaps(apiData)\n        this.createModeDropdown();\n        this.createBPDropdown();\n        this.uiActionsService.applyButtonActions();\n        this.addEvents(apiData, BanName);\n        document.querySelector(\".saveSVG\").addEventListener(\"click\", this.saveSVG.bind(this));\n        this.getAnnotationFromRibovision(this.mapped_aa_properties);\n        //this.rv3VUEcomponent.topology_loaded=true;\n    };\n    UiTemplateService.prototype.fixOverlaps = function (apiData) {\n        var _this_1 = this;\n        var svgEle = document.querySelector(\"svg.rnaTopoSvg.rnaTopoSvg_\" + this.pluginOptions.pdbId);\n        var xAdjust = 0;\n        var yAdjust = 0;\n        apiData.sequence.split('').forEach(function (char, i) {\n            if (i === 0 || i === (apiData.sequence.length)) {\n                return;\n            }\n            var ele = svgEle.getElementsByClassName(\"rnaviewEle rnaviewEle_\" + _this_1.pluginOptions.pdbId + \" rnaview_\" + _this_1.pluginOptions.pdbId + \"_\" + apiData.label_seq_ids[i])[0];\n            var nextEle = svgEle.getElementsByClassName(\"rnaviewEle rnaviewEle_\" + _this_1.pluginOptions.pdbId + \" rnaview_\" + _this_1.pluginOptions.pdbId + \"_\" + apiData.label_seq_ids[i + 1])[0];\n            nextEle.setAttribute(\"y\", Number(nextEle.getAttribute(\"y\")) + yAdjust);\n            nextEle.setAttribute(\"x\", Number(nextEle.getAttribute(\"x\")) + xAdjust);\n            var distances = _this_1.getIntersections(ele.getBBox(), nextEle.getBBox());\n            if (distances) {\n                var lowest = 0;\n                for (var j = 1; j < distances.length; j++) {\n                    if (distances[j] < distances[lowest])\n                        lowest = j;\n                }\n                if (lowest === 1) {\n                    nextEle.setAttribute(\"y\", Number(nextEle.getAttribute(\"y\")) - Number(distances[1]));\n                    yAdjust = yAdjust - Number(distances[1]);\n                }\n                else if (lowest === 3) {\n                    nextEle.setAttribute(\"y\", Number(nextEle.getAttribute(\"y\")) + Number(distances[3]));\n                    yAdjust = yAdjust + Number(distances[3]);\n                }\n                else if (lowest === 0) {\n                    nextEle.setAttribute(\"x\", Number(nextEle.getAttribute(\"x\")) - Number(distances[0]));\n                    xAdjust = xAdjust - Number(distances[0]);\n                }\n                else if (lowest === 2) {\n                    nextEle.setAttribute(\"x\", Number(nextEle.getAttribute(\"x\")) + Number(distances[2]));\n                    xAdjust = xAdjust + Number(distances[2]);\n                }\n            }\n        });\n    };\n    UiTemplateService.prototype.changeBP = function (val, flag) {\n        var _this_1 = this;\n        if (flag === void 0) { flag = undefined; }\n        this.displayBaseStrs = '';\n        this.displayNestedBaseStrs = '';\n        var allBP = this.containerElement.querySelector('#Checkbox_All').checked;\n        if ((val == 'All')) {\n            this.baseStrs.forEach(function (value, key) {\n                _this_1.baseStrs.set(key, [allBP, value[1]]);\n                _this_1.nestedBaseStrs.set(key, [allBP, _this_1.nestedBaseStrs.get(key)[1]]);\n                document.getElementById(\"Checkbox_\" + key).checked = allBP;\n                if (allBP) {\n                    _this_1.displayBaseStrs += value[1].join('');\n                    _this_1.displayNestedBaseStrs += _this_1.nestedBaseStrs.get(key)[1].join('');\n                }\n            });\n        }\n        else {\n            if (flag !== null && flag !== void 0 ? flag : this.baseStrs.get(val)[0]) {\n                this.baseStrs.set(val, [false, this.baseStrs.get(val)[1]]);\n                this.nestedBaseStrs.set(val, [false, this.nestedBaseStrs.get(val)[1]]);\n            }\n            else {\n                this.baseStrs.set(val, [true, this.baseStrs.get(val)[1]]);\n                this.nestedBaseStrs.set(val, [true, this.nestedBaseStrs.get(val)[1]]);\n            }\n            this.baseStrs.forEach(function (value, key) {\n                if (value[0]) {\n                    _this_1.displayBaseStrs += value[1].join('');\n                    _this_1.displayNestedBaseStrs += _this_1.nestedBaseStrs.get(key)[1].join('');\n                }\n            });\n        }\n        this.PathOrNucleotide();\n    };\n    UiTemplateService.prototype.createBPDropdown = function () {\n        var _this_1 = this;\n        var _a;\n        if (this.baseStrs.size > 0) {\n            var optionList_1 = '<table><tr><td><label for = \"Checkbox_All\"><input type=\"checkbox\" id=\"Checkbox_All\" /> All</label></td>';\n            var i = 1;\n            this.baseStrs.forEach(function (value, key) {\n                if (i % 2 == 0) {\n                    optionList_1 = optionList_1 + \"<tr>\";\n                }\n                if (key == 'cWW') {\n                    optionList_1 = optionList_1 + \"<td><label for = \\\"Checkbox_\" + key + \"\\\"><input type=\\\"checkbox\\\" id=\\\"Checkbox_\" + key + \"\\\" checked = true/> \" + key + \"</label></td>\";\n                }\n                else {\n                    optionList_1 = optionList_1 + \"<td><label for = \\\"Checkbox_\" + key + \"\\\"><input type=\\\"checkbox\\\" id=\\\"Checkbox_\" + key + \"\\\"/> \" + key + \"</label></td>\";\n                }\n                if (i % 2 == 1) {\n                    optionList_1 = optionList_1 + \"</tr>\";\n                }\n                i += 1;\n            });\n            optionList_1 = optionList_1 + \"</table>\";\n            var selectBoxEle = document.getElementById('checkboxes');\n            selectBoxEle.innerHTML = optionList_1;\n            (_a = document.getElementById(\"Checkbox_All\")) === null || _a === void 0 ? void 0 : _a.addEventListener(\"change\", this.changeBP.bind(this, \"All\"));\n            this.baseStrs.forEach(function (value, key) {\n                var _a;\n                (_a = document.getElementById(\"Checkbox_\" + key)) === null || _a === void 0 ? void 0 : _a.addEventListener(\"change\", _this_1.changeBP.bind(_this_1, key));\n            });\n            //selectBoxEle!.addEventListener(\"change\", this.ChangeBP.bind(this));\n        }\n    };\n    UiTemplateService.prototype.createModeDropdown = function () {\n        var optionList = \"<option value=\\\"0\\\">Nucleotides</option><option value=\\\"1\\\">Path</option><option value=\\\"2\\\">Circle</option>\";\n        var selectBoxEle = this.containerElement.querySelector('.menuSelectbox');\n        selectBoxEle.innerHTML = optionList;\n        selectBoxEle.addEventListener(\"change\", this.PathOrNucleotide.bind(this));\n        var nestedBP = this.containerElement.querySelector('#nestedBP');\n        nestedBP.addEventListener(\"change\", this.PathOrNucleotide.bind(this));\n    };\n    UiTemplateService.prototype.createDomainDropdown = function () {\n        this.selectedDomain = this.domainTypes[0];\n        if (this.domainTypes.length > 0) {\n            var optionList_2 = '';\n            this.domainTypes.forEach(function (opt, i) {\n                optionList_2 = optionList_2 + \"<option value=\\\"\" + i + \"\\\">\" + opt.label + \"</option>\";\n            });\n            var selectBoxEle = this.containerElement.querySelector('.mappingSelectbox');\n            selectBoxEle.innerHTML = optionList_2;\n            selectBoxEle.addEventListener(\"change\", this.colorMapHelper.bind(this));\n            //selectBoxEle!.addEventListener(\"change\", this.updateProperty.bind(this));\n            //const resetIconEle = this.containerElement.querySelector('.resetIcon');\n            //resetIconEle.addEventListener(\"click\", this.resetDisplay.bind(this));\n        }\n        else {\n            this.containerElement.querySelector('.menuOptions').style.display = 'none';\n        }\n    };\n    UiTemplateService.prototype.create2D3DAnnotations = function (name, residueDetails, TWCrgbMap, TWCData, mapped_aa_properties, chain_start, chain_end) {\n        var _this = this;\n        TWCData.forEach(function (value, index) {\n            if (chain_start <= index && index <= chain_end) {\n                var rgb_color = TWCrgbMap.get(index);\n                window.selectSections_RV1.get(name).push({\n                    entity_id: _this.pluginOptions.entityId,\n                    //start_residue_number: index, \n                    //end_residue_number: index,\n                    residue_number: index,\n                    color: rgb_color[1],\n                    sideChain: false,\n                });\n                _this.defaultColours.qualityRiboVision = '#' + String(rgb_color[0].join(''));\n                var colors = \"rgb(\" + String(rgb_color[0].join(',')) + \")\";\n                //_this.drawValidationShape(index, \"circle\", _this.defaultColours.qualityRiboVision);\n                residueDetails.push({\n                    start: index,\n                    end: index,\n                    color: colors,\n                    tooltipMsg: Number.parseFloat(value).toPrecision(3),\n                    tooltipPosition: \"prefix\"\n                });\n                //_this.drawValidationShape(index, \"circle\", colors);\n            }\n        });\n        /*\n         if (TWCData.size < mapped_aa_properties.get(\"Shannon entropy\")!.length) {\n             console.log(\"2D3D2\", mapped_aa_properties);\n             for(var i = TWCData.size - 1; i < this.mapped_aa_properties.get(\"Shannon entropy\").length; i++) {\n                 (window as any).selectSections_RV1.get(name).push({ //3d\n                     entity_id: _this.pluginOptions.entityId,\n                     //start_residue_number: i,\n                     //end_residue_number: i,\n                     residue_number: i,\n                     color: {r:255, g:255, b:255},\n                     sideChain: false,\n                 });\n             }\n         }*/\n        /*\n        if (TWCData.size < mapped_aa_properties.get(\"TwinCons\")!.length) {\n            for(var i = TWCData.size - 1; i < this.mapped_aa_properties.get(\"TwinCons\").length; i++) {\n                (window as any).selectSections_RV1.get(name).push({ //3d\n                    entity_id: _this.pluginOptions.entityId,\n                    //start_residue_number: i,\n                    //end_residue_number: i,\n                    residue_number: i,\n                    color: {r:255, g:255, b:255},\n                    sideChain: false,\n                });\n            }\n        }*/\n        return residueDetails;\n    };\n    UiTemplateService.prototype.getAnnotationFromRibovision = function (mapped_aa_properties) {\n        var _this_1 = this;\n        var _this = this;\n        var start = this.apiData ? this.apiData.label_seq_ids[1] : 0;\n        //const end = this.apiData?this.apiData.label_seq_ids[this.apiData.label_seq_ids.length - 2]:0\n        if (typeof _this.domainTypes == 'undefined') {\n            _this.domainTypes = [{\n                    label: 'Select data',\n                    data: null\n                }];\n        }\n        this.selectSections_RV1 = window.selectSections_RV1;\n        this.selectSections_RV1.set(\"Select data\", [{ entity_id: _this.pluginOptions.entityId,\n                focus: true } /*{entity_id: _this.pluginOptions.entityId,\n                                start_residue_number: 0,\n                                end_residue_number: 1000,\n                                color: {r: 255, g: 255, b: 255},\n                                sideChain: false,\n                            }*/\n        ]);\n        this.aaPropertyConstants = window.aaPropertyConstants;\n        this.aaColorData = window.aaColorData;\n        if (mapped_aa_properties) {\n            mapped_aa_properties.forEach(function (value, index) {\n                var residueDetails = [{\n                    //start: chainRange.start,\n                    //end: chainRange.end,\n                    //color: _this.defaultColours.qualityBlank,\n                    //tooltipMsg: 'No data for '\n                    }];\n                var name = index;\n                var separatedData = value;\n                _this_1.selectSections_RV1.set(name, []);\n                var min = Math.min.apply(Math, _this_1.aaPropertyConstants.get(name));\n                var max = Math.max.apply(Math, _this_1.aaPropertyConstants.get(name));\n                var colormapArray = _this_1.aaColorData.get(name);\n                if (name == \"Shannon entropy\") {\n                    _this_1.getEntropyAnnotations(separatedData, min, max, _this_1.pluginOptions.chainId);\n                    //console.log('name_SE', name,  this.getEntropyAnnotations(separatedData, min, max, this.pluginOptions.chainId));\n                }\n                ;\n                if (name == \"TwinCons\") {\n                    _this_1.getTWCAnnotations(separatedData, min, max, _this_1.pluginOptions.chainId);\n                    //console.log('name_TWC', name, this.getTWCAnnotations(separatedData, min, max, this.pluginOptions.chainId));\n                }\n                ;\n                if (name == \"Custom Data\") {\n                    _this_1.getCustomAnnotations(separatedData, min, max, _this_1.pluginOptions.chainId);\n                    //console.log('name_CD', name,  this.getEntropyAnnotations(separatedData, min, max, this.pluginOptions.chainId));\n                }\n                ;\n                var _a = _this_1.parsePVData(separatedData, min, max, colormapArray), TWCrgbMap = _a[0], TWCData = _a[1];\n                var TWCData_keys = TWCData.keys();\n                //const last_item  = 0;\n                var mapLastValue;\n                var i;\n                for (i = 0; i < TWCData.size; i += 1) {\n                    mapLastValue = TWCData_keys.next().value;\n                }\n                //console.log(mapLastValue);\n                //console.log('RNAViewer_TWCData',TWCData, TWCData.size, TWCData[Symbol.iterator](),TWCData_keys);\n                _this_1.selectSections_RV1.get(name).push({ entity_id: _this.pluginOptions.entityId, focus: true });\n                //const end = TWCData.size;\n                var end = mapLastValue;\n                if (void 0 !== TWCData) {\n                    residueDetails = _this.create2D3DAnnotations(name, residueDetails, TWCrgbMap, TWCData, mapped_aa_properties, start, end);\n                    if (0 < residueDetails.length) {\n                        var current = _this.domainTypes.filter(function (order) { return (order.label === name); })[0];\n                        if (current && current != null) {\n                            current.data = residueDetails;\n                        }\n                        else {\n                            _this.domainTypes.push({\n                                label: name,\n                                data: residueDetails\n                            });\n                        }\n                    }\n                }\n            });\n            this.createDomainDropdown();\n            this.rv3VUEcomponent.topology_loaded = true;\n        }\n        else {\n            //catch block\n        }\n        ;\n    };\n    UiTemplateService.prototype.getIntersections = function (obj1, obj2) {\n        var left1 = obj1.x;\n        var right1 = obj1.x + obj1.width;\n        var top1 = obj1.y;\n        var bottom1 = obj1.y + obj1.height;\n        var left2 = obj2.x;\n        var right2 = obj2.x + obj2.width;\n        var top2 = obj2.y;\n        var bottom2 = obj2.y + obj2.height;\n        if (left1 >= right2 || top1 >= bottom2 ||\n            right1 <= left2 || bottom1 <= top2) {\n            return false;\n        }\n        else {\n            return [right2 - left1, bottom2 - top1, right1 - left2, bottom1 - top2];\n        }\n    };\n    UiTemplateService.prototype.calculateFontSize = function (apiData) {\n        var xVals = [];\n        var yVals = [];\n        var dist = [];\n        var lastPathIndex = apiData.svg_paths.length - 1;\n        apiData.svg_paths.forEach(function (pathStr, recordIndex) {\n            if (recordIndex === 0 || recordIndex === lastPathIndex)\n                return;\n            var pathStrParsed = pathStr.split('M').join(',').split(',');\n            xVals[recordIndex] = (Number(pathStrParsed[1]) + Number(pathStrParsed[3])) / 2;\n            yVals[recordIndex] = (Number(pathStrParsed[2]) + Number(pathStrParsed[4])) / 2;\n            if (recordIndex > 1) {\n                var xDiff = xVals[recordIndex] - xVals[recordIndex - 1];\n                var yDiff = yVals[recordIndex] - yVals[recordIndex - 1];\n                dist[recordIndex] = Math.pow((Math.pow(yDiff, 2) + Math.pow(xDiff, 2)), 0.5);\n            }\n        });\n        var sortedDist = dist.sort(function (a, b) { return a - b; });\n        return 0.9 * sortedDist[Math.floor(sortedDist.length * 0.05)];\n    };\n    UiTemplateService.prototype.download = function (data, filename, type) {\n        var file = new Blob([data], { type: type });\n        var a = document.createElement(\"a\"), url = URL.createObjectURL(file);\n        a.href = url;\n        a.download = filename;\n        document.body.appendChild(a);\n        a.click();\n        setTimeout(function () {\n            document.body.removeChild(a);\n            window.URL.revokeObjectURL(url);\n        }, 0);\n    };\n    UiTemplateService.prototype.calcBaseStrs = function (baseStr, baseMap, font_size) {\n        var start = +baseStr.seq_id1;\n        var end = +baseStr.seq_id2;\n        if (baseStr && start && end) {\n            var type = baseStr.bp;\n            var pathID = \"rnaviewBP rnaviewBP_\" + this.pluginOptions.pdbId + \"_\" + this.pluginOptions.chainId + \" \" + type + \"_\" + start + \"_\" + end;\n            var n1 = baseStr.nt1;\n            var n2 = baseStr.nt2;\n            if (type == 'cSH' || type == 'tSH' || type == 'cSW' || type == 'tSW' || type == 'cHW' || type == 'tHW') {\n                var temp = end;\n                end = start;\n                start = temp;\n                var temp2 = n1;\n                n1 = n2;\n                n2 = temp2;\n                type = type.charAt(0) + type.slice(-2).split('').reverse().join('');\n            }\n            var x1 = this.locations.get(start)[0] + font_size / 2.5;\n            var x2 = this.locations.get(end)[0] + font_size / 2.5;\n            var y1 = this.locations.get(start)[1] - font_size / 2.5;\n            var y2 = this.locations.get(end)[1] - font_size / 2.5;\n            var distance = Math.pow(Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2), 0.5);\n            var x1_prime = UiTemplateService.linearlyInterpolate(x1, x2, font_size / distance);\n            var y1_prime = UiTemplateService.linearlyInterpolate(y1, y2, font_size / distance);\n            var x2_prime = UiTemplateService.linearlyInterpolate(x1, x2, 1 - font_size / distance);\n            var y2_prime = UiTemplateService.linearlyInterpolate(y1, y2, 1 - font_size / distance);\n            var stroke = \"#ccc\";\n            if (type.charAt(0) == 't') {\n                var fill = \"none\";\n            }\n            else {\n                var fill = \"#ccc\";\n            }\n            var xm = (x1_prime + x2_prime) / 2;\n            var ym = (y1_prime + y2_prime) / 2;\n            var distance2 = distance - 2 * font_size;\n            var height = font_size / 1.5;\n            var defaultAction = \"<path class=\\\"\" + pathID + \"\\\" onmouseover=\\\"UiActionsService.showTooltip(evt, '\" + n1 + start + \" - \" + n2 + end + \"; \" + type + \"', '\" + pathID + \"', '\" + stroke + \"', '\" + fill + \"');\\\" onmouseout=\\\"UiActionsService.hideTooltip('\" + pathID + \"');\\\"\";\n            var phi = 270 + Math.atan2((y1 - y2), (x1 - x2)) * 180 / Math.PI;\n            if (type == 'cWW') {\n                if (n1 == 'G' && n2 == 'U' || n1 == 'U' && n2 == 'G') {\n                    baseMap.get(type)[1].push(\"<path class=\\\"\" + pathID + \"\\\" onmouseover=\\\"UiActionsService.showTooltip(evt, '\" + n1 + start + \" - \" + n2 + end + \"; \" + type + \"', '\" + pathID + \"', '#000', '#000');\\\"\\n                    onmouseout=\\\"UiActionsService.hideTooltip('\" + pathID + \"');\\\"\\n                    d=\\\"\\n                    M \" + ((x1_prime + x2_prime) / 2 - font_size / 4) + \", \" + (y1_prime + y2_prime) / 2 + \"\\n                    a \" + font_size / 4 + \",\" + font_size / 4 + \" 0 1,0 \" + font_size / 2 + \",0\\n                    a \" + font_size / 4 + \",\" + font_size / 4 + \" 0 1,0 \" + -1 * font_size / 2 + \",0\\n                    \\\"\\n                    stroke=\\\"#000\\\" stroke-width=\\\"\" + font_size / 6 + \"\\\" fill=\\\"#000\\\"\\n                />\");\n                }\n                else {\n                    baseMap.get(type)[1].push(\"<path class=\\\"\" + pathID + \"\\\" onmouseover=\\\"UiActionsService.showTooltip(evt,  '\" + n1 + start + \" - \" + n2 + end + \"; \" + type + \"', '\" + pathID + \"', '#000', '#000');\\\" onmouseout=\\\"UiActionsService.hideTooltip('\" + pathID + \"');\\\" stroke-width=\\\"\" + font_size / 6 + \"\\\" data-stroke-color=\\\"#000\\\" stroke=\\\"#000\\\" d=\\\"M\" + x1_prime + \" \" + y1_prime + \" \" + x2_prime + \" \" + y2_prime + \"\\\"></path>\");\n                }\n            }\n            else if (type == 'tWW') {\n                var xm1 = UiTemplateService.linearlyInterpolate(x1_prime, xm, 1 - (font_size / 3) / (distance / 2));\n                var ym1 = UiTemplateService.linearlyInterpolate(y1_prime, ym, 1 - (font_size / 3) / (distance / 2));\n                var xm2 = UiTemplateService.linearlyInterpolate(xm, x2_prime, (font_size / 3) / (distance / 2));\n                var ym2 = UiTemplateService.linearlyInterpolate(ym, y2_prime, (font_size / 3) / (distance / 2));\n                baseMap.get(type)[1].push(defaultAction +\n                    (\"d=\\\"\\n                    M \" + x1_prime + \" \" + y1_prime + \" \" + xm1 + \" \" + ym1 + \"\\n                    M \" + (xm - font_size / 3) + \" \" + ym + \"\\n                    a \" + font_size / 3 + \",\" + font_size / 3 + \" 0 1,0 \" + font_size / 1.5 + \",0\\n                    a \" + font_size / 3 + \",\" + font_size / 3 + \" 0 1,0 \" + -1 * font_size / 1.5 + \",0\\n                    M \" + xm2 + \" \" + ym2 + \" \" + x2_prime + \" \" + y2_prime + \"\\\"\\n                    stroke=\\\"\" + stroke + \"\\\" stroke-width=\\\"\" + font_size / 6 + \"\\\" fill = \\\"\" + fill + \"\\\"/>\"));\n            }\n            else if (type == 'cSS' || type == 'tSS') {\n                baseMap.get(type)[1].push(defaultAction + (\"\\n                d=\\\"\\n                M \" + xm + \" \" + (ym + distance2 / 2) + \" \" + xm + \" \" + (ym + height / 2) + \" \\n                l \" + height / 2 + \" 0\\n                l -\" + height / 2 + \" -\" + height + \" \\n                l -\" + height / 2 + \" \" + height + \"\\n                l \" + height / 2 + \" 0\\n                M \" + xm + \" \" + (ym - height / 2) + \" \" + xm + \" \" + (ym - distance2 / 2) + \"\\n                \\\"stroke=\\\"\" + stroke + \"\\\" stroke-width=\\\"\" + font_size / 6 + \"\\\" fill = \\\"\" + fill + \"\\\" transform = \\\"rotate(\" + phi + \" \" + xm + \" \" + ym + \")\\\"/>\"));\n            }\n            else if (type == 'tHS' || type == 'cHS') {\n                baseMap.get(type)[1].push(defaultAction + (\"\\n                d=\\\"\\n                M \" + xm + \" \" + (ym + distance2 / 2) + \" \" + xm + \" \" + (ym + height + height / 4) + \" \\n                h -\" + height / 2 + \"\\n                v -\" + height + \"\\n                h \" + height + \"\\n                v \" + height + \"\\n                h -\" + height / 2 + \"\\n                M \" + xm + \" \" + (ym + height / 4) + \" \" + xm + \" \" + (ym - height / 4) + \"\\n                l \" + height / 2 + \" 0\\n                l -\" + height / 2 + \" -\" + height + \" \\n                l -\" + height / 2 + \" \" + height + \"\\n                l \" + height / 2 + \" 0\\n                M \" + xm + \" \" + (ym - height - height / 4) + \" \" + xm + \" \" + (ym - distance2 / 2) + \"\\n                \\\"stroke=\\\"\" + stroke + \"\\\" stroke-width=\\\"\" + font_size / 6 + \"\\\" fill = \\\"\" + fill + \"\\\" transform = \\\"rotate(\" + phi + \" \" + xm + \" \" + ym + \")\\\"/>\"));\n            }\n            else if (type == 'tWS' || type == 'cWS') {\n                baseMap.get(type)[1].push(defaultAction + (\"\\n                d=\\\"\\n                M \" + xm + \" \" + (ym + distance2 / 2) + \" \" + xm + \" \" + (ym + height + height / 4) + \" \\n                M \" + (xm - height / 2) + \" \" + (ym + 3 * height / 4) + \" \\n                a \" + height / 2 + \",\" + height / 2 + \" 0 1,0 \" + height + \",0\\n                a \" + height / 2 + \",\" + height / 2 + \" 0 1,0 \" + -1 * height + \",0\\n                M \" + xm + \" \" + (ym + height / 4) + \" \" + xm + \" \" + (ym - height / 4) + \"\\n                l \" + height / 2 + \" 0\\n                l -\" + height / 2 + \" -\" + height + \" \\n                l -\" + height / 2 + \" \" + height + \"\\n                l \" + height / 2 + \" 0\\n                M \" + xm + \" \" + (ym - height - height / 4) + \" \" + xm + \" \" + (ym - distance2 / 2) + \"\\n                \\\"stroke=\\\"\" + stroke + \"\\\" stroke-width=\\\"\" + font_size / 6 + \"\\\" fill = \\\"\" + fill + \"\\\" transform = \\\"rotate(\" + phi + \" \" + xm + \" \" + ym + \")\\\"/>\"));\n            }\n            else if (type == 'tWH' || type == 'cWH') {\n                baseMap.get(type)[1].push(defaultAction + (\"\\n                d=\\\"\\n                M \" + xm + \" \" + (ym + distance2 / 2) + \" \" + xm + \" \" + (ym + height + height / 4) + \" \\n                M \" + (xm - height / 2) + \" \" + (ym + 3 * height / 4) + \" \\n                a \" + height / 2 + \",\" + height / 2 + \" 0 1,0 \" + height + \",0\\n                a \" + height / 2 + \",\" + height / 2 + \" 0 1,0 \" + -1 * height + \",0\\n                M \" + xm + \" \" + (ym + height / 4) + \" \" + xm + \" \" + (ym - height / 4) + \"\\n                h -\" + height / 2 + \"\\n                v -\" + height + \"\\n                h \" + height + \"\\n                v \" + height + \"\\n                h -\" + height / 2 + \"\\n                M \" + xm + \" \" + (ym - height - height / 4) + \" \" + xm + \" \" + (ym - distance2 / 2) + \"\\n                \\\"stroke=\\\"\" + stroke + \"\\\" stroke-width=\\\"\" + font_size / 6 + \"\\\" fill = \\\"\" + fill + \"\\\" transform = \\\"rotate(\" + phi + \" \" + xm + \" \" + ym + \")\\\"/>\"));\n            }\n            else if (type == 'tHH' || type == 'cHH') {\n                baseMap.get(type)[1].push(defaultAction + (\"\\n                d=\\\"\\n                M \" + xm + \" \" + (ym + distance2 / 2) + \" \" + xm + \" \" + (ym + height / 2) + \" \\n                h -\" + height / 2 + \"\\n                v -\" + height + \"\\n                h \" + height + \"\\n                v \" + height + \"\\n                h -\" + height / 2 + \"\\n                M \" + xm + \" \" + (ym - height / 2) + \" \" + xm + \" \" + (ym - distance2 / 2) + \"\\n                \\\"stroke=\\\"\" + stroke + \"\\\" stroke-width=\\\"\" + font_size / 6 + \"\\\" fill = \\\"\" + fill + \"\\\" transform = \\\"rotate(\" + phi + \" \" + xm + \" \" + ym + \")\\\"/>\"));\n            }\n        }\n    };\n    /*\n    private getJSON(apiData: ApiData){\n        let JSON =\n        `{\n        \"pdbId\": ${this.pluginOptions.pdbId},\n        \"entityId\": ${this.pluginOptions.entityId},\n        \"chainId\": ${this.pluginOptions.chainId},\n        \"nucleotides\":[\n        `\n        const lastPathIndex = apiData.svg_paths.length - 1;\n        apiData.svg_paths.forEach((pathStr: string, recordIndex: number) => {\n        if(recordIndex === 0 || recordIndex === lastPathIndex) return;\n            JSON +=\n        `   {\"position\": ${apiData.label_seq_ids[recordIndex]}, \"value\": ${apiData.sequence[recordIndex - 1]}, \"x\": ${this.locations[recordIndex - 1][0]}, \"y\": ${this.locations[recordIndex - 1][1]}},\n        `\n        });\n        JSON +=\n            `]\n        }`\n        this.download(JSON, \"Test\", \"JSON\")\n    }*/\n    UiTemplateService.linearlyInterpolate = function (v0, v1, interpolationFactor) {\n        // See https://en.wikipedia.org/wiki/Linear_interpolation\n        return (1 - interpolationFactor) * v0 + interpolationFactor * v1;\n    };\n    UiTemplateService.prototype.PathOrNucleotide = function (e) {\n        var selectBoxEle = this.containerElement.querySelector('.menuSelectbox');\n        var selectedValue = parseInt(selectBoxEle.value);\n        this.mappingValue = '';\n        var nestedBP = this.containerElement.querySelector('#nestedBP');\n        if (nestedBP.checked) {\n            var displayBP = this.displayNestedBaseStrs;\n        }\n        else {\n            var displayBP = this.displayBaseStrs;\n        }\n        if (selectedValue == 0) {\n            document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"rnaTopoSvg_\" + this.pluginOptions.pdbId)[0].innerHTML = this.nucleotideStrs.join('') + this.circleStrs.join('') + displayBP;\n        }\n        else if (selectedValue == 1) {\n            document.querySelector(\"svg.rnaTopoSvg\").getElementsByClassName(\"rnaTopoSvg_\" + this.pluginOptions.pdbId)[0].innerHTML = this.pathStrs.join('') + this.circleStrs.join('') + displayBP;\n        }\n        else if (selectedValue == 2) {\n            this.mappingValue = 'circle';\n        }\n        if (e) {\n            //this.containerElement.querySelector<HTMLInputElement>('.mappingSelectbox')!.value=\"0\";\n            this.colorMap();\n        }\n        this.colorMapContacts();\n        this.colorMapModifications();\n    };\n    UiTemplateService.prototype.addEvents = function (apiData, BanName) {\n        var _this_1 = this;\n        if (BanName === void 0) { BanName = undefined; }\n        /*\n        const lastPathIndex = apiData.svg_paths.length - 1;\n        let strokeColor = this.pluginOptions.theme?.color || '#323232';\n        \n        apiData.svg_paths.forEach((pathStr: string, recordIndex: number) => {\n            let isUnobserved = false;\n            if(apiData.unobserved_label_seq_ids && apiData.unobserved_label_seq_ids.indexOf(apiData.label_seq_ids[recordIndex - 1]) > -1) {\n                strokeColor = this.pluginOptions.theme?.unobservedColor || '#ccc';\n                isUnobserved = true;\n            }\n            if(recordIndex === 0 || recordIndex === 1 || recordIndex === lastPathIndex + 1) return;\n            let classPath = `rnaviewEle rnaviewEle_${this.pluginOptions.pdbId} rnaview_${this.pluginOptions.pdbId}_${apiData.label_seq_ids[recordIndex - 1]}`\n            let circlePath = `circle_${this.pluginOptions.pdbId}_${apiData.label_seq_ids[recordIndex - 1]}`\n            document.getElementsByClassName(circlePath)[0].addEventListener('click', UiActionsService.selectNucleotide.bind(this, this.pluginOptions.pdbId, this.pluginOptions.entityId, apiData.label_seq_ids[recordIndex - 1]))\n            document.getElementsByClassName(circlePath)[0].addEventListener('mouseover', UiActionsService.selectNucleotide.bind(this, this.pluginOptions.pdbId, this.pluginOptions.entityId, apiData.label_seq_ids[recordIndex - 1], 'mouseover', isUnobserved, apiData.sequence[recordIndex - 2], undefined, this.pluginOptions.theme?.highlightColor ? \"'\"+this.pluginOptions.theme.highlightColor+\"'\" : undefined))\n            document.getElementsByClassName(circlePath)[0].addEventListener('mouseout', UiActionsService.unSelectNucleotide.bind(this, this.pluginOptions.pdbId, this.pluginOptions.entityId, apiData.label_seq_ids[recordIndex - 1], isUnobserved, undefined, strokeColor))\n\n            document.getElementsByClassName(classPath)[0].addEventListener('click', UiActionsService.selectNucleotide.bind(this, this.pluginOptions.pdbId, this.pluginOptions.entityId, apiData.label_seq_ids[recordIndex - 1]))\n            document.getElementsByClassName(classPath)[0].addEventListener('mouseover', UiActionsService.selectNucleotide.bind(this, this.pluginOptions.pdbId, this.pluginOptions.entityId, apiData.label_seq_ids[recordIndex - 1], 'mouseover', isUnobserved, apiData.sequence[recordIndex - 2], undefined, this.pluginOptions.theme?.highlightColor ? \"'\"+this.pluginOptions.theme.highlightColor+\"'\" : undefined))\n            document.getElementsByClassName(classPath)[0].addEventListener('mouseout', UiActionsService.unSelectNucleotide.bind(this, this.pluginOptions.pdbId, this.pluginOptions.entityId, apiData.label_seq_ids[recordIndex - 1], isUnobserved, undefined, strokeColor))\n        });\n        */\n        /*if(!whichEvents) {\n            for (let i in this.basePairIDs) {\n                let pathInfo = this.basePairIDs[i]\n                if(this.baseStrs.get(pathInfo[7])![0]) {\n                    document.getElementsByClassName(pathInfo[0])[0].addEventListener('mouseover', (e) =>  {UiActionsService.showTooltip(e, `${pathInfo[3]}${pathInfo[1]} - ${pathInfo[4]}${pathInfo[2]}; ${pathInfo[7]}`, pathInfo[0], pathInfo[6], pathInfo[5])})\n                    document.getElementsByClassName(pathInfo[0])[0].addEventListener('mouseout', UiActionsService.hideTooltip.bind(this, pathInfo[0]))\n                }\n            }\n        }*/\n        var contacts = new Map();\n        this.mapped_chains.forEach(function (val) {\n            //let tooltip = \"Contacts: \" + val;\n            for (var i in _this_1.rv3VUEcomponent.protein_contacts[val]) {\n                var path = \"circle_\" + _this_1.pluginOptions.pdbId + \"_\" + _this_1.rv3VUEcomponent.protein_contacts[val][i];\n                if (document.getElementsByClassName(path)[0]) {\n                    if (contacts.get(_this_1.rv3VUEcomponent.protein_contacts[val][i])) {\n                        var newList = contacts.get(_this_1.rv3VUEcomponent.protein_contacts[val][i]);\n                        newList.push(val);\n                        contacts.set(_this_1.rv3VUEcomponent.protein_contacts[val][i], newList);\n                    }\n                    else {\n                        contacts.set(_this_1.rv3VUEcomponent.protein_contacts[val][i], [val]);\n                    }\n                    //document.getElementsByClassName(path)[0].addEventListener('mouseover', (e) =>  {UiActionsService.showTooltip(e, tooltip, path, this.rv3VUEcomponent.proteinColorMap.get(val), this.rv3VUEcomponent.proteinColorMap.get(val))})\n                    //document.getElementsByClassName(path)[0].addEventListener('mouseout', UiActionsService.hideTooltip.bind(this, path))\n                }\n            }\n        });\n        var chem_mods = new Map();\n        this.mapped_modifications.forEach(function (val) {\n            //let tooltip = \"Contacts: \" + val;\n            for (var i in _this_1.rv3VUEcomponent.modified_residues.get(val)) {\n                //let path = `circle_${this.pluginOptions.pdbId}_${this.rv3VUEcomponent.modified_residues[val][i]}`\n                var path = \"circle_\" + _this_1.pluginOptions.pdbId + \"_\" + _this_1.rv3VUEcomponent.modified_residues.get(val)[i];\n                if (document.getElementsByClassName(path)[0]) {\n                    if (chem_mods.get(_this_1.rv3VUEcomponent.modified_residues.get(val)[i])) {\n                        var newList = chem_mods.get(_this_1.rv3VUEcomponent.modified_residues.get(val)[i]);\n                        newList.push(val);\n                        chem_mods.set(_this_1.rv3VUEcomponent.modified_residues.get(val)[i], newList);\n                    }\n                    else {\n                        chem_mods.set(_this_1.rv3VUEcomponent.modified_residues.get(val)[i], [val]);\n                    }\n                    //document.getElementsByClassName(path)[0].addEventListener('mouseover', (e) =>  {UiActionsService.showTooltip(e, tooltip, path, this.rv3VUEcomponent.proteinColorMap.get(val), this.rv3VUEcomponent.proteinColorMap.get(val))})\n                    //document.getElementsByClassName(path)[0].addEventListener('mouseout', UiActionsService.hideTooltip.bind(this, path))\n                }\n            }\n        });\n        contacts.forEach(function (value, key) {\n            var tooltip = \"Contact:\";\n            var circlePath = \"circle_\" + _this_1.pluginOptions.pdbId + \"_\" + key;\n            var path = \"rnaviewEle rnaviewEle_\" + _this_1.pluginOptions.pdbId + \" rnaview_\" + _this_1.pluginOptions.pdbId + \"_\" + key;\n            var chain = '';\n            var promises = [];\n            //let BanProtName = ''\n            for (var val in value) {\n                promises.push(data_1.BanNameHelper.getBanName(_this_1.pluginOptions.pdbId, value[val]));\n                chain = value[val];\n            }\n            Promise.all(promises).then(function (banNames) {\n                banNames.forEach(function (BanName) {\n                    if (BanName.length > 0) {\n                        tooltip += \" \" + BanName[0] + \"; chain: \" + chain;\n                    }\n                    else {\n                        tooltip = \"chain: \" + chain;\n                    }\n                });\n                _this_1.toolTips.set(key, tooltip);\n                document.getElementsByClassName(circlePath)[0].setAttribute('onmouseover', document.getElementsByClassName(circlePath)[0].getAttribute('onmouseover').split(';')[0] + (\";UiActionsService.showTooltip(evt, '\" + tooltip + \"', '\" + circlePath + \"', '\" + _this_1.rv3VUEcomponent.proteinColorMap.get(chain) + \"', '\" + _this_1.rv3VUEcomponent.proteinColorMap.get(chain) + \"')\"));\n                document.getElementsByClassName(circlePath)[0].setAttribute('onmouseout', document.getElementsByClassName(circlePath)[0].getAttribute('onmouseout').split(';')[0] + (\";UiActionsService.hideTooltip('\" + circlePath + \"')\"));\n                if (document.getElementsByClassName(path)[0]) {\n                    document.getElementsByClassName(path)[0].setAttribute('onmouseover', document.getElementsByClassName(path)[0].getAttribute('onmouseover').split(';')[0] + (\";UiActionsService.showTooltip(evt, '\" + tooltip + \"', '\" + path + \"', '\" + _this_1.rv3VUEcomponent.proteinColorMap.get(chain) + \"', '\" + _this_1.rv3VUEcomponent.proteinColorMap.get(chain) + \"')\"));\n                    //this.eventMap.set(path, UiActionsService.hideTooltip.bind(this, path))\n                    //document.getElementsByClassName(path)[0].addEventListener('mouseout', this.eventMap.get(path))\n                    document.getElementsByClassName(path)[0].setAttribute('onmouseout', document.getElementsByClassName(path)[0].getAttribute('onmouseout').split(';')[0] + (\";UiActionsService.hideTooltip('\" + path + \"')\"));\n                }\n            });\n        });\n        chem_mods.forEach(function (value, key) {\n            var tooltip = \"Modified_nucleotide:\";\n            var circlePath = \"circle_\" + _this_1.pluginOptions.pdbId + \"_\" + key;\n            var path = \"rnaviewEle rnaviewEle_\" + _this_1.pluginOptions.pdbId + \" rnaview_\" + _this_1.pluginOptions.pdbId + \"_\" + key;\n            var mod = '';\n            for (var val in value) {\n                tooltip += \" \" + value[val];\n                mod = value[val];\n            }\n            _this_1.toolTips.set(key, tooltip);\n            //this.mouseOverMap.set(circlePath, (e: Event) =>  {UiActionsService.showTooltip(e, tooltip, circlePath, this.rv3VUEcomponent.proteinColorMap.get(chain), this.rv3VUEcomponent.proteinColorMap.get(chain))})\n            //document.getElementsByClassName(circlePath)[0].addEventListener('mouseover', this.mouseOverMap.get(circlePath))\n            //(<HTMLElement>document.getElementsByClassName(circlePath)[0]).setAttribute('onmouseover', document.getElementsByClassName(circlePath)[0].getAttribute('onmouseover')!.split(';')[0] + `;UiActionsService.showTooltip(evt, '${tooltip}', '${circlePath}', '${this.rv3VUEcomponent.proteinColorMap.get(chain)}', '${this.rv3VUEcomponent.proteinColorMap.get(chain)}')`);\n            document.getElementsByClassName(circlePath)[0].setAttribute('onmouseover', document.getElementsByClassName(circlePath)[0].getAttribute('onmouseover').split(';')[0] + (\";UiActionsService.showTooltip(evt, '\" + tooltip + \"', '\" + circlePath + \"', '\" + _this_1.rv3VUEcomponent.modifiedColorMap.get(mod) + \"', '\" + _this_1.rv3VUEcomponent.modifiedColorMap.get(mod) + \"')\"));\n            //this.eventMap.set(path, UiActionsService.hideTooltip.bind(this, circlePath))\n            document.getElementsByClassName(circlePath)[0].setAttribute('onmouseout', document.getElementsByClassName(circlePath)[0].getAttribute('onmouseout').split(';')[0] + (\";UiActionsService.hideTooltip('\" + circlePath + \"')\"));\n            //document.getElementsByClassName(circlePath)[0].addEventListener('mouseout', this.eventMap.get(circlePath))\n            //this.mouseOverMap.set(path, (e: Event) =>  {UiActionsService.showTooltip(e, tooltip, path, this.rv3VUEcomponent.proteinColorMap.get(chain), this.rv3VUEcomponent.proteinColorMap.get(chain))})\n            //document.getElementsByClassName(path)[0].addEventListener('mouseover', this.mouseOverMap.get(path))\n            if (document.getElementsByClassName(path)[0]) {\n                document.getElementsByClassName(path)[0].setAttribute('onmouseover', document.getElementsByClassName(path)[0].getAttribute('onmouseover').split(';')[0] + (\";UiActionsService.showTooltip(evt, '\" + tooltip + \"', '\" + path + \"', '\" + _this_1.rv3VUEcomponent.modifiedColorMap.get(mod) + \"', '\" + _this_1.rv3VUEcomponent.modifiedColorMap.get(mod) + \"')\"));\n                //this.eventMap.set(path, UiActionsService.hideTooltip.bind(this, path))\n                //document.getElementsByClassName(path)[0].addEventListener('mouseout', this.eventMap.get(path))\n                document.getElementsByClassName(path)[0].setAttribute('onmouseout', document.getElementsByClassName(path)[0].getAttribute('onmouseout').split(';')[0] + (\";UiActionsService.hideTooltip('\" + path + \"')\"));\n            }\n        });\n    };\n    UiTemplateService.prototype.removeEventHandlers = function (svgData) {\n        var nodeList = svgData.childNodes[1].childNodes;\n        for (var i in nodeList) {\n            var el = nodeList[i];\n            if (el.attributes) {\n                var attributes = [].slice.call(el.attributes);\n                for (var i_1 = 0; i_1 < attributes.length; i_1++) {\n                    var att = attributes[i_1].name;\n                    if (att.indexOf(\"on\") === 0) {\n                        el.attributes.removeNamedItem(att);\n                    }\n                }\n            }\n        }\n        return svgData;\n    };\n    UiTemplateService.prototype.svgTemplate = function (apiData, FR3DData, FR3DNestedData) {\n        var _this_1 = this;\n        var font_size = this.calculateFontSize(apiData);\n        var lastPathIndex = apiData.svg_paths.length - 1;\n        var locations2 = new Map();\n        var locations3 = new Map();\n        if (this.pluginOptions.pdbId == \"cust\") {\n            lastPathIndex = lastPathIndex - 2;\n            console.log(lastPathIndex);\n            apiData.svg_paths.forEach(function (pathStr, recordIndex) {\n                console.log(recordIndex);\n                console.log(recordIndex == lastPathIndex + 1);\n                if (recordIndex == 0 || recordIndex >= lastPathIndex + 1)\n                    return;\n                console.log(\"parsing\");\n                var pathStrParsed = pathStr.split('M').join(',').split(',');\n                var xVal = Number(pathStrParsed[3]);\n                var yVal = Number(pathStrParsed[4]);\n                var midX = (xVal);\n                var midY = (yVal);\n                locations2.set(apiData.label_seq_ids[recordIndex - 1], [midX, midY]);\n                if (recordIndex >= 2) {\n                    var lastX = locations2.get(apiData.label_seq_ids[recordIndex - 2])[0];\n                    var lastY = locations2.get(apiData.label_seq_ids[recordIndex - 2])[1];\n                    locations3.set(apiData.label_seq_ids[recordIndex - 1], [(lastX + midX) / 2, (lastY + midY) / 2]);\n                }\n                _this_1.locations.set(apiData.label_seq_ids[recordIndex - 1], [xVal, yVal]);\n            });\n        }\n        else {\n            apiData.svg_paths.forEach(function (pathStr, recordIndex) {\n                if (recordIndex === 0 || recordIndex === 1 || recordIndex >= lastPathIndex + 1)\n                    return;\n                var pathStrParsed = pathStr.split('M').join(',').split(',');\n                var x1Val = Number(pathStrParsed[1]);\n                var y1Val = Number(pathStrParsed[2]);\n                var xVal = Number(pathStrParsed[3]);\n                var yVal = Number(pathStrParsed[4]);\n                var midX = (xVal + x1Val) / 2;\n                var midY = (yVal + y1Val) / 2;\n                locations2.set(apiData.label_seq_ids[recordIndex - 1], [midX, midY]);\n                _this_1.locations.set(apiData.label_seq_ids[recordIndex - 1], [xVal, yVal]);\n            });\n        }\n        apiData.svg_paths.forEach(function (pathStr, recordIndex) {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n            console.log(lastPathIndex);\n            console.log(recordIndex);\n            console.log(pathStr);\n            //if(recordIndex === 0 || recordIndex === 1 || recordIndex === (lastPathIndex + 1)) return;\n            if (recordIndex === 0 || recordIndex === 1 || recordIndex >= (lastPathIndex + 1))\n                return;\n            var pathEleClass = \"rnaviewEle rnaviewEle_\" + _this_1.pluginOptions.pdbId + \" rnaview_\" + _this_1.pluginOptions.pdbId + \"_\" + apiData.label_seq_ids[recordIndex - 1];\n            var strokeColor = ((_a = _this_1.pluginOptions.theme) === null || _a === void 0 ? void 0 : _a.color) || '#323232';\n            var strokeWide = ((_b = _this_1.pluginOptions.theme) === null || _b === void 0 ? void 0 : _b.strokeWidth) || '2';\n            var isUnobserved = false;\n            if (apiData.unobserved_label_seq_ids && apiData.unobserved_label_seq_ids.indexOf(apiData.label_seq_ids[recordIndex - 1]) > -1) {\n                strokeColor = ((_c = _this_1.pluginOptions.theme) === null || _c === void 0 ? void 0 : _c.unobservedColor) || '#ccc';\n                isUnobserved = true;\n            }\n            var pathStrParsed = pathStr.split('M').join(',').split(',');\n            var xVal = Number(pathStrParsed[3]);\n            var yVal = Number(pathStrParsed[4]);\n            var deltaX = font_size / 2;\n            var deltaY = font_size / 2;\n            var newPathStr;\n            if (_this_1.pluginOptions.pdbId == \"cust\") {\n                if (recordIndex < (lastPathIndex)) {\n                    var newX = locations3.get(apiData.label_seq_ids[recordIndex - 1])[0];\n                    var newX2 = locations3.get(apiData.label_seq_ids[recordIndex])[0];\n                    var newY = locations3.get(apiData.label_seq_ids[recordIndex - 1])[1];\n                    var newY2 = locations3.get(apiData.label_seq_ids[recordIndex])[1];\n                    newPathStr = \"M\" + (newX + deltaX) + \",\" + (newY - deltaY) + \",\" + (newX2 + deltaX) + \",\" + (newY2 - deltaY);\n                }\n                else {\n                    var newX = locations3.get(apiData.label_seq_ids[recordIndex - 1])[0];\n                    var newY = locations3.get(apiData.label_seq_ids[recordIndex - 1])[1];\n                    var newX2 = 2 * xVal - newX;\n                    var newY2 = 2 * yVal - newY;\n                    newPathStr = \"M\" + (newX + deltaX) + \",\" + (newY - deltaY) + \",\" + (newX2 + deltaX) + \",\" + (newY2 - deltaY);\n                }\n            }\n            else {\n                if (recordIndex < (lastPathIndex)) {\n                    var newX = locations2.get(apiData.label_seq_ids[recordIndex - 1])[0];\n                    var newX2 = locations2.get(apiData.label_seq_ids[recordIndex])[0];\n                    var newY = locations2.get(apiData.label_seq_ids[recordIndex - 1])[1];\n                    var newY2 = locations2.get(apiData.label_seq_ids[recordIndex])[1];\n                    newPathStr = \"M\" + (newX + deltaX) + \",\" + (newY - deltaY) + \",\" + (newX2 + deltaX) + \",\" + (newY2 - deltaY);\n                }\n                else {\n                    var newX = locations2.get(apiData.label_seq_ids[recordIndex - 1])[0];\n                    var newY = locations2.get(apiData.label_seq_ids[recordIndex - 1])[1];\n                    var newX2 = 2 * xVal - newX;\n                    var newY2 = 2 * yVal - newY;\n                    newPathStr = \"M\" + (newX + deltaX) + \",\" + (newY - deltaY) + \",\" + (newX2 + deltaX) + \",\" + (newY2 - deltaY);\n                }\n            }\n            /*\n            newPathStr = pathStr\n            */\n            pathStr = newPathStr;\n            _this_1.pathStrs.push(\"<path \\n                    class=\\\"\" + pathEleClass + \"\\\" stroke-width=\\\"\" + strokeWide + \"\\\" stroke=\\\"\" + strokeColor + \"\\\" d=\\\"\" + pathStr + \"\\\" \\n                    data-stroke-color=\\\"\" + strokeColor + \"\\\" \\n                    onclick=\\\"UiActionsService.selectNucleotide('\" + _this_1.pluginOptions.pdbId + \"', '\" + _this_1.pluginOptions.entityId + \"', \" + apiData.label_seq_ids[recordIndex - 1] + \", 'click', \" + isUnobserved + \", '\" + apiData.sequence[recordIndex - 2] + \"', event, \" + (((_d = _this_1.pluginOptions.theme) === null || _d === void 0 ? void 0 : _d.highlightColor) ? \"'\" + _this_1.pluginOptions.theme.highlightColor + \"'\" : undefined) + \")\\\" \\n                    onmouseover=\\\"UiActionsService.selectNucleotide('\" + _this_1.pluginOptions.pdbId + \"', '\" + _this_1.pluginOptions.entityId + \"', \" + apiData.label_seq_ids[recordIndex - 1] + \", 'mouseover', \" + isUnobserved + \", '\" + apiData.sequence[recordIndex - 2] + \"', event, \" + (((_e = _this_1.pluginOptions.theme) === null || _e === void 0 ? void 0 : _e.highlightColor) ? \"'\" + _this_1.pluginOptions.theme.highlightColor + \"'\" : undefined) + \")\\\" \\n                    onmouseout=\\\"UiActionsService.unSelectNucleotide('\" + _this_1.pluginOptions.pdbId + \"', '\" + _this_1.pluginOptions.entityId + \"', \" + apiData.label_seq_ids[recordIndex - 1] + \", \" + isUnobserved + \", event, '\" + strokeColor + \"')\\\">\\n                </path>\");\n            _this_1.circleStrs.push(\"<circle class=\\\"circle_\" + _this_1.pluginOptions.pdbId + \"_\" + apiData.label_seq_ids[recordIndex - 1] + \"\\\" cx=\\\"\" + (xVal + deltaX) + \"\\\" cy=\\\"\" + (yVal - deltaY) + \"\\\" r=\\\"\" + 2 * font_size / 3 + \"\\\" display=\\\"none\\\" alignment-baseline=\\\"middle\\\" stroke-width=\\\"\" + font_size / 6 + \"\\\" onclick=\\\"UiActionsService.selectNucleotide('\" + _this_1.pluginOptions.pdbId + \"', '\" + _this_1.pluginOptions.entityId + \"', \" + apiData.label_seq_ids[recordIndex - 1] + \", 'click', \" + isUnobserved + \", '\" + apiData.sequence[recordIndex - 2] + \"', event, \" + (((_f = _this_1.pluginOptions.theme) === null || _f === void 0 ? void 0 : _f.highlightColor) ? \"'\" + _this_1.pluginOptions.theme.highlightColor + \"'\" : undefined) + \")\\\" \\n                onmouseover=\\\"UiActionsService.selectNucleotide('\" + _this_1.pluginOptions.pdbId + \"', '\" + _this_1.pluginOptions.entityId + \"', \" + apiData.label_seq_ids[recordIndex - 1] + \", 'mouseover', \" + isUnobserved + \", '\" + apiData.sequence[recordIndex - 2] + \"', event, \" + (((_g = _this_1.pluginOptions.theme) === null || _g === void 0 ? void 0 : _g.highlightColor) ? \"'\" + _this_1.pluginOptions.theme.highlightColor + \"'\" : undefined) + \")\\\" \\n                onmouseout=\\\"UiActionsService.unSelectNucleotide('\" + _this_1.pluginOptions.pdbId + \"', '\" + _this_1.pluginOptions.entityId + \"', \" + apiData.label_seq_ids[recordIndex - 1] + \", \" + isUnobserved + \", event, '\" + strokeColor + \"')\\\"/>\");\n            _this_1.nucleotideStrs.push(\"<text href=\\\"#\" + pathEleClass + \"\\\" class=\\\"\" + pathEleClass + \"\\\" x=\\\"\" + xVal + \"\\\" y=\\\"\" + yVal + \"\\\" font-size = \\\"\" + font_size + \"px\\\" onclick=\\\"UiActionsService.selectNucleotide('\" + _this_1.pluginOptions.pdbId + \"', '\" + _this_1.pluginOptions.entityId + \"', \" + apiData.label_seq_ids[recordIndex - 1] + \", 'click', \" + isUnobserved + \", '\" + apiData.sequence[recordIndex - 2] + \"', event, \" + (((_h = _this_1.pluginOptions.theme) === null || _h === void 0 ? void 0 : _h.highlightColor) ? \"'\" + _this_1.pluginOptions.theme.highlightColor + \"'\" : undefined) + \")\\\" \\n                onmouseover=\\\"UiActionsService.selectNucleotide('\" + _this_1.pluginOptions.pdbId + \"', '\" + _this_1.pluginOptions.entityId + \"', \" + apiData.label_seq_ids[recordIndex - 1] + \", 'mouseover', \" + isUnobserved + \", '\" + apiData.sequence[recordIndex - 2] + \"', event, \" + (((_j = _this_1.pluginOptions.theme) === null || _j === void 0 ? void 0 : _j.highlightColor) ? \"'\" + _this_1.pluginOptions.theme.highlightColor + \"'\" : undefined) + \")\\\" \\n                onmouseout=\\\"UiActionsService.unSelectNucleotide('\" + _this_1.pluginOptions.pdbId + \"', '\" + _this_1.pluginOptions.entityId + \"', \" + apiData.label_seq_ids[recordIndex - 1] + \", \" + isUnobserved + \", event, '\" + strokeColor + \"')\\\">\" + apiData.sequence[recordIndex - 2] + \"</text>\");\n        });\n        var baseArray = FR3DData.annotations;\n        var nestedBaseArray = FR3DNestedData.annotations;\n        this.baseStrs.set('cWW', [true, []]);\n        this.baseStrs.set('tWW', [false, []]);\n        this.baseStrs.set('cWH', [false, []]);\n        this.baseStrs.set('tWH', [false, []]);\n        this.baseStrs.set('cWS', [false, []]);\n        this.baseStrs.set('tWS', [false, []]);\n        this.baseStrs.set('cHH', [false, []]);\n        this.baseStrs.set('tHH', [false, []]);\n        this.baseStrs.set('cHS', [false, []]);\n        this.baseStrs.set('tHS', [false, []]);\n        this.baseStrs.set('cSS', [false, []]);\n        this.baseStrs.set('tSS', [false, []]);\n        this.nestedBaseStrs.set('cWW', [true, []]);\n        this.nestedBaseStrs.set('tWW', [false, []]);\n        this.nestedBaseStrs.set('cWH', [false, []]);\n        this.nestedBaseStrs.set('tWH', [false, []]);\n        this.nestedBaseStrs.set('cWS', [false, []]);\n        this.nestedBaseStrs.set('tWS', [false, []]);\n        this.nestedBaseStrs.set('cHH', [false, []]);\n        this.nestedBaseStrs.set('tHH', [false, []]);\n        this.nestedBaseStrs.set('cHS', [false, []]);\n        this.nestedBaseStrs.set('tHS', [false, []]);\n        this.nestedBaseStrs.set('cSS', [false, []]);\n        this.nestedBaseStrs.set('tSS', [false, []]);\n        nestedBaseArray.forEach(function (baseStr) {\n            _this_1.calcBaseStrs(baseStr, _this_1.nestedBaseStrs, font_size);\n        });\n        baseArray.forEach(function (baseStr) {\n            _this_1.calcBaseStrs(baseStr, _this_1.baseStrs, font_size);\n        });\n        this.baseStrs.forEach(function (value, key) {\n            if (value[0]) {\n                _this_1.displayBaseStrs += value[1].join('');\n            }\n            if (_this_1.nestedBaseStrs.get(key)[0]) {\n                _this_1.displayNestedBaseStrs += _this_1.nestedBaseStrs.get(key)[1].join('');\n            }\n        });\n        return \"\\n        <div style=\\\"width:100%;height:100%;z-index:0;position:absolute;\\\">\\n            <svg preserveAspectRatio=\\\"xMidYMid meet\\\" \\n            viewBox=\\\"0 0 \" + apiData.dimensions.width + \" \" + apiData.dimensions.height + \"\\\" \\n            style=\\\"width:100%;height:100%;position:relative;\\\">\\n                <g class=\\\"rnaTopoSvgSelection rnaTopoSvgSelection_\" + this.pluginOptions.pdbId + \"\\\"></g>\\n            </svg>\\n        </div>\\n        <div style=\\\"width:100%;height:100%;z-index:1;position:absolute;\\\">\\n            <svg preserveAspectRatio=\\\"xMidYMid meet\\\"\\n            viewBox=\\\"0 0 \" + apiData.dimensions.width + \" \" + apiData.dimensions.height + \"\\\" \\n            style=\\\"width:100%;height:100%;position:relative;\\\">\\n                <g class=\\\"rnaTopoSvgHighlight rnaTopoSvgHighlight_\" + this.pluginOptions.pdbId + \"\\\"></g>\\n            </svg>\\n        </div>\\n        <div id=\\\"tooltip\\\" display=\\\"none\\\" style=\\\"position:absolute; display: none;\\\"></div> \\n            <div style=\\\"width:100%;height:100%;z-index:2;position:absolute;\\\">\\n                <svg class=\\\"rnaTopoSvg\\\" preserveAspectRatio=\\\"xMidYMid meet\\\" \\n                    viewBox=\\\"0 0 \" + apiData.dimensions.width + \" \" + apiData.dimensions.height + \"\\\" \\n                    style=\\\"width:100%;height:100%;\\\">\\n                        <g class=\\\"rnaTopoSvg_\" + this.pluginOptions.pdbId + \"\\\">\" + this.nucleotideStrs.join('') + this.circleStrs.join('') + this.displayBaseStrs + \"</g>\\n                </svg>\\n            </div>\";\n    };\n    UiTemplateService.prototype.title = function () {\n        return \"<span class=\\\"pdb-rna-view-title\\\">\" + this.pluginOptions.pdbId.toUpperCase() + \" Chain \" + this.pluginOptions.chainId + \"</span>\";\n    };\n    UiTemplateService.prototype.tooltip = function () {\n        return \"<span class=\\\"pdb-rna-view-tooltip\\\" id=\\\"\" + this.pluginOptions.pdbId + \"-rnaTopologyTooltip\\\"></span>\";\n    };\n    UiTemplateService.prototype.actionButtons = function () {\n        return \"<div class=\\\"pdb-rna-view-btn-group\\\">\\n            <span class=\\\"pdb-rna-view-btn\\\" title=\\\"Zoom-in\\\" id=\\\"rnaTopologySaveSVG-\" + this.pluginOptions.pdbId + \"\\\">\\n                <img class=\\\"saveSVG\\\" src=\\\"static/alignments/png/Save.png\\\" style=\\\"height:24px; width: 24px; border:0;position: relative;cursor:pointer;\\\" title=\\\"saveSVG\\\"/>\\n            </span>\\n            <span class=\\\"pdb-rna-view-btn\\\" title=\\\"Zoom-in\\\" id=\\\"rnaTopologyZoomIn-\" + this.pluginOptions.pdbId + \"\\\">\\n                <svg style=\\\"width:24px;height:24px\\\" viewBox=\\\"0 0 24 24\\\">\\n                    <path fill=\\\"currentColor\\\" d=\\\"M15.5,14L20.5,19L19,20.5L14,15.5V14.71L13.73,14.43C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.43,13.73L14.71,14H15.5M9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14M12,10H10V12H9V10H7V9H9V7H10V9H12V10Z\\\" />\\n                </svg>\\n            </span>\\n            \\n            <span class=\\\"pdb-rna-view-btn\\\" title=\\\"Zoom-out\\\" id=\\\"rnaTopologyZoomOut-\" + this.pluginOptions.pdbId + \"\\\">\\n                <svg style=\\\"width:24px;height:24px\\\" viewBox=\\\"0 0 24 24\\\">\\n                    <path fill=\\\"currentColor\\\" d=\\\"M15.5,14H14.71L14.43,13.73C15.41,12.59 16,11.11 16,9.5A6.5,6.5 0 0,0 9.5,3A6.5,6.5 0 0,0 3,9.5A6.5,6.5 0 0,0 9.5,16C11.11,16 12.59,15.41 13.73,14.43L14,14.71V15.5L19,20.5L20.5,19L15.5,14M9.5,14C7,14 5,12 5,9.5C5,7 7,5 9.5,5C12,5 14,7 14,9.5C14,12 12,14 9.5,14M7,9H12V10H7V9Z\\\" />\\n                </svg>\\n            </span>\\n\\n            <span class=\\\"pdb-rna-view-btn\\\" title=\\\"Reset\\\" id=\\\"rnaTopologyReset-\" + this.pluginOptions.pdbId + \"\\\">\\n                <svg style=\\\"width:24px;height:24px\\\" viewBox=\\\"0 0 24 24\\\">\\n                    <path fill=\\\"currentColor\\\" d=\\\"M12,6V9L16,5L12,1V4A8,8 0 0,0 4,12C4,13.57 4.46,15.03 5.24,16.26L6.7,14.8C6.25,13.97 6,13 6,12A6,6 0 0,1 12,6M18.76,7.74L17.3,9.2C17.74,10.04 18,11 18,12A6,6 0 0,1 12,18V15L8,19L12,23V20A8,8 0 0,0 20,12C20,10.43 19.54,8.97 18.76,7.74Z\\\" />\\n                </svg>\\n            </span>\\n        </div>\";\n    };\n    UiTemplateService.prototype.renderError = function (type) {\n        var errorContent = \"<div class=\\\"pdb-rna-view-error\\\">Error! Something went wrong!</div>\";\n        if (type === 'apiError') {\n            errorContent = \"<div class=\\\"pdb-rna-view-error\\\">\\n                RNA topology data for \" + this.pluginOptions.pdbId.toUpperCase() + \" | \" + this.pluginOptions.entityId + \" | \" + this.pluginOptions.chainId.toUpperCase() + \" is not available!\\n            </div>\";\n        }\n        this.containerElement.innerHTML = \"<div class=\\\"pdb-rna-view-container\\\">\" + errorContent + \"</div>\";\n    };\n    UiTemplateService.prototype.saveSVG = function () {\n        function getNode(n, v) {\n            n = document.createElementNS(\"http://www.w3.org/2000/svg\", n);\n            for (var p in v)\n                n.setAttributeNS(null, p.replace(/[0-9]/g, 'o').replace(/\\$/g, 'd').replace(/\\[/g, 'b').replace(/[A-Z]/g, function (m, p, o, s) { return \"-\" + m.toLowerCase(); }), v[p]);\n            return n;\n        }\n        var svgData1 = document.querySelector(\"svg.rnaTopoSvg\");\n        var svgData_forsave = svgData1.cloneNode(true);\n        svgData_forsave = this.removeEventHandlers(svgData_forsave);\n        var svg = getNode(\"svg\");\n        svg.appendChild(svgData_forsave);\n        function saveSvg1(svgEl, name) {\n            svgEl.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n            var svgData = svgEl.outerHTML;\n            var preface = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n';\n            var svgBlob = new Blob([preface, svgData], { type: \"image/svg+xml;charset=utf-8\" });\n            var svgUrl = URL.createObjectURL(svgBlob);\n            var downloadLink = document.createElement(\"a\");\n            downloadLink.href = svgUrl;\n            downloadLink.download = name;\n            document.body.appendChild(downloadLink);\n            downloadLink.click();\n            document.body.removeChild(downloadLink);\n        }\n        saveSvg1(svg, 'rv3Topology.svg');\n    };\n    return UiTemplateService;\n}());\nexports.UiTemplateService = UiTemplateService;\n//# sourceMappingURL=uiTemplate.js.map","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["tslib_1","data_1","uiTemplate_1","uiActions_1","customEvents_1","PdbRnaViewerPlugin","CustomEvents","Object","defineProperty","exports","value","create","eventTypeArr","eventObj","ei","el","length","eventType","event_1","MouseEvent","window","document","createEvent","initEvent","dispatchCustomEvent","event","eventData","targetElement","dispatchEvent","subscribeToComponentEvents","pluginCtx","addEventListener","e","detail","startResidue","parseInt","start","endResidue","end","clearSelection","i","selectResidue","color","clearHighlight","highlightResidue","residueNumber","auth_asym_id","options","chainId","BanNameHelper","DataService","prototype","getApiData","entityId","pdbId","__awaiter","this","apiUrl","e_1","__generator","_a","label","trys","push","toLowerCase","fetch","sent","json","handleError","getFR3DData","csvUrl","e_2","handleFR3DError","getFR3DNestedData","e_3","console","log","getBanName","PchainId","UiActionsService","applyButtonActions","_this","svgEle","d3","select","zoom1","zoom","on","attr","transform","call","stopPropagation","scaleBy","transition","duration","transformValue","_groups","getAttribute","transformValMatch","match","zoomIdentity","unSelectNucleotide","label_seq_id","isUnobserved","stopImmediatePropagation","ttEle","getElementById","style","display","undefined","lastSelected","evData","textElement","querySelector","pdbevents","showCheckboxes","checkboxes","expanded","selected","nucleotide","getElementsByClassName","selectedColor","nodeName","setAttribute","innerHTML","showTooltip","evt","text","path","fill","tooltip","id","left","layerX","top","layerY","selectedBPColor","fillBPColor","node","hideTooltip","drawCircle","index","circle","BBox","getBBox","nx","x","width","ny","y","height","selectedPath","selectNucleotide","residue","colorNucleotide","eventName","type","shape","strokeColor","UiTemplateService","containerElement","pluginOptions","apiData","_this_1","selectSections_RV1","aaPropertyConstants","mapped_aa_properties","aaColorData","parsePVData","getEntropyAnnotations","getTWCAnnotations","getCustomAnnotations","getAnnotationArray","rv3VUEcomponent","vm","locations","Map","menuStyle","pathStrs","nucleotideStrs","circleStrs","baseStrs","nestedBaseStrs","basePairIDs","mappingValue","showAllNucleotides","mouseOverMap","eventMap","toolTips","selectSectionsTest","defaultColours","domainSelection","mouseOver","borderColor","qualityGreen","qualityRed","qualityYellow","qualityRiboVision","qualityOrange","qualityBlank","mapped_chains","Set","mapped_modifications","colorMap","selectBoxEle","selectedValue","selectedDomain","domainTypes","data","forEach","val","indexOf","tempDomain","colorMapContacts","colorMapModifications","colorMapHelper","mappingDropdown","num","selected_property","pchainid","includes","protein_contacts","nPath","cPath","split","delete","chain","proteinColorMap","get","add","addEvents","modifications","modified_residues","mod","modifiedColorMap","uiActionsService","render","FR3DData","FR3DNestedData","BanName","svgTemplate","title","actionButtons","createModeDropdown","createBPDropdown","saveSVG","bind","getAnnotationFromRibovision","fixOverlaps","xAdjust","yAdjust","sequence","char","ele","label_seq_ids","nextEle","Number","distances","getIntersections","lowest","j","changeBP","flag","displayBaseStrs","displayNestedBaseStrs","allBP","checked","key","set","join","PathOrNucleotide","size","optionList_1","createDomainDropdown","optionList_2","opt","create2D3DAnnotations","name","residueDetails","TWCrgbMap","TWCData","chain_start","chain_end","rgb_color","entity_id","residue_number","sideChain","String","colors","tooltipMsg","parseFloat","toPrecision","tooltipPosition","focus","separatedData","min","Math","apply","max","colormapArray","mapLastValue","TWCData_keys","keys","next","current","filter","order","topology_loaded","obj1","obj2","left1","right1","top1","bottom1","left2","right2","top2","bottom2","calculateFontSize","xVals","yVals","dist","lastPathIndex","svg_paths","pathStr","recordIndex","pathStrParsed","xDiff","yDiff","pow","sortedDist","sort","a","b","floor","download","filename","file","Blob","createElement","url","URL","createObjectURL","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","calcBaseStrs","baseStr","baseMap","font_size","seq_id1","seq_id2","bp","pathID","n1","nt1","n2","nt2","temp","temp2","charAt","slice","reverse","x1","x2","y1","y2","distance","x1_prime","linearlyInterpolate","y1_prime","x2_prime","y2_prime","xm","ym","distance2","defaultAction","phi","atan2","PI","xm1","ym1","xm2","ym2","v0","v1","interpolationFactor","displayBP","contacts","newList","chem_mods","circlePath","promises","Promise","all","then","banNames","removeEventHandlers","svgData","nodeList","childNodes","attributes","i_1","att","removeNamedItem","locations2","locations3","xVal","yVal","midX","midY","lastX","lastY","x1Val","y1Val","_b","_c","_d","_e","_f","_g","_h","_j","pathEleClass","theme","strokeWide","strokeWidth","unobserved_label_seq_ids","unobservedColor","newPathStr","deltaX","deltaY","newX","newX2","newY","highlightColor","baseArray","annotations","nestedBaseArray","dimensions","toUpperCase","renderError","errorContent","svgData_forsave","cloneNode","svg","n","v","p","createElementNS","setAttributeNS","replace","m","o","s","getNode","svgEl","outerHTML","svgBlob","svgUrl","downloadLink","saveSvg1","extendStatics","d","setPrototypeOf","__proto__","Array","hasOwnProperty","__extends","TypeError","__","constructor","__assign","assign","t","arguments","__rest","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","rejected","result","done","f","g","_","ops","verb","Symbol","iterator","op","pop","__createBinding","k","k2","enumerable","__exportStar","__values","__read","ar","error","__spread","concat","__spreadArrays","il","jl","__spreadArray","to","from","pack","l","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__setModuleDefault","__importStar","__esModule","__importDefault","default","__classPrivateFieldGet","receiver","state","kind","has","__classPrivateFieldSet","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","definition","obj","prop","toStringTag","rvAPI","dataService","dataUrls","apiDataJ","FR3DDataJ","FR3DNestedDataJ","targetEle","uiTemplateService","subscribeEvents","r2dtjson","RNA_2D_json","RNA_BP_json","auth_seq_id"],"sourceRoot":""}
>>>>>>> 58348f0b1e388d7a43a20846f5883a66adf026f6
