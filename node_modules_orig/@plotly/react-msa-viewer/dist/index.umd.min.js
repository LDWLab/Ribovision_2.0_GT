/**
 * react-msa-viewer 0.0.12
 * Copyright 2018, Plotly, Inc.
 * All rights reserved.
 * Licensed under the MIT license.
 * Generated: 2018-10-30
 * Version: 0.0.12
 * Source: https://github.com/plotly/react-msa-viewer
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("prop-types"),require("react")):"function"==typeof define&&define.amd?define(["exports","prop-types","react"],t):t(e.ReactMSAViewer={},e.PropTypes,e.React)}(this,function(e,t,n){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var r="default"in n?n.default:n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");var n,r;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(n=e,r=t,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(n,r))}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?d(e):t}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function b(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var m=t.shape({trySubscribe:t.func.isRequired,tryUnsubscribe:t.func.isRequired,notifyNestedSubs:t.func.isRequired,isSubscribed:t.func.isRequired}),g=t.shape({subscribe:t.func.isRequired,dispatch:t.func.isRequired,getState:t.func.isRequired});function w(e){var r;void 0===e&&(e="store");var o=e+"Subscription",i=function(t){b(i,t);var r=i.prototype;function i(n,r){var o;return(o=t.call(this,n,r)||this)[e]=n.store,o}return r.getChildContext=function(){var t;return(t={})[e]=this[e],t[o]=null,t},r.render=function(){return n.Children.only(this.props.children)},i}(n.Component);return i.propTypes={store:g.isRequired,children:t.element.isRequired},i.childContextTypes=((r={})[e]=g.isRequired,r[o]=m,r),i}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function O(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function j(e,t){return e(t={exports:{}},t.exports),t.exports}w();var x=j(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.memo"):60115,d=n?Symbol.for("react.lazy"):60116;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case i:case a:case s:return e;default:switch(e=e&&e.$$typeof){case c:case f:case u:return e;default:return t}}case o:return t}}}function y(e){return v(e)===l}t.typeOf=v,t.AsyncMode=l,t.ConcurrentMode=l,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=i,t.Profiler=a,t.Portal=o,t.StrictMode=s,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===l||e===a||e===s||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===p||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f)},t.isAsyncMode=function(e){return y(e)},t.isConcurrentMode=y,t.isContextConsumer=function(e){return v(e)===c},t.isContextProvider=function(e){return v(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return v(e)===f},t.isFragment=function(e){return v(e)===i},t.isProfiler=function(e){return v(e)===a},t.isPortal=function(e){return v(e)===o},t.isStrictMode=function(e){return v(e)===s}});O(x),x.typeOf,x.AsyncMode,x.ConcurrentMode,x.ContextConsumer,x.ContextProvider,x.Element,x.ForwardRef,x.Fragment,x.Profiler,x.Portal,x.StrictMode,x.isValidElementType,x.isAsyncMode,x.isConcurrentMode,x.isContextConsumer,x.isContextProvider,x.isElement,x.isForwardRef,x.isFragment,x.isProfiler,x.isPortal,x.isStrictMode;var C,E=j(function(e){e.exports=x}),k=E.isValidElementType;function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},q={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},A=T({},E.ForwardRef,(T(C={},"$$typeof",!0),T(C,"render",!0),C)),R=Object.defineProperty,B=Object.getOwnPropertyNames,W=Object.getOwnPropertySymbols,D=Object.getOwnPropertyDescriptor,F=Object.getPrototypeOf,H=Object.prototype,L=function e(t,n,r){if("string"!=typeof n){if(H){var o=F(n);o&&o!==H&&e(t,o,r)}var i=B(n);W&&(i=i.concat(W(n)));for(var s=A[t.$$typeof]||M,a=A[n.$$typeof]||M,u=0;u<i.length;++u){var c=i[u];if(!(q[c]||r&&r[c]||a&&a[c]||s&&s[c])){var l=D(n,c);try{R(t,c,l)}catch(e){}}}return t}return t},V=function(e,t,n,r,o,i,s,a){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,s,a],l=0;(u=new Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}},I={notify:function(){}},Y=function(){function e(e,t,n){this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=I}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(e=[],t=[],{clear:function(){t=null,e=null},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&null!==e&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=I)},e}(),X=0,N={};function z(){}var U=Object.prototype.hasOwnProperty;function $(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function G(e,t){if($(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!U.call(t,n[o])||!$(e[n[o]],t[n[o]]))return!1;return!0}var K=function(e){var t,n=("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()).Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}(),Q=function(){return Math.random().toString(36).substring(7).split("").join(".")},Z={INIT:"@@redux/INIT"+Q(),REPLACE:"@@redux/REPLACE"+Q(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Q()}};function J(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(J)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,i=t,s=[],a=s,u=!1;function c(){a===s&&(a=s.slice())}function l(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function f(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return c(),a.push(e),function(){if(t){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,c();var n=a.indexOf(e);a.splice(n,1)}}}function h(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,i=o(i,e)}finally{u=!1}for(var t=s=a,n=0;n<t.length;n++)(0,t[n])();return e}return h({type:Z.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,h({type:Z.REPLACE})}})[K]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[K]=function(){return this},e},r}function ee(e,t){return function(){return t(e.apply(this,arguments))}}function te(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function ne(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function re(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=ne(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=ne(o),o=r(t,n)),o},r}}function oe(e,t,n){return _({},n,e,t)}var ie=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,s=!1;return function(t,n,a){var u=e(t,n,a);return s?o&&i(u,r)||(r=u):(s=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return oe}}];function se(e,t,n,r,o){var i,s,a,u,c,l=o.areStatesEqual,f=o.areOwnPropsEqual,h=o.areStatePropsEqual,p=!1;return function(o,d){return p?function(o,p){var d,v,y=!f(p,s),b=!l(o,i);return i=o,s=p,y&&b?(a=e(i,s),t.dependsOnOwnProps&&(u=t(r,s)),c=n(a,u,s)):y?(e.dependsOnOwnProps&&(a=e(i,s)),t.dependsOnOwnProps&&(u=t(r,s)),c=n(a,u,s)):b?(d=e(i,s),v=!h(d,a),a=d,v&&(c=n(a,u,s)),c):c}(o,d):(a=e(i=o,s=d),u=t(r,s),c=n(a,u,s),p=!0,c)}}function ae(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function ue(e,t){return e===t}var ce,le,fe,he,pe,de,ve,ye,be,me,ge,we=(le=(ce={}).connectHOC,fe=void 0===le?function(e,t){var r,o;void 0===t&&(t={});var i=t,s=i.getDisplayName,a=void 0===s?function(e){return"ConnectAdvanced("+e+")"}:s,u=i.methodName,c=void 0===u?"connectAdvanced":u,l=i.renderCountProp,f=void 0===l?void 0:l,h=i.shouldHandleStateChanges,p=void 0===h||h,d=i.storeKey,v=void 0===d?"store":d,y=i.withRef,w=void 0!==y&&y,O=P(i,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),j=v+"Subscription",x=X++,C=((r={})[v]=g,r[j]=m,r),E=((o={})[j]=m,o);return function(t){V(k(t),"You must pass a component to the function returned by "+c+". Instead received "+JSON.stringify(t));var r=t.displayName||t.name||"Component",o=a(r),i=_({},O,{getDisplayName:a,methodName:c,renderCountProp:f,shouldHandleStateChanges:p,storeKey:v,withRef:w,displayName:o,wrappedComponentName:r,WrappedComponent:t}),s=function(r){function s(e,t){var n;return(n=r.call(this,e,t)||this).version=x,n.state={},n.renderCount=0,n.store=e[v]||t[v],n.propsMode=Boolean(e[v]),n.setWrappedInstance=n.setWrappedInstance.bind(S(S(n))),V(n.store,'Could not find "'+v+'" in either the context or props of "'+o+'". Either wrap the root component in a <Provider>, or explicitly pass "'+v+'" as a prop to "'+o+'".'),n.initSelector(),n.initSubscription(),n}b(s,r);var a=s.prototype;return a.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[j]=t||this.context[j],e},a.componentDidMount=function(){p&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},a.componentWillReceiveProps=function(e){this.selector.run(e)},a.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},a.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=z,this.store=null,this.selector.run=z,this.selector.shouldComponentUpdate=!1},a.getWrappedInstance=function(){return V(w,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+c+"() call."),this.wrappedInstance},a.setWrappedInstance=function(e){this.wrappedInstance=e},a.initSelector=function(){var t=e(this.store.dispatch,i);this.selector=function(e,t){var n={run:function(r){try{var o=e(t.getState(),r);(o!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=o,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}(t,this.store),this.selector.run(this.props)},a.initSubscription=function(){if(p){var e=(this.propsMode?this.props:this.context)[j];this.subscription=new Y(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},a.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(N)):this.notifyNestedSubs()},a.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},a.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},a.addExtraProps=function(e){if(!(w||f||this.propsMode&&this.subscription))return e;var t=_({},e);return w&&(t.ref=this.setWrappedInstance),f&&(t[f]=this.renderCount++),this.propsMode&&this.subscription&&(t[j]=this.subscription),t},a.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return n.createElement(t,this.addExtraProps(e.props))},s}(n.Component);return s.WrappedComponent=t,s.displayName=o,s.childContextTypes=E,s.contextTypes=C,s.propTypes=C,L(s,t)}}:le,pe=void 0===(he=ce.mapStateToPropsFactories)?[function(e){return"function"==typeof e?re(e):void 0},function(e){return e?void 0:te(function(){return{}})}]:he,ve=void 0===(de=ce.mapDispatchToPropsFactories)?[function(e){return"function"==typeof e?re(e):void 0},function(e){return e?void 0:te(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?te(function(t){return function(e,t){if("function"==typeof e)return ee(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},o=0;o<n.length;o++){var i=n[o],s=e[i];"function"==typeof s&&(r[i]=ee(s,t))}return r}(e,t)}):void 0}]:de,be=void 0===(ye=ce.mergePropsFactories)?ie:ye,ge=void 0===(me=ce.selectorFactory)?function(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=P(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),s=n(e,i),a=r(e,i),u=o(e,i);return(i.pure?se:function(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}})(s,a,u,e,i)}:me,function(e,t,n,r){void 0===r&&(r={});var o=r,i=o.pure,s=void 0===i||i,a=o.areStatesEqual,u=void 0===a?ue:a,c=o.areOwnPropsEqual,l=void 0===c?G:c,f=o.areStatePropsEqual,h=void 0===f?G:f,p=o.areMergedPropsEqual,d=void 0===p?G:p,v=P(o,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),y=ae(e,pe,"mapStateToProps"),b=ae(t,ve,"mapDispatchToProps"),m=ae(n,be,"mergeProps");return fe(ge,_({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:y,initMapDispatchToProps:b,initMergeProps:m,pure:s,areStatesEqual:u,areOwnPropsEqual:l,areStatePropsEqual:h,areMergedPropsEqual:d},v))}),Se="msaStore";function _e(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r.storeKey=Se,we(e,t,n,r)}function Pe(e,t){return e===t||e!=e&&t!=t}function Oe(e,t){for(var n=e.length;n--;)if(Pe(e[n][0],t))return n;return-1}var je=Array.prototype.splice;function xe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}xe.prototype.clear=function(){this.__data__=[],this.size=0},xe.prototype.delete=function(e){var t=this.__data__,n=Oe(t,e);return!(n<0||(n==t.length-1?t.pop():je.call(t,n,1),--this.size,0))},xe.prototype.get=function(e){var t=this.__data__,n=Oe(t,e);return n<0?void 0:t[n][1]},xe.prototype.has=function(e){return Oe(this.__data__,e)>-1},xe.prototype.set=function(e,t){var n=this.__data__,r=Oe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var Ce="object"==typeof global&&global&&global.Object===Object&&global,Ee="object"==typeof self&&self&&self.Object===Object&&self,ke=Ce||Ee||Function("return this")(),Te=ke.Symbol,Me=Object.prototype,qe=Me.hasOwnProperty,Ae=Me.toString,Re=Te?Te.toStringTag:void 0,Be=Object.prototype.toString,We="[object Null]",De="[object Undefined]",Fe=Te?Te.toStringTag:void 0;function He(e){return null==e?void 0===e?De:We:Fe&&Fe in Object(e)?function(e){var t=qe.call(e,Re),n=e[Re];try{e[Re]=void 0}catch(e){}var r=Ae.call(e);return t?e[Re]=n:delete e[Re],r}(e):function(e){return Be.call(e)}(e)}function Le(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Ve="[object AsyncFunction]",Ie="[object Function]",Ye="[object GeneratorFunction]",Xe="[object Proxy]";function Ne(e){if(!Le(e))return!1;var t=He(e);return t==Ie||t==Ye||t==Ve||t==Xe}var ze,Ue=ke["__core-js_shared__"],$e=(ze=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||""))?"Symbol(src)_1."+ze:"",Ge=Function.prototype.toString;function Ke(e){if(null!=e){try{return Ge.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Qe=/^\[object .+?Constructor\]$/,Ze=Function.prototype,Je=Object.prototype,et=Ze.toString,tt=Je.hasOwnProperty,nt=RegExp("^"+et.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rt(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Le(e)||(t=e,$e&&$e in t))&&(Ne(e)?nt:Qe).test(Ke(e));var t}(n)?n:void 0}var ot=rt(ke,"Map"),it=rt(Object,"create"),st=Object.prototype.hasOwnProperty,at=Object.prototype.hasOwnProperty;function ut(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ct(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function lt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ut.prototype.clear=function(){this.__data__=it?it(null):{},this.size=0},ut.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ut.prototype.get=function(e){var t=this.__data__;if(it){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return st.call(t,e)?t[e]:void 0},ut.prototype.has=function(e){var t=this.__data__;return it?void 0!==t[e]:at.call(t,e)},ut.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=it&&void 0===t?"__lodash_hash_undefined__":t,this},lt.prototype.clear=function(){this.size=0,this.__data__={hash:new ut,map:new(ot||xe),string:new ut}},lt.prototype.delete=function(e){var t=ct(this,e).delete(e);return this.size-=t?1:0,t},lt.prototype.get=function(e){return ct(this,e).get(e)},lt.prototype.has=function(e){return ct(this,e).has(e)},lt.prototype.set=function(e,t){var n=ct(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function ft(e){var t=this.__data__=new xe(e);this.size=t.size}ft.prototype.clear=function(){this.__data__=new xe,this.size=0},ft.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ft.prototype.get=function(e){return this.__data__.get(e)},ft.prototype.has=function(e){return this.__data__.has(e)},ft.prototype.set=function(e,t){var n=this.__data__;if(n instanceof xe){var r=n.__data__;if(!ot||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new lt(r)}return n.set(e,t),this.size=n.size,this};var ht=function(){try{var e=rt(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();function pt(e,t,n){"__proto__"==t&&ht?ht(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function dt(e,t,n){(void 0===n||Pe(e[t],n))&&(void 0!==n||t in e)||pt(e,t,n)}var vt=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),s=i.length;s--;){var a=i[++r];if(!1===t(o[a],a,o))break}return e},yt="object"==typeof e&&e&&!e.nodeType&&e,bt=yt&&"object"==typeof module&&module&&!module.nodeType&&module,mt=bt&&bt.exports===yt?ke.Buffer:void 0,gt=mt?mt.allocUnsafe:void 0;function wt(e,t){if(t)return e.slice();var n=e.length,r=gt?gt(n):new e.constructor(n);return e.copy(r),r}var St=ke.Uint8Array;function _t(e){var t=new e.constructor(e.byteLength);return new St(t).set(new St(e)),t}function Pt(e,t){var n=t?_t(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ot(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var jt=Object.create,xt=function(){function e(){}return function(t){if(!Le(t))return{};if(jt)return jt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Ct(e,t){return function(n){return e(t(n))}}var Et=Ct(Object.getPrototypeOf,Object),kt=Object.prototype;function Tt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||kt)}function Mt(e){return"function"!=typeof e.constructor||Tt(e)?{}:xt(Et(e))}function qt(e){return null!=e&&"object"==typeof e}var At="[object Arguments]";function Rt(e){return qt(e)&&He(e)==At}var Bt=Object.prototype,Wt=Bt.hasOwnProperty,Dt=Bt.propertyIsEnumerable,Ft=Rt(function(){return arguments}())?Rt:function(e){return qt(e)&&Wt.call(e,"callee")&&!Dt.call(e,"callee")},Ht=Array.isArray,Lt=9007199254740991;function Vt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Lt}function It(e){return null!=e&&Vt(e.length)&&!Ne(e)}var Yt="object"==typeof e&&e&&!e.nodeType&&e,Xt=Yt&&"object"==typeof module&&module&&!module.nodeType&&module,Nt=Xt&&Xt.exports===Yt?ke.Buffer:void 0,zt=(Nt?Nt.isBuffer:void 0)||function(){return!1},Ut="[object Object]",$t=Function.prototype,Gt=Object.prototype,Kt=$t.toString,Qt=Gt.hasOwnProperty,Zt=Kt.call(Object);function Jt(e){if(!qt(e)||He(e)!=Ut)return!1;var t=Et(e);if(null===t)return!0;var n=Qt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Kt.call(n)==Zt}var en={};function tn(e){return function(t){return e(t)}}en["[object Float32Array]"]=en["[object Float64Array]"]=en["[object Int8Array]"]=en["[object Int16Array]"]=en["[object Int32Array]"]=en["[object Uint8Array]"]=en["[object Uint8ClampedArray]"]=en["[object Uint16Array]"]=en["[object Uint32Array]"]=!0,en["[object Arguments]"]=en["[object Array]"]=en["[object ArrayBuffer]"]=en["[object Boolean]"]=en["[object DataView]"]=en["[object Date]"]=en["[object Error]"]=en["[object Function]"]=en["[object Map]"]=en["[object Number]"]=en["[object Object]"]=en["[object RegExp]"]=en["[object Set]"]=en["[object String]"]=en["[object WeakMap]"]=!1;var nn="object"==typeof e&&e&&!e.nodeType&&e,rn=nn&&"object"==typeof module&&module&&!module.nodeType&&module,on=rn&&rn.exports===nn&&Ce.process,sn=function(){try{return rn&&rn.require&&rn.require("util").types||on&&on.binding&&on.binding("util")}catch(e){}}(),an=sn&&sn.isTypedArray,un=an?tn(an):function(e){return qt(e)&&Vt(e.length)&&!!en[He(e)]};function cn(e,t){if("__proto__"!=t)return e[t]}var ln=Object.prototype.hasOwnProperty;function fn(e,t,n){var r=e[t];ln.call(e,t)&&Pe(r,n)&&(void 0!==n||t in e)||pt(e,t,n)}function hn(e,t,n,r){var o=!n;n||(n={});for(var i=-1,s=t.length;++i<s;){var a=t[i],u=r?r(n[a],e[a],a,n,e):void 0;void 0===u&&(u=e[a]),o?pt(n,a,u):fn(n,a,u)}return n}var pn=9007199254740991,dn=/^(?:0|[1-9]\d*)$/;function vn(e,t){var n=typeof e;return!!(t=null==t?pn:t)&&("number"==n||"symbol"!=n&&dn.test(e))&&e>-1&&e%1==0&&e<t}var yn=Object.prototype.hasOwnProperty;function bn(e,t){var n=Ht(e),r=!n&&Ft(e),o=!n&&!r&&zt(e),i=!n&&!r&&!o&&un(e),s=n||r||o||i,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=a.length;for(var c in e)!t&&!yn.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vn(c,u))||a.push(c);return a}var mn=Object.prototype.hasOwnProperty;function gn(e){return It(e)?bn(e,!0):function(e){if(!Le(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Tt(e),n=[];for(var r in e)("constructor"!=r||!t&&mn.call(e,r))&&n.push(r);return n}(e)}function wn(e,t,n,r,o){e!==t&&vt(t,function(i,s){if(Le(i))o||(o=new ft),function(e,t,n,r,o,i,s){var a=cn(e,n),u=cn(t,n),c=s.get(u);if(c)dt(e,n,c);else{var l,f=i?i(a,u,n+"",e,t,s):void 0,h=void 0===f;if(h){var p=Ht(u),d=!p&&zt(u),v=!p&&!d&&un(u);f=u,p||d||v?Ht(a)?f=a:qt(l=a)&&It(l)?f=Ot(a):d?(h=!1,f=wt(u,!0)):v?(h=!1,f=Pt(u,!0)):f=[]:Jt(u)||Ft(u)?(f=a,Ft(a)?f=hn(a,gn(a)):Le(a)&&!Ne(a)||(f=Mt(u))):h=!1}h&&(s.set(u,f),o(f,u,r,i,s),s.delete(u)),dt(e,n,f)}}(e,t,s,n,wn,r,o);else{var a=r?r(cn(e,s),i,s+"",e,t,o):void 0;void 0===a&&(a=i),dt(e,s,a)}},gn)}function Sn(e){return e}function _n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Pn=Math.max;function On(e,t,n){return t=Pn(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=Pn(r.length-t,0),s=Array(i);++o<i;)s[o]=r[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=r[o];return a[t]=n(s),_n(e,this,a)}}var jn=ht?function(e,t){return ht(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Sn,xn=800,Cn=16,En=Date.now;function kn(e){var t=0,n=0;return function(){var r=En(),o=Cn-(r-n);if(n=r,o>0){if(++t>=xn)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Tn=kn(jn);function Mn(e,t){return Tn(On(e,t,Sn),e+"")}function qn(e){return Mn(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,s&&function(e,t,n){if(!Le(n))return!1;var r=typeof t;return!!("number"==r?It(n)&&vn(t,n.length):"string"==r&&t in n)&&Pe(n[t],e)}(n[0],n[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var a=n[r];a&&e(t,a,r,i)}return t})}var An=qn(function(e,t,n){wn(e,t,n)}),Rn=function(e){this.defaultColor="#ffffff",this.type="static",this.map=e,this.getColor=function(e){return void 0!==this.map[e]?this.map[e]:this.defaultColor}},Bn=function(e,t){this.type="dyn",this.opt=t,void 0!==e.init?(e.init.call(this),this.getColor=e.run,this.reset=e.init):this.getColor=e},Wn={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},Dn={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},Fn={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"},Hn={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},Ln={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},Vn={buried:Wn,buried_index:Wn,cinema:{A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"},clustal2:{A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"},clustal:{A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"#fff",O:"#fff",P:"orange",Q:"#fff",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"},helix:Dn,helix_propensity:Dn,hydro:{A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"},lesk:{A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"},mae:{A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"},nucleotide:{A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"},purine:Fn,purine_pyrimidine:Fn,strand:Hn,strand_propensity:Hn,taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"},turn:Ln,turn_propensity:Ln,zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"}},In={pid:{init:function(){this.cons=this.opt.conservation()},run:function(e,t){var n=this.cons[t.pos];return n>.8?"#6464ff":n>.6?"#9da5ff":n>.4?"#cccccc":"#ffffff"}}},Yn=function(e){this.maps=Xn(Vn),this.dyn=Xn(In),this.opt=e};function Xn(e){if(null==e||"object"!==o(e))return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Yn.getScheme=function(e){return Vn[e]},Yn.prototype.getScheme=function(e){var t=this.maps[e];return void 0===t&&(t={},void 0!==this.dyn[e])?new Bn(this.dyn[e],this.opt):new Rn(t)},Yn.prototype.addStaticScheme=function(e,t){this.maps[e]=t},Yn.prototype.addDynScheme=function(e,t){this.dyn[e]=t};var Nn=new Yn,zn=function(){function e(t){i(this,e),this.scheme=Nn.getScheme(t)}return a(e,[{key:"getColor",value:function(e){return this.scheme.getColor(e)}}]),e}();function Un(e){return e&&"function"==typeof e.getColor}var $n=t.shape({name:t.string,sequence:t.string}),Gn=t.oneOfType([t.oneOf(["buried_index","clustal","clustal2","cinema","helix_propensity","hydro","lesk","mae","nucleotide","purine_pyrimidine","strand_propensity","taylor","turn_propensity","zappo"]),t.instanceOf(zn),function(e,t,n){if(!Un(e[t]))return new Error("Invalid prop `"+t+"` supplied to `"+n+"`. Validation failed.")}]),Kn=t.shape({xPos:t.number,yPos:t.number}),Qn={sequences:t.arrayOf($n).isRequired,width:t.number,height:t.number,tileWidth:t.number,tileHeight:t.number,textFont:t.string,position:Kn,colorScheme:Gn,backgroundColor:t.string,engine:t.oneOf(["canvas","webl"]),onResidueMouseEnter:t.func,onResidueMouseLeave:t.func,onResidueClick:t.func,onResidueDoubleClick:t.func},Zn={width:500,height:100,tileWidth:20,tileHeight:20,colorScheme:"clustal",backgroundColor:"red",engine:"canvas"};function Jn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var i;return 0===n.length?i=r[0]:(i={},n.forEach(function(e,t){i[n[t]]=r[t]})),{type:e,payload:i}};return o.toString=function(){return e.toString()},o.key=o.toString(),o}var er=Jn("PROPS_UPDATE"),tr=Jn("PROP_UPDATE","key","value"),nr=Jn("SEQUENCES_UPDATE"),rr={updateProp:tr,updateProps:er,updateSequences:nr};function or(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}var ir=Ct(Object.keys,Object),sr=Object.prototype.hasOwnProperty;function ar(e){return It(e)?bn(e):function(e){if(!Tt(e))return ir(e);var t=[];for(var n in Object(e))sr.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}function ur(e,t){return e&&vt(e,t,ar)}var cr,lr=(cr=ur,function(e,t){if(null==e)return e;if(!It(e))return cr(e,t);for(var n=e.length,r=-1,o=Object(e);++r<n&&!1!==t(o[r],r,o););return e});function fr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new lt;++t<n;)this.add(e[t])}function hr(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}fr.prototype.add=fr.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},fr.prototype.has=function(e){return this.__data__.has(e)};var pr=1,dr=2;function vr(e,t,n,r,o,i){var s=n&pr,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var l=-1,f=!0,h=n&dr?new fr:void 0;for(i.set(e,t),i.set(t,e);++l<a;){var p=e[l],d=t[l];if(r)var v=s?r(d,p,l,t,e,i):r(p,d,l,e,t,i);if(void 0!==v){if(v)continue;f=!1;break}if(h){if(!hr(t,function(e,t){if(s=t,!h.has(s)&&(p===e||o(p,e,n,r,i)))return h.push(t);var s})){f=!1;break}}else if(p!==d&&!o(p,d,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function yr(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function br(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var mr=1,gr=2,wr="[object Boolean]",Sr="[object Date]",_r="[object Error]",Pr="[object Map]",Or="[object Number]",jr="[object RegExp]",xr="[object Set]",Cr="[object String]",Er="[object Symbol]",kr="[object ArrayBuffer]",Tr="[object DataView]",Mr=Te?Te.prototype:void 0,qr=Mr?Mr.valueOf:void 0;function Ar(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function Rr(e,t,n){var r=t(e);return Ht(e)?r:Ar(r,n(e))}function Br(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[o++]=s)}return i}function Wr(){return[]}var Dr=Object.prototype.propertyIsEnumerable,Fr=Object.getOwnPropertySymbols,Hr=Fr?function(e){return null==e?[]:(e=Object(e),Br(Fr(e),function(t){return Dr.call(e,t)}))}:Wr;function Lr(e){return Rr(e,ar,Hr)}var Vr=1,Ir=Object.prototype.hasOwnProperty,Yr=rt(ke,"DataView"),Xr=rt(ke,"Promise"),Nr=rt(ke,"Set"),zr=rt(ke,"WeakMap"),Ur=Ke(Yr),$r=Ke(ot),Gr=Ke(Xr),Kr=Ke(Nr),Qr=Ke(zr),Zr=He;(Yr&&"[object DataView]"!=Zr(new Yr(new ArrayBuffer(1)))||ot&&"[object Map]"!=Zr(new ot)||Xr&&"[object Promise]"!=Zr(Xr.resolve())||Nr&&"[object Set]"!=Zr(new Nr)||zr&&"[object WeakMap]"!=Zr(new zr))&&(Zr=function(e){var t=He(e),n="[object Object]"==t?e.constructor:void 0,r=n?Ke(n):"";if(r)switch(r){case Ur:return"[object DataView]";case $r:return"[object Map]";case Gr:return"[object Promise]";case Kr:return"[object Set]";case Qr:return"[object WeakMap]"}return t});var Jr=Zr,eo=1,to="[object Arguments]",no="[object Array]",ro="[object Object]",oo=Object.prototype.hasOwnProperty;function io(e,t,n,r,o){return e===t||(null==e||null==t||!qt(e)&&!qt(t)?e!=e&&t!=t:function(e,t,n,r,o,i){var s=Ht(e),a=Ht(t),u=s?no:Jr(e),c=a?no:Jr(t),l=(u=u==to?ro:u)==ro,f=(c=c==to?ro:c)==ro,h=u==c;if(h&&zt(e)){if(!zt(t))return!1;s=!0,l=!1}if(h&&!l)return i||(i=new ft),s||un(e)?vr(e,t,n,r,o,i):function(e,t,n,r,o,i,s){switch(u){case Tr:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case kr:return!(e.byteLength!=t.byteLength||!i(new St(e),new St(t)));case wr:case Sr:case Or:return Pe(+e,+t);case _r:return e.name==t.name&&e.message==t.message;case jr:case Cr:return e==t+"";case Pr:var a=yr;case xr:var c=r&mr;if(a||(a=br),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;r|=gr,s.set(e,t);var f=vr(a(e),a(t),r,o,i,s);return s.delete(e),f;case Er:if(qr)return qr.call(e)==qr.call(t)}return!1}(e,t,0,n,r,o,i);if(!(n&eo)){var p=l&&oo.call(e,"__wrapped__"),d=f&&oo.call(t,"__wrapped__");if(p||d){var v=p?e.value():e,y=d?t.value():t;return i||(i=new ft),o(v,y,n,r,i)}}return!!h&&(i||(i=new ft),function(e,t,n,r,o,i){var s=n&Vr,a=Lr(e),u=a.length;if(u!=Lr(t).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in t:Ir.call(t,l)))return!1}var f=i.get(e);if(f&&i.get(t))return f==t;var h=!0;i.set(e,t),i.set(t,e);for(var p=s;++c<u;){var d=e[l=a[c]],v=t[l];if(r)var y=s?r(v,d,l,t,e,i):r(d,v,l,e,t,i);if(!(void 0===y?d===v||o(d,v,n,r,i):y)){h=!1;break}p||(p="constructor"==l)}if(h&&!p){var b=e.constructor,m=t.constructor;b!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m)&&(h=!1)}return i.delete(e),i.delete(t),h}(e,t,n,r,o,i))}(e,t,n,r,io,o))}var so=1,ao=2;function uo(e){return e==e&&!Le(e)}function co(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}var lo="[object Symbol]";function fo(e){return"symbol"==typeof e||qt(e)&&He(e)==lo}var ho=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,po=/^\w*$/;function vo(e,t){if(Ht(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!fo(e))||po.test(e)||!ho.test(e)||null!=t&&e in Object(t)}var yo="Expected a function";function bo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(yo);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(bo.Cache||lt),n}bo.Cache=lt;var mo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,go=/\\(\\)?/g,wo=function(e){var t=bo(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(mo,function(e,n,r,o){t.push(r?o.replace(go,"$1"):n||e)}),t},function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}();function So(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}var _o=1/0,Po=Te?Te.prototype:void 0,Oo=Po?Po.toString:void 0;function jo(e){if("string"==typeof e)return e;if(Ht(e))return So(e,jo)+"";if(fo(e))return Oo?Oo.call(e):"";var t=e+"";return"0"==t&&1/e==-_o?"-0":t}function xo(e){return null==e?"":jo(e)}function Co(e,t){return Ht(e)?e:vo(e,t)?[e]:wo(xo(e))}var Eo=1/0;function ko(e){if("string"==typeof e||fo(e))return e;var t=e+"";return"0"==t&&1/e==-Eo?"-0":t}function To(e,t){for(var n=0,r=(t=Co(t,e)).length;null!=e&&n<r;)e=e[ko(t[n++])];return n&&n==r?e:void 0}function Mo(e,t){return null!=e&&t in Object(e)}function qo(e,t){return null!=e&&function(e,t,n){for(var r=-1,o=(t=Co(t,e)).length,i=!1;++r<o;){var s=ko(t[r]);if(!(i=null!=e&&n(e,s)))break;e=e[s]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Vt(o)&&vn(s,o)&&(Ht(e)||Ft(e))}(e,t,Mo)}var Ao=1,Ro=2;function Bo(e){return"function"==typeof e?e:null==e?Sn:"object"==typeof e?Ht(e)?(r=e[0],o=e[1],vo(r)&&uo(o)?co(ko(r),o):function(e){var t=function(e,t,n){var r=null==e?void 0:To(e,t);return void 0===r?void 0:r}(e,r);return void 0===t&&t===o?qo(e,r):io(o,t,Ao|Ro)}):1==(n=function(e){for(var t=ar(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,uo(o)]}return t}(t=e)).length&&n[0][2]?co(n[0][0],n[0][1]):function(e){return e===t||function(e,t,n,r){var o=n.length,i=o;if(null==e)return!i;for(e=Object(e);o--;){var s=n[o];if(s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var a=(s=n[o])[0],u=e[a],c=s[1];if(s[2]){if(void 0===u&&!(a in e))return!1}else{var l,f=new ft;if(!(void 0===l?io(c,u,so|ao,void 0,f):l))return!1}}return!0}(e,0,n)}:function(e){return vo(e)?(t=ko(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return To(t,e)}}(e);var t}(e);var t,n,r,o}function Wo(e,t,n,r,o){return o(e,function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)}),n}function Do(e,t,n){var r=Ht(e)?or:Wo,o=arguments.length<3;return r(e,Bo(t),n,o,lr)}function Fo(e){Un(e.colorScheme)||(e.colorScheme=new zn(e.colorScheme))}var Ho,Lo,Vo=function(e,t){var n=Object.keys(t);return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,i=e(r,o);if(r!==i)for(var s=0;s<n.length;s++){var a=n[s],u=t[a](i[a],o,i);if(void 0===u)throw new Error("A reducer can't return 'undefined'");i[a]=u}return i}}(function(e){var t=Object.keys(e);return function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o={},i=!1,s=0;s<t.length;s++){var a=t[s],u=e[a](n[a],r);if(void 0===u)throw new Error("A reducer can't return 'undefined'");o[a]=u,i=i||u!==n[a]}return i?o:n}}({props:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case rr.updateProps.key:return e=l({},e,r),"colorScheme"in r&&Fo(e),e;case rr.updateProp.key:var o=r.key;return e=l({},e,u({},o,r.value)),"colorScheme"===o&&Fo(e),e;default:return void 0!==e.colorScheme&&Fo(e),e}},sequences:(Ho=u({},rr.updateSequences,function(e,t){var n={raw:t,length:t.length};return n.maxLength=Do(t,function(e,t){return Math.max(e,t.sequence.length)},0),n}),Lo=[],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lo,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return Ho.hasOwnProperty(n)?Ho[n](e,r):e})}),{sequenceStats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentViewSequence:0,currentViewSequencePosition:0},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;switch(t.type){case rr.updateProp.key:case rr.updateProps.key:case rr.updateSequences.key:if(n.props&&n.props.tileHeight&&n.props.tileWidth&&n.sequences){var r={};return r.nrXTiles=Math.ceil(n.props.width/n.props.tileWidth)+1,r.nrYTiles=Math.ceil(n.props.height/n.props.tileHeight)+1,r.fullWidth=n.props.tileWidth*n.sequences.maxLength,r.fullHeight=n.props.tileHeight*n.sequences.length,r}}return e}}),Io=function(e){t.checkPropTypes(Qn,e,"prop","MSAViewer");var n=An({},Zn,e),r=n.sequences,o=(n.position,p(n,["sequences","position"])),i=J(Vo,!1);return i.dispatch(er(o)),i.dispatch(nr(r)),i},Yo=w(Se);function Xo(e,t,n,r){if(!Le(e))return e;for(var o=-1,i=(t=Co(t,e)).length,s=i-1,a=e;null!=a&&++o<i;){var u=ko(t[o]),c=n;if(o!=s){var l=a[u];void 0===(c=r?r(l,u,a):void 0)&&(c=Le(l)?l:vn(t[o+1])?[]:{})}fn(a,u,c),a=a[u]}return e}var No=Te?Te.isConcatSpreadable:void 0;function zo(e){return Ht(e)||Ft(e)||!!(No&&e&&e[No])}function Uo(e){return null!=e&&e.length?function e(t,n,r,o,i){var s=-1,a=t.length;for(r||(r=zo),i||(i=[]);++s<a;){var u=t[s];n>0&&r(u)?n>1?e(u,n-1,r,o,i):Ar(i,u):o||(i[i.length]=u)}return i}(e,1):[]}function $o(e){return Tn(On(e,void 0,Uo),e+"")}var Go=$o(function(e,t){return null==e?{}:function(e,t){return function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var s=t[r],a=To(e,s);n(0,s)&&Xo(i,Co(s,e),a)}return i}(e,t,function(t,n){return qo(e,n)})}(e,t)});function Ko(e){return"function"==typeof e?e:Sn}function Qo(e,t){return e&&ur(e,Ko(t))}var Zo=j(function(e,t){t.__esModule=!0;var n=i(r),o=i(ri);function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.__forwardedRef=(0,o.default)(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.__render=function(){return null},t.prototype.getRef=function(){return this.__forwardedRef.current||this.__forwardedRef.value},t.prototype.render=function(){return this.__render(this.props,this.__forwardedRef)},t}(n.default.Component);s.displayName="ForwardRefPolyfill",t.default=s,e.exports=t.default});function Jo(e){return function(){return e}}O(Zo);var ei=function(){};ei.thatReturns=Jo,ei.thatReturnsFalse=Jo(!1),ei.thatReturnsTrue=Jo(!0),ei.thatReturnsNull=Jo(null),ei.thatReturnsThis=function(){return this},ei.thatReturnsArgument=function(e){return e};var ti=ei;O(j(function(e,t){t.__esModule=!0;var n=i(r),o=(i(ri),i(Zo));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}i(ti),t.default=n.default.forwardRef||function(e){return function(t){function n(){var r,o;!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return r=o=s(this,t.call.apply(t,[this].concat(a))),o.__render=e,s(o,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n}(o.default)},e.exports=t.default}));var ni=j(function(e,t){t.__esModule=!0,t.default=function(e){if(!e)return null;var t=e;return 1===Object.keys(t).length&&(t.hasOwnProperty("current")?t=t.current:t.hasOwnProperty("value")&&(t=t.value)),t instanceof n.default&&(t=t.getRef()),t};var n=r(Zo);function r(e){return e&&e.__esModule?e:{default:e}}r(ti),e.exports=t.default});O(ni);var ri=j(function(e,t){t.__esModule=!0;var n=i(r),o=i(ni);function i(e){return e&&e.__esModule?e:{default:e}}t.default=n.default.createRef||function(){function e(t){e.current=(0,o.default)(t)||null}return e.current=null,e},e.exports=t.default}),oi=O(ri);function ii(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.withX,c=void 0!==s&&s,p=o.withY,y=void 0!==p&&p,b=function(t){function o(e){var t;return i(this,o),u(d(d(t=v(this,h(o).call(this,e)))),"updateFromPositionStore",function(){var e=t.context.positionMSAStore.getState();t.position=t.position||{};var n=Go(e,["currentViewSequence","currentViewSequencePosition","xPosOffset","yPosOffset"]);e.position&&(n.xPos=e.position.xPos,n.yPos=e.position.yPos),t.el.current&&t.shouldRerender(n)?(t.position=n,t.setState({position:t.position})):(Qo(n,function(e,n){t.position[n]=e}),t.el.current&&t.updateScrollPosition())}),u(d(d(t)),"shouldRerender",function(e){var n=t.el.current;if(void 0!==n.shouldRerender)return n.shouldRerender(e);var r=n.props.cacheElements;return!!(y&&Math.abs(e.currentViewSequence-t.position.lastCurrentViewSequence)>=r)||!!(c&&Math.abs(e.currentViewSequencePosition-t.position.lastCurrentViewSequencePosition)>=r)}),u(d(d(t)),"updateScrollPosition",function(){var e=t.el.current;if(e&&void 0!==e.updateScrollPosition)e.updateScrollPosition();else if(e&&e.el&&e.el.current){if(c){var n=e.props.tileWidth,r=-t.position.xPosOffset;r+=(t.position.lastCurrentViewSequencePosition-t.position.lastStartXTile)*n,t.position.currentViewSequencePosition!==t.position.lastCurrentViewSequencePosition&&(r+=(t.position.currentViewSequencePosition-t.position.lastCurrentViewSequencePosition)*n),e.el.current.scrollLeft=r}if(y){var o=e.props.tileHeight,i=-t.position.yPosOffset;i+=(t.position.lastCurrentViewSequence-t.position.lastStartYTile)*o,t.position.currentViewSequence!==t.position.lastCurrentViewSequence&&(i+=(t.position.currentViewSequence-t.position.lastCurrentViewSequence)*o),e.el.current.scrollTop=i}}}),u(d(d(t)),"dispatch",function(e){t.context.positionMSAStore.dispatch(e)}),t.el=oi(),t}return f(o,n.PureComponent),a(o,[{key:"componentDidMount",value:function(){this.unsubscribe=this.context.positionMSAStore.subscribe(this.updateFromPositionStore),this.updateScrollPosition(!0)}},{key:"componentDidUpdate",value:function(){this.updateScrollPosition()}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){return this.hasBeenInitialized||(this.updateFromPositionStore(),this.hasBeenInitialized=!0),r.createElement(e,l({ref:this.el,position:this.position,positionDispatch:this.dispatch},this.props))}}]),o}();return b.displayName="withPosition(".concat(e.displayName||e.name,")"),b.contextTypes={positionMSAStore:t.object},b}var si=zr&&new zr,ai=si?function(e,t){return si.set(e,t),e}:Sn;function ui(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=xt(e.prototype),r=e.apply(n,t);return Le(r)?r:n}}var ci=1,li=Math.max;function fi(e,t,n,r){for(var o=-1,i=e.length,s=n.length,a=-1,u=t.length,c=li(i-s,0),l=Array(u+c),f=!r;++a<u;)l[a]=t[a];for(;++o<s;)(f||o<i)&&(l[n[o]]=e[o]);for(;c--;)l[a++]=e[o++];return l}var hi=Math.max;function pi(e,t,n,r){for(var o=-1,i=e.length,s=-1,a=n.length,u=-1,c=t.length,l=hi(i-a,0),f=Array(l+c),h=!r;++o<l;)f[o]=e[o];for(var p=o;++u<c;)f[p+u]=t[u];for(;++s<a;)(h||o<i)&&(f[p+n[s]]=e[o++]);return f}function di(){}var vi=4294967295;function yi(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=vi,this.__views__=[]}yi.prototype=xt(di.prototype),yi.prototype.constructor=yi;var bi=si?function(e){return si.get(e)}:function(){},mi={},gi=Object.prototype.hasOwnProperty;function wi(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}wi.prototype=xt(di.prototype),wi.prototype.constructor=wi;var Si=Object.prototype.hasOwnProperty;function _i(e){if(qt(e)&&!Ht(e)&&!(e instanceof yi)){if(e instanceof wi)return e;if(Si.call(e,"__wrapped__"))return function(e){if(e instanceof yi)return e.clone();var t=new wi(e.__wrapped__,e.__chain__);return t.__actions__=Ot(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}(e)}return new wi(e)}_i.prototype=di.prototype,_i.prototype.constructor=_i;var Pi=kn(ai),Oi=/\{\n\/\* \[wrapped with (.+)\] \*/,ji=/,? & /,xi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function Ci(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ei(e){return e!=e}var ki=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function Ti(e,t,n){var r=t+"";return Tn(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(xi,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ci(ki,function(n){var r="_."+n[0];t&n[1]&&!function(e,t){return!(null==e||!e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var r=-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}(e,t):function(e,t,n,r){for(var o=e.length,i=-1;++i<o;)if(t(e[i],i,e))return i;return-1}(e,Ei)}(e,t)>-1}(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(Oi);return t?t[1].split(ji):[]}(r),n)))}var Mi=1,qi=2,Ai=4,Ri=8,Bi=32,Wi=64;function Di(e,t,n,r,o,i,s,a,u,c){var l=t&Ri;t|=l?Bi:Wi,(t&=~(l?Wi:Bi))&Ai||(t&=~(Mi|qi));var f=[e,t,o,l?i:void 0,l?s:void 0,l?void 0:i,l?void 0:s,a,u,c],h=n.apply(void 0,f);return function(e){var t=function(e){for(var t=e.name+"",n=mi[t],r=gi.call(mi,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}(e),n=_i[t];if("function"!=typeof n||!(t in yi.prototype))return!1;if(e===n)return!0;var r=bi(n);return!!r&&e===r[0]}(e)&&Pi(h,f),h.placeholder=r,Ti(h,e,t)}function Fi(e){return e.placeholder}var Hi=Math.min,Li="__lodash_placeholder__";function Vi(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var s=e[n];s!==t&&s!==Li||(e[n]=Li,i[o++]=n)}return i}var Ii=1,Yi=2,Xi=8,Ni=16,zi=128,Ui=512;function $i(e,t,n,r,o,i,s,a,u,c){var l=t&zi,f=t&Ii,h=t&Yi,p=t&(Xi|Ni),d=t&Ui,v=h?void 0:ui(e);return function y(){for(var b=arguments.length,m=Array(b),g=b;g--;)m[g]=arguments[g];if(p)var w=Fi(y),S=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(m,w);if(r&&(m=fi(m,r,o,p)),i&&(m=pi(m,i,s,p)),b-=S,p&&b<c){var _=Vi(m,w);return Di(e,t,$i,y.placeholder,n,m,_,a,u,c-b)}var P=f?n:this,O=h?P[e]:e;return b=m.length,a?m=function(e,t){for(var n=e.length,r=Hi(t.length,n),o=Ot(e);r--;){var i=t[r];e[r]=vn(i,n)?o[i]:void 0}return e}(m,a):d&&b>1&&m.reverse(),l&&u<b&&(m.length=u),this&&this!==ke&&this instanceof y&&(O=v||ui(O)),O.apply(P,m)}}var Gi=1,Ki="__lodash_placeholder__",Qi=1,Zi=2,Ji=4,es=8,ts=128,ns=256,rs=Math.min,os=NaN,is=/^\s+|\s+$/g,ss=/^[-+]0x[0-9a-f]+$/i,as=/^0b[01]+$/i,us=/^0o[0-7]+$/i,cs=parseInt;function ls(e){if("number"==typeof e)return e;if(fo(e))return os;if(Le(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Le(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(is,"");var n=as.test(e);return n||us.test(e)?cs(e.slice(2),n?2:8):ss.test(e)?os:+e}var fs=1/0,hs=1.7976931348623157e308;function ps(e){var t=function(e){return e?(e=ls(e))===fs||e===-fs?(e<0?-1:1)*hs:e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}var ds="Expected a function",vs=1,ys=2,bs=8,ms=16,gs=32,ws=64,Ss=Math.max;var _s=Mn(function(e,t){return function(e,t,n,r,o,i,s,a){var u=t&ys;if(!u&&"function"!=typeof e)throw new TypeError(ds);var c=r?r.length:0;if(c||(t&=~(gs|ws),r=o=void 0),s=void 0===s?s:Ss(ps(s),0),a=void 0===a?a:ps(a),c-=o?o.length:0,t&ws){var l=r,f=o;r=o=void 0}var h=u?void 0:bi(e),p=[e,t,n,r,o,l,f,i,s,a];if(h&&function(e,t){var n=e[1],r=t[1],o=n|r,i=o<(Qi|Zi|ts),s=r==ts&&n==es||r==ts&&n==ns&&e[7].length<=t[8]||r==(ts|ns)&&t[7].length<=t[8]&&n==es;if(!i&&!s)return e;r&Qi&&(e[2]=t[2],o|=n&Qi?0:Ji);var a=t[3];if(a){var u=e[3];e[3]=u?fi(u,a,t[4]):a,e[4]=u?Vi(e[3],Ki):t[4]}(a=t[5])&&(u=e[5],e[5]=u?pi(u,a,t[6]):a,e[6]=u?Vi(e[5],Ki):t[6]),(a=t[7])&&(e[7]=a),r&ts&&(e[8]=null==e[8]?t[8]:rs(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(p,h),e=p[0],t=p[1],n=p[2],r=p[3],o=p[4],!(a=p[9]=void 0===p[9]?u?0:e.length:Ss(p[9]-c,0))&&t&(bs|ms)&&(t&=~(bs|ms)),t&&t!=vs)d=t==bs||t==ms?function(e,t,n){var r=ui(e);return function o(){for(var i=arguments.length,s=Array(i),a=i,u=Fi(o);a--;)s[a]=arguments[a];var c=i<3&&s[0]!==u&&s[i-1]!==u?[]:Vi(s,u);return(i-=c.length)<n?Di(e,t,$i,o.placeholder,void 0,s,c,void 0,void 0,n-i):_n(this&&this!==ke&&this instanceof o?r:e,this,s)}}(e,t,a):t!=gs&&t!=(vs|gs)||o.length?$i.apply(void 0,p):function(e,t,n,r){var o=t&Gi,i=ui(e);return function t(){for(var s=-1,a=arguments.length,u=-1,c=r.length,l=Array(c+a),f=this&&this!==ke&&this instanceof t?i:e;++u<c;)l[u]=r[u];for(;a--;)l[u++]=arguments[++s];return _n(f,o?n:this,l)}}(e,t,n,r);else var d=function(e,t,n){var r=t&ci,o=ui(e);return function t(){return(this&&this!==ke&&this instanceof t?o:e).apply(r?n:this,arguments)}}(e,t,n);return Ti((h?ai:Pi)(d,p),e,t)}(e,64,void 0,t,Vi(t,Fi(_s)))});function Ps(e,t){return e===t}function Os(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ps,n=null,r=null;return function(){return function(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e(t[o],n[o]))return!1;return!0}(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}function js(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=0,s=r.pop(),a=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}(r),u=e.apply(void 0,[function(){return i++,s.apply(null,arguments)}].concat(n)),c=e(function(){for(var e=[],t=a.length,n=0;n<t;n++)e.push(a[n].apply(null,arguments));return u.apply(null,e)});return c.resultFunc=s,c.dependencies=a,c.recomputations=function(){return i},c.resetRecomputations=function(){return i=0},c}}_s.placeholder={};var xs=js(Os);function Cs(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==o(e)||!e||"object"!==o(t)||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),c=0;c<s.length;c++){var l=s[c];if(!u(l))return!1;var f=e[l],h=t[l];if(!1===(i=n?n.call(r,f,h,l):void 0)||void 0===i&&f!==h)return!1}return!0}var Es=js(Os,Cs);function ks(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];e[n]=e[n].bind(e)}}var Ts=function(e){function t(){return i(this,t),v(this,h(t).apply(this,arguments))}return f(t,n.PureComponent),a(t,[{key:"renderTile",value:function(e){var t=this.props.tileComponent;if(e in this.props.componentCache)return this.props.componentCache[e];var n=r.createElement(t,{key:e,index:e});return this.props.componentCache[e]=n,n}},{key:"render",value:function(){for(var e=[],t=this.props.startTile;t<this.props.endTile;t++)e.push(this.renderTile(t));return 0===e.length&&console.warn("The TileComponent rendered returned 0 elements from ".concat(this.props.startTile," to ").concat(this.props.endTile)),r.createElement("div",null,e)}}]),t}();Ts.propTypes={startTile:t.number.isRequired,endTile:t.number.isRequired,componentCache:t.func.isRequired};var Ms=function(e){function t(e){var n;return i(this,t),(n=v(this,h(t).call(this,e))).el=oi(),n}return f(t,n.PureComponent),a(t,[{key:"render",value:function(){var e=this.props,t=(e.yPosOffset,e.tileHeight,e.currentViewSequence,e.sequences,e.height),n=(e.cacheElements,e.tileComponent,e.nrYTiles,e.position,e.positionDispatch,e.componentCache,p(e,["yPosOffset","tileHeight","currentViewSequence","sequences","height","cacheElements","tileComponent","nrYTiles","position","positionDispatch","componentCache"])),o={height:t,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},i=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),s=Math.min(this.props.sequences.length,i+Math.ceil(t/this.props.tileHeight)+2*this.props.cacheElements);return this.props.position.lastCurrentViewSequence=this.props.position.currentViewSequence,this.props.position.lastStartYTile=i,r.createElement("div",n,r.createElement("div",{style:o,ref:this.el},r.createElement(Ts,{componentCache:this.props.componentCache,startTile:i,endTile:s,tileComponent:this.props.tileComponent})))}}]),t}();Ms.propTypes={tileComponent:t.oneOfType([t.func,t.object]).isRequired,cacheElements:t.number.isRequired,tileHeight:t.number.isRequired,nrYTiles:t.number.isRequired,componentCache:t.func.isRequired};var qs=ii(Ms,{withY:!0}),As=function(e){function t(e){var n;return i(this,t),ks(d(d(n=v(this,h(t).call(this,e)))),"createLabel"),n.label=Es(_s(Go,n.constructor.labelProps),n.createLabel),n}return f(t,n.PureComponent),a(t,[{key:"createLabel",value:function(e){return this.cache=function(){},o=(t=e).sequences,s=t.tileHeight,u=t.labelComponent,c=t.labelStyle,d=t.labelAttributes,function(e){function t(){return i(this,t),v(this,h(t).apply(this,arguments))}return f(t,n.PureComponent),a(t,[{key:"render",value:function(){var e=this.props,t=e.index,n=p(e,["index"]);if(u){var i=u;return r.createElement(i,{sequence:o[t],index:t})}n.style=l({},this.props.style,{height:s},c);var a=l({},n,d);return r.createElement("div",a,o[t].name)}}]),t}();var t,o,s,u,c,d}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,n=(e.dispatch,e.labelComponent,e.labelStyle,e.labelAttributes,p(e,["cacheElements","dispatch","labelComponent","labelStyle","labelAttributes"]));return r.createElement(qs,c({tileComponent:this.label(this.props),cacheElements:t,componentCache:this.cache},n))}}]),t}();u(As,"labelProps",["sequences","tileHeight","labelComponent","labelStyle","labelAttributes"]),As.defaultProps={cacheElements:10,labelStyle:{}},As.propTypes={font:t.string,labelComponent:t.oneOfType([t.object,t.func]),style:t.object,labelStyle:t.object,labelAttributes:t.object};var Rs=_e(function(e){return{height:e.props.height,tileHeight:e.props.tileHeight,sequences:e.sequences.raw,nrYTiles:e.sequenceStats.nrYTiles}})(As),Bs=function(e){function t(e){var n;return i(this,t),(n=v(this,h(t).call(this,e))).el=oi(),n}return f(t,n.PureComponent),a(t,[{key:"render",value:function(){var e=this.props,t=e.tileWidth,n=e.sequences,o=e.width,i=(e.cacheElements,e.tileComponent),s=(e.nrXTiles,e.maxLength,e.position,e.positionDispatch,e.componentCache,p(e,["tileWidth","sequences","width","cacheElements","tileComponent","nrXTiles","maxLength","position","positionDispatch","componentCache"])),a={width:o,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},u=l({},this.props.style,{height:this.props.height}),f={tileWidth:t,sequences:n,tileComponent:i},h=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),d=Math.min(this.props.maxLength,h+this.props.nrXTiles+2*this.props.cacheElements),v=this.props.width+2*this.props.cacheElements*this.props.tileWidth;return this.props.position.lastStartXTile=h,this.props.position.lastCurrentViewSequencePosition=this.props.position.currentViewSequencePosition,r.createElement("div",c({style:u},s),r.createElement("div",{style:a,ref:this.el},r.createElement(Ts,c({},f,{componentCache:this.props.componentCache,startTile:h,endTile:d,maxWidth:v}))))}}]),t}();Bs.propTypes={tileComponent:t.oneOfType([t.func,t.object]).isRequired,cacheElements:t.number.isRequired,tileWidth:t.number.isRequired,nrXTiles:t.number.isRequired,maxLength:t.number.isRequired,componentCache:t.func.isRequired};var Ws=ii(Bs,{withX:!0}),Ds=function(e){function t(e){var n;return i(this,t),(n=v(this,h(t).call(this,e))).cache=function(){},ks(d(d(n)),"createMarker"),n.marker=Es(_s(Go,n.constructor.markerAttributes),n.createMarker),n}return f(t,n.PureComponent),a(t,[{key:"createMarker",value:function(e){return this.cache=function(){},o=(t=e).markerSteps,s=t.startIndex,u=t.tileWidth,t.font,c=t.markerComponent,d=t.markerStyle,y=t.markerAttributes,function(e){function t(){return i(this,t),v(this,h(t).apply(this,arguments))}return f(t,n.PureComponent),a(t,[{key:"render",value:function(){var e,t=this.props,n=t.index,i=p(t,["index"]);if(c){var a=c;return r.createElement(a,{index:n})}i.style=l({width:u,display:"inline-block",textAlign:"center"},d),e=n%o==0?n+0+s:".";var f=l({},i,y);return r.createElement("div",f,e)}}]),t}();var t,o,s,u,c,d,y}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,n=(e.markerSteps,e.startIndex,e.dispatch,e.markerComponent,e.markerStyle,p(e,["cacheElements","markerSteps","startIndex","dispatch","markerComponent","markerStyle"]));return r.createElement(Ws,c({tileComponent:this.marker(this.props),cacheElements:t,componentCache:this.cache},n))}}]),t}();u(Ds,"markerAttributes",["markerSteps","startIndex","tileWidth","markerComponent","markerStyle","markerAttributes"]),Ds.defaultProps={style:{font:"12px Arial"},height:15,markerSteps:2,startIndex:1,cacheElements:10,markerStyle:{}},Ds.propTypes={font:t.string,height:t.number,markerSteps:t.number,startIndex:t.number,markerComponent:t.oneOfType([t.object,t.func]),style:t.object,markerStyle:t.object,markerAttributes:t.object};var Fs=_e(function(e){return{sequences:e.sequences.raw,maxLength:e.sequences.maxLength,width:e.props.width,tileWidth:e.props.tileWidth,nrXTiles:e.sequenceStats.nrXTiles}})(Ds);var Hs="Expected a function";function Ls(e,t){return(Ht(e)?Br:function(e,t){var n=[];return lr(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n})(e,function(e){if("function"!=typeof e)throw new TypeError(Hs);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}(Bo(t)))}function Vs(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],s=t(i);if(null!=s&&(void 0===a?s==s&&!fo(s):n(s,a)))var a=s,u=i}return u}function Is(e,t){return e>t}function Ys(e){return e&&e.length?Vs(e,Sn,Is):void 0}function Xs(e,t){return(Ht(e)?So:function(e,t){var n=-1,r=It(e)?Array(e.length):[];return lr(e,function(e,o,i){r[++n]=t(e,o,i)}),r})(e,Bo(t))}var Ns=qn(function(e,t){hn(t,gn(t),e)});function zs(e,t){return(Ht(e)?Ci:lr)(e,Ko(t))}var Us=function e(t,n){if(!this||this.constructor!==e)return new e(t);if(void 0===t||"string"==typeof t)throw new TypeError("you need to give the seq stat an array");this.resetSeqs(t),this.alphabetSize=4,this._useBackground=!1,this.useGaps=!1,this.ignoredChars=["-","*"],Ns(this,n)};Us.prototype.addSeq=function(e){this.seqs.push(e),this._reset()},Us.prototype.removeSeq=function(e){"number"==typeof e?this.seqs.splice(e,1):zs(this.seqs,function(t,n){e===t&&this.seqs.splice(n,1)}.bind(this)),this._reset()},Us.prototype.addSeqs=function(e){e.forEach(function(e){this.addSeq(e)}.bind(this))},Us.prototype.resetSeqs=function(e){if(this.seqs=[],!e instanceof Array||"at"in e){this.mseqs=e;var t=function(){var e=this.mseqs.pluck("seq");this.resetSeqs(e)};e.on("add change reset ",t,this),t.call(this)}else this.addSeqs(e),this._reset()};var $s=["consensus","frequency","maxLength","ic","gaps"];Us.prototype._reset=function(){for(var e=0;e<$s.length;e++)this["_"+$s[e]]=void 0;this._identity=void 0,this._background=void 0},Us.prototype.setBackground=function(e){this._useBackground=e,this._reset()},Us.prototype.useBackground=function(){this.setBackground(!0)},Us.prototype.setDNA=function(){this.alphabetSize=4},Us.prototype.setProtein=function(){this.alphabetSize=20},$s.forEach(function(e){Us.prototype[e]=function(){return void 0===this["_"+e]&&(this["_"+e]=this[e+"Calc"]()),this["_"+e]}}),Us.prototype.identity=function(e){var t;return(void 0===this._identity||e)&&(t=this.identityCalc(e),this._identity=void 0),this._identity||t},Us.prototype.background=function(){return void 0!==this.bg?this.bg:(void 0===this._background&&this.backgroundCalc(),this._background)},Us.prototype.frequencyCalc=function(e){var t,n;t=new Array(this.maxLength()),n=new Array(this.seqs.length);var r=this.ignoredChars;return void 0!==e&&e.all&&(r=[]),zs(this.seqs,function(e){zs(e,function(e,o){r.indexOf(e)>=0||(void 0===t[o]&&(t[o]={}),void 0===t[o][e]&&(t[o][e]=0),t[o][e]++,void 0===n[o]&&(n[o]=0),n[o]++)})}),zs(t,function(e,r){return zs(e,function(e,o){return t[r][o]=e/n[r]})}),this._frequency=t,t},Us.prototype.backgroundCalc=function(){var e,t,n,r={},o=0;return zs(this.seqs,function(e){zs(e,function(e){return void 0===r[e]&&(r[e]=0),r[e]++,o++})}),e=r,n={},t=Bo(t=function(e){return e/o}),ur(e,function(e,r,o){pt(n,r,t(e,r,o))}),r=n,this._background=r,r},Us.prototype.icCalc=function(){var e=this.frequency();if(this._useBackground)var t=this.background();var n=this.ignoredChars,r=this._useBackground,o=Xs(e,function(e){return Do(e,function(e,o,i){return n.indexOf(i)>=0?e:(r&&(o/=t[i]),e-o*(Math.log(o)/Math.log(2)))},0)});return this._ic=o,o},Us.prototype.conservation=function(e){var t=this.ic(),n=this.gaps(),r=this;e=e||this.alphabetSize;var o=Math.log(e)/Math.log(2),i=0;return Xs(t,function(e){var t=o-e;return r.useGaps&&(t*=1-n[i++]),t})},Us.prototype.conservResidue=function(e){var t,n,r=e?e.alphabetSize:void 0,o=this.ignoredChars;return t=void 0!==e&&e.scaled?this.scale(this.conservation(r)):this.conservation(r),Xs(this.frequency(),function(e,r){n=Ls(n(e),function(e){return o.indexOf(e)>=0});var i={};return zs(n,function(n){i[n]=e[n]*t[r]}),i})},Us.prototype.conservResidue2=function(e){var t=this.frequency(),n=this.conservation(e),r=this.background();return Xs(t,function(e,o){return Xs(e,function(e){var i=Do(t[o],function(e,t){return e+t/r[o]},0);return e/r[o]/i*n[o]})})},Us.prototype.scale=function(e,t){t=t||this.alphabetSize;var n=Math.log(t)/Math.log(2);return Xs(e,function(e){return e/n})},Us.prototype.maxLengthCalc=function(){return 0===this.seqs.length?0:Ys(this.seqs).length},Us.prototype.consensusCalc=function(){var e=new Array(this.maxLength());return zs(this.seqs,function(t){zs(t,function(t,n){void 0===e[n]&&(e[n]={}),void 0===e[n][t]&&(e[n][t]=0),e[n][t]++})}),this._consensus=Do(e,function(e,t){return e+Ys(Object.keys(t))},""),this._consensus},Us.prototype.identityCalc=function(e){var t=e||this.consensus();return this._identity=this.seqs.map(function(e){for(var n=0,r=0,o=0;o<e.length;o++)"-"!==e[o]&&"-"!==t[o]&&(r++,e[o]===t[o]&&n++);return n/r}),this._identity},Us.prototype.gapsCalc=function(){var e=this.maxLength();if(e<=1||void 0===e)return[];var t=new Array(this.maxLength());return zs(this.seqs,function(e){zs(e,function(e,n){void 0===t[n]&&(t[n]={g:0,t:0}),e="-"===e?"g":"t",t[n][e]++})}),this._gaps=Xs(t,function(e){return e.g/(e.g+e.t)}),this._gaps};var Gs=function(e){function t(e){var n;return i(this,t),(n=v(this,h(t).call(this,e))).cache=function(){},n.initializeColumnHeights(),ks(d(d(n)),"createBar"),n.bar=Es(function(e){return Go(e,n.constructor.barAttributes)},n.columnHeights,n.createBar),n}return f(t,n.PureComponent),a(t,[{key:"createBar",value:function(e,t){return this.cache=function(){},function(e){var t=e.columnHeights,o=e.tileWidth,s=e.height,u=e.fillColor;return e.barStyle,e.barAttributes,function(e){function c(){return i(this,c),v(this,h(c).apply(this,arguments))}return f(c,n.PureComponent),a(c,[{key:"render",value:function(){var e=this.props,n=e.index,i=p(e,["index"]);return i.style={height:Math.round(t[n]*s),width:o,display:"inline-block",textAlign:"center",backgroundColor:u},r.createElement("div",i)}}]),c}()}(l({},e,{columnHeights:t}))}},{key:"initializeColumnHeights",value:function(){this.columnHeights=xs(function(e){return e.sequences},function(e){return e.method},function(e,t){var n,r=Us(e.map(function(e){return e.sequence}));switch(t){case"conservation":n=r.scale(r.conservation());break;case"information-content":n=r.scale(r.ic());break;default:console.error(t+"is an invalid aggregation method for <OverviewBar />")}return n}).bind(this)}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,n=(e.height,e.method,e.fillColor,e.dispatch,e.barStyle,e.barAttributes,p(e,["cacheElements","height","method","fillColor","dispatch","barStyle","barAttributes"]));return r.createElement(Ws,c({tileComponent:this.bar(this.props),cacheElements:t,componentCache:this.cache},n))}}]),t}();u(Gs,"barAttributes",["tileWidth","height","fillColor","barStyle","barAttributes"]),Gs.defaultProps={height:50,fillColor:"#999999",method:"conservation",cacheElements:10},Gs.propTypes={method:t.oneOf(["information-content","conservation"]),height:t.number,fillColor:t.string,style:t.object,barStyle:t.object,barAttributes:t.object};var Ks=_e(function(e){return{sequences:e.sequences.raw,maxLength:e.sequences.maxLength,width:e.props.width,tileWidth:e.props.tileWidth,nrXTiles:e.sequenceStats.nrXTiles}})(Gs);function Qs(e,t){return io(e,t)}var Zs,Js=Math.min,ea=(Zs=Math.floor,function(e,t){if(e=ls(e),t=null==t?0:Js(ps(t),292)){var n=(xo(e)+"e").split("e");return+((n=(xo(Zs(n[0]+"e"+(+n[1]+t)))+"e").split("e"))[0]+"e"+(+n[1]-t))}return Zs(e)});function ta(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ls(n))==n?n:0),void 0!==t&&(t=(t=ls(t))==t?t:0),function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}(ls(e),t,n)}var na=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ar(t,Hr(e)),e=Et(e);return t}:Wr;function ra(e){return Rr(e,gn,na)}var oa=Object.prototype.hasOwnProperty,ia=/\w*$/,sa=Te?Te.prototype:void 0,aa=sa?sa.valueOf:void 0,ua="[object Boolean]",ca="[object Date]",la="[object Map]",fa="[object Number]",ha="[object RegExp]",pa="[object Set]",da="[object String]",va="[object Symbol]",ya="[object ArrayBuffer]",ba="[object DataView]",ma="[object Float32Array]",ga="[object Float64Array]",wa="[object Int8Array]",Sa="[object Int16Array]",_a="[object Int32Array]",Pa="[object Uint8Array]",Oa="[object Uint8ClampedArray]",ja="[object Uint16Array]",xa="[object Uint32Array]";var Ca=sn&&sn.isMap,Ea=Ca?tn(Ca):function(e){return qt(e)&&"[object Map]"==Jr(e)},ka=sn&&sn.isSet,Ta=ka?tn(ka):function(e){return qt(e)&&"[object Set]"==Jr(e)},Ma=1,qa=2,Aa=4,Ra="[object Arguments]",Ba="[object Function]",Wa="[object GeneratorFunction]",Da="[object Object]",Fa={};function Ha(e,t,n,r,o,i){var s,a=t&Ma,u=t&qa,c=t&Aa;if(n&&(s=o?n(e,r,o,i):n(e)),void 0!==s)return s;if(!Le(e))return e;var l=Ht(e);if(l){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&oa.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!a)return Ot(e,s)}else{var f=Jr(e),h=f==Ba||f==Wa;if(zt(e))return wt(e,a);if(f==Da||f==Ra||h&&!o){if(s=u||h?{}:Mt(e),!a)return u?function(e,t){return hn(e,na(e),t)}(e,function(t,n){return t&&hn(e,gn(e),t)}(s)):function(e,t){return hn(e,Hr(e),t)}(e,function(t,n){return t&&hn(e,ar(e),t)}(s))}else{if(!Fa[f])return o?e:{};s=function(e,t,n){var r,o,i,s=e.constructor;switch(t){case ya:return _t(e);case ua:case ca:return new s(+e);case ba:return function(e,t){var n=t?_t(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case ma:case ga:case wa:case Sa:case _a:case Pa:case Oa:case ja:case xa:return Pt(e,n);case la:return new s;case fa:case da:return new s(e);case ha:return(i=new(o=e).constructor(o.source,ia.exec(o))).lastIndex=o.lastIndex,i;case pa:return new s;case va:return r=e,aa?Object(aa.call(r)):{}}}(e,f,a)}}i||(i=new ft);var p=i.get(e);if(p)return p;if(i.set(e,s),Ta(e))return e.forEach(function(r){s.add(Ha(r,t,n,r,e,i))}),s;if(Ea(e))return e.forEach(function(r,o){s.set(o,Ha(r,t,n,o,e,i))}),s;var d=c?u?ra:Lr:u?keysIn:ar,v=l?void 0:d(e);return Ci(v||e,function(r,o){v&&(r=e[o=r]),fn(s,o,Ha(r,t,n,o,e,i))}),s}function La(e,t){return null==(e=function(e,t){return t.length<2?e:To(e,function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}(t,0,-1))}(e,t=Co(t,e)))||delete e[ko((n=t,r=null==n?0:n.length,r?n[r-1]:void 0))];var n,r}function Va(e){return Jt(e)?void 0:e}Fa[Ra]=Fa["[object Array]"]=Fa["[object ArrayBuffer]"]=Fa["[object DataView]"]=Fa["[object Boolean]"]=Fa["[object Date]"]=Fa["[object Float32Array]"]=Fa["[object Float64Array]"]=Fa["[object Int8Array]"]=Fa["[object Int16Array]"]=Fa["[object Int32Array]"]=Fa["[object Map]"]=Fa["[object Number]"]=Fa[Da]=Fa["[object RegExp]"]=Fa["[object Set]"]=Fa["[object String]"]=Fa["[object Symbol]"]=Fa["[object Uint8Array]"]=Fa["[object Uint8ClampedArray]"]=Fa["[object Uint16Array]"]=Fa["[object Uint32Array]"]=!0,Fa["[object Error]"]=Fa[Ba]=Fa["[object WeakMap]"]=!1;var Ia=$o(function(e,t){var n={};if(null==e)return n;var r=!1;t=So(t,function(t){return t=Co(t,e),r||(r=t.length>1),t}),hn(e,ra(e),n),r&&(n=Ha(n,7,Va));for(var o=t.length;o--;)La(n,t[o]);return n}),Ya=function e(){i(this,e)};u(Ya,"rel",function(e){if(void 0!==e.changedTouches)return Ya.rel(e.changedTouches[0]);var t=e.offsetX,n=e.offsetY;if(void 0===t){var r=e.target||e.srcElement,o=r.getBoundingClientRect();if(t=e.clientX-o.left,n=e.clientY-o.top,void 0===t&&(t=e.pageX-r.offsetLeft,n=e.pageY-r.offsetTop,void 0===t))return}return[t,n]}),u(Ya,"abs",function(e){if(void 0!==e.changedTouches)return Ya.abs(e.changedTouches[0]);var t=e.pageX,n=e.pageY;return void 0===t&&(t=e.layerX,n=e.layerY),void 0===t&&(t=e.clientX,n=e.clientY),void 0===t&&(t=e.x,n=e.y),[t,n]}),u(Ya,"wheelDelta",function(e){var t=[e.deltaX,e.deltaY];return void 0===t[0]&&e.mozMovementX&&(t=[0,e.mozMovementX]),isNaN(t[0])&&(t[0]=0),isNaN(t[1])&&(t[1]=0),t});var Xa=j(function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=a(r),s=a(t);function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.children,n=e.width,r=e.height,s=e.style,a=void 0===s?{}:s,u=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","width","height","style"]);return i.default.createElement("svg",o({children:t,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:r,width:n,style:a},u))};u.propTypes={children:s.default.node.isRequired,width:s.default.oneOfType([s.default.number,s.default.string]),height:s.default.oneOfType([s.default.number,s.default.string]),style:s.default.object},n.default=u});O(Xa);var Na=O(j(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=s(r),i=s(Xa);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement(i.default,n({viewBox:"0 0 16 16"},e),o.default.createElement("path",{d:"M4 0H0v4h1V1h3V0zm11 0h-3v1h3v3h1V0h-1zM1 15v-3H0v4h4v-1H1zm14-3v3h-3v1h4v-4h-1zm-2-3l-.008-.003L11.5 10.5 9 8l2.5-2.5L12.971 7H13V3H9v.03l1.5 1.47L8 7 5.5 4.5 7 3.03V3H3v4l1.5-1.5L7 8l-2.5 2.5L3 9v4h4l-1.5-1.5L8 9l2.5 2.5L9 13h4V9z"}))}})),za=O(j(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=s(r),i=s(Xa);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement(i.default,n({viewBox:"0 0 16 16"},e),o.default.createElement("path",{d:"M.013 1.012V15h13.999V1.012H.013zm10.999 7.995H8.013v2.999h-2V9.007h-3V7.008h3V4.01h2v2.998h2.999v1.999z"}))}})),Ua=O(j(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=s(r),i=s(Xa);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement(i.default,n({viewBox:"0 0 16 16"},e),o.default.createElement("path",{d:"M.004 1v14h14V1h-14zM11 9H3V7h8v2z"}))}}));function $a(){return r.createElement("svg",{height:"1em",width:"1.542em",viewBox:"0 0 1542 1000"},r.createElement("path",{d:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)",fill:"rgb(68, 122, 219)"}))}var Ga=function(e){function t(){return i(this,t),v(this,h(t).apply(this,arguments))}return f(t,n.PureComponent),a(t,[{key:"render",value:function(){var e=l({opacity:.9,backgroundColor:"white"},this.props.style),t={position:"relative",fontSize:"16px",padding:"3px 4px",cursor:"pointer",lineHeight:"normal",textDecoration:"none",color:"black"};return r.createElement("div",{style:e},r.createElement("div",{style:t},r.createElement(za,{width:20,height:20})),r.createElement("div",{style:t},r.createElement(Ua,{width:20,height:20})),r.createElement("div",{style:t},r.createElement(Na,{width:20,height:20})),r.createElement("a",{href:"https://plot.ly/",target:"_blank",rel:"noreferrer noopener","data-title":"Produced with Plotly",style:t},r.createElement($a,{width:20,height:20})))}}]),t}(),Ka=Jn("MAINSTORE_UPDATE"),Qa=Jn("POSITION_MOVE"),Za=Jn("POSITION_UPDATE"),Ja={updateMainStore:Ka,updatePosition:Za,movePosition:Qa};function eu(e,t){var n=e.sequences.maxLength*e.props.tileWidth-e.props.width;t.xPos=ta(t.xPos,0,n);var r=e.sequences.raw.length*e.props.tileHeight-e.props.height;return t.yPos=ta(t.yPos,0,r),l({},e,{position:t})}var tu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0}},t=arguments.length>1?arguments[1]:void 0,n=e.position;switch(t.type){case Qa.key:var r=l({},n);return r.xPos+=t.payload.xMovement||0,r.yPos+=t.payload.yMovement||0,eu(e,r);case Za.key:return eu(e,{xPos:t.payload.xPos||n.xPos,yPos:t.payload.yPos||n.yPos});default:return e}};function nu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0}},t=arguments.length>1?arguments[1]:void 0,n=e,r=e.position;switch(t.type){case Ka.key:n=l({},Go(n,["props","sequenceStats","sequences"]),t.payload);break;case Za.key:case Qa.key:r=tu(n,t).position;break;default:return n}return l({},n,{xPosOffset:-r.xPos%n.props.tileWidth,yPosOffset:-r.yPos%n.props.tileWidth,currentViewSequence:ta(ea(r.yPos/n.props.tileHeight),0,n.sequences.length-1),currentViewSequencePosition:ta(ea(r.xPos/n.props.tileWidth),0,n.sequences.maxLength),position:r})}function ru(e,t){void 0===e.nextFrame&&(e.nextFrame=window.requestAnimationFrame(function(){t(),this.nextFrame=void 0}.bind(e)))}var ou=function(e){function t(e){var n;return i(this,t),u(d(d(n=v(this,h(t).call(this,e)))),"onScroll",function(e){ru(d(d(n)),function(){var e={xMovement:n.el.current.scrollLeft-n.props.position.xPos,yMovement:n.el.current.scrollTop-n.props.position.yPos};n.props.positionDispatch(Qa(e))})}),u(d(d(n)),"updateScrollPosition",function(){n.el&&n.el.current&&(n.el.current.scrollTop=n.props.position.yPos,n.el.current.scrollLeft=n.props.position.xPos)}),n.el=oi(),n}return f(t,n.PureComponent),a(t,[{key:"checkOverflow",value:function(e,t){var n=t.withX,r=void 0!==n&&n,o=t.withY,i=void 0!==o&&o,s=!1;switch(this.props.overflow){case"auto":r&&(s|=this.props.fullWidth>this.props.width),i&&(s|=this.props.fullHeight>this.props.height);break;case"hidden":s=!1;break;case"scroll":s=!0}return s}},{key:"shouldShow",value:function(){var e={withX:!0},t={withY:!0},n="initial"===this.props.overflowX?this.props.overflow:this.props.overflowX,r="initial"===this.props.overflowY?this.props.overflow:this.props.overflowY;return{showX:this.checkOverflow(n,e)&&this.checkOverflow(this.props.overflow,e),showY:this.checkOverflow(r,t)&&this.checkOverflow(this.props.overflow,t)}}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,o=e.fullWidth,i=e.fullHeight,s={position:"absolute",overflowX:"auto",overflowY:"auto",width:t,height:n,transform:""},a=this.shouldShow(),u=a.showX,c=a.showY,l={height:1,width:1};return c||u?(u&&(l.width=o,s.overflowX="scroll","top"===this.props.positionX&&(s.transform+="rotateX(180deg)")),c&&(l.height=i,s.overflowY="scroll","left"===this.props.positionY&&(s.transform+="rotateY(180deg)")),r.createElement("div",{style:s,onScroll:this.onScroll,ref:this.el},r.createElement("div",{style:l}))):r.createElement("div",null)}}]),t}();ou.defaultProps={overflow:"auto",overflowX:"initial",overflowY:"initial",positionX:"bottom",positionY:"right",scrollBarWidth:5},ou.propTypes={overflow:t.oneOf(["hidden","auto","scroll"]),overflowX:t.oneOf(["hidden","auto","scroll","initial"]),overflowY:t.oneOf(["hidden","auto","scroll","initial"]),width:t.number.isRequired,height:t.number.isRequired,fullHeight:t.number.isRequired,fullWidth:t.number.isRequired,positionX:t.oneOf(["top","bottom"]),positionY:t.oneOf(["left","right"])};var iu=ii(ou,{withX:!0,withY:!0}),su=function(e){function t(e){var n;return i(this,t),u(d(d(n=v(this,h(t).call(this,e)))),"state",{mouse:{isMouseWithin:!1,cursorState:"grab"}}),u(d(d(n)),"currentContext",1),n.canvasBuffers=[oi(),oi()],n.container=oi(),ks(d(d(n)),"onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onClick","onDoubleClick","draw"),n.onViewpointChange(),n.mouseMovePosition=void 0,n.touchMovePosition=void 0,n.isInDragPhase=void 0,n.mouseHasMoved=void 0,n}return f(t,n.PureComponent),a(t,[{key:"drawScene",value:function(){console.warn("drawScene is unimplemented.")}},{key:"onPositionUpdate",value:function(){console.warn("onPositionUpdate is unimplemented.")}},{key:"onViewpointChange",value:function(){}},{key:"componentDidMount",value:function(){this.ctxBuffers=[this.canvasBuffers[0].current.getContext("2d",{alpha:"false"}),this.canvasBuffers[1].current.getContext("2d",{alpha:"false"})],this.swapContexts(),this.container.current.addEventListener("mouseenter",this.onMouseEnter),this.container.current.addEventListener("mouseleave",this.onMouseLeave),this.container.current.addEventListener("mousedown",this.onMouseDown),this.container.current.addEventListener("mouseup",this.onMouseUp),this.container.current.addEventListener("mousemove",this.onMouseMove),this.container.current.addEventListener("touchstart",this.onTouchStart),this.container.current.addEventListener("touchmove",this.onTouchMove),this.container.current.addEventListener("touchend",this.onTouchEnd),this.container.current.addEventListener("touchcancel",this.onTouchCancel),this.container.current.addEventListener("click",this.onClick),this.container.current.addEventListener("dblclick",this.onDoubleClick)}},{key:"swapContexts",value:function(){var e=this.currentContext;this.canvasBuffers[e].current.style.visibility="visible";var t=(this.currentContext+1)%2;this.canvasBuffers[t].current.style.visibility="hidden",this.currentContext=t,this.ctx=this.ctxBuffers[t]}},{key:"draw",value:function(){this.ctx&&(this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.onViewpointChange(),this.drawScene(),this.swapContexts())}},{key:"onClick",value:function(e){}},{key:"onDoubleClick",value:function(e){}},{key:"onMouseDown",value:function(e){this.startDragPhase(e)}},{key:"onMouseMove",value:function(e){var t=this;if(void 0!==this.isInDragPhase){this.mouseHasMoved=!0;var n=Ya.abs(e),r=this.mouseMovePosition;ru(this,function(){t.mouseMovePosition=n,t.onPositionUpdate(r,t.mouseMovePosition)})}}},{key:"onMouseUp",value:function(){this.stopDragPhase()}},{key:"onMouseEnter",value:function(){this.setState(function(e){return{mouse:l({},e.mouse,{isMouseWithin:!0})}})}},{key:"onMouseLeave",value:function(){this.stopHoverPhase(),this.stopDragPhase()}},{key:"onTouchStart",value:function(e){this.startDragPhase(e)}},{key:"onTouchMove",value:function(e){void 0!==this.isInDragPhase&&this.onMouseMove(e)}},{key:"onTouchEnd",value:function(){this.stopDragPhase()}},{key:"onTouchCancel",value:function(){this.stopDragPhase()}},{key:"startDragPhase",value:function(e){this.mouseMovePosition=Ya.abs(e),this.mouseHasMoved=void 0,this.isInDragPhase=!0,this.setState(function(e){return{mouse:l({},e.mouse,{cursorState:"grabbing"})}})}},{key:"stopHoverPhase",value:function(){this.setState(function(e){return{mouse:l({},e.mouse,{isMouseWithin:!1})}})}},{key:"stopDragPhase",value:function(){this.isInDragPhase=void 0,this.setState(function(e){return{mouse:l({},e.mouse,{cursorState:"grab"})}})}},{key:"isEventWithinComponent",value:function(e){var t=Ya.rel(e);return 0<=t[0]&&t[0]<=this.props.width&&0<=t[1]&&t[1]<=this.props.height}},{key:"componentWillUnmount",value:function(){this.container.current.removeEventListener("mouseenter",this.onMouseEnter),this.container.current.removeEventListener("mouseleave",this.onMouseLeave),this.container.current.removeEventListener("mouseup",this.onMouseUp),this.container.current.removeEventListener("mousedown",this.onMouseDown),this.container.current.removeEventListener("mousemove",this.onMouseMove),this.container.current.removeEventListener("click",this.onClick),this.container.current.removeEventListener("dblclick",this.onDoubleClick),this.container.current.removeEventListener("touchstart",this.onTouchStart),this.container.current.removeEventListener("touchend",this.onTouchEnd),this.container.current.removeEventListener("touchcancel",this.onTouchCancel),this.container.current.removeEventListener("touchmove",this.onTouchMove),this.stopDragPhase()}},{key:"render",value:function(){var e,t=l({width:this.props.width,height:this.props.height},this.props.style,{cursor:this.state.mouse.cursorState,position:"relative"}),n=this.props.showModBar&&this.state.mouse.isMouseWithin,o={position:"absolute",left:0,top:0},i=Ia(this.props,(e=this.constructor.propKeys,function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()).concat(["tileWidth","tileHeight","colorScheme","nrXTiles","nrYTiles","dispatch","sequences","fullWidth","fullHeight","position","positionDispatch"]));return r.createElement("div",c({style:t,ref:this.container},i),n&&r.createElement(Ga,{style:{position:"absolute",right:0,opacity:.8}}," Plotly Modbar"),r.createElement("canvas",{style:o,ref:this.canvasBuffers[0],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),r.createElement("canvas",{style:o,ref:this.canvasBuffers[1],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),r.createElement(iu,{overflow:this.props.overflow,overflowX:this.props.overflowX,overflowY:this.props.overflowY,positionX:this.props.scrollBarPositionX,positionY:this.props.scrollBarPositionY,width:this.props.width,height:this.props.height,fullWidth:this.props.fullWidth,fullHeight:this.props.fullHeight}))}}]),t}();u(su,"defaultProps",{engine:"canvas",showModBar:!0});var au=function(){function e(t){i(this,e),this.el=t,this.state={}}return a(e,[{key:"updateEl",value:function(e){this.el=e}},{key:"font",value:function(e){this.state.font=e}},{key:"globalAlpha",value:function(e){this.state.globalAlpha=e}},{key:"startDrawingFrame",value:function(){this.clear()}},{key:"endDrawingFrame",value:function(){}},{key:"save",value:function(){}},{key:"restore",value:function(){}}]),e}(),uu=function(){function e(t){i(this,e),this.cache={},this.cacheHeight=0,this.cacheWidth=0}return a(e,[{key:"getFontTile",value:function(e,t,n,r){return t===this.cacheWidth&&n===this.cacheHeight&&r===this.font||(this.updateDimensions(t,n),this.font=r),void 0===this.cache[e]&&this.createTile(e,t,n),this.cache[e]}},{key:"createTile",value:function(e,t,n,r){var o=this.cache[e]=document.createElement("canvas");return o.width=t,o.height=n,this.ctx=o.getContext("2d"),this.ctx.font=this.font+"px mono",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(e,t/2,n/2,t,r)}},{key:"updateDimensions",value:function(e,t){this.invalidate(),this.cacheWidth=e,this.cacheHeight=t}},{key:"invalidate",value:function(){this.cache={}}}]),e}(),cu=function(e){function t(e){var n;return i(this,t),(n=v(this,h(t).call(this,e))).ctx=e.getContext("2d"),n.cache=new uu,n}return f(t,au),a(t,[{key:"clear",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"fillRect",value:function(e,t,n,r){this.ctx.fillRect(e,t,n,r)}},{key:"fillText",value:function(e,t,n,r,o){return this.ctx.drawImage(this.cache.getFontTile(e,r,o,this.ctx.font),t,n,r,o)}},{key:"font",value:function(e){this.ctx.font=e}},{key:"fillStyle",value:function(e){this.ctx.fillStyle=e}},{key:"globalAlpha",value:function(e){this.ctx.globalAlpha=e}},{key:"save",value:function(){this.ctx.save()}},{key:"restore",value:function(){this.ctx.restore()}}]),t}(),lu=function(e){function t(e){var n;return i(this,t),(n=v(this,h(t).call(this,e))).canvas=oi(),n}return f(t,n.PureComponent),a(t,[{key:"componentDidMount",value:function(){this.ctx=new cu(this.canvas.current),this.draw()}},{key:"componentDidUpdate",value:function(){this._draw()}},{key:"_draw",value:function(){this.ctx&&(this.ctx.startDrawingFrame(),this.ctx.save(),this.draw(),this.ctx.restore(),this.ctx.endDrawingFrame())}},{key:"draw",value:function(){console.error("Implement me.")}},{key:"render",value:function(){return r.createElement("div",{style:this.props.style},r.createElement("canvas",{ref:this.canvas,width:this.props.width,height:this.props.height}))}}]),t}();u(lu,"defaultProps",{engine:"canvas"}),lu.propTypes={width:t.number.isRequired,height:t.number.isRequired,style:t.object,engine:t.oneOf(["canvas","webgl"])};var fu=function(e){function t(){return i(this,t),v(this,h(t).apply(this,arguments))}return f(t,lu),a(t,[{key:"drawTile",value:function(e){var t=this,n=e.row,r=e.column,o=this.props.tileWidth,i=this.props.tileHeight,s=i*(n-this.props.startYTile),a=o*(r-this.props.startXTile);if(!(n>=this.props.sequences.raw.length)){var u=this.props.sequences.raw[n].sequence;if(!(r>=u.length)){var c=u[r];if(void 0!==c){var l=this.props.colorScheme.getColor(c),f="".concat(c,"-").concat(l),h=this.props.residueTileCache.createTile({key:f,tileWidth:o,tileHeight:i,create:function(e){var o=e.canvas;return t.drawResidue({text:c,canvas:o,row:n,column:r,colorScheme:l})}});this.props.ctx.drawImage(h,0,0,o,i,a,s,o,i)}}}}},{key:"drawResidue",value:function(e){e.row,e.column;var t=e.canvas,n=e.colorScheme,r=e.text;t.globalAlpha=.7,t.fillStyle=n,t.fillRect(0,0,this.props.tileWidth,this.props.tileHeight),this.props.border&&(t.globalAlpha=1,t.lineWidth=this.props.borderWidth,t.strokeStyle=this.props.borderStyle,t.strokeRect(0,0,this.props.tileWidth,this.props.tileHeight)),t.globalAlpha=1,t.fillStyle=this.props.textColor,t.font=this.props.textFont+"px mono",t.textBaseline="middle",t.textAlign="center",t.fillText(r,this.props.tileWidth/2,this.props.tileHeight/2+1,this.props.tileWidth)}},{key:"draw",value:function(e){this.props=e;for(var t=this.props.startYTile;t<this.props.endYTile;t++)for(var n=this.props.startXTile;n<this.props.endXTile;n++)this.drawTile({row:t,column:n})}}]),t}();function hu(e,t){return e<t}var pu=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).maxElements;i(this,e),this.maxElements=t||200,this.invalidate()}return a(e,[{key:"createTile",value:function(e){var t,n,r=this,o=e.key,i=e.tileWidth,s=e.tileHeight,a=e.create;if(o in this.cache)return this.cache[o].value;if(this.cachedElements>=this.maxElements){var u=(n=function(e){return r.cache[e].insertionTime},(t=Object.keys(this.cache))&&t.length?Vs(t,Bo(n),hu):void 0);delete this.cache[u]}var c=document.createElement("canvas");this.cache[o]={value:c,insertionTime:Date.now()},c.width=i,c.height=s;var l=c.getContext("2d");return this.cachedElements++,a({canvas:l}),c}},{key:"updateTileSpecs",value:function(e){return!Cs(e,this.spec)&&(this.invalidate(),this.spec=e,!0)}},{key:"invalidate",value:function(){this.cache={},this.spec={},this.cachedElements=0}}]),e}();function du(e,t){return e-e%t}var vu=function(e){function t(e){var n;return i(this,t),u(d(d(n=v(this,h(t).call(this,e)))),"renderTile",function(e){var t=e.row,r=e.column,o=t+"-"+r;return n.tileCache.createTile({key:o,tileWidth:n.props.tileWidth*n.props.xGridSize,tileHeight:n.props.tileHeight*n.props.yGridSize,create:function(e){var o=e.canvas;n.tilingGridManager.draw(l({ctx:o,startYTile:t,startXTile:r,residueTileCache:n.residueTileCache,endYTile:t+n.props.yGridSize,endXTile:r+n.props.xGridSize},Go(n.props,["sequences","colorScheme","textFont","textColor","tileHeight","tileWidth","border","borderWidth","borderColor"])))}})}),u(d(d(n)),"onPositionUpdate",function(e,t){var r={xMovement:e[0]-t[0],yMovement:e[1]-t[1]};n.props.positionDispatch(Qa(r))}),u(d(d(n)),"updateScrollPosition",function(){n.draw()}),u(d(d(n)),"onMouseMove",function(e){if(void 0===n.isInDragPhase&&(void 0!==n.props.onResidueMouseEnter||void 0!==n.props.onResidueMouseLeave)){var r=n.currentPointerPosition(e),o=n.currentMouseSequencePosition;Qs(o,r)||(void 0!==o&&n.sendEvent("onResidueMouseLeave",o),n.currentMouseSequencePosition=r,n.sendEvent("onResidueMouseEnter",r))}y(h(t.prototype),"onMouseMove",d(n)).call(d(n),e)}),u(d(d(n)),"onMouseLeave",function(e){n.sendEvent("onResidueMouseLeave",n.currentMouseSequencePosition),n.currentMouseSequencePosition=void 0,y(h(t.prototype),"onMouseLeave",d(n)).call(d(n),e)}),u(d(d(n)),"onClick",function(e){if(!n.mouseHasMoved){var r=n.currentPointerPosition(e);n.sendEvent("onResidueClick",r)}y(h(t.prototype),"onClick",d(n)).call(d(n),e)}),u(d(d(n)),"onDoubleClick",function(e){var r=n.currentPointerPosition(e);n.sendEvent("onResidueDoubleClick",r),y(h(t.prototype),"onDoubleClick",d(n)).call(d(n),e)}),n.tileCache=new pu,n.residueTileCache=new pu,n.tilingGridManager=new fu,n}return f(t,su),a(t,[{key:"drawScene",value:function(){var e=this.getTilePositions();this.updateTileSpecs(),this.drawTiles(e)}},{key:"getTilePositions",value:function(){var e=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),t=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),n=Math.min(this.props.sequences.length,t+this.props.nrYTiles+2*this.props.cacheElements);return{startXTile:e,startYTile:t,endXTile:Math.min(this.props.sequences.maxLength,e+this.props.nrXTiles+2*this.props.cacheElements),endYTile:n}}},{key:"drawTiles",value:function(e){for(var t=e.startXTile,n=e.startYTile,r=e.endXTile,o=e.endYTile,i=this.props.xGridSize,s=this.props.yGridSize,a=du(n,s),u=du(t,i),c=a;c<o;c+=s)for(var l=u;l<r;l+=i){var f=this.renderTile({row:c,column:l,canvas:this.ctx}),h=i*this.props.tileWidth,p=s*this.props.tileHeight,d=(c-this.props.position.currentViewSequence)*this.props.tileHeight+this.props.position.yPosOffset,v=(l-this.props.position.currentViewSequencePosition)*this.props.tileWidth+this.props.position.xPosOffset;this.ctx.drawImage(f,0,0,h,p,v,d,h,p)}}},{key:"positionToSequence",value:function(e){var t=this.props.sequences.raw,n=ta(ea((this.props.position.yPos+e.yPos)/this.props.tileHeight),0,t.length-1),r=t[n],o=ta(ea((this.props.position.xPos+e.xPos)/this.props.tileWidth),0,r.sequence.length-1);return{i:n,sequence:r,position:o,residue:r.sequence[o]}}},{key:"currentPointerPosition",value:function(e){var t,n,r=(t=Ya.rel(e),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),o=r[0],i=r[1];return this.positionToSequence({xPos:o,yPos:i})}},{key:"sendEvent",value:function(e,t){void 0!==this.props[e]&&this.props[e](t)}},{key:"componentWillUnmount",value:function(){this.tileCache.invalidate(),this.residueTileCache.invalidate()}},{key:"updateTileSpecs",value:function(){var e=["tileWidth","tileHeight","colorScheme","textFont","borderColor"];this.tileCache.updateTileSpecs(Go(this.props,e.concat(["xGridSize","yGridSize","sequences"]))),this.residueTileCache.updateTileSpecs(Go(this.props,e))}},{key:"render",value:function(){return y(h(t.prototype),"render",this).call(this)}}]),t}();vu.defaultProps={showModBar:!1,xGridSize:10,yGridSize:10,border:!1,borderColor:"black",borderWidth:1,cacheElements:20,textColor:"black",textFont:"18px Arial",overflow:"hidden",overflowX:"auto",overflowY:"auto",scrollBarPositionX:"bottom",scrollBarPositionY:"right"},vu.propTypes={showModBar:t.bool,onResidueMouseEnter:t.func,onResidueMouseLeave:t.func,onResidueClick:t.func,onResidueDoubleClick:t.func,xGridSize:t.number.isRequired,yGridSize:t.number.isRequired,cacheElements:t.number.isRequired,border:t.bool,borderColor:t.string,borderWidth:t.number,textColor:t.string,textFont:t.string,overflow:t.oneOf(["hidden","auto","scroll"]),overflowX:t.oneOf(["hidden","auto","scroll","initial"]),overflowY:t.oneOf(["hidden","auto","scroll","initial"]),scrollBarPositionX:t.oneOf(["top","bottom"]),scrollBarPositionY:t.oneOf(["left","right"])},vu.propKeys=Object.keys(vu.propTypes);var yu=ii(vu,{withX:!0,withY:!0}),bu=_e(function(e){var t=Math.min(e.props.width,e.sequences.maxLength*e.props.tileWidth),n=Math.min(e.props.height,e.sequences.length*e.props.tileHeight);return{sequences:e.sequences,width:t,height:n,tileWidth:e.props.tileWidth,tileHeight:e.props.tileHeight,colorScheme:e.props.colorScheme,nrXTiles:e.sequenceStats.nrXTiles,nrYTiles:e.sequenceStats.nrYTiles,fullWidth:e.sequenceStats.fullWidth,fullHeight:e.sequenceStats.fullHeight}})(yu),mu=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return u(d(d(n=v(this,(e=h(t)).call.apply(e,[this].concat(o))))),"draw",function(){n.drawScene()}),n}return f(t,lu),a(t,[{key:"updateScrollPosition",value:function(){this._draw()}},{key:"drawScene",value:function(){this.scene={};var e=this.position;this.scene.xViewPos=e.xPos,this.scene.yViewPos=e.yPos,this.scene.xScalingFactor=1/this.props.globalTileWidth*this.props.tileWidth,this.scene.yScalingFactor=1/this.props.globalTileHeight*this.props.tileHeight,this.drawCurrentViewpoint(),this.drawSequences()}},{key:"drawSequences",value:function(){for(var e=this.scene,t=e.xViewPos,n=e.xScalingFactor,r=this.props.sequences.raw,o=0,i=0;i<r.length;i++){var s=r[i].sequence,a=0,u=ta(ea(t*n),0,s.length-1);for(u=0;u<s.length;u++){var c=s[u];if(this.ctx.fillStyle(this.props.colorScheme.getColor(c)),this.ctx.globalAlpha(.5),this.ctx.fillRect(a,o,this.props.tileWidth,this.props.tileHeight),(a+=this.props.tileWidth)>this.props.globalWidth)break}if((o+=this.props.tileHeight)>this.props.height)break}}},{key:"drawCurrentViewpoint",value:function(){var e=this.scene,t=e.xViewPos,n=e.xScalingFactor,r=e.yViewPos,o=e.yScalingFactor;this.ctx.globalAlpha(.8),this.ctx.fillRect(t*n,r*o,this.props.globalWidth*n,this.props.globalHeight*o)}},{key:"render",value:function(){return y(h(t.prototype),"render",this).call(this)}}]),t}();mu.defaultProps=l({},lu.defaultProps,{height:50,tileWidth:5,tileHeight:5}),mu.propTypes=l({},lu.propTypes,{height:t.number,tileWidth:t.number,tileHeight:t.number});var gu=ii(mu),wu=_e(function(e){return{sequences:e.sequences,width:e.props.width,globalWidth:e.props.width,globalHeight:e.props.height,globalTileWidth:e.props.tileWidth,globalTileHeight:e.props.tileHeight,colorScheme:e.props.colorScheme}})(gu),Su={sequences:"updateSequences"};Object.keys(Qn).forEach(function(e){e in Su||Qn[e]===t.func||(Su[e]="updateProp")});var _u=Object.keys(Su),Pu=function(e){return Do(e,function(e,t,n){return e[t.key]=t,e},{})},Ou=Pu(rr),ju=Pu(Ja),xu="FORWARD_SAME_PROP_NAME",Cu={onResidueClick:"residueClick"},Eu=function(e){function t(e){var n;return i(this,t),(n=v(this,h(t).call(this,e))).el=oi(),Qo(Cu,function(e,t){n["_"+t]=function(t){var r=new CustomEvent(e,{detail:t,bubbles:!0});n.el.current.dispatchEvent(r)}}),n._setupStores(),n}return f(t,n.Component),a(t,[{key:"forwardProps",value:function(e){var t=this,n={};return Qo(e,function(e,r){void 0!==t.props[r]?n[e===xu?r:e]=t.props[r]:r in Cu&&(n[r]=t["_"+r])}),n}},{key:"_setupStores",value:function(){var e=this;this.positionStore=J(nu),this.positionStore.dispatch(Ja.updateMainStore(this.props.msaStore.getState())),this.msaStoreUnsubscribe=this.props.msaStore.subscribe(function(){e.positionStore.dispatch(Ja.updateMainStore(e.props.msaStore.getState()))})}},{key:"componentWillUnmount",value:function(){this.msaStoreUnsubscribe()}},{key:"getChildContext",value:function(){return{positionMSAStore:this.positionStore}}},{key:"render",value:function(){var e=this.props,n=e.children,o=e.msaStore,i=p(e,["children","msaStore"]);if(n)return r.createElement(Yo,{store:o},r.createElement("div",c({},i,{ref:this.el}),n));var s={paddingTop:o.getState().props.tileHeight+50};return r.createElement(Yo,{store:o},r.createElement("div",{style:{display:"flex"},ref:this.el},r.createElement(Rs,c({style:s},this.forwardProps(t.labelsProps))),r.createElement("div",null,r.createElement(Ks,c({height:50},this.forwardProps(t.overviewBarProps))),r.createElement(Fs,this.forwardProps(t.positionBarProps)),r.createElement(bu,this.forwardProps(t.sequenceViewerProps)),r.createElement("div",{style:{height:10}}))))}}]),t}();u(Eu,"sequenceViewerProps",{showModBar:xu,onResidueMouseEnter:xu,onResidueMouseLeave:xu,onResidueClick:xu,onResidueDoubleClick:xu,sequenceBorder:"border",sequenceBorderColor:"borderColor",sequenceBorderWidth:"borderWidth",sequenceTextColor:"textColor",sequenceTextFont:"textFont",sequenceOverflow:"overflow",sequenceOverflowX:"overflowX",sequenceOverflowy:"overflowY",sequenceScrollBarPositionX:"scrollBarPositionX",sequenceScrollBarPositionY:"scrollBarPositionY"}),u(Eu,"labelsProps",{labelComponent:xu,labelStyle:xu,labelAttributes:xu}),u(Eu,"positionBarProps",{markerComponent:xu,markerStyle:xu,markerAttributes:xu}),u(Eu,"overviewBarProps",{barComponent:xu,barStyle:xu,barAttributes:xu}),Eu.childContextTypes={positionMSAStore:t.object};var ku,Tu,Mu=(ku=Eu,Tu=function(e){function t(e){var n;i(this,t),n=v(this,h(t).call(this,e));var r=Go(e,_u)||{};return n.el=oi(),n.msaStore=e.msaStore,void 0!==r.sequences?n.msaStore=Io(r):console.warn("Check your MSA properties",r),n}return f(t,n.Component),a(t,[{key:"componentDidMount",value:function(){void 0!==this.props.position&&this.updatePosition(this.props.position)}},{key:"componentDidUpdate",value:function(e){var t=this.props;for(var n in Go(t,_u))if(!Qs(e[n],t[n]))if("position"===n)this.updatePosition(t[n]);else if(n in Su){var r=void 0;switch(Su[n]){case"updateProp":r=rr[Su[n]](n,t[n]);break;default:r=rr[Su[n]](t[n])}this.msaStore.dispatch(r)}else console.error(n," is unknown.")}},{key:"dispatch",value:function(e){if(e.type in Ou)this.msaStore.dispatch(e);else{if(!(e.type in ju))throw new Error("Invalid action",e);this.el.current.positionStore.dispatch(e)}}},{key:"render",value:function(){var e=Ia(this.props,_u),t=e.msaStore,n=p(e,["msaStore"]);return void 0===this.msaStore?r.createElement("div",null," Error initializing the MSAViewer. "):r.createElement(ku,c({ref:this.el,msaStore:t||this.msaStore},n))}}]),t}(),Qo(rr,function(e,t){Tu.prototype[t]=function(t){this.msaStore.dispatch(e(t))}}),Qo(Ja,function(e,t){Tu.prototype[t]=function(t){var n=this;ru(this,function(){n.el.current.positionStore.dispatch(e(t))})}}),Tu);Mu.defaultProps=Zn,Mu.propTypes=l({msaStore:t.object},Qn);var qu=l({},rr,Ja);e.actions=qu,e.ColorScheme=zn,e.createMSAStore=Io,e.msaConnect=_e,e.MSAProvider=Yo,e.MSAViewer=Mu,e.withPositionStore=ii,e.version="0.0.12",e.default=Mu,e.Labels=Rs,e.OverviewBar=Ks,e.PositionBar=Fs,e.SequenceOverview=wu,e.SequenceViewer=bu,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.min.js.map