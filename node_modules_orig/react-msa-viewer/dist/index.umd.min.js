/**
 * react-msa-viewer 1.0.1
 * Copyright 2018, Plotly, Inc.
 * All rights reserved.
 * Licensed under the MIT license.
 * Generated: 2018-11-11
 * Version: 1.0.1
 * Source: https://github.com/plotly/react-msa-viewer
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("prop-types"),require("react")):"function"==typeof define&&define.amd?define(["exports","prop-types","react"],t):t(e.ReactMSAViewer={},e.PropTypes,e.React)}(this,function(e,t,r){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var n="default"in r?r.default:r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");var r,n;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(r=e,n=t,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(r,n))}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?d(e):t}function y(e,t,r){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function b(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var g=t.shape({trySubscribe:t.func.isRequired,tryUnsubscribe:t.func.isRequired,notifyNestedSubs:t.func.isRequired,isSubscribed:t.func.isRequired}),w=t.shape({subscribe:t.func.isRequired,dispatch:t.func.isRequired,getState:t.func.isRequired});function _(e){var n;void 0===e&&(e="store");var o=e+"Subscription",i=function(t){m(i,t);var n=i.prototype;function i(r,n){var o;return(o=t.call(this,r,n)||this)[e]=r.store,o}return n.getChildContext=function(){var t;return(t={})[e]=this[e],t[o]=null,t},n.render=function(){return r.Children.only(this.props.children)},i}(r.Component);return i.propTypes={store:w.isRequired,children:t.element.isRequired},i.childContextTypes=((n={})[e]=w.isRequired,n[o]=g,n),i}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}_();var O="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function E(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function x(e,t){return e(t={exports:{}},t.exports),t.exports}var C=x(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,h=r?Symbol.for("react.memo"):60115,d=r?Symbol.for("react.lazy"):60116;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case l:case i:case a:case s:return e;default:switch(e=e&&e.$$typeof){case c:case f:case u:return e;default:return t}}case o:return t}}}function y(e){return v(e)===l}t.typeOf=v,t.AsyncMode=l,t.ConcurrentMode=l,t.ContextConsumer=c,t.ContextProvider=u,t.Element=n,t.ForwardRef=f,t.Fragment=i,t.Profiler=a,t.Portal=o,t.StrictMode=s,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===l||e===a||e===s||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===h||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f)},t.isAsyncMode=function(e){return y(e)},t.isConcurrentMode=y,t.isContextConsumer=function(e){return v(e)===c},t.isContextProvider=function(e){return v(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return v(e)===f},t.isFragment=function(e){return v(e)===i},t.isProfiler=function(e){return v(e)===a},t.isPortal=function(e){return v(e)===o},t.isStrictMode=function(e){return v(e)===s}});E(C),C.typeOf,C.AsyncMode,C.ConcurrentMode,C.ContextConsumer,C.ContextProvider,C.Element,C.ForwardRef,C.Fragment,C.Profiler,C.Portal,C.StrictMode,C.isValidElementType,C.isAsyncMode,C.isConcurrentMode,C.isContextConsumer,C.isContextProvider,C.isElement,C.isForwardRef,C.isFragment,C.isProfiler,C.isPortal,C.isStrictMode;var k,T=x(function(e){e.exports=C}),M=T.isValidElementType;function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},R={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},B=q({},T.ForwardRef,(q(k={},"$$typeof",!0),q(k,"render",!0),k)),D=Object.defineProperty,W=Object.getOwnPropertyNames,F=Object.getOwnPropertySymbols,H=Object.getOwnPropertyDescriptor,L=Object.getPrototypeOf,z=Object.prototype,V=function e(t,r,n){if("string"!=typeof r){if(z){var o=L(r);o&&o!==z&&e(t,o,n)}var i=W(r);F&&(i=i.concat(F(r)));for(var s=B[t.$$typeof]||A,a=B[r.$$typeof]||A,u=0;u<i.length;++u){var c=i[u];if(!(R[c]||n&&n[c]||a&&a[c]||s&&s[c])){var l=H(r,c);try{D(t,c,l)}catch(e){}}}return t}return t},I=function(e,t,r,n,o,i,s,a){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,o,i,s,a],l=0;(u=new Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}},Y={notify:function(){}},X=function(){function e(e,t,r){this.store=e,this.parentSub=t,this.onStateChange=r,this.unsubscribe=null,this.listeners=Y}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(e=[],t=[],{clear:function(){t=null,e=null},notify:function(){for(var r=e=t,n=0;n<r.length;n++)r[n]()},get:function(){return t},subscribe:function(r){var n=!0;return t===e&&(t=e.slice()),t.push(r),function(){n&&null!==e&&(n=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(r),1))}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=Y)},e}(),N=0,U={};function $(){}var G=Object.prototype.hasOwnProperty;function K(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Q(e,t){if(K(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=0;o<r.length;o++)if(!G.call(t,r[o])||!K(e[r[o]],t[r[o]]))return!1;return!0}var Z=function(e){var t,r=("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()).Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}(),J=function(){return Math.random().toString(36).substring(7).split("").join(".")},ee={INIT:"@@redux/INIT"+J(),REPLACE:"@@redux/REPLACE"+J(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+J()}};function te(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(te)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,i=t,s=[],a=s,u=!1;function c(){a===s&&(a=s.slice())}function l(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function f(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return c(),a.push(e),function(){if(t){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,c();var r=a.indexOf(e);a.splice(r,1)}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,i=o(i,e)}finally{u=!1}for(var t=s=a,r=0;r<t.length;r++)(0,t[r])();return e}return p({type:ee.INIT}),(n={dispatch:p,subscribe:f,getState:l,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,p({type:ee.REPLACE})}})[Z]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(l())}return r(),{unsubscribe:t(r)}}})[Z]=function(){return this},e},n}function re(e,t){return function(){return t(e.apply(this,arguments))}}function ne(e){return function(t,r){var n=e(t,r);function o(){return n}return o.dependsOnOwnProps=!1,o}}function oe(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function ie(e,t){return function(t,r){r.displayName;var n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=oe(e);var o=n(t,r);return"function"==typeof o&&(n.mapToProps=o,n.dependsOnOwnProps=oe(o),o=n(t,r)),o},n}}function se(e,t,r){return P({},r,e,t)}var ae=[function(e){return"function"==typeof e?function(e){return function(t,r){r.displayName;var n,o=r.pure,i=r.areMergedPropsEqual,s=!1;return function(t,r,a){var u=e(t,r,a);return s?o&&i(u,n)||(n=u):(s=!0,n=u),n}}}(e):void 0},function(e){return e?void 0:function(){return se}}];function ue(e,t,r,n,o){var i,s,a,u,c,l=o.areStatesEqual,f=o.areOwnPropsEqual,p=o.areStatePropsEqual,h=!1;return function(o,d){return h?function(o,h){var d,v,y=!f(h,s),b=!l(o,i);return i=o,s=h,y&&b?(a=e(i,s),t.dependsOnOwnProps&&(u=t(n,s)),c=r(a,u,s)):y?(e.dependsOnOwnProps&&(a=e(i,s)),t.dependsOnOwnProps&&(u=t(n,s)),c=r(a,u,s)):b?(d=e(i,s),v=!p(d,a),a=d,v&&(c=r(a,u,s)),c):c}(o,d):(a=e(i=o,s=d),u=t(n,s),c=r(a,u,s),h=!0,c)}}function ce(e,t,r){for(var n=t.length-1;n>=0;n--){var o=t[n](e);if(o)return o}return function(t,n){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+n.wrappedComponentName+".")}}function le(e,t){return e===t}var fe,pe,he,de,ve,ye,be,me,ge,we,_e,Se=(pe=(fe={}).connectHOC,he=void 0===pe?function(e,t){var n,o;void 0===t&&(t={});var i=t,s=i.getDisplayName,a=void 0===s?function(e){return"ConnectAdvanced("+e+")"}:s,u=i.methodName,c=void 0===u?"connectAdvanced":u,l=i.renderCountProp,f=void 0===l?void 0:l,p=i.shouldHandleStateChanges,h=void 0===p||p,d=i.storeKey,v=void 0===d?"store":d,y=i.withRef,b=void 0!==y&&y,_=j(i,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),O=v+"Subscription",E=N++,x=((n={})[v]=w,n[O]=g,n),C=((o={})[O]=g,o);return function(t){I(M(t),"You must pass a component to the function returned by "+c+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",o=a(n),i=P({},_,{getDisplayName:a,methodName:c,renderCountProp:f,shouldHandleStateChanges:h,storeKey:v,withRef:b,displayName:o,wrappedComponentName:n,WrappedComponent:t}),s=function(n){function s(e,t){var r;return(r=n.call(this,e,t)||this).version=E,r.state={},r.renderCount=0,r.store=e[v]||t[v],r.propsMode=Boolean(e[v]),r.setWrappedInstance=r.setWrappedInstance.bind(S(S(r))),I(r.store,'Could not find "'+v+'" in either the context or props of "'+o+'". Either wrap the root component in a <Provider>, or explicitly pass "'+v+'" as a prop to "'+o+'".'),r.initSelector(),r.initSubscription(),r}m(s,n);var a=s.prototype;return a.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[O]=t||this.context[O],e},a.componentDidMount=function(){h&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},a.componentWillReceiveProps=function(e){this.selector.run(e)},a.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},a.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=$,this.store=null,this.selector.run=$,this.selector.shouldComponentUpdate=!1},a.getWrappedInstance=function(){return I(b,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+c+"() call."),this.wrappedInstance},a.setWrappedInstance=function(e){this.wrappedInstance=e},a.initSelector=function(){var t=e(this.store.dispatch,i);this.selector=function(e,t){var r={run:function(n){try{var o=e(t.getState(),n);(o!==r.props||r.error)&&(r.shouldComponentUpdate=!0,r.props=o,r.error=null)}catch(e){r.shouldComponentUpdate=!0,r.error=e}}};return r}(t,this.store),this.selector.run(this.props)},a.initSubscription=function(){if(h){var e=(this.propsMode?this.props:this.context)[O];this.subscription=new X(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},a.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(U)):this.notifyNestedSubs()},a.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},a.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},a.addExtraProps=function(e){if(!(b||f||this.propsMode&&this.subscription))return e;var t=P({},e);return b&&(t.ref=this.setWrappedInstance),f&&(t[f]=this.renderCount++),this.propsMode&&this.subscription&&(t[O]=this.subscription),t},a.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return r.createElement(t,this.addExtraProps(e.props))},s}(r.Component);return s.WrappedComponent=t,s.displayName=o,s.childContextTypes=C,s.contextTypes=x,s.propTypes=x,V(s,t)}}:pe,ve=void 0===(de=fe.mapStateToPropsFactories)?[function(e){return"function"==typeof e?ie(e):void 0},function(e){return e?void 0:ne(function(){return{}})}]:de,be=void 0===(ye=fe.mapDispatchToPropsFactories)?[function(e){return"function"==typeof e?ie(e):void 0},function(e){return e?void 0:ne(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?ne(function(t){return function(e,t){if("function"==typeof e)return re(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),n={},o=0;o<r.length;o++){var i=r[o],s=e[i];"function"==typeof s&&(n[i]=re(s,t))}return n}(e,t)}):void 0}]:ye,ge=void 0===(me=fe.mergePropsFactories)?ae:me,_e=void 0===(we=fe.selectorFactory)?function(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,o=t.initMergeProps,i=j(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),s=r(e,i),a=n(e,i),u=o(e,i);return(i.pure?ue:function(e,t,r,n){return function(o,i){return r(e(o,i),t(n,i),i)}})(s,a,u,e,i)}:we,function(e,t,r,n){void 0===n&&(n={});var o=n,i=o.pure,s=void 0===i||i,a=o.areStatesEqual,u=void 0===a?le:a,c=o.areOwnPropsEqual,l=void 0===c?Q:c,f=o.areStatePropsEqual,p=void 0===f?Q:f,h=o.areMergedPropsEqual,d=void 0===h?Q:h,v=j(o,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),y=ce(e,ve,"mapStateToProps"),b=ce(t,be,"mapDispatchToProps"),m=ce(r,ge,"mergeProps");return he(_e,P({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:y,initMapDispatchToProps:b,initMergeProps:m,pure:s,areStatesEqual:u,areOwnPropsEqual:l,areStatePropsEqual:p,areMergedPropsEqual:d},v))}),Pe="msaStore";function je(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n.storeKey=Pe,Se(e,t,r,n)}function Oe(e,t){return e===t||e!=e&&t!=t}function Ee(e,t){for(var r=e.length;r--;)if(Oe(e[r][0],t))return r;return-1}var xe=Array.prototype.splice;function Ce(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ce.prototype.clear=function(){this.__data__=[],this.size=0},Ce.prototype.delete=function(e){var t=this.__data__,r=Ee(t,e);return!(r<0||(r==t.length-1?t.pop():xe.call(t,r,1),--this.size,0))},Ce.prototype.get=function(e){var t=this.__data__,r=Ee(t,e);return r<0?void 0:t[r][1]},Ce.prototype.has=function(e){return Ee(this.__data__,e)>-1},Ce.prototype.set=function(e,t){var r=this.__data__,n=Ee(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var ke="object"==typeof global&&global&&global.Object===Object&&global,Te="object"==typeof self&&self&&self.Object===Object&&self,Me=ke||Te||Function("return this")(),qe=Me.Symbol,Ae=Object.prototype,Re=Ae.hasOwnProperty,Be=Ae.toString,De=qe?qe.toStringTag:void 0,We=Object.prototype.toString,Fe="[object Null]",He="[object Undefined]",Le=qe?qe.toStringTag:void 0;function ze(e){return null==e?void 0===e?He:Fe:Le&&Le in Object(e)?function(e){var t=Re.call(e,De),r=e[De];try{e[De]=void 0}catch(e){}var n=Be.call(e);return t?e[De]=r:delete e[De],n}(e):function(e){return We.call(e)}(e)}function Ve(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Ie="[object AsyncFunction]",Ye="[object Function]",Xe="[object GeneratorFunction]",Ne="[object Proxy]";function Ue(e){if(!Ve(e))return!1;var t=ze(e);return t==Ye||t==Xe||t==Ie||t==Ne}var $e,Ge=Me["__core-js_shared__"],Ke=($e=/[^.]+$/.exec(Ge&&Ge.keys&&Ge.keys.IE_PROTO||""))?"Symbol(src)_1."+$e:"",Qe=Function.prototype.toString;function Ze(e){if(null!=e){try{return Qe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Je=/^\[object .+?Constructor\]$/,et=Function.prototype,tt=Object.prototype,rt=et.toString,nt=tt.hasOwnProperty,ot=RegExp("^"+rt.call(nt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function it(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ve(e)||(t=e,Ke&&Ke in t))&&(Ue(e)?ot:Je).test(Ze(e));var t}(r)?r:void 0}var st=it(Me,"Map"),at=it(Object,"create"),ut=Object.prototype.hasOwnProperty,ct=Object.prototype.hasOwnProperty;function lt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ft(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function pt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}lt.prototype.clear=function(){this.__data__=at?at(null):{},this.size=0},lt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},lt.prototype.get=function(e){var t=this.__data__;if(at){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ut.call(t,e)?t[e]:void 0},lt.prototype.has=function(e){var t=this.__data__;return at?void 0!==t[e]:ct.call(t,e)},lt.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=at&&void 0===t?"__lodash_hash_undefined__":t,this},pt.prototype.clear=function(){this.size=0,this.__data__={hash:new lt,map:new(st||Ce),string:new lt}},pt.prototype.delete=function(e){var t=ft(this,e).delete(e);return this.size-=t?1:0,t},pt.prototype.get=function(e){return ft(this,e).get(e)},pt.prototype.has=function(e){return ft(this,e).has(e)},pt.prototype.set=function(e,t){var r=ft(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function ht(e){var t=this.__data__=new Ce(e);this.size=t.size}ht.prototype.clear=function(){this.__data__=new Ce,this.size=0},ht.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ht.prototype.get=function(e){return this.__data__.get(e)},ht.prototype.has=function(e){return this.__data__.has(e)},ht.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ce){var n=r.__data__;if(!st||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new pt(n)}return r.set(e,t),this.size=r.size,this};var dt=function(){try{var e=it(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();function vt(e,t,r){"__proto__"==t&&dt?dt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function yt(e,t,r){(void 0===r||Oe(e[t],r))&&(void 0!==r||t in e)||vt(e,t,r)}var bt=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),s=i.length;s--;){var a=i[++n];if(!1===t(o[a],a,o))break}return e},mt="object"==typeof e&&e&&!e.nodeType&&e,gt=mt&&"object"==typeof module&&module&&!module.nodeType&&module,wt=gt&&gt.exports===mt?Me.Buffer:void 0,_t=wt?wt.allocUnsafe:void 0;function St(e,t){if(t)return e.slice();var r=e.length,n=_t?_t(r):new e.constructor(r);return e.copy(n),n}var Pt=Me.Uint8Array;function jt(e){var t=new e.constructor(e.byteLength);return new Pt(t).set(new Pt(e)),t}function Ot(e,t){var r=t?jt(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Et(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var xt=Object.create,Ct=function(){function e(){}return function(t){if(!Ve(t))return{};if(xt)return xt(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function kt(e,t){return function(r){return e(t(r))}}var Tt=kt(Object.getPrototypeOf,Object),Mt=Object.prototype;function qt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Mt)}function At(e){return"function"!=typeof e.constructor||qt(e)?{}:Ct(Tt(e))}function Rt(e){return null!=e&&"object"==typeof e}var Bt="[object Arguments]";function Dt(e){return Rt(e)&&ze(e)==Bt}var Wt=Object.prototype,Ft=Wt.hasOwnProperty,Ht=Wt.propertyIsEnumerable,Lt=Dt(function(){return arguments}())?Dt:function(e){return Rt(e)&&Ft.call(e,"callee")&&!Ht.call(e,"callee")},zt=Array.isArray,Vt=9007199254740991;function It(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Vt}function Yt(e){return null!=e&&It(e.length)&&!Ue(e)}var Xt="object"==typeof e&&e&&!e.nodeType&&e,Nt=Xt&&"object"==typeof module&&module&&!module.nodeType&&module,Ut=Nt&&Nt.exports===Xt?Me.Buffer:void 0,$t=(Ut?Ut.isBuffer:void 0)||function(){return!1},Gt="[object Object]",Kt=Function.prototype,Qt=Object.prototype,Zt=Kt.toString,Jt=Qt.hasOwnProperty,er=Zt.call(Object);function tr(e){if(!Rt(e)||ze(e)!=Gt)return!1;var t=Tt(e);if(null===t)return!0;var r=Jt.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Zt.call(r)==er}var rr={};function nr(e){return function(t){return e(t)}}rr["[object Float32Array]"]=rr["[object Float64Array]"]=rr["[object Int8Array]"]=rr["[object Int16Array]"]=rr["[object Int32Array]"]=rr["[object Uint8Array]"]=rr["[object Uint8ClampedArray]"]=rr["[object Uint16Array]"]=rr["[object Uint32Array]"]=!0,rr["[object Arguments]"]=rr["[object Array]"]=rr["[object ArrayBuffer]"]=rr["[object Boolean]"]=rr["[object DataView]"]=rr["[object Date]"]=rr["[object Error]"]=rr["[object Function]"]=rr["[object Map]"]=rr["[object Number]"]=rr["[object Object]"]=rr["[object RegExp]"]=rr["[object Set]"]=rr["[object String]"]=rr["[object WeakMap]"]=!1;var or="object"==typeof e&&e&&!e.nodeType&&e,ir=or&&"object"==typeof module&&module&&!module.nodeType&&module,sr=ir&&ir.exports===or&&ke.process,ar=function(){try{return ir&&ir.require&&ir.require("util").types||sr&&sr.binding&&sr.binding("util")}catch(e){}}(),ur=ar&&ar.isTypedArray,cr=ur?nr(ur):function(e){return Rt(e)&&It(e.length)&&!!rr[ze(e)]};function lr(e,t){if("__proto__"!=t)return e[t]}var fr=Object.prototype.hasOwnProperty;function pr(e,t,r){var n=e[t];fr.call(e,t)&&Oe(n,r)&&(void 0!==r||t in e)||vt(e,t,r)}function hr(e,t,r,n){var o=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var a=t[i],u=n?n(r[a],e[a],a,r,e):void 0;void 0===u&&(u=e[a]),o?vt(r,a,u):pr(r,a,u)}return r}var dr=9007199254740991,vr=/^(?:0|[1-9]\d*)$/;function yr(e,t){var r=typeof e;return!!(t=null==t?dr:t)&&("number"==r||"symbol"!=r&&vr.test(e))&&e>-1&&e%1==0&&e<t}var br=Object.prototype.hasOwnProperty;function mr(e,t){var r=zt(e),n=!r&&Lt(e),o=!r&&!n&&$t(e),i=!r&&!n&&!o&&cr(e),s=r||n||o||i,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],u=a.length;for(var c in e)!t&&!br.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||yr(c,u))||a.push(c);return a}var gr=Object.prototype.hasOwnProperty;function wr(e){return Yt(e)?mr(e,!0):function(e){if(!Ve(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=qt(e),r=[];for(var n in e)("constructor"!=n||!t&&gr.call(e,n))&&r.push(n);return r}(e)}function _r(e,t,r,n,o){e!==t&&bt(t,function(i,s){if(Ve(i))o||(o=new ht),function(e,t,r,n,o,i,s){var a=lr(e,r),u=lr(t,r),c=s.get(u);if(c)yt(e,r,c);else{var l,f=i?i(a,u,r+"",e,t,s):void 0,p=void 0===f;if(p){var h=zt(u),d=!h&&$t(u),v=!h&&!d&&cr(u);f=u,h||d||v?zt(a)?f=a:Rt(l=a)&&Yt(l)?f=Et(a):d?(p=!1,f=St(u,!0)):v?(p=!1,f=Ot(u,!0)):f=[]:tr(u)||Lt(u)?(f=a,Lt(a)?f=hr(a,wr(a)):Ve(a)&&!Ue(a)||(f=At(u))):p=!1}p&&(s.set(u,f),o(f,u,n,i,s),s.delete(u)),yt(e,r,f)}}(e,t,s,r,_r,n,o);else{var a=n?n(lr(e,s),i,s+"",e,t,o):void 0;void 0===a&&(a=i),yt(e,s,a)}},wr)}function Sr(e){return e}function Pr(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var jr=Math.max;function Or(e,t,r){return t=jr(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=jr(n.length-t,0),s=Array(i);++o<i;)s[o]=n[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=n[o];return a[t]=r(s),Pr(e,this,a)}}var Er=dt?function(e,t){return dt(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Sr,xr=800,Cr=16,kr=Date.now;function Tr(e){var t=0,r=0;return function(){var n=kr(),o=Cr-(n-r);if(r=n,o>0){if(++t>=xr)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Mr=Tr(Er);function qr(e,t){return Mr(Or(e,t,Sr),e+"")}function Ar(e){return qr(function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,s&&function(e,t,r){if(!Ve(r))return!1;var n=typeof t;return!!("number"==n?Yt(r)&&yr(t,r.length):"string"==n&&t in r)&&Oe(r[t],e)}(r[0],r[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var a=r[n];a&&e(t,a,n,i)}return t})}var Rr=Ar(function(e,t,r){_r(e,t,r)}),Br=function(e){this.defaultColor="#ffffff",this.type="static",this.map=e,this.getColor=function(e){return void 0!==this.map[e]?this.map[e]:this.defaultColor}},Dr=function(e,t){this.type="dyn",this.opt=t,void 0!==e.init?(e.init.call(this),this.getColor=e.run,this.reset=e.init):this.getColor=e},Wr={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},Fr={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},Hr={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"},Lr={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},zr={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},Vr={buried:Wr,buried_index:Wr,cinema:{A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"},clustal2:{A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"},clustal:{A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"#fff",O:"#fff",P:"orange",Q:"#fff",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"},helix:Fr,helix_propensity:Fr,hydro:{A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"},lesk:{A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"},mae:{A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"},nucleotide:{A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"},purine:Hr,purine_pyrimidine:Hr,strand:Lr,strand_propensity:Lr,taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"},turn:zr,turn_propensity:zr,zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"}},Ir={pid:{init:function(){this.cons=this.opt.conservation()},run:function(e,t){var r=this.cons[t.pos];return r>.8?"#6464ff":r>.6?"#9da5ff":r>.4?"#cccccc":"#ffffff"}}},Yr=function(e){this.maps=Xr(Vr),this.dyn=Xr(Ir),this.opt=e};function Xr(e){if(null==e||"object"!==o(e))return e;var t=e.constructor();for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}Yr.getScheme=function(e){return Vr[e]},Yr.prototype.getScheme=function(e){var t=this.maps[e];return void 0===t&&(t={},void 0!==this.dyn[e])?new Dr(this.dyn[e],this.opt):new Br(t)},Yr.prototype.addStaticScheme=function(e,t){this.maps[e]=t},Yr.prototype.addDynScheme=function(e,t){this.dyn[e]=t};var Nr=new Yr,Ur=function(){function e(t){i(this,e),this.scheme=Nr.getScheme(t)}return a(e,[{key:"getColor",value:function(e){return this.scheme.getColor(e)}}]),e}();function $r(e){return e&&"function"==typeof e.getColor}var Gr=t.shape({name:t.string,sequence:t.string}),Kr=t.oneOfType([t.oneOf(["buried_index","clustal","clustal2","cinema","helix_propensity","hydro","lesk","mae","nucleotide","purine_pyrimidine","strand_propensity","taylor","turn_propensity","zappo"]),t.instanceOf(Ur),function(e,t,r){if(!$r(e[t]))return new Error("Invalid prop `"+t+"` supplied to `"+r+"`. Validation failed.")}]),Qr=t.shape({xPos:t.number,yPos:t.number}),Zr={width:t.number,height:t.number,tileWidth:t.number,tileHeight:t.number,colorScheme:Kr},Jr={width:500,height:100,tileWidth:20,tileHeight:20,colorScheme:"clustal"};function en(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var i;return 0===r.length?i=n[0]:(i={},r.forEach(function(e,t){i[r[t]]=n[t]})),{type:e,payload:i}};return o.toString=function(){return e.toString()},o.key=o.toString(),o}var tn=en("PROPS_UPDATE"),rn=en("PROP_UPDATE","key","value"),nn=en("SEQUENCES_UPDATE"),on={updateProp:rn,updateProps:tn,updateSequences:nn};function sn(e,t,r,n){var o=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}var an=kt(Object.keys,Object),un=Object.prototype.hasOwnProperty;function cn(e){return Yt(e)?mr(e):function(e){if(!qt(e))return an(e);var t=[];for(var r in Object(e))un.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}function ln(e,t){return e&&bt(e,t,cn)}var fn,pn=(fn=ln,function(e,t){if(null==e)return e;if(!Yt(e))return fn(e,t);for(var r=e.length,n=-1,o=Object(e);++n<r&&!1!==t(o[n],n,o););return e});function hn(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new pt;++t<r;)this.add(e[t])}function dn(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}hn.prototype.add=hn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},hn.prototype.has=function(e){return this.__data__.has(e)};var vn=1,yn=2;function bn(e,t,r,n,o,i){var s=r&vn,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var l=-1,f=!0,p=r&yn?new hn:void 0;for(i.set(e,t),i.set(t,e);++l<a;){var h=e[l],d=t[l];if(n)var v=s?n(d,h,l,t,e,i):n(h,d,l,e,t,i);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!dn(t,function(e,t){if(s=t,!p.has(s)&&(h===e||o(h,e,r,n,i)))return p.push(t);var s})){f=!1;break}}else if(h!==d&&!o(h,d,r,n,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function mn(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function gn(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var wn=1,_n=2,Sn="[object Boolean]",Pn="[object Date]",jn="[object Error]",On="[object Map]",En="[object Number]",xn="[object RegExp]",Cn="[object Set]",kn="[object String]",Tn="[object Symbol]",Mn="[object ArrayBuffer]",qn="[object DataView]",An=qe?qe.prototype:void 0,Rn=An?An.valueOf:void 0;function Bn(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function Dn(e,t,r){var n=t(e);return zt(e)?n:Bn(n,r(e))}function Wn(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}function Fn(){return[]}var Hn=Object.prototype.propertyIsEnumerable,Ln=Object.getOwnPropertySymbols,zn=Ln?function(e){return null==e?[]:(e=Object(e),Wn(Ln(e),function(t){return Hn.call(e,t)}))}:Fn;function Vn(e){return Dn(e,cn,zn)}var In=1,Yn=Object.prototype.hasOwnProperty,Xn=it(Me,"DataView"),Nn=it(Me,"Promise"),Un=it(Me,"Set"),$n=it(Me,"WeakMap"),Gn=Ze(Xn),Kn=Ze(st),Qn=Ze(Nn),Zn=Ze(Un),Jn=Ze($n),eo=ze;(Xn&&"[object DataView]"!=eo(new Xn(new ArrayBuffer(1)))||st&&"[object Map]"!=eo(new st)||Nn&&"[object Promise]"!=eo(Nn.resolve())||Un&&"[object Set]"!=eo(new Un)||$n&&"[object WeakMap]"!=eo(new $n))&&(eo=function(e){var t=ze(e),r="[object Object]"==t?e.constructor:void 0,n=r?Ze(r):"";if(n)switch(n){case Gn:return"[object DataView]";case Kn:return"[object Map]";case Qn:return"[object Promise]";case Zn:return"[object Set]";case Jn:return"[object WeakMap]"}return t});var to=eo,ro=1,no="[object Arguments]",oo="[object Array]",io="[object Object]",so=Object.prototype.hasOwnProperty;function ao(e,t,r,n,o){return e===t||(null==e||null==t||!Rt(e)&&!Rt(t)?e!=e&&t!=t:function(e,t,r,n,o,i){var s=zt(e),a=zt(t),u=s?oo:to(e),c=a?oo:to(t),l=(u=u==no?io:u)==io,f=(c=c==no?io:c)==io,p=u==c;if(p&&$t(e)){if(!$t(t))return!1;s=!0,l=!1}if(p&&!l)return i||(i=new ht),s||cr(e)?bn(e,t,r,n,o,i):function(e,t,r,n,o,i,s){switch(u){case qn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Mn:return!(e.byteLength!=t.byteLength||!i(new Pt(e),new Pt(t)));case Sn:case Pn:case En:return Oe(+e,+t);case jn:return e.name==t.name&&e.message==t.message;case xn:case kn:return e==t+"";case On:var a=mn;case Cn:var c=n&wn;if(a||(a=gn),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;n|=_n,s.set(e,t);var f=bn(a(e),a(t),n,o,i,s);return s.delete(e),f;case Tn:if(Rn)return Rn.call(e)==Rn.call(t)}return!1}(e,t,0,r,n,o,i);if(!(r&ro)){var h=l&&so.call(e,"__wrapped__"),d=f&&so.call(t,"__wrapped__");if(h||d){var v=h?e.value():e,y=d?t.value():t;return i||(i=new ht),o(v,y,r,n,i)}}return!!p&&(i||(i=new ht),function(e,t,r,n,o,i){var s=r&In,a=Vn(e),u=a.length;if(u!=Vn(t).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in t:Yn.call(t,l)))return!1}var f=i.get(e);if(f&&i.get(t))return f==t;var p=!0;i.set(e,t),i.set(t,e);for(var h=s;++c<u;){var d=e[l=a[c]],v=t[l];if(n)var y=s?n(v,d,l,t,e,i):n(d,v,l,e,t,i);if(!(void 0===y?d===v||o(d,v,r,n,i):y)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var b=e.constructor,m=t.constructor;b!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m)&&(p=!1)}return i.delete(e),i.delete(t),p}(e,t,r,n,o,i))}(e,t,r,n,ao,o))}var uo=1,co=2;function lo(e){return e==e&&!Ve(e)}function fo(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}var po="[object Symbol]";function ho(e){return"symbol"==typeof e||Rt(e)&&ze(e)==po}var vo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yo=/^\w*$/;function bo(e,t){if(zt(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ho(e))||yo.test(e)||!vo.test(e)||null!=t&&e in Object(t)}var mo="Expected a function";function go(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(mo);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(go.Cache||pt),r}go.Cache=pt;var wo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_o=/\\(\\)?/g,So=function(e){var t=go(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(wo,function(e,r,n,o){t.push(n?o.replace(_o,"$1"):r||e)}),t},function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}();function Po(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var jo=1/0,Oo=qe?qe.prototype:void 0,Eo=Oo?Oo.toString:void 0;function xo(e){if("string"==typeof e)return e;if(zt(e))return Po(e,xo)+"";if(ho(e))return Eo?Eo.call(e):"";var t=e+"";return"0"==t&&1/e==-jo?"-0":t}function Co(e){return null==e?"":xo(e)}function ko(e,t){return zt(e)?e:bo(e,t)?[e]:So(Co(e))}var To=1/0;function Mo(e){if("string"==typeof e||ho(e))return e;var t=e+"";return"0"==t&&1/e==-To?"-0":t}function qo(e,t){for(var r=0,n=(t=ko(t,e)).length;null!=e&&r<n;)e=e[Mo(t[r++])];return r&&r==n?e:void 0}function Ao(e,t){return null!=e&&t in Object(e)}function Ro(e,t){return null!=e&&function(e,t,r){for(var n=-1,o=(t=ko(t,e)).length,i=!1;++n<o;){var s=Mo(t[n]);if(!(i=null!=e&&r(e,s)))break;e=e[s]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&It(o)&&yr(s,o)&&(zt(e)||Lt(e))}(e,t,Ao)}var Bo=1,Do=2;function Wo(e){return"function"==typeof e?e:null==e?Sr:"object"==typeof e?zt(e)?(n=e[0],o=e[1],bo(n)&&lo(o)?fo(Mo(n),o):function(e){var t=function(e,t,r){var n=null==e?void 0:qo(e,t);return void 0===n?void 0:n}(e,n);return void 0===t&&t===o?Ro(e,n):ao(o,t,Bo|Do)}):1==(r=function(e){for(var t=cn(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,lo(o)]}return t}(t=e)).length&&r[0][2]?fo(r[0][0],r[0][1]):function(e){return e===t||function(e,t,r,n){var o=r.length,i=o;if(null==e)return!i;for(e=Object(e);o--;){var s=r[o];if(s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var a=(s=r[o])[0],u=e[a],c=s[1];if(s[2]){if(void 0===u&&!(a in e))return!1}else{var l,f=new ht;if(!(void 0===l?ao(c,u,uo|co,void 0,f):l))return!1}}return!0}(e,0,r)}:function(e){return bo(e)?(t=Mo(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return qo(t,e)}}(e);var t}(e);var t,r,n,o}function Fo(e,t,r,n,o){return o(e,function(e,o,i){r=n?(n=!1,e):t(r,e,o,i)}),r}function Ho(e,t,r){var n=zt(e)?sn:Fo,o=arguments.length<3;return n(e,Wo(t),r,o,pn)}function Lo(e){$r(e.colorScheme)||(e.colorScheme=new Ur(e.colorScheme))}var zo,Vo,Io=function(e,t){var r=Object.keys(t);return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,i=e(n,o);if(n!==i)for(var s=0;s<r.length;s++){var a=r[s],u=t[a](i[a],o,i);if(void 0===u)throw new Error("A reducer can't return 'undefined'");i[a]=u}return i}}(function(e){var t=Object.keys(e);return function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o={},i=!1,s=0;s<t.length;s++){var a=t[s],u=e[a](r[a],n);if(void 0===u)throw new Error("A reducer can't return 'undefined'");o[a]=u,i=i||u!==r[a]}return i?o:r}}({props:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case on.updateProps.key:return e=l({},e,n),"colorScheme"in n&&Lo(e),e;case on.updateProp.key:var o=n.key;return e=l({},e,u({},o,n.value)),"colorScheme"===o&&Lo(e),e;default:return void 0!==e.colorScheme&&Lo(e),e}},sequences:(zo=u({},on.updateSequences,function(e,t){var r={raw:t,length:t.length};return r.maxLength=Ho(t,function(e,t){return Math.max(e,t.sequence.length)},0),r}),Vo=[],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vo,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;return zo.hasOwnProperty(r)?zo[r](e,n):e})}),{sequenceStats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentViewSequence:0,currentViewSequencePosition:0},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;switch(t.type){case on.updateProp.key:case on.updateProps.key:case on.updateSequences.key:if(r.props&&r.props.tileHeight&&r.props.tileWidth&&r.sequences){var n={};return n.nrXTiles=Math.ceil(r.props.width/r.props.tileWidth)+1,n.nrYTiles=Math.ceil(r.props.height/r.props.tileHeight)+1,n.fullWidth=r.props.tileWidth*r.sequences.maxLength,n.fullHeight=r.props.tileHeight*r.sequences.length,n}}return e}}),Yo=function(e){t.checkPropTypes(Zr,e,"prop","MSAViewer");var r=Rr({},Jr,e),n=r.sequences,o=(r.position,h(r,["sequences","position"])),i=te(Io,!1);return i.dispatch(tn(o)),i.dispatch(nn(n)),i},Xo=_(Pe);function No(e,t,r,n){if(!Ve(e))return e;for(var o=-1,i=(t=ko(t,e)).length,s=i-1,a=e;null!=a&&++o<i;){var u=Mo(t[o]),c=r;if(o!=s){var l=a[u];void 0===(c=n?n(l,u,a):void 0)&&(c=Ve(l)?l:yr(t[o+1])?[]:{})}pr(a,u,c),a=a[u]}return e}var Uo=qe?qe.isConcatSpreadable:void 0;function $o(e){return zt(e)||Lt(e)||!!(Uo&&e&&e[Uo])}function Go(e){return null!=e&&e.length?function e(t,r,n,o,i){var s=-1,a=t.length;for(n||(n=$o),i||(i=[]);++s<a;){var u=t[s];r>0&&n(u)?r>1?e(u,r-1,n,o,i):Bn(i,u):o||(i[i.length]=u)}return i}(e,1):[]}function Ko(e){return Mr(Or(e,void 0,Go),e+"")}var Qo=Ko(function(e,t){return null==e?{}:function(e,t){return function(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var s=t[n],a=qo(e,s);r(0,s)&&No(i,ko(s,e),a)}return i}(e,t,function(t,r){return Ro(e,r)})}(e,t)});function Zo(e){return"function"==typeof e?e:Sr}function Jo(e,t){return e&&ln(e,Zo(t))}var ei=x(function(e,t){t.__esModule=!0;var r=i(n),o=i(ii);function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(r){!function(e,r){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r));return n.__forwardedRef=(0,o.default)(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.__render=function(){return null},t.prototype.getRef=function(){return this.__forwardedRef.current||this.__forwardedRef.value},t.prototype.render=function(){return this.__render(this.props,this.__forwardedRef)},t}(r.default.Component);s.displayName="ForwardRefPolyfill",t.default=s,e.exports=t.default});function ti(e){return function(){return e}}E(ei);var ri=function(){};ri.thatReturns=ti,ri.thatReturnsFalse=ti(!1),ri.thatReturnsTrue=ti(!0),ri.thatReturnsNull=ti(null),ri.thatReturnsThis=function(){return this},ri.thatReturnsArgument=function(e){return e};var ni=ri;E(x(function(e,t){t.__esModule=!0;var r=i(n),o=(i(ii),i(ei));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}i(ni),t.default=r.default.forwardRef||function(e){return function(t){function r(){var n,o;!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return n=o=s(this,t.call.apply(t,[this].concat(a))),o.__render=e,s(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r}(o.default)},e.exports=t.default}));var oi=x(function(e,t){t.__esModule=!0,t.default=function(e){if(!e)return null;var t=e;return 1===Object.keys(t).length&&(t.hasOwnProperty("current")?t=t.current:t.hasOwnProperty("value")&&(t=t.value)),t instanceof r.default&&(t=t.getRef()),t};var r=n(ei);function n(e){return e&&e.__esModule?e:{default:e}}n(ni),e.exports=t.default});E(oi);var ii=x(function(e,t){t.__esModule=!0;var r=i(n),o=i(oi);function i(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.createRef||function(){function e(t){e.current=(0,o.default)(t)||null}return e.current=null,e},e.exports=t.default}),si=E(ii);function ai(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.withX,c=void 0!==s&&s,h=o.withY,y=void 0!==h&&h,b=function(t){function o(e){var t;return i(this,o),u(d(d(t=v(this,p(o).call(this,e)))),"updateFromPositionStore",function(){var e=t.context.positionMSAStore.getState();t.position=t.position||{};var r=Qo(e,["currentViewSequence","currentViewSequencePosition","xPosOffset","yPosOffset"]);e.position&&(r.xPos=e.position.xPos,r.yPos=e.position.yPos),t.el.current&&t.shouldRerender(r)?(t.position=r,t.setState({position:t.position})):(Jo(r,function(e,r){t.position[r]=e}),t.el.current&&t.updateScrollPosition())}),u(d(d(t)),"shouldRerender",function(e){var r=t.el.current;if(void 0!==r.shouldRerender)return r.shouldRerender(e);var n=r.props.cacheElements;return!!(y&&Math.abs(e.currentViewSequence-t.position.lastCurrentViewSequence)>=n)||!!(c&&Math.abs(e.currentViewSequencePosition-t.position.lastCurrentViewSequencePosition)>=n)}),u(d(d(t)),"updateScrollPosition",function(){var e=t.el.current;if(e&&void 0!==e.updateScrollPosition)e.updateScrollPosition();else if(e&&e.el&&e.el.current){if(c){var r=e.props.tileWidth,n=-t.position.xPosOffset;n+=(t.position.lastCurrentViewSequencePosition-t.position.lastStartXTile)*r,t.position.currentViewSequencePosition!==t.position.lastCurrentViewSequencePosition&&(n+=(t.position.currentViewSequencePosition-t.position.lastCurrentViewSequencePosition)*r),e.el.current.scrollLeft=n}if(y){var o=e.props.tileHeight,i=-t.position.yPosOffset;i+=(t.position.lastCurrentViewSequence-t.position.lastStartYTile)*o,t.position.currentViewSequence!==t.position.lastCurrentViewSequence&&(i+=(t.position.currentViewSequence-t.position.lastCurrentViewSequence)*o),e.el.current.scrollTop=i}}}),u(d(d(t)),"dispatch",function(e){t.context.positionMSAStore.dispatch(e)}),t.el=si(),t}return f(o,r.PureComponent),a(o,[{key:"componentDidMount",value:function(){this.unsubscribe=this.context.positionMSAStore.subscribe(this.updateFromPositionStore),this.updateScrollPosition(!0)}},{key:"componentDidUpdate",value:function(){this.updateScrollPosition()}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){return this.hasBeenInitialized||(this.updateFromPositionStore(),this.hasBeenInitialized=!0),n.createElement(e,l({ref:this.el,position:this.position,positionDispatch:this.dispatch},this.props))}}]),o}();return b.displayName="withPosition(".concat(e.displayName||e.name,")"),b.contextTypes={positionMSAStore:t.object},b}var ui=NaN,ci=/^\s+|\s+$/g,li=/^[-+]0x[0-9a-f]+$/i,fi=/^0b[01]+$/i,pi=/^0o[0-7]+$/i,hi=parseInt;function di(e){if("number"==typeof e)return e;if(ho(e))return ui;if(Ve(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ve(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ci,"");var r=fi.test(e);return r||pi.test(e)?hi(e.slice(2),r?2:8):li.test(e)?ui:+e}var vi=1/0,yi=1.7976931348623157e308;function bi(e){var t=function(e){return e?(e=di(e))===vi||e===-vi?(e<0?-1:1)*yi:e==e?e:0:0===e?e:0}(e),r=t%1;return t==t?r?t-r:t:0}var mi,gi=Math.min,wi=(mi=Math.floor,function(e,t){if(e=di(e),t=null==t?0:gi(bi(t),292)){var r=(Co(e)+"e").split("e");return+((r=(Co(mi(r[0]+"e"+(+r[1]+t)))+"e").split("e"))[0]+"e"+(+r[1]-t))}return mi(e)});function _i(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=di(r))==r?r:0),void 0!==t&&(t=(t=di(t))==t?t:0),function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}(di(e),t,r)}var Si=en("MAINSTORE_UPDATE"),Pi=en("POSITION_MOVE"),ji=en("POSITION_UPDATE"),Oi={updateMainStore:Si,updatePosition:ji,movePosition:Pi};function Ei(e,t){var r=e.sequences.maxLength*e.props.tileWidth-e.props.width;t.xPos=_i(t.xPos,0,r);var n=e.sequences.raw.length*e.props.tileHeight-e.props.height;return t.yPos=_i(t.yPos,0,n),l({},e,{position:t})}var xi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0}},t=arguments.length>1?arguments[1]:void 0,r=e.position;switch(t.type){case Pi.key:var n=l({},r);return n.xPos+=t.payload.xMovement||0,n.yPos+=t.payload.yMovement||0,Ei(e,n);case ji.key:return Ei(e,{xPos:t.payload.xPos||r.xPos,yPos:t.payload.yPos||r.yPos});default:return e}};function Ci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0}},t=arguments.length>1?arguments[1]:void 0,r=e,n=e.position;switch(t.type){case Si.key:r=l({},Qo(r,["props","sequenceStats","sequences"]),t.payload);break;case ji.key:case Pi.key:n=xi(r,t).position;break;default:return r}return l({},r,{xPosOffset:-n.xPos%r.props.tileWidth,yPosOffset:-n.yPos%r.props.tileWidth,currentViewSequence:_i(wi(n.yPos/r.props.tileHeight),0,r.sequences.length-1),currentViewSequencePosition:_i(wi(n.xPos/r.props.tileWidth),0,r.sequences.maxLength),position:n})}function ki(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}var Ti=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Bn(t,zn(e)),e=Tt(e);return t}:Fn;function Mi(e){return Dn(e,wr,Ti)}var qi=Object.prototype.hasOwnProperty,Ai=/\w*$/,Ri=qe?qe.prototype:void 0,Bi=Ri?Ri.valueOf:void 0,Di="[object Boolean]",Wi="[object Date]",Fi="[object Map]",Hi="[object Number]",Li="[object RegExp]",zi="[object Set]",Vi="[object String]",Ii="[object Symbol]",Yi="[object ArrayBuffer]",Xi="[object DataView]",Ni="[object Float32Array]",Ui="[object Float64Array]",$i="[object Int8Array]",Gi="[object Int16Array]",Ki="[object Int32Array]",Qi="[object Uint8Array]",Zi="[object Uint8ClampedArray]",Ji="[object Uint16Array]",es="[object Uint32Array]";var ts=ar&&ar.isMap,rs=ts?nr(ts):function(e){return Rt(e)&&"[object Map]"==to(e)},ns=ar&&ar.isSet,os=ns?nr(ns):function(e){return Rt(e)&&"[object Set]"==to(e)},is=1,ss=2,as=4,us="[object Arguments]",cs="[object Function]",ls="[object GeneratorFunction]",fs="[object Object]",ps={};function hs(e,t,r,n,o,i){var s,a=t&is,u=t&ss,c=t&as;if(r&&(s=o?r(e,n,o,i):r(e)),void 0!==s)return s;if(!Ve(e))return e;var l=zt(e);if(l){if(s=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&qi.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!a)return Et(e,s)}else{var f=to(e),p=f==cs||f==ls;if($t(e))return St(e,a);if(f==fs||f==us||p&&!o){if(s=u||p?{}:At(e),!a)return u?function(e,t){return hr(e,Ti(e),t)}(e,function(t,r){return t&&hr(e,wr(e),t)}(s)):function(e,t){return hr(e,zn(e),t)}(e,function(t,r){return t&&hr(e,cn(e),t)}(s))}else{if(!ps[f])return o?e:{};s=function(e,t,r){var n,o,i,s=e.constructor;switch(t){case Yi:return jt(e);case Di:case Wi:return new s(+e);case Xi:return function(e,t){var r=t?jt(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case Ni:case Ui:case $i:case Gi:case Ki:case Qi:case Zi:case Ji:case es:return Ot(e,r);case Fi:return new s;case Hi:case Vi:return new s(e);case Li:return(i=new(o=e).constructor(o.source,Ai.exec(o))).lastIndex=o.lastIndex,i;case zi:return new s;case Ii:return n=e,Bi?Object(Bi.call(n)):{}}}(e,f,a)}}i||(i=new ht);var h=i.get(e);if(h)return h;if(i.set(e,s),os(e))return e.forEach(function(n){s.add(hs(n,t,r,n,e,i))}),s;if(rs(e))return e.forEach(function(n,o){s.set(o,hs(n,t,r,o,e,i))}),s;var d=c?u?Mi:Vn:u?keysIn:cn,v=l?void 0:d(e);return ki(v||e,function(n,o){v&&(n=e[o=n]),pr(s,o,hs(n,t,r,o,e,i))}),s}function ds(e,t){return null==(e=function(e,t){return t.length<2?e:qo(e,function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}(t,0,-1))}(e,t=ko(t,e)))||delete e[Mo((r=t,n=null==r?0:r.length,n?r[n-1]:void 0))];var r,n}function vs(e){return tr(e)?void 0:e}ps[us]=ps["[object Array]"]=ps["[object ArrayBuffer]"]=ps["[object DataView]"]=ps["[object Boolean]"]=ps["[object Date]"]=ps["[object Float32Array]"]=ps["[object Float64Array]"]=ps["[object Int8Array]"]=ps["[object Int16Array]"]=ps["[object Int32Array]"]=ps["[object Map]"]=ps["[object Number]"]=ps[fs]=ps["[object RegExp]"]=ps["[object Set]"]=ps["[object String]"]=ps["[object Symbol]"]=ps["[object Uint8Array]"]=ps["[object Uint8ClampedArray]"]=ps["[object Uint16Array]"]=ps["[object Uint32Array]"]=!0,ps["[object Error]"]=ps[cs]=ps["[object WeakMap]"]=!1;var ys=Ko(function(e,t){var r={};if(null==e)return r;var n=!1;t=Po(t,function(t){return t=ko(t,e),n||(n=t.length>1),t}),hr(e,Mi(e),r),n&&(r=hs(r,7,vs));for(var o=t.length;o--;)ds(r,t[o]);return r});function bs(e,t){return ao(e,t)}function ms(e,t){void 0===e.nextFrame&&(e.nextFrame=window.requestAnimationFrame(function(){t(),this.nextFrame=void 0}.bind(e)))}var gs={sequences:"updateSequences"};Object.keys(Zr).forEach(function(e){e in gs||Zr[e]===t.func||(gs[e]="updateProp")});var ws=Object.keys(gs),_s=function(e){return Ho(e,function(e,t,r){return e[t.key]=t,e},{})},Ss=_s(on),Ps=_s(Oi),js="FORWARD_SAME_PROP_NAME";var Os=$n&&new $n,Es=Os?function(e,t){return Os.set(e,t),e}:Sr;function xs(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Ct(e.prototype),n=e.apply(r,t);return Ve(n)?n:r}}var Cs=1,ks=Math.max;function Ts(e,t,r,n){for(var o=-1,i=e.length,s=r.length,a=-1,u=t.length,c=ks(i-s,0),l=Array(u+c),f=!n;++a<u;)l[a]=t[a];for(;++o<s;)(f||o<i)&&(l[r[o]]=e[o]);for(;c--;)l[a++]=e[o++];return l}var Ms=Math.max;function qs(e,t,r,n){for(var o=-1,i=e.length,s=-1,a=r.length,u=-1,c=t.length,l=Ms(i-a,0),f=Array(l+c),p=!n;++o<l;)f[o]=e[o];for(var h=o;++u<c;)f[h+u]=t[u];for(;++s<a;)(p||o<i)&&(f[h+r[s]]=e[o++]);return f}function As(){}var Rs=4294967295;function Bs(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Rs,this.__views__=[]}Bs.prototype=Ct(As.prototype),Bs.prototype.constructor=Bs;var Ds=Os?function(e){return Os.get(e)}:function(){},Ws={},Fs=Object.prototype.hasOwnProperty;function Hs(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Hs.prototype=Ct(As.prototype),Hs.prototype.constructor=Hs;var Ls=Object.prototype.hasOwnProperty;function zs(e){if(Rt(e)&&!zt(e)&&!(e instanceof Bs)){if(e instanceof Hs)return e;if(Ls.call(e,"__wrapped__"))return function(e){if(e instanceof Bs)return e.clone();var t=new Hs(e.__wrapped__,e.__chain__);return t.__actions__=Et(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}(e)}return new Hs(e)}zs.prototype=As.prototype,zs.prototype.constructor=zs;var Vs=Tr(Es),Is=/\{\n\/\* \[wrapped with (.+)\] \*/,Ys=/,? & /,Xs=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function Ns(e){return e!=e}var Us=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function $s(e,t,r){var n=t+"";return Mr(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(Xs,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return ki(Us,function(r){var n="_."+r[0];t&r[1]&&!function(e,t){return!(null==e||!e.length)&&function(e,t,r){return t==t?function(e,t,r){for(var n=-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t):function(e,t,r,n){for(var o=e.length,i=-1;++i<o;)if(t(e[i],i,e))return i;return-1}(e,Ns)}(e,t)>-1}(e,n)&&e.push(n)}),e.sort()}(function(e){var t=e.match(Is);return t?t[1].split(Ys):[]}(n),r)))}var Gs=1,Ks=2,Qs=4,Zs=8,Js=32,ea=64;function ta(e,t,r,n,o,i,s,a,u,c){var l=t&Zs;t|=l?Js:ea,(t&=~(l?ea:Js))&Qs||(t&=~(Gs|Ks));var f=[e,t,o,l?i:void 0,l?s:void 0,l?void 0:i,l?void 0:s,a,u,c],p=r.apply(void 0,f);return function(e){var t=function(e){for(var t=e.name+"",r=Ws[t],n=Fs.call(Ws,t)?r.length:0;n--;){var o=r[n],i=o.func;if(null==i||i==e)return o.name}return t}(e),r=zs[t];if("function"!=typeof r||!(t in Bs.prototype))return!1;if(e===r)return!0;var n=Ds(r);return!!n&&e===n[0]}(e)&&Vs(p,f),p.placeholder=n,$s(p,e,t)}function ra(e){return e.placeholder}var na=Math.min,oa="__lodash_placeholder__";function ia(e,t){for(var r=-1,n=e.length,o=0,i=[];++r<n;){var s=e[r];s!==t&&s!==oa||(e[r]=oa,i[o++]=r)}return i}var sa=1,aa=2,ua=8,ca=16,la=128,fa=512;function pa(e,t,r,n,o,i,s,a,u,c){var l=t&la,f=t&sa,p=t&aa,h=t&(ua|ca),d=t&fa,v=p?void 0:xs(e);return function y(){for(var b=arguments.length,m=Array(b),g=b;g--;)m[g]=arguments[g];if(h)var w=ra(y),_=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(m,w);if(n&&(m=Ts(m,n,o,h)),i&&(m=qs(m,i,s,h)),b-=_,h&&b<c){var S=ia(m,w);return ta(e,t,pa,y.placeholder,r,m,S,a,u,c-b)}var P=f?r:this,j=p?P[e]:e;return b=m.length,a?m=function(e,t){for(var r=e.length,n=na(t.length,r),o=Et(e);n--;){var i=t[n];e[n]=yr(i,r)?o[i]:void 0}return e}(m,a):d&&b>1&&m.reverse(),l&&u<b&&(m.length=u),this&&this!==Me&&this instanceof y&&(j=v||xs(j)),j.apply(P,m)}}var ha=1,da="__lodash_placeholder__",va=1,ya=2,ba=4,ma=8,ga=128,wa=256,_a=Math.min,Sa="Expected a function",Pa=1,ja=2,Oa=8,Ea=16,xa=32,Ca=64,ka=Math.max;var Ta=qr(function(e,t){return function(e,t,r,n,o,i,s,a){var u=t&ja;if(!u&&"function"!=typeof e)throw new TypeError(Sa);var c=n?n.length:0;if(c||(t&=~(xa|Ca),n=o=void 0),s=void 0===s?s:ka(bi(s),0),a=void 0===a?a:bi(a),c-=o?o.length:0,t&Ca){var l=n,f=o;n=o=void 0}var p=u?void 0:Ds(e),h=[e,t,r,n,o,l,f,i,s,a];if(p&&function(e,t){var r=e[1],n=t[1],o=r|n,i=o<(va|ya|ga),s=n==ga&&r==ma||n==ga&&r==wa&&e[7].length<=t[8]||n==(ga|wa)&&t[7].length<=t[8]&&r==ma;if(!i&&!s)return e;n&va&&(e[2]=t[2],o|=r&va?0:ba);var a=t[3];if(a){var u=e[3];e[3]=u?Ts(u,a,t[4]):a,e[4]=u?ia(e[3],da):t[4]}(a=t[5])&&(u=e[5],e[5]=u?qs(u,a,t[6]):a,e[6]=u?ia(e[5],da):t[6]),(a=t[7])&&(e[7]=a),n&ga&&(e[8]=null==e[8]?t[8]:_a(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(h,p),e=h[0],t=h[1],r=h[2],n=h[3],o=h[4],!(a=h[9]=void 0===h[9]?u?0:e.length:ka(h[9]-c,0))&&t&(Oa|Ea)&&(t&=~(Oa|Ea)),t&&t!=Pa)d=t==Oa||t==Ea?function(e,t,r){var n=xs(e);return function o(){for(var i=arguments.length,s=Array(i),a=i,u=ra(o);a--;)s[a]=arguments[a];var c=i<3&&s[0]!==u&&s[i-1]!==u?[]:ia(s,u);return(i-=c.length)<r?ta(e,t,pa,o.placeholder,void 0,s,c,void 0,void 0,r-i):Pr(this&&this!==Me&&this instanceof o?n:e,this,s)}}(e,t,a):t!=xa&&t!=(Pa|xa)||o.length?pa.apply(void 0,h):function(e,t,r,n){var o=t&ha,i=xs(e);return function t(){for(var s=-1,a=arguments.length,u=-1,c=n.length,l=Array(c+a),f=this&&this!==Me&&this instanceof t?i:e;++u<c;)l[u]=n[u];for(;a--;)l[u++]=arguments[++s];return Pr(f,o?r:this,l)}}(e,t,r,n);else var d=function(e,t,r){var n=t&Cs,o=xs(e);return function t(){return(this&&this!==Me&&this instanceof t?o:e).apply(n?r:this,arguments)}}(e,t,r);return $s((p?Es:Vs)(d,h),e,t)}(e,64,void 0,t,ia(t,ra(Ta)))});function Ma(e,t){return e===t}function qa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ma,r=null,n=null;return function(){return function(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}function Aa(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=0,s=n.pop(),a=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var r=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}(n),u=e.apply(void 0,[function(){return i++,s.apply(null,arguments)}].concat(r)),c=e(function(){for(var e=[],t=a.length,r=0;r<t;r++)e.push(a[r].apply(null,arguments));return u.apply(null,e)});return c.resultFunc=s,c.dependencies=a,c.recomputations=function(){return i},c.resetRecomputations=function(){return i=0},c}}Ta.placeholder={};var Ra=Aa(qa);function Ba(e,t,r,n){var i=r?r.call(n,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==o(e)||!e||"object"!==o(t)||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),c=0;c<s.length;c++){var l=s[c];if(!u(l))return!1;var f=e[l],p=t[l];if(!1===(i=r?r.call(n,f,p,l):void 0)||void 0===i&&f!==p)return!1}return!0}var Da=Aa(qa,Ba);function Wa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];e[r]=e[r].bind(e)}}var Fa=function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,r.PureComponent),a(t,[{key:"renderTile",value:function(e){var t=this.props.tileComponent;if(e in this.props.componentCache)return this.props.componentCache[e];var r=n.createElement(t,{key:e,index:e});return this.props.componentCache[e]=r,r}},{key:"render",value:function(){for(var e=[],t=this.props.startTile;t<this.props.endTile;t++)e.push(this.renderTile(t));return 0===e.length&&console.warn("The TileComponent rendered returned 0 elements from ".concat(this.props.startTile," to ").concat(this.props.endTile)),n.createElement("div",null,e)}}]),t}();Fa.propTypes={startTile:t.number.isRequired,endTile:t.number.isRequired,componentCache:t.func.isRequired};var Ha=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).el=si(),r}return f(t,r.PureComponent),a(t,[{key:"render",value:function(){var e=this.props,t=(e.yPosOffset,e.tileHeight,e.currentViewSequence,e.sequences,e.height),r=(e.cacheElements,e.tileComponent,e.nrYTiles,e.position,e.positionDispatch,e.componentCache,h(e,["yPosOffset","tileHeight","currentViewSequence","sequences","height","cacheElements","tileComponent","nrYTiles","position","positionDispatch","componentCache"])),o={height:t,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},i=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),s=Math.min(this.props.sequences.length,i+Math.ceil(t/this.props.tileHeight)+2*this.props.cacheElements);return this.props.position.lastCurrentViewSequence=this.props.position.currentViewSequence,this.props.position.lastStartYTile=i,n.createElement("div",r,n.createElement("div",{style:o,ref:this.el},n.createElement(Fa,{componentCache:this.props.componentCache,startTile:i,endTile:s,tileComponent:this.props.tileComponent})))}}]),t}();Ha.propTypes={tileComponent:t.oneOfType([t.func,t.object]).isRequired,cacheElements:t.number.isRequired,tileHeight:t.number.isRequired,nrYTiles:t.number.isRequired,componentCache:t.func.isRequired};var La=ai(Ha,{withY:!0}),za=function(e){function t(e){var r;return i(this,t),Wa(d(d(r=v(this,p(t).call(this,e)))),"createLabel"),r.label=Da(Ta(Qo,r.constructor.labelProps),r.createLabel),r}return f(t,r.PureComponent),a(t,[{key:"createLabel",value:function(e){return this.cache=function(){},o=(t=e).sequences,s=t.tileHeight,u=t.labelComponent,c=t.labelStyle,d=t.labelAttributes,function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,r.PureComponent),a(t,[{key:"render",value:function(){var e=this.props,t=e.index,r=h(e,["index"]);if(u){var i=u;return n.createElement(i,{sequence:o[t],index:t})}r.style=l({},this.props.style,{height:s},c);var a=l({},r,d);return n.createElement("div",a,o[t].name)}}]),t}();var t,o,s,u,c,d}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,r=(e.dispatch,e.labelComponent,e.labelStyle,e.labelAttributes,h(e,["cacheElements","dispatch","labelComponent","labelStyle","labelAttributes"]));return n.createElement(La,c({tileComponent:this.label(this.props),cacheElements:t,componentCache:this.cache},r))}}]),t}();u(za,"labelProps",["sequences","tileHeight","labelComponent","labelStyle","labelAttributes"]),za.defaultProps={cacheElements:10,labelStyle:{}},za.propTypes={font:t.string,labelComponent:t.oneOfType([t.object,t.func]),style:t.object,labelStyle:t.object,labelAttributes:t.object};var Va=je(function(e){return{height:e.props.height,tileHeight:e.props.tileHeight,sequences:e.sequences.raw,nrYTiles:e.sequenceStats.nrYTiles}})(za),Ia=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).el=si(),r}return f(t,r.PureComponent),a(t,[{key:"render",value:function(){var e=this.props,t=e.tileWidth,r=e.sequences,o=e.width,i=(e.cacheElements,e.tileComponent),s=(e.nrXTiles,e.maxLength,e.position,e.positionDispatch,e.componentCache,h(e,["tileWidth","sequences","width","cacheElements","tileComponent","nrXTiles","maxLength","position","positionDispatch","componentCache"])),a={width:o,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},u=l({},this.props.style,{height:this.props.height}),f={tileWidth:t,sequences:r,tileComponent:i},p=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),d=Math.min(this.props.maxLength,p+this.props.nrXTiles+2*this.props.cacheElements),v=this.props.width+2*this.props.cacheElements*this.props.tileWidth;return this.props.position.lastStartXTile=p,this.props.position.lastCurrentViewSequencePosition=this.props.position.currentViewSequencePosition,n.createElement("div",c({style:u},s),n.createElement("div",{style:a,ref:this.el},n.createElement(Fa,c({},f,{componentCache:this.props.componentCache,startTile:p,endTile:d,maxWidth:v}))))}}]),t}();Ia.propTypes={tileComponent:t.oneOfType([t.func,t.object]).isRequired,cacheElements:t.number.isRequired,tileWidth:t.number.isRequired,nrXTiles:t.number.isRequired,maxLength:t.number.isRequired,componentCache:t.func.isRequired};var Ya=ai(Ia,{withX:!0}),Xa=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).cache=function(){},Wa(d(d(r)),"createMarker"),r.marker=Da(Ta(Qo,r.constructor.markerAttributes),r.createMarker),r}return f(t,r.PureComponent),a(t,[{key:"createMarker",value:function(e){return this.cache=function(){},o=(t=e).markerSteps,s=t.startIndex,u=t.tileWidth,t.font,c=t.markerComponent,d=t.markerStyle,y=t.markerAttributes,function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,r.PureComponent),a(t,[{key:"render",value:function(){var e,t=this.props,r=t.index,i=h(t,["index"]);if(c){var a=c;return n.createElement(a,{index:r})}i.style=l({width:u,display:"inline-block",textAlign:"center"},d),e=r%o==0?r+0+s:".";var f=l({},i,y);return n.createElement("div",f,e)}}]),t}();var t,o,s,u,c,d,y}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,r=(e.markerSteps,e.startIndex,e.dispatch,e.markerComponent,e.markerStyle,h(e,["cacheElements","markerSteps","startIndex","dispatch","markerComponent","markerStyle"]));return n.createElement(Ya,c({tileComponent:this.marker(this.props),cacheElements:t,componentCache:this.cache},r))}}]),t}();u(Xa,"markerAttributes",["markerSteps","startIndex","tileWidth","markerComponent","markerStyle","markerAttributes"]),Xa.defaultProps={style:{font:"12px Arial"},height:15,markerSteps:2,startIndex:1,cacheElements:10,markerStyle:{}},Xa.propTypes={font:t.string,height:t.number,markerSteps:t.number,startIndex:t.number,markerComponent:t.oneOfType([t.object,t.func]),style:t.object,markerStyle:t.object,markerAttributes:t.object};var Na=je(function(e){return{sequences:e.sequences.raw,maxLength:e.sequences.maxLength,width:e.props.width,tileWidth:e.props.tileWidth,nrXTiles:e.sequenceStats.nrXTiles}})(Xa);var Ua="Expected a function";function $a(e,t){return(zt(e)?Wn:function(e,t){var r=[];return pn(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r})(e,function(e){if("function"!=typeof e)throw new TypeError(Ua);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}(Wo(t)))}function Ga(e,t,r){for(var n=-1,o=e.length;++n<o;){var i=e[n],s=t(i);if(null!=s&&(void 0===a?s==s&&!ho(s):r(s,a)))var a=s,u=i}return u}function Ka(e,t){return e>t}function Qa(e){return e&&e.length?Ga(e,Sr,Ka):void 0}function Za(e,t){return(zt(e)?Po:function(e,t){var r=-1,n=Yt(e)?Array(e.length):[];return pn(e,function(e,o,i){n[++r]=t(e,o,i)}),n})(e,Wo(t))}var Ja=Ar(function(e,t){hr(t,wr(t),e)});function eu(e,t){return(zt(e)?ki:pn)(e,Zo(t))}var tu=function e(t,r){if(!this||this.constructor!==e)return new e(t);if(void 0===t||"string"==typeof t)throw new TypeError("you need to give the seq stat an array");this.resetSeqs(t),this.alphabetSize=4,this._useBackground=!1,this.useGaps=!1,this.ignoredChars=["-","*"],Ja(this,r)};tu.prototype.addSeq=function(e){this.seqs.push(e),this._reset()},tu.prototype.removeSeq=function(e){"number"==typeof e?this.seqs.splice(e,1):eu(this.seqs,function(t,r){e===t&&this.seqs.splice(r,1)}.bind(this)),this._reset()},tu.prototype.addSeqs=function(e){e.forEach(function(e){this.addSeq(e)}.bind(this))},tu.prototype.resetSeqs=function(e){if(this.seqs=[],!e instanceof Array||"at"in e){this.mseqs=e;var t=function(){var e=this.mseqs.pluck("seq");this.resetSeqs(e)};e.on("add change reset ",t,this),t.call(this)}else this.addSeqs(e),this._reset()};var ru=["consensus","frequency","maxLength","ic","gaps"];tu.prototype._reset=function(){for(var e=0;e<ru.length;e++)this["_"+ru[e]]=void 0;this._identity=void 0,this._background=void 0},tu.prototype.setBackground=function(e){this._useBackground=e,this._reset()},tu.prototype.useBackground=function(){this.setBackground(!0)},tu.prototype.setDNA=function(){this.alphabetSize=4},tu.prototype.setProtein=function(){this.alphabetSize=20},ru.forEach(function(e){tu.prototype[e]=function(){return void 0===this["_"+e]&&(this["_"+e]=this[e+"Calc"]()),this["_"+e]}}),tu.prototype.identity=function(e){var t;return(void 0===this._identity||e)&&(t=this.identityCalc(e),this._identity=void 0),this._identity||t},tu.prototype.background=function(){return void 0!==this.bg?this.bg:(void 0===this._background&&this.backgroundCalc(),this._background)},tu.prototype.frequencyCalc=function(e){var t,r;t=new Array(this.maxLength()),r=new Array(this.seqs.length);var n=this.ignoredChars;return void 0!==e&&e.all&&(n=[]),eu(this.seqs,function(e){eu(e,function(e,o){n.indexOf(e)>=0||(void 0===t[o]&&(t[o]={}),void 0===t[o][e]&&(t[o][e]=0),t[o][e]++,void 0===r[o]&&(r[o]=0),r[o]++)})}),eu(t,function(e,n){return eu(e,function(e,o){return t[n][o]=e/r[n]})}),this._frequency=t,t},tu.prototype.backgroundCalc=function(){var e,t,r,n={},o=0;return eu(this.seqs,function(e){eu(e,function(e){return void 0===n[e]&&(n[e]=0),n[e]++,o++})}),e=n,r={},t=Wo(t=function(e){return e/o}),ln(e,function(e,n,o){vt(r,n,t(e,n,o))}),n=r,this._background=n,n},tu.prototype.icCalc=function(){var e=this.frequency();if(this._useBackground)var t=this.background();var r=this.ignoredChars,n=this._useBackground,o=Za(e,function(e){return Ho(e,function(e,o,i){return r.indexOf(i)>=0?e:(n&&(o/=t[i]),e-o*(Math.log(o)/Math.log(2)))},0)});return this._ic=o,o},tu.prototype.conservation=function(e){var t=this.ic(),r=this.gaps(),n=this;e=e||this.alphabetSize;var o=Math.log(e)/Math.log(2),i=0;return Za(t,function(e){var t=o-e;return n.useGaps&&(t*=1-r[i++]),t})},tu.prototype.conservResidue=function(e){var t,r,n=e?e.alphabetSize:void 0,o=this.ignoredChars;return t=void 0!==e&&e.scaled?this.scale(this.conservation(n)):this.conservation(n),Za(this.frequency(),function(e,n){r=$a(r(e),function(e){return o.indexOf(e)>=0});var i={};return eu(r,function(r){i[r]=e[r]*t[n]}),i})},tu.prototype.conservResidue2=function(e){var t=this.frequency(),r=this.conservation(e),n=this.background();return Za(t,function(e,o){return Za(e,function(e){var i=Ho(t[o],function(e,t){return e+t/n[o]},0);return e/n[o]/i*r[o]})})},tu.prototype.scale=function(e,t){t=t||this.alphabetSize;var r=Math.log(t)/Math.log(2);return Za(e,function(e){return e/r})},tu.prototype.maxLengthCalc=function(){return 0===this.seqs.length?0:Qa(this.seqs).length},tu.prototype.consensusCalc=function(){var e=new Array(this.maxLength());return eu(this.seqs,function(t){eu(t,function(t,r){void 0===e[r]&&(e[r]={}),void 0===e[r][t]&&(e[r][t]=0),e[r][t]++})}),this._consensus=Ho(e,function(e,t){return e+Qa(Object.keys(t))},""),this._consensus},tu.prototype.identityCalc=function(e){var t=e||this.consensus();return this._identity=this.seqs.map(function(e){for(var r=0,n=0,o=0;o<e.length;o++)"-"!==e[o]&&"-"!==t[o]&&(n++,e[o]===t[o]&&r++);return r/n}),this._identity},tu.prototype.gapsCalc=function(){var e=this.maxLength();if(e<=1||void 0===e)return[];var t=new Array(this.maxLength());return eu(this.seqs,function(e){eu(e,function(e,r){void 0===t[r]&&(t[r]={g:0,t:0}),e="-"===e?"g":"t",t[r][e]++})}),this._gaps=Za(t,function(e){return e.g/(e.g+e.t)}),this._gaps};var nu=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).cache=function(){},r.initializeColumnHeights(),Wa(d(d(r)),"createBar"),r.bar=Da(function(e){return Qo(e,r.constructor.barAttributes)},r.columnHeights,r.createBar),r}return f(t,r.PureComponent),a(t,[{key:"createBar",value:function(e,t){return this.cache=function(){},function(e){var t=e.columnHeights,o=e.tileWidth,s=e.height,u=e.fillColor;return e.barStyle,e.barAttributes,function(e){function c(){return i(this,c),v(this,p(c).apply(this,arguments))}return f(c,r.PureComponent),a(c,[{key:"render",value:function(){var e=this.props,r=e.index,i=h(e,["index"]);return i.style={height:Math.round(t[r]*s),width:o,display:"inline-block",textAlign:"center",backgroundColor:u},n.createElement("div",i)}}]),c}()}(l({},e,{columnHeights:t}))}},{key:"initializeColumnHeights",value:function(){this.columnHeights=Ra(function(e){return e.sequences},function(e){return e.method},function(e,t){var r,n=tu(e.map(function(e){return e.sequence}));switch(t){case"conservation":r=n.scale(n.conservation());break;case"information-content":r=n.scale(n.ic());break;default:console.error(t+"is an invalid aggregation method for <OverviewBar />")}return r}).bind(this)}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,r=(e.height,e.method,e.fillColor,e.dispatch,e.barStyle,e.barAttributes,h(e,["cacheElements","height","method","fillColor","dispatch","barStyle","barAttributes"]));return n.createElement(Ya,c({tileComponent:this.bar(this.props),cacheElements:t,componentCache:this.cache},r))}}]),t}();u(nu,"barAttributes",["tileWidth","height","fillColor","barStyle","barAttributes"]),nu.defaultProps={height:50,fillColor:"#999999",method:"conservation",cacheElements:10},nu.propTypes={method:t.oneOf(["information-content","conservation"]),height:t.number,fillColor:t.string,style:t.object,barStyle:t.object,barAttributes:t.object};var ou=je(function(e){return{sequences:e.sequences.raw,maxLength:e.sequences.maxLength,width:e.props.width,tileWidth:e.props.tileWidth,nrXTiles:e.sequenceStats.nrXTiles}})(nu),iu=function e(){i(this,e)};u(iu,"rel",function(e){if(void 0!==e.changedTouches)return iu.rel(e.changedTouches[0]);var t=e.offsetX,r=e.offsetY;if(void 0===t){var n=e.target||e.srcElement,o=n.getBoundingClientRect();if(t=e.clientX-o.left,r=e.clientY-o.top,void 0===t&&(t=e.pageX-n.offsetLeft,r=e.pageY-n.offsetTop,void 0===t))return}return[t,r]}),u(iu,"abs",function(e){if(void 0!==e.changedTouches)return iu.abs(e.changedTouches[0]);var t=e.pageX,r=e.pageY;return void 0===t&&(t=e.layerX,r=e.layerY),void 0===t&&(t=e.clientX,r=e.clientY),void 0===t&&(t=e.x,r=e.y),[t,r]}),u(iu,"wheelDelta",function(e){var t=[e.deltaX,e.deltaY];return void 0===t[0]&&e.mozMovementX&&(t=[0,e.mozMovementX]),isNaN(t[0])&&(t[0]=0),isNaN(t[1])&&(t[1]=0),t});var su=x(function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=a(n),s=a(t);function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.children,r=e.width,n=e.height,s=e.style,a=void 0===s?{}:s,u=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["children","width","height","style"]);return i.default.createElement("svg",o({children:t,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:n,width:r,style:a},u))};u.propTypes={children:s.default.node.isRequired,width:s.default.oneOfType([s.default.number,s.default.string]),height:s.default.oneOfType([s.default.number,s.default.string]),style:s.default.object},r.default=u});E(su);var au=E(x(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=s(n),i=s(su);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement(i.default,r({viewBox:"0 0 16 16"},e),o.default.createElement("path",{d:"M4 0H0v4h1V1h3V0zm11 0h-3v1h3v3h1V0h-1zM1 15v-3H0v4h4v-1H1zm14-3v3h-3v1h4v-4h-1zm-2-3l-.008-.003L11.5 10.5 9 8l2.5-2.5L12.971 7H13V3H9v.03l1.5 1.47L8 7 5.5 4.5 7 3.03V3H3v4l1.5-1.5L7 8l-2.5 2.5L3 9v4h4l-1.5-1.5L8 9l2.5 2.5L9 13h4V9z"}))}})),uu=E(x(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=s(n),i=s(su);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement(i.default,r({viewBox:"0 0 16 16"},e),o.default.createElement("path",{d:"M.013 1.012V15h13.999V1.012H.013zm10.999 7.995H8.013v2.999h-2V9.007h-3V7.008h3V4.01h2v2.998h2.999v1.999z"}))}})),cu=E(x(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=s(n),i=s(su);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement(i.default,r({viewBox:"0 0 16 16"},e),o.default.createElement("path",{d:"M.004 1v14h14V1h-14zM11 9H3V7h8v2z"}))}}));function lu(){return n.createElement("svg",{height:"1em",width:"1.542em",viewBox:"0 0 1542 1000"},n.createElement("path",{d:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)",fill:"rgb(68, 122, 219)"}))}var fu=function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,r.PureComponent),a(t,[{key:"render",value:function(){var e=l({opacity:.9,backgroundColor:"white"},this.props.style),t={position:"relative",fontSize:"16px",padding:"3px 4px",cursor:"pointer",lineHeight:"normal",textDecoration:"none",color:"black"};return n.createElement("div",{style:e},n.createElement("div",{style:t},n.createElement(uu,{width:20,height:20})),n.createElement("div",{style:t},n.createElement(cu,{width:20,height:20})),n.createElement("div",{style:t},n.createElement(au,{width:20,height:20})),n.createElement("a",{href:"https://plot.ly/",target:"_blank",rel:"noreferrer noopener","data-title":"Produced with Plotly",style:t},n.createElement(lu,{width:20,height:20})))}}]),t}(),pu=function(e){function t(e){var r;return i(this,t),u(d(d(r=v(this,p(t).call(this,e)))),"onScroll",function(e){ms(d(d(r)),function(){var e={xMovement:r.el.current.scrollLeft-r.props.position.xPos,yMovement:r.el.current.scrollTop-r.props.position.yPos};r.props.positionDispatch(Pi(e))})}),u(d(d(r)),"updateScrollPosition",function(){r.el&&r.el.current&&(r.el.current.scrollTop=r.props.position.yPos,r.el.current.scrollLeft=r.props.position.xPos)}),r.el=si(),r}return f(t,r.PureComponent),a(t,[{key:"checkOverflow",value:function(e,t){var r=t.withX,n=void 0!==r&&r,o=t.withY,i=void 0!==o&&o,s=!1;switch(this.props.overflow){case"auto":n&&(s|=this.props.fullWidth>this.props.width),i&&(s|=this.props.fullHeight>this.props.height);break;case"hidden":s=!1;break;case"scroll":s=!0}return s}},{key:"shouldShow",value:function(){var e={withX:!0},t={withY:!0},r="initial"===this.props.overflowX?this.props.overflow:this.props.overflowX,n="initial"===this.props.overflowY?this.props.overflow:this.props.overflowY;return{showX:this.checkOverflow(r,e)&&this.checkOverflow(this.props.overflow,e),showY:this.checkOverflow(n,t)&&this.checkOverflow(this.props.overflow,t)}}},{key:"render",value:function(){var e=this.props,t=e.width,r=e.height,o=e.fullWidth,i=e.fullHeight,s={position:"absolute",overflowX:"auto",overflowY:"auto",width:t,height:r,transform:""},a=this.shouldShow(),u=a.showX,c=a.showY,l={height:1,width:1};return c||u?(u&&(l.width=o,s.overflowX="scroll","top"===this.props.positionX&&(s.transform+="rotateX(180deg)")),c&&(l.height=i,s.overflowY="scroll","left"===this.props.positionY&&(s.transform+="rotateY(180deg)")),n.createElement("div",{style:s,onScroll:this.onScroll,ref:this.el},n.createElement("div",{style:l}))):n.createElement("div",null)}}]),t}();pu.defaultProps={overflow:"auto",overflowX:"initial",overflowY:"initial",positionX:"bottom",positionY:"right",scrollBarWidth:5},pu.propTypes={overflow:t.oneOf(["hidden","auto","scroll"]),overflowX:t.oneOf(["hidden","auto","scroll","initial"]),overflowY:t.oneOf(["hidden","auto","scroll","initial"]),width:t.number.isRequired,height:t.number.isRequired,fullHeight:t.number.isRequired,fullWidth:t.number.isRequired,positionX:t.oneOf(["top","bottom"]),positionY:t.oneOf(["left","right"])};var hu=ai(pu,{withX:!0,withY:!0}),du=function(e){function t(e){var r;return i(this,t),u(d(d(r=v(this,p(t).call(this,e)))),"state",{mouse:{isMouseWithin:!1,cursorState:"grab"}}),u(d(d(r)),"currentContext",1),r.canvasBuffers=[si(),si()],r.container=si(),Wa(d(d(r)),"onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onClick","onDoubleClick","draw"),r.onViewpointChange(),r.mouseMovePosition=void 0,r.touchMovePosition=void 0,r.isInDragPhase=void 0,r.mouseHasMoved=void 0,r}return f(t,r.PureComponent),a(t,[{key:"drawScene",value:function(){console.warn("drawScene is unimplemented.")}},{key:"onPositionUpdate",value:function(){console.warn("onPositionUpdate is unimplemented.")}},{key:"onViewpointChange",value:function(){}},{key:"componentDidMount",value:function(){this.ctxBuffers=[this.canvasBuffers[0].current.getContext("2d",{alpha:"false"}),this.canvasBuffers[1].current.getContext("2d",{alpha:"false"})],this.swapContexts(),this.container.current.addEventListener("mouseenter",this.onMouseEnter),this.container.current.addEventListener("mouseleave",this.onMouseLeave),this.container.current.addEventListener("mousedown",this.onMouseDown),this.container.current.addEventListener("mouseup",this.onMouseUp),this.container.current.addEventListener("mousemove",this.onMouseMove),this.container.current.addEventListener("touchstart",this.onTouchStart),this.container.current.addEventListener("touchmove",this.onTouchMove),this.container.current.addEventListener("touchend",this.onTouchEnd),this.container.current.addEventListener("touchcancel",this.onTouchCancel),this.container.current.addEventListener("click",this.onClick),this.container.current.addEventListener("dblclick",this.onDoubleClick)}},{key:"swapContexts",value:function(){var e=this.currentContext;this.canvasBuffers[e].current.style.visibility="visible";var t=(this.currentContext+1)%2;this.canvasBuffers[t].current.style.visibility="hidden",this.currentContext=t,this.ctx=this.ctxBuffers[t]}},{key:"draw",value:function(){this.ctx&&(this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.onViewpointChange(),this.drawScene(),this.swapContexts())}},{key:"onClick",value:function(e){}},{key:"onDoubleClick",value:function(e){}},{key:"onMouseDown",value:function(e){this.startDragPhase(e)}},{key:"onMouseMove",value:function(e){var t=this;if(void 0!==this.isInDragPhase){this.mouseHasMoved=!0;var r=iu.abs(e),n=this.mouseMovePosition;ms(this,function(){t.mouseMovePosition=r,t.onPositionUpdate(n,t.mouseMovePosition)})}}},{key:"onMouseUp",value:function(){this.stopDragPhase()}},{key:"onMouseEnter",value:function(){this.setState(function(e){return{mouse:l({},e.mouse,{isMouseWithin:!0})}})}},{key:"onMouseLeave",value:function(){this.stopHoverPhase(),this.stopDragPhase()}},{key:"onTouchStart",value:function(e){this.startDragPhase(e)}},{key:"onTouchMove",value:function(e){void 0!==this.isInDragPhase&&this.onMouseMove(e)}},{key:"onTouchEnd",value:function(){this.stopDragPhase()}},{key:"onTouchCancel",value:function(){this.stopDragPhase()}},{key:"startDragPhase",value:function(e){this.mouseMovePosition=iu.abs(e),this.mouseHasMoved=void 0,this.isInDragPhase=!0,this.setState(function(e){return{mouse:l({},e.mouse,{cursorState:"grabbing"})}})}},{key:"stopHoverPhase",value:function(){this.setState(function(e){return{mouse:l({},e.mouse,{isMouseWithin:!1})}})}},{key:"stopDragPhase",value:function(){this.isInDragPhase=void 0,this.setState(function(e){return{mouse:l({},e.mouse,{cursorState:"grab"})}})}},{key:"isEventWithinComponent",value:function(e){var t=iu.rel(e);return 0<=t[0]&&t[0]<=this.props.width&&0<=t[1]&&t[1]<=this.props.height}},{key:"componentWillUnmount",value:function(){this.container.current.removeEventListener("mouseenter",this.onMouseEnter),this.container.current.removeEventListener("mouseleave",this.onMouseLeave),this.container.current.removeEventListener("mouseup",this.onMouseUp),this.container.current.removeEventListener("mousedown",this.onMouseDown),this.container.current.removeEventListener("mousemove",this.onMouseMove),this.container.current.removeEventListener("click",this.onClick),this.container.current.removeEventListener("dblclick",this.onDoubleClick),this.container.current.removeEventListener("touchstart",this.onTouchStart),this.container.current.removeEventListener("touchend",this.onTouchEnd),this.container.current.removeEventListener("touchcancel",this.onTouchCancel),this.container.current.removeEventListener("touchmove",this.onTouchMove),this.stopDragPhase()}},{key:"render",value:function(){var e=l({width:this.props.width,height:this.props.height},this.props.style,{cursor:this.state.mouse.cursorState,position:"relative"}),t=this.props.showModBar&&this.state.mouse.isMouseWithin,r={position:"absolute",left:0,top:0},o=ys(this.props,b(this.constructor.propKeys).concat(["tileWidth","tileHeight","colorScheme","nrXTiles","nrYTiles","dispatch","sequences","fullWidth","fullHeight","position","positionDispatch"]));return n.createElement("div",c({style:e,ref:this.container},o),t&&n.createElement(fu,{style:{position:"absolute",right:0,opacity:.8}}," Plotly Modbar"),n.createElement("canvas",{style:r,ref:this.canvasBuffers[0],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),n.createElement("canvas",{style:r,ref:this.canvasBuffers[1],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),n.createElement(hu,{overflow:this.props.overflow,overflowX:this.props.overflowX,overflowY:this.props.overflowY,positionX:this.props.scrollBarPositionX,positionY:this.props.scrollBarPositionY,width:this.props.width,height:this.props.height,fullWidth:this.props.fullWidth,fullHeight:this.props.fullHeight}))}}]),t}();u(du,"defaultProps",{engine:"canvas",showModBar:!0});var vu=function(){function e(t){i(this,e),this.el=t,this.state={}}return a(e,[{key:"updateEl",value:function(e){this.el=e}},{key:"font",value:function(e){this.state.font=e}},{key:"globalAlpha",value:function(e){this.state.globalAlpha=e}},{key:"startDrawingFrame",value:function(){this.clear()}},{key:"endDrawingFrame",value:function(){}},{key:"save",value:function(){}},{key:"restore",value:function(){}}]),e}(),yu=function(){function e(t){i(this,e),this.cache={},this.cacheHeight=0,this.cacheWidth=0}return a(e,[{key:"getFontTile",value:function(e,t,r,n){return t===this.cacheWidth&&r===this.cacheHeight&&n===this.font||(this.updateDimensions(t,r),this.font=n),void 0===this.cache[e]&&this.createTile(e,t,r),this.cache[e]}},{key:"createTile",value:function(e,t,r,n){var o=this.cache[e]=document.createElement("canvas");return o.width=t,o.height=r,this.ctx=o.getContext("2d"),this.ctx.font=this.font+"px mono",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(e,t/2,r/2,t,n)}},{key:"updateDimensions",value:function(e,t){this.invalidate(),this.cacheWidth=e,this.cacheHeight=t}},{key:"invalidate",value:function(){this.cache={}}}]),e}(),bu=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).ctx=e.getContext("2d"),r.cache=new yu,r}return f(t,vu),a(t,[{key:"clear",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"fillRect",value:function(e,t,r,n){this.ctx.fillRect(e,t,r,n)}},{key:"fillText",value:function(e,t,r,n,o){return this.ctx.drawImage(this.cache.getFontTile(e,n,o,this.ctx.font),t,r,n,o)}},{key:"font",value:function(e){this.ctx.font=e}},{key:"fillStyle",value:function(e){this.ctx.fillStyle=e}},{key:"globalAlpha",value:function(e){this.ctx.globalAlpha=e}},{key:"save",value:function(){this.ctx.save()}},{key:"restore",value:function(){this.ctx.restore()}}]),t}(),mu=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).canvas=si(),r}return f(t,r.PureComponent),a(t,[{key:"componentDidMount",value:function(){this.ctx=new bu(this.canvas.current),this.draw()}},{key:"componentDidUpdate",value:function(){this._draw()}},{key:"_draw",value:function(){this.ctx&&(this.ctx.startDrawingFrame(),this.ctx.save(),this.draw(),this.ctx.restore(),this.ctx.endDrawingFrame())}},{key:"draw",value:function(){console.error("Implement me.")}},{key:"render",value:function(){return n.createElement("div",{style:this.props.style},n.createElement("canvas",{ref:this.canvas,width:this.props.width,height:this.props.height}))}}]),t}();u(mu,"defaultProps",{engine:"canvas"}),mu.propTypes={width:t.number.isRequired,height:t.number.isRequired,style:t.object,engine:t.oneOf(["canvas","webgl"])};var gu=function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,mu),a(t,[{key:"drawTile",value:function(e){var t=this,r=e.row,n=e.column,o=this.props.tileWidth,i=this.props.tileHeight,s=i*(r-this.props.startYTile),a=o*(n-this.props.startXTile);if(!(r>=this.props.sequences.raw.length)){var u=this.props.sequences.raw[r].sequence;if(!(n>=u.length)){var c=u[n];if(void 0!==c){var l=this.props.colorScheme.getColor(c),f="".concat(c,"-").concat(l),p=this.props.residueTileCache.createTile({key:f,tileWidth:o,tileHeight:i,create:function(e){var o=e.canvas;return t.drawResidue({text:c,canvas:o,row:r,column:n,colorScheme:l})}});this.props.ctx.drawImage(p,0,0,o,i,a,s,o,i)}}}}},{key:"drawResidue",value:function(e){e.row,e.column;var t=e.canvas,r=e.colorScheme,n=e.text;t.globalAlpha=.7,t.fillStyle=r,t.fillRect(0,0,this.props.tileWidth,this.props.tileHeight),this.props.border&&(t.globalAlpha=1,t.lineWidth=this.props.borderWidth,t.strokeStyle=this.props.borderStyle,t.strokeRect(0,0,this.props.tileWidth,this.props.tileHeight)),t.globalAlpha=1,t.fillStyle=this.props.textColor,t.font=this.props.textFont+"px mono",t.textBaseline="middle",t.textAlign="center",t.fillText(n,this.props.tileWidth/2,this.props.tileHeight/2+1,this.props.tileWidth)}},{key:"draw",value:function(e){this.props=e;for(var t=this.props.startYTile;t<this.props.endYTile;t++)for(var r=this.props.startXTile;r<this.props.endXTile;r++)this.drawTile({row:t,column:r})}}]),t}();function wu(e,t){return e<t}var _u=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).maxElements;i(this,e),this.maxElements=t||200,this.invalidate()}return a(e,[{key:"createTile",value:function(e){var t,r,n=this,o=e.key,i=e.tileWidth,s=e.tileHeight,a=e.create;if(o in this.cache)return this.cache[o].value;if(this.cachedElements>=this.maxElements){var u=(r=function(e){return n.cache[e].insertionTime},(t=Object.keys(this.cache))&&t.length?Ga(t,Wo(r),wu):void 0);delete this.cache[u]}var c=document.createElement("canvas");this.cache[o]={value:c,insertionTime:Date.now()},c.width=i,c.height=s;var l=c.getContext("2d");return this.cachedElements++,a({canvas:l}),c}},{key:"updateTileSpecs",value:function(e){return!Ba(e,this.spec)&&(this.invalidate(),this.spec=e,!0)}},{key:"invalidate",value:function(){this.cache={},this.spec={},this.cachedElements=0}}]),e}();function Su(e,t){return e-e%t}var Pu=function(e){function t(e){var r;return i(this,t),u(d(d(r=v(this,p(t).call(this,e)))),"renderTile",function(e){var t=e.row,n=e.column,o=t+"-"+n;return r.tileCache.createTile({key:o,tileWidth:r.props.tileWidth*r.props.xGridSize,tileHeight:r.props.tileHeight*r.props.yGridSize,create:function(e){var o=e.canvas;r.tilingGridManager.draw(l({ctx:o,startYTile:t,startXTile:n,residueTileCache:r.residueTileCache,endYTile:t+r.props.yGridSize,endXTile:n+r.props.xGridSize},Qo(r.props,["sequences","colorScheme","textFont","textColor","tileHeight","tileWidth","border","borderWidth","borderColor"])))}})}),u(d(d(r)),"onPositionUpdate",function(e,t){var n={xMovement:e[0]-t[0],yMovement:e[1]-t[1]};r.props.positionDispatch(Pi(n))}),u(d(d(r)),"updateScrollPosition",function(){r.draw()}),u(d(d(r)),"onMouseMove",function(e){if(void 0===r.isInDragPhase&&(void 0!==r.props.onResidueMouseEnter||void 0!==r.props.onResidueMouseLeave)){var n=r.currentPointerPosition(e),o=r.currentMouseSequencePosition;bs(o,n)||(void 0!==o&&r.sendEvent("onResidueMouseLeave",o),r.currentMouseSequencePosition=n,r.sendEvent("onResidueMouseEnter",n))}y(p(t.prototype),"onMouseMove",d(r)).call(d(r),e)}),u(d(d(r)),"onMouseLeave",function(e){r.sendEvent("onResidueMouseLeave",r.currentMouseSequencePosition),r.currentMouseSequencePosition=void 0,y(p(t.prototype),"onMouseLeave",d(r)).call(d(r),e)}),u(d(d(r)),"onClick",function(e){if(!r.mouseHasMoved){var n=r.currentPointerPosition(e);r.sendEvent("onResidueClick",n)}y(p(t.prototype),"onClick",d(r)).call(d(r),e)}),u(d(d(r)),"onDoubleClick",function(e){var n=r.currentPointerPosition(e);r.sendEvent("onResidueDoubleClick",n),y(p(t.prototype),"onDoubleClick",d(r)).call(d(r),e)}),r.tileCache=new _u,r.residueTileCache=new _u,r.tilingGridManager=new gu,r}return f(t,du),a(t,[{key:"drawScene",value:function(){var e=this.getTilePositions();this.updateTileSpecs(),this.drawTiles(e)}},{key:"getTilePositions",value:function(){var e=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),t=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),r=Math.min(this.props.sequences.length,t+this.props.nrYTiles+2*this.props.cacheElements);return{startXTile:e,startYTile:t,endXTile:Math.min(this.props.sequences.maxLength,e+this.props.nrXTiles+2*this.props.cacheElements),endYTile:r}}},{key:"drawTiles",value:function(e){for(var t=e.startXTile,r=e.startYTile,n=e.endXTile,o=e.endYTile,i=this.props.xGridSize,s=this.props.yGridSize,a=Su(r,s),u=Su(t,i),c=a;c<o;c+=s)for(var l=u;l<n;l+=i){var f=this.renderTile({row:c,column:l,canvas:this.ctx}),p=i*this.props.tileWidth,h=s*this.props.tileHeight,d=(c-this.props.position.currentViewSequence)*this.props.tileHeight+this.props.position.yPosOffset,v=(l-this.props.position.currentViewSequencePosition)*this.props.tileWidth+this.props.position.xPosOffset;this.ctx.drawImage(f,0,0,p,h,v,d,p,h)}}},{key:"positionToSequence",value:function(e){var t=this.props.sequences.raw,r=_i(wi((this.props.position.yPos+e.yPos)/this.props.tileHeight),0,t.length-1),n=t[r],o=_i(wi((this.props.position.xPos+e.xPos)/this.props.tileWidth),0,n.sequence.length-1);return{i:r,sequence:n,position:o,residue:n.sequence[o]}}},{key:"currentPointerPosition",value:function(e){var t,r,n=(t=iu.rel(e),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),o=n[0],i=n[1];return this.positionToSequence({xPos:o,yPos:i})}},{key:"sendEvent",value:function(e,t){void 0!==this.props[e]&&this.props[e](t)}},{key:"componentWillUnmount",value:function(){this.tileCache.invalidate(),this.residueTileCache.invalidate()}},{key:"updateTileSpecs",value:function(){var e=["tileWidth","tileHeight","colorScheme","textFont","borderColor"];this.tileCache.updateTileSpecs(Qo(this.props,e.concat(["xGridSize","yGridSize","sequences"]))),this.residueTileCache.updateTileSpecs(Qo(this.props,e))}},{key:"render",value:function(){return y(p(t.prototype),"render",this).call(this)}}]),t}();Pu.defaultProps={showModBar:!1,xGridSize:10,yGridSize:10,border:!1,borderColor:"black",borderWidth:1,cacheElements:20,textColor:"black",textFont:"18px Arial",overflow:"hidden",overflowX:"auto",overflowY:"auto",scrollBarPositionX:"bottom",scrollBarPositionY:"right"},Pu.propTypes={showModBar:t.bool,onResidueMouseEnter:t.func,onResidueMouseLeave:t.func,onResidueClick:t.func,onResidueDoubleClick:t.func,xGridSize:t.number.isRequired,yGridSize:t.number.isRequired,cacheElements:t.number.isRequired,border:t.bool,borderColor:t.string,borderWidth:t.number,textColor:t.string,textFont:t.string,overflow:t.oneOf(["hidden","auto","scroll"]),overflowX:t.oneOf(["hidden","auto","scroll","initial"]),overflowY:t.oneOf(["hidden","auto","scroll","initial"]),scrollBarPositionX:t.oneOf(["top","bottom"]),scrollBarPositionY:t.oneOf(["left","right"])},Pu.propKeys=Object.keys(Pu.propTypes);var ju=ai(Pu,{withX:!0,withY:!0}),Ou=je(function(e){var t=Math.min(e.props.width,e.sequences.maxLength*e.props.tileWidth),r=Math.min(e.props.height,e.sequences.length*e.props.tileHeight);return{sequences:e.sequences,width:t,height:r,tileWidth:e.props.tileWidth,tileHeight:e.props.tileHeight,colorScheme:e.props.colorScheme,nrXTiles:e.sequenceStats.nrXTiles,nrYTiles:e.sequenceStats.nrYTiles,fullWidth:e.sequenceStats.fullWidth,fullHeight:e.sequenceStats.fullHeight}})(ju),Eu=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return u(d(d(r=v(this,(e=p(t)).call.apply(e,[this].concat(o))))),"draw",function(){r.drawScene()}),r}return f(t,mu),a(t,[{key:"updateScrollPosition",value:function(){this._draw()}},{key:"drawScene",value:function(){this.scene={};var e=this.position;this.scene.xViewPos=e.xPos,this.scene.yViewPos=e.yPos,this.scene.xScalingFactor=1/this.props.globalTileWidth*this.props.tileWidth,this.scene.yScalingFactor=1/this.props.globalTileHeight*this.props.tileHeight,this.drawCurrentViewpoint(),this.drawSequences()}},{key:"drawSequences",value:function(){for(var e=this.scene,t=e.xViewPos,r=e.xScalingFactor,n=this.props.sequences.raw,o=0,i=0;i<n.length;i++){var s=n[i].sequence,a=0,u=_i(wi(t*r),0,s.length-1);for(u=0;u<s.length;u++){var c=s[u];if(this.ctx.fillStyle(this.props.colorScheme.getColor(c)),this.ctx.globalAlpha(.5),this.ctx.fillRect(a,o,this.props.tileWidth,this.props.tileHeight),(a+=this.props.tileWidth)>this.props.globalWidth)break}if((o+=this.props.tileHeight)>this.props.height)break}}},{key:"drawCurrentViewpoint",value:function(){var e=this.scene,t=e.xViewPos,r=e.xScalingFactor,n=e.yViewPos,o=e.yScalingFactor;this.ctx.globalAlpha(.8),this.ctx.fillRect(t*r,n*o,this.props.globalWidth*r,this.props.globalHeight*o)}},{key:"render",value:function(){return y(p(t.prototype),"render",this).call(this)}}]),t}();Eu.defaultProps=l({},mu.defaultProps,{height:50,tileWidth:5,tileHeight:5}),Eu.propTypes=l({},mu.propTypes,{height:t.number,tileWidth:t.number,tileHeight:t.number});var xu=ai(Eu),Cu=je(function(e){return{sequences:e.sequences,width:e.props.width,globalWidth:e.props.width,globalHeight:e.props.height,globalTileWidth:e.props.tileWidth,globalTileHeight:e.props.tileHeight,colorScheme:e.props.colorScheme}})(xu),ku=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},Tu=function(e,t){return e===t||e!=e&&t!=t},Mu=function(e,t){for(var r=e.length;r--;)if(Tu(e[r][0],t))return r;return-1},qu=Array.prototype.splice;function Au(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Au.prototype.clear=function(){this.__data__=[],this.size=0},Au.prototype.delete=function(e){var t=this.__data__,r=Mu(t,e);return!(r<0||(r==t.length-1?t.pop():qu.call(t,r,1),--this.size,0))},Au.prototype.get=function(e){var t=this.__data__,r=Mu(t,e);return r<0?void 0:t[r][1]},Au.prototype.has=function(e){return Mu(this.__data__,e)>-1},Au.prototype.set=function(e,t){var r=this.__data__,n=Mu(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var Ru=Au,Bu="object"==typeof O&&O&&O.Object===Object&&O,Du="object"==typeof self&&self&&self.Object===Object&&self,Wu=Bu||Du||Function("return this")(),Fu=Wu.Symbol,Hu=Object.prototype,Lu=Hu.hasOwnProperty,zu=Hu.toString,Vu=Fu?Fu.toStringTag:void 0,Iu=Object.prototype.toString,Yu=Fu?Fu.toStringTag:void 0,Xu=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Yu&&Yu in Object(e)?function(e){var t=Lu.call(e,Vu),r=e[Vu];try{e[Vu]=void 0}catch(e){}var n=zu.call(e);return t?e[Vu]=r:delete e[Vu],n}(e):function(e){return Iu.call(e)}(e)},Nu=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Uu=function(e){if(!Nu(e))return!1;var t=Xu(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},$u=Wu["__core-js_shared__"],Gu=function(){var e=/[^.]+$/.exec($u&&$u.keys&&$u.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ku=Function.prototype.toString,Qu=function(e){if(null!=e){try{return Ku.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Zu=/^\[object .+?Constructor\]$/,Ju=Function.prototype,ec=Object.prototype,tc=Ju.toString,rc=ec.hasOwnProperty,nc=RegExp("^"+tc.call(rc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oc=function(e){return!(!Nu(e)||(t=e,Gu&&Gu in t))&&(Uu(e)?nc:Zu).test(Qu(e));var t},ic=function(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return oc(r)?r:void 0},sc=ic(Wu,"Map"),ac=ic(Object,"create"),uc=Object.prototype.hasOwnProperty,cc=Object.prototype.hasOwnProperty;function lc(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}lc.prototype.clear=function(){this.__data__=ac?ac(null):{},this.size=0},lc.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},lc.prototype.get=function(e){var t=this.__data__;if(ac){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return uc.call(t,e)?t[e]:void 0},lc.prototype.has=function(e){var t=this.__data__;return ac?void 0!==t[e]:cc.call(t,e)},lc.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ac&&void 0===t?"__lodash_hash_undefined__":t,this};var fc=lc,pc=function(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map};function hc(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}hc.prototype.clear=function(){this.size=0,this.__data__={hash:new fc,map:new(sc||Ru),string:new fc}},hc.prototype.delete=function(e){var t=pc(this,e).delete(e);return this.size-=t?1:0,t},hc.prototype.get=function(e){return pc(this,e).get(e)},hc.prototype.has=function(e){return pc(this,e).has(e)},hc.prototype.set=function(e,t){var r=pc(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var dc=hc;function vc(e){var t=this.__data__=new Ru(e);this.size=t.size}vc.prototype.clear=function(){this.__data__=new Ru,this.size=0},vc.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},vc.prototype.get=function(e){return this.__data__.get(e)},vc.prototype.has=function(e){return this.__data__.has(e)},vc.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ru){var n=r.__data__;if(!sc||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new dc(n)}return r.set(e,t),this.size=r.size,this};var yc=vc;function bc(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new dc;++t<r;)this.add(e[t])}bc.prototype.add=bc.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},bc.prototype.has=function(e){return this.__data__.has(e)};var mc=bc,gc=function(e,t,r,n,o,i){var s=1&r,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var l=-1,f=!0,p=2&r?new mc:void 0;for(i.set(e,t),i.set(t,e);++l<a;){var h=e[l],d=t[l];if(n)var v=s?n(d,h,l,t,e,i):n(h,d,l,e,t,i);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!ku(t,function(e,t){if(s=t,!p.has(s)&&(h===e||o(h,e,r,n,i)))return p.push(t);var s})){f=!1;break}}else if(h!==d&&!o(h,d,r,n,i)){f=!1;break}}return i.delete(e),i.delete(t),f},wc=Wu.Uint8Array,_c=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},Sc=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},Pc=Fu?Fu.prototype:void 0,jc=Pc?Pc.valueOf:void 0,Oc=Array.isArray,Ec=Object.prototype.propertyIsEnumerable,xc=Object.getOwnPropertySymbols,Cc=xc?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}(xc(e),function(t){return Ec.call(e,t)}))}:function(){return[]},kc=function(e){return null!=e&&"object"==typeof e},Tc=function(e){return kc(e)&&"[object Arguments]"==Xu(e)},Mc=Object.prototype,qc=Mc.hasOwnProperty,Ac=Mc.propertyIsEnumerable,Rc=Tc(function(){return arguments}())?Tc:function(e){return kc(e)&&qc.call(e,"callee")&&!Ac.call(e,"callee")},Bc=function(){return!1},Dc=x(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?Wu.Buffer:void 0,i=(o?o.isBuffer:void 0)||Bc;e.exports=i}),Wc=/^(?:0|[1-9]\d*)$/,Fc=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Wc.test(e))&&e>-1&&e%1==0&&e<t},Hc=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Lc={};Lc["[object Float32Array]"]=Lc["[object Float64Array]"]=Lc["[object Int8Array]"]=Lc["[object Int16Array]"]=Lc["[object Int32Array]"]=Lc["[object Uint8Array]"]=Lc["[object Uint8ClampedArray]"]=Lc["[object Uint16Array]"]=Lc["[object Uint32Array]"]=!0,Lc["[object Arguments]"]=Lc["[object Array]"]=Lc["[object ArrayBuffer]"]=Lc["[object Boolean]"]=Lc["[object DataView]"]=Lc["[object Date]"]=Lc["[object Error]"]=Lc["[object Function]"]=Lc["[object Map]"]=Lc["[object Number]"]=Lc["[object Object]"]=Lc["[object RegExp]"]=Lc["[object Set]"]=Lc["[object String]"]=Lc["[object WeakMap]"]=!1;var zc=x(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&Bu.process,i=function(){try{return n&&n.require&&n.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),Vc=zc&&zc.isTypedArray,Ic=Vc?function(e){return function(t){return e(t)}}(Vc):function(e){return kc(e)&&Hc(e.length)&&!!Lc[Xu(e)]},Yc=Object.prototype.hasOwnProperty,Xc=function(e,t){var r=Oc(e),n=!r&&Rc(e),o=!r&&!n&&Dc(e),i=!r&&!n&&!o&&Ic(e),s=r||n||o||i,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],u=a.length;for(var c in e)!t&&!Yc.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Fc(c,u))||a.push(c);return a},Nc=Object.prototype,Uc=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),$c=Object.prototype.hasOwnProperty,Gc=function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||Nc))return Uc(e);var t,r,n=[];for(var o in Object(e))$c.call(e,o)&&"constructor"!=o&&n.push(o);return n},Kc=function(e){return null!=e&&Hc(e.length)&&!Uu(e)},Qc=function(e){return Kc(e)?Xc(e):Gc(e)},Zc=function(e){return function(e,t,r){var n=t(e);return Oc(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,Qc,Cc)},Jc=Object.prototype.hasOwnProperty,el=ic(Wu,"DataView"),tl=ic(Wu,"Promise"),rl=ic(Wu,"Set"),nl=ic(Wu,"WeakMap"),ol=Qu(el),il=Qu(sc),sl=Qu(tl),al=Qu(rl),ul=Qu(nl),cl=Xu;(el&&"[object DataView]"!=cl(new el(new ArrayBuffer(1)))||sc&&"[object Map]"!=cl(new sc)||tl&&"[object Promise]"!=cl(tl.resolve())||rl&&"[object Set]"!=cl(new rl)||nl&&"[object WeakMap]"!=cl(new nl))&&(cl=function(e){var t=Xu(e),r="[object Object]"==t?e.constructor:void 0,n=r?Qu(r):"";if(n)switch(n){case ol:return"[object DataView]";case il:return"[object Map]";case sl:return"[object Promise]";case al:return"[object Set]";case ul:return"[object WeakMap]"}return t});var ll=cl,fl=Object.prototype.hasOwnProperty,pl=function(e,t,r,n,o,i){var s=Oc(e),a=Oc(t),u=s?"[object Array]":ll(e),c=a?"[object Array]":ll(t),l="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),f="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),p=u==c;if(p&&Dc(e)){if(!Dc(t))return!1;s=!0,l=!1}if(p&&!l)return i||(i=new yc),s||Ic(e)?gc(e,t,r,n,o,i):function(e,t,r,n,o,i,s){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new wc(e),new wc(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Tu(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=_c;case"[object Set]":var u=1&n;if(a||(a=Sc),e.size!=t.size&&!u)return!1;var c=s.get(e);if(c)return c==t;n|=2,s.set(e,t);var l=gc(a(e),a(t),n,o,i,s);return s.delete(e),l;case"[object Symbol]":if(jc)return jc.call(e)==jc.call(t)}return!1}(e,t,u,r,n,o,i);if(!(1&r)){var h=l&&fl.call(e,"__wrapped__"),d=f&&fl.call(t,"__wrapped__");if(h||d){var v=h?e.value():e,y=d?t.value():t;return i||(i=new yc),o(v,y,r,n,i)}}return!!p&&(i||(i=new yc),function(e,t,r,n,o,i){var s=1&r,a=Zc(e),u=a.length;if(u!=Zc(t).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in t:Jc.call(t,l)))return!1}var f=i.get(e);if(f&&i.get(t))return f==t;var p=!0;i.set(e,t),i.set(t,e);for(var h=s;++c<u;){var d=e[l=a[c]],v=t[l];if(n)var y=s?n(v,d,l,t,e,i):n(d,v,l,e,t,i);if(!(void 0===y?d===v||o(d,v,r,n,i):y)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var b=e.constructor,m=t.constructor;b!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m)&&(p=!1)}return i.delete(e),i.delete(t),p}(e,t,r,n,o,i))},hl=function e(t,r,n,o,i){return t===r||(null==t||null==r||!kc(t)&&!kc(r)?t!=t&&r!=r:pl(t,r,n,o,e,i))},dl=function(e){return e==e&&!Nu(e)},vl=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},yl=function(e){var t=function(e){for(var t=Qc(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,dl(o)]}return t}(e);return 1==t.length&&t[0][2]?vl(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,n){var o=r.length,i=o,s=!n;if(null==e)return!i;for(e=Object(e);o--;){var a=r[o];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){var u=(a=r[o])[0],c=e[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in e))return!1}else{var f=new yc;if(n)var p=n(c,l,u,e,t,f);if(!(void 0===p?hl(l,c,3,n,f):p))return!1}}return!0}(r,e,t)}},bl=function(e){return"symbol"==typeof e||kc(e)&&"[object Symbol]"==Xu(e)},ml=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gl=/^\w*$/,wl=function(e,t){if(Oc(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!bl(e))||gl.test(e)||!ml.test(e)||null!=t&&e in Object(t)},_l="Expected a function";function Sl(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(_l);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(Sl.Cache||dc),r}Sl.Cache=dc;var Pl=Sl,jl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ol=/\\(\\)?/g,El=function(e){var t=Pl(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(jl,function(e,r,n,o){t.push(n?o.replace(Ol,"$1"):r||e)}),t},function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}(),xl=Fu?Fu.prototype:void 0,Cl=xl?xl.toString:void 0,kl=function e(t){if("string"==typeof t)return t;if(Oc(t))return function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,e)+"";if(bl(t))return Cl?Cl.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},Tl=function(e,t){return Oc(e)?e:wl(e,t)?[e]:El(function(e){return null==e?"":kl(e)}(e))},Ml=function(e){if("string"==typeof e||bl(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},ql=function(e,t){for(var r=0,n=(t=Tl(t,e)).length;null!=e&&r<n;)e=e[Ml(t[r++])];return r&&r==n?e:void 0},Al=function(e,t){return null!=e&&t in Object(e)},Rl=function(e,t){return null!=e&&function(e,t,r){for(var n=-1,o=(t=Tl(t,e)).length,i=!1;++n<o;){var s=Ml(t[n]);if(!(i=null!=e&&r(e,s)))break;e=e[s]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&Hc(o)&&Fc(s,o)&&(Oc(e)||Rc(e))}(e,t,Al)},Bl=function(e,t){return wl(e)&&dl(t)?vl(Ml(e),t):function(r){var n=function(e,t,r){var n=null==e?void 0:ql(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?Rl(r,e):hl(t,n,3)}},Dl=function(e){return e},Wl=function(e){return wl(e)?(t=Ml(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return ql(t,e)}}(e);var t},Fl=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),s=i.length;s--;){var a=i[++n];if(!1===t(o[a],a,o))break}return e},Hl=function(e,t){if(null==e)return e;if(!Kc(e))return function(e,t){return e&&Fl(e,t,Qc)}(e,t);for(var r=e.length,n=-1,o=Object(e);++n<r&&!1!==t(o[n],n,o););return e},Ll=function(e,t){var r;return Hl(e,function(e,n,o){return!(r=t(e,n,o))}),!!r},zl=function(e,t,r){var n,o=Oc(e)?ku:Ll;return r&&function(e,t,r){if(!Nu(r))return!1;var n=typeof t;return!!("number"==n?Kc(r)&&Fc(t,r.length):"string"==n&&t in r)&&Tu(r[t],e)}(e,t,r)&&(t=void 0),o(e,"function"==typeof(n=t)?n:null==n?Dl:"object"==typeof n?Oc(n)?Bl(n[0],n[1]):yl(n):Wl(n))},Vl=function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,r.Component),a(t,[{key:"shouldComponentUpdate",value:function(e){var t=this;return!(Ba(this.props,e)&&zl(this.props.forwardedPropsKeys.map(function(r){return Ba(t.props[r],e[r])})))}}]),t}();Vl.propTypes={forwardPropKeys:t.array};var Il=function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,Vl),a(t,[{key:"render",value:function(){var e={paddingTop:this.props.tileHeight+50};return n.createElement("div",{style:{display:"flex"}},n.createElement(Va,c({style:e},this.props.labelsProps)),n.createElement("div",null,n.createElement(ou,c({height:50},this.props.overviewBarProps)),n.createElement(Na,this.props.positionBarProps),n.createElement(Ou,this.props.sequenceViewerProps),n.createElement("div",{style:{height:10}})))}}]),t}();Il.propTypes=l({},Vl.propTypes);var Yl=je(function(e){return{tileHeight:e.props.tileHeight}})(Il),Xl=function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,Vl),a(t,[{key:"render",value:function(){var e={paddingTop:this.props.tileHeight+50};return n.createElement("div",{style:{display:"flex"}},n.createElement("div",null,n.createElement(ou,c({height:50},this.props.overviewBarProps)),n.createElement(Na,this.props.positionBarProps),n.createElement(Ou,this.props.sequenceViewerProps)),n.createElement(Va,c({style:e},this.props.labelsProps)))}}]),t}();Xl.propTypes=l({},Vl.propTypes);var Nl=je(function(e){return{tileHeight:e.props.tileHeight}})(Xl),Ul=function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,Vl),a(t,[{key:"render",value:function(){var e={paddingTop:this.props.tileHeight};return n.createElement("div",{style:{display:"flex"}},n.createElement(Va,{style:e}),n.createElement("div",null,n.createElement(Na,this.props.positionBarProps),n.createElement(Ou,this.props.sequenceViewerProps),n.createElement(Na,this.props.positionBarProps),n.createElement(ou,this.props.overviewBarProps),n.createElement("br",null),n.createElement(Na,this.props.positionBarProps)),n.createElement(Va,c({style:e},this.props.labelsProps)))}}]),t}();Ul.propTypes=l({},Vl.propTypes);var $l={basic:Yl,inverse:Nl,full:Nl,compact:Nl,funky:je(function(e){return{tileHeight:e.props.tileHeight}})(Ul),default:Yl},Gl=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).el=si(),r.forwardedPropsKeys=Object.keys(r.constructor.propsToForward),r}return f(t,r.PureComponent),a(t,[{key:"dispatchEvent",value:function(e){this.el.current.dispatchEvent(e)}},{key:"render",value:function(){var e,t,r,o,i=this.props,s=i.layout,a=h(i,["layout"]);if(s in $l){var u=$l[s],l=(e=a,t=this.constructor.propsToForward,r={},o=e,Jo(t,function(e,t){var n=function(e,t){var r={},n={};return Jo(o,function(e,o){if(o in t){var i=t[o];r[i===js?o:i]=e}else n[o]=e}),{forward:r,other:n}}(0,e);r[t]=n.forward,o=n.other}),{forward:r,other:o}),f=l.forwardProps,p=l.otherProps;return n.createElement("div",c({el:this.ref},p),n.createElement(u,c({},f,{forwardedPropsKeys:this.forwardedPropsKeys})))}console.error("$this.props.layout} is invalid. Please use one of ".concat(Object.keys($l)))}}]),t}();u(Gl,"propsToForward",{sequenceViewerProps:{showModBar:js,onResidueMouseEnter:js,onResidueMouseLeave:js,onResidueClick:js,onResidueDoubleClick:js,sequenceBorder:"border",sequenceBorderColor:"borderColor",sequenceBorderWidth:"borderWidth",sequenceTextColor:"textColor",sequenceTextFont:"textFont",sequenceOverflow:"overflow",sequenceOverflowX:"overflowX",sequenceOverflowy:"overflowY",sequenceScrollBarPositionX:"scrollBarPositionX",sequenceScrollBarPositionY:"scrollBarPositionY"},labelsProps:{labelComponent:js,labelStyle:js,labelAttributes:js},positionBarProps:{markerSteps:js,markerStartIndex:"startIndex",markerComponent:js,markerStyle:js,markerAttributes:js},overviewBarProps:{barMethod:"method",barFillColor:"fillColor",barComponent:js,barStyle:js,barAttributes:js}}),Gl.defaultProps={layout:"default"},Gl.propTyes={layout:t.oneOf(Object.keys($l))};var Kl={onResidueClick:"residueClick"},Ql=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).el=si(),r._setupStores(),r.createDomHandler=go(r.createDomHandler.bind(d(d(r)))),r.forwardProps=Da(function(e){return ys(e,["msaStore"])},r.forwardProps.bind(d(d(r)))),r}return f(t,r.Component),a(t,[{key:"_setupStores",value:function(){var e=this;this.positionStore=te(Ci),this.positionStore.dispatch(Oi.updateMainStore(this.props.msaStore.getState())),this.msaStoreUnsubscribe=this.props.msaStore.subscribe(function(){e.positionStore.dispatch(Oi.updateMainStore(e.props.msaStore.getState()))})}},{key:"componentWillUnmount",value:function(){this.msaStoreUnsubscribe()}},{key:"getChildContext",value:function(){return{positionMSAStore:this.positionStore}}},{key:"createDomHandler",value:function(e){var t=this;return function(r){var n=new CustomEvent(e,{detail:r,bubbles:!0});t.el.current.dispatchEvent(n)}}},{key:"forwardProps",value:function(e){var t=this,r=l({},e);return Jo(Kl,function(e,n){n in Kl&&!(n in r)&&(r[n]=t.createDomHandler(e))}),r}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.msaStore,o=h(e,["children","msaStore"]);return t?n.createElement(Xo,{store:r},n.createElement("div",c({},o,{ref:this.el}),t)):n.createElement(Xo,{store:r},n.createElement("div",{ref:this.el},n.createElement(Gl,this.forwardProps(o))))}}]),t}();Ql.childContextTypes={positionMSAStore:t.object},Ql.propTypes={sequences:t.arrayOf(Gr).isRequired,width:t.number,height:t.number,tileWidth:t.number,tileHeight:t.number,position:Qr,colorScheme:Kr,onResidueMouseEnter:t.func,onResidueMouseLeave:t.func,onResidueClick:t.func,onResidueDoubleClick:t.func,layout:t.oneOf(["basic","default","inverse","full","compact","funky"]),sequenceBorder:t.bool,sequenceBorderColor:t.string,sequenceBorderWidth:t.number,sequenceTextColor:t.string,sequenceTextFont:t.string,sequenceOverflow:t.oneOf(["hidden","auto","scroll"]),sequenceOverflowX:t.oneOf(["hidden","auto","scroll","initial"]),sequenceOverflowY:t.oneOf(["hidden","auto","scroll","initial"]),sequenceScrollBarPositionX:t.oneOf(["top","bottom"]),sequenceScrollBarPositionY:t.oneOf(["left","right"]),labelComponent:t.oneOfType([t.object,t.func]),labelStyle:t.object,labelAttributes:t.object,markerSteps:t.number,markerStartIndex:t.number,markerComponent:t.oneOfType([t.object,t.func]),markerStyle:t.object,markerAttributes:t.object,barMethod:t.oneOf(["information-content","conservation"]),barFillColor:t.string,barStyle:t.object,barAttributes:t.object,msaStore:t.object};var Zl,Jl,ef=(Zl=Ql,Jl=function(e){function t(e){var r;i(this,t),r=v(this,p(t).call(this,e));var n=Qo(e,ws)||{};return r.el=si(),r.msaStore=e.msaStore,void 0!==n.sequences?r.msaStore=Yo(n):console.warn("Check your MSA properties",n),r}return f(t,r.Component),a(t,[{key:"componentDidMount",value:function(){void 0!==this.props.position&&this.updatePosition(this.props.position)}},{key:"componentDidUpdate",value:function(e){var t=this.props;for(var r in Qo(t,ws))if(!bs(e[r],t[r]))if("position"===r)this.updatePosition(t[r]);else if(r in gs){var n=void 0;switch(gs[r]){case"updateProp":n=on[gs[r]](r,t[r]);break;default:n=on[gs[r]](t[r])}this.msaStore.dispatch(n)}else console.error(r," is unknown.")}},{key:"dispatch",value:function(e){if(e.type in Ss)this.msaStore.dispatch(e);else{if(!(e.type in Ps))throw new Error("Invalid action",e);this.el.current.positionStore.dispatch(e)}}},{key:"render",value:function(){var e=ys(this.props,ws),t=e.msaStore,r=h(e,["msaStore"]);return void 0===this.msaStore?n.createElement("div",null," Error initializing the MSAViewer. "):n.createElement(Zl,c({ref:this.el,msaStore:t||this.msaStore},r))}}]),t}(),Jo(on,function(e,t){Jl.prototype[t]=function(t){this.msaStore.dispatch(e(t))}}),Jo(Oi,function(e,t){Jl.prototype[t]=function(t){var r=this;ms(this,function(){r.el.current.positionStore.dispatch(e(t))})}}),Jl);ef.defaultProps=Jr,ef.propTypes=l({},Ql.propTypes),Ql.propTypes=ys(Ql.propTypes,b(Object.keys(Zr)).concat(["sequences","position"]));var tf=l({},on,Oi);e.autobind=Wa,e.actions=tf,e.ColorScheme=Ur,e.createMSAStore=Yo,e.msaConnect=je,e.MSAProvider=Xo,e.MSAViewer=ef,e.shallowSelect=Da,e.shallowEqual=Ba,e.withPositionStore=ai,e.version="1.0.1",e.default=ef,e.Labels=Va,e.OverviewBar=ou,e.PositionBar=Na,e.SequenceOverview=Cu,e.SequenceViewer=Ou,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.min.js.map