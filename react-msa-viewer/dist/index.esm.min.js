/**
 * react-msa-viewer 0.0.12
 * Copyright 2018, Plotly, Inc.
 * All rights reserved.
 * Licensed under the MIT license.
 * Generated: 2018-10-30
 * Version: 0.0.12
 * Source: https://github.com/plotly/react-msa-viewer
 */

import PropTypes from"prop-types";import React,{Component,Children,createElement,PureComponent}from"react";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(t){_defineProperty(e,t,r[t])})}return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}function _objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=_superPropBase(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _iterableToArrayLimit(e,t){var r=[],o=!0,n=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(n)throw i}}return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _inheritsLoose$1(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var subscriptionShape=PropTypes.shape({trySubscribe:PropTypes.func.isRequired,tryUnsubscribe:PropTypes.func.isRequired,notifyNestedSubs:PropTypes.func.isRequired,isSubscribed:PropTypes.func.isRequired}),storeShape=PropTypes.shape({subscribe:PropTypes.func.isRequired,dispatch:PropTypes.func.isRequired,getState:PropTypes.func.isRequired});function createProvider(e){var t;void 0===e&&(e="store");var r=e+"Subscription",o=function(t){_inheritsLoose$1(n,t);var o=n.prototype;function n(r,o){var n;return(n=t.call(this,r,o)||this)[e]=r.store,n}return o.getChildContext=function(){var t;return(t={})[e]=this[e],t[r]=null,t},o.render=function(){return Children.only(this.props.children)},n}(Component);return o.propTypes={store:storeShape.isRequired,children:PropTypes.element.isRequired},o.childContextTypes=((t={})[e]=storeShape.isRequired,t[r]=subscriptionShape,t),o}function _assertThisInitialized$1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _extends$1(){return(_extends$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose$1(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}createProvider();var reactIs_production_min=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,n=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,h=r?Symbol.for("react.memo"):60115,d=r?Symbol.for("react.lazy"):60116;function y(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case l:case i:case s:case a:return e;default:switch(e=e&&e.$$typeof){case u:case p:case c:return e;default:return t}}case n:return t}}}function v(e){return y(e)===l}t.typeOf=y,t.AsyncMode=l,t.ConcurrentMode=l,t.ContextConsumer=u,t.ContextProvider=c,t.Element=o,t.ForwardRef=p,t.Fragment=i,t.Profiler=s,t.Portal=n,t.StrictMode=a,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===l||e===s||e===a||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===h||e.$$typeof===c||e.$$typeof===u||e.$$typeof===p)},t.isAsyncMode=function(e){return v(e)},t.isConcurrentMode=v,t.isContextConsumer=function(e){return y(e)===u},t.isContextProvider=function(e){return y(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return y(e)===p},t.isFragment=function(e){return y(e)===i},t.isProfiler=function(e){return y(e)===s},t.isPortal=function(e){return y(e)===n},t.isStrictMode=function(e){return y(e)===a}});unwrapExports(reactIs_production_min);var _ReactIs$ForwardRef,reactIs_production_min_1=reactIs_production_min.typeOf,reactIs_production_min_2=reactIs_production_min.AsyncMode,reactIs_production_min_3=reactIs_production_min.ConcurrentMode,reactIs_production_min_4=reactIs_production_min.ContextConsumer,reactIs_production_min_5=reactIs_production_min.ContextProvider,reactIs_production_min_6=reactIs_production_min.Element,reactIs_production_min_7=reactIs_production_min.ForwardRef,reactIs_production_min_8=reactIs_production_min.Fragment,reactIs_production_min_9=reactIs_production_min.Profiler,reactIs_production_min_10=reactIs_production_min.Portal,reactIs_production_min_11=reactIs_production_min.StrictMode,reactIs_production_min_12=reactIs_production_min.isValidElementType,reactIs_production_min_13=reactIs_production_min.isAsyncMode,reactIs_production_min_14=reactIs_production_min.isConcurrentMode,reactIs_production_min_15=reactIs_production_min.isContextConsumer,reactIs_production_min_16=reactIs_production_min.isContextProvider,reactIs_production_min_17=reactIs_production_min.isElement,reactIs_production_min_18=reactIs_production_min.isForwardRef,reactIs_production_min_19=reactIs_production_min.isFragment,reactIs_production_min_20=reactIs_production_min.isProfiler,reactIs_production_min_21=reactIs_production_min.isPortal,reactIs_production_min_22=reactIs_production_min.isStrictMode,reactIs=createCommonjsModule(function(e){e.exports=reactIs_production_min}),reactIs_1=reactIs.isValidElementType;function _defineProperty$1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var REACT_STATICS={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},TYPE_STATICS=_defineProperty$1({},reactIs.ForwardRef,(_defineProperty$1(_ReactIs$ForwardRef={},"$$typeof",!0),_defineProperty$1(_ReactIs$ForwardRef,"render",!0),_ReactIs$ForwardRef)),defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(e,t,r){if("string"!=typeof t){if(objectPrototype){var o=getPrototypeOf(t);o&&o!==objectPrototype&&hoistNonReactStatics(e,o,r)}var n=getOwnPropertyNames(t);getOwnPropertySymbols&&(n=n.concat(getOwnPropertySymbols(t)));for(var i=TYPE_STATICS[e.$$typeof]||REACT_STATICS,a=TYPE_STATICS[t.$$typeof]||REACT_STATICS,s=0;s<n.length;++s){var c=n[s];if(!(KNOWN_STATICS[c]||r&&r[c]||a&&a[c]||i&&i[c])){var u=getOwnPropertyDescriptor(t,c);try{defineProperty(e,c,u)}catch(e){}}}return e}return e}var hoistNonReactStatics_cjs=hoistNonReactStatics,invariant=function(e,t,r,o,n,i,a,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,o,n,i,a,s],l=0;(c=new Error(t.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}},browser=invariant,CLEARED=null,nullListeners={notify:function(){}};function createListenerCollection(){var e=[],t=[];return{clear:function(){t=CLEARED,e=CLEARED},notify:function(){for(var r=e=t,o=0;o<r.length;o++)r[o]()},get:function(){return t},subscribe:function(r){var o=!0;return t===e&&(t=e.slice()),t.push(r),function(){o&&e!==CLEARED&&(o=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(r),1))}}}}var Subscription=function(){function e(e,t,r){this.store=e,this.parentSub=t,this.onStateChange=r,this.unsubscribe=null,this.listeners=nullListeners}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=createListenerCollection())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=nullListeners)},e}(),hotReloadingVersion=0,dummyState={};function noop(){}function makeSelectorStateful(e,t){var r={run:function(o){try{var n=e(t.getState(),o);(n!==r.props||r.error)&&(r.shouldComponentUpdate=!0,r.props=n,r.error=null)}catch(e){r.shouldComponentUpdate=!0,r.error=e}}};return r}function connectAdvanced(e,t){var r,o;void 0===t&&(t={});var n=t,i=n.getDisplayName,a=void 0===i?function(e){return"ConnectAdvanced("+e+")"}:i,s=n.methodName,c=void 0===s?"connectAdvanced":s,u=n.renderCountProp,l=void 0===u?void 0:u,p=n.shouldHandleStateChanges,f=void 0===p||p,h=n.storeKey,d=void 0===h?"store":h,y=n.withRef,v=void 0!==y&&y,g=_objectWithoutPropertiesLoose$1(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),b=d+"Subscription",m=hotReloadingVersion++,_=((r={})[d]=storeShape,r[b]=subscriptionShape,r),P=((o={})[b]=subscriptionShape,o);return function(t){browser(reactIs_1(t),"You must pass a component to the function returned by "+c+". Instead received "+JSON.stringify(t));var r=t.displayName||t.name||"Component",o=a(r),n=_extends$1({},g,{getDisplayName:a,methodName:c,renderCountProp:l,shouldHandleStateChanges:f,storeKey:d,withRef:v,displayName:o,wrappedComponentName:r,WrappedComponent:t}),i=function(r){function i(e,t){var n;return(n=r.call(this,e,t)||this).version=m,n.state={},n.renderCount=0,n.store=e[d]||t[d],n.propsMode=Boolean(e[d]),n.setWrappedInstance=n.setWrappedInstance.bind(_assertThisInitialized$1(_assertThisInitialized$1(n))),browser(n.store,'Could not find "'+d+'" in either the context or props of "'+o+'". Either wrap the root component in a <Provider>, or explicitly pass "'+d+'" as a prop to "'+o+'".'),n.initSelector(),n.initSubscription(),n}_inheritsLoose$1(i,r);var a=i.prototype;return a.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[b]=t||this.context[b],e},a.componentDidMount=function(){f&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},a.componentWillReceiveProps=function(e){this.selector.run(e)},a.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},a.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=noop,this.store=null,this.selector.run=noop,this.selector.shouldComponentUpdate=!1},a.getWrappedInstance=function(){return browser(v,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+c+"() call."),this.wrappedInstance},a.setWrappedInstance=function(e){this.wrappedInstance=e},a.initSelector=function(){var t=e(this.store.dispatch,n);this.selector=makeSelectorStateful(t,this.store),this.selector.run(this.props)},a.initSubscription=function(){if(f){var e=(this.propsMode?this.props:this.context)[b];this.subscription=new Subscription(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},a.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(dummyState)):this.notifyNestedSubs()},a.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},a.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},a.addExtraProps=function(e){if(!(v||l||this.propsMode&&this.subscription))return e;var t=_extends$1({},e);return v&&(t.ref=this.setWrappedInstance),l&&(t[l]=this.renderCount++),this.propsMode&&this.subscription&&(t[b]=this.subscription),t},a.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return createElement(t,this.addExtraProps(e.props))},i}(Component);return i.WrappedComponent=t,i.displayName=o,i.childContextTypes=P,i.contextTypes=_,i.propTypes=_,hoistNonReactStatics_cjs(i,t)}}var root,hasOwn=Object.prototype.hasOwnProperty;function is(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function shallowEqual(e,t){if(is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(var n=0;n<r.length;n++)if(!hasOwn.call(t,r[n])||!is(e[r[n]],t[r[n]]))return!1;return!0}function symbolObservablePonyfill(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}var result=symbolObservablePonyfill(root="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function createStore(e,t,r){var o;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(createStore)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var n=e,i=t,a=[],s=a,c=!1;function u(){s===a&&(s=a.slice())}function l(){if(c)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function p(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(c)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return u(),s.push(e),function(){if(t){if(c)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,u();var r=s.indexOf(e);s.splice(r,1)}}}function f(e){if(!isPlainObject(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,i=n(i,e)}finally{c=!1}for(var t=a=s,r=0;r<t.length;r++)(0,t[r])();return e}return f({type:ActionTypes.INIT}),(o={dispatch:f,subscribe:p,getState:l,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");n=e,f({type:ActionTypes.REPLACE})}})[result]=function(){var e,t=p;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(l())}return r(),{unsubscribe:t(r)}}})[result]=function(){return this},e},o}function bindActionCreator(e,t){return function(){return t(e.apply(this,arguments))}}function bindActionCreators(e,t){if("function"==typeof e)return bindActionCreator(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),o={},n=0;n<r.length;n++){var i=r[n],a=e[i];"function"==typeof a&&(o[i]=bindActionCreator(a,t))}return o}function wrapMapToPropsConstant(e){return function(t,r){var o=e(t,r);function n(){return o}return n.dependsOnOwnProps=!1,n}}function getDependsOnOwnProps(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function wrapMapToPropsFunc(e,t){return function(t,r){r.displayName;var o=function(e,t){return o.dependsOnOwnProps?o.mapToProps(e,t):o.mapToProps(e)};return o.dependsOnOwnProps=!0,o.mapToProps=function(t,r){o.mapToProps=e,o.dependsOnOwnProps=getDependsOnOwnProps(e);var n=o(t,r);return"function"==typeof n&&(o.mapToProps=n,o.dependsOnOwnProps=getDependsOnOwnProps(n),n=o(t,r)),n},o}}function whenMapDispatchToPropsIsFunction(e){return"function"==typeof e?wrapMapToPropsFunc(e,"mapDispatchToProps"):void 0}function whenMapDispatchToPropsIsMissing(e){return e?void 0:wrapMapToPropsConstant(function(e){return{dispatch:e}})}function whenMapDispatchToPropsIsObject(e){return e&&"object"==typeof e?wrapMapToPropsConstant(function(t){return bindActionCreators(e,t)}):void 0}var defaultMapDispatchToPropsFactories=[whenMapDispatchToPropsIsFunction,whenMapDispatchToPropsIsMissing,whenMapDispatchToPropsIsObject];function whenMapStateToPropsIsFunction(e){return"function"==typeof e?wrapMapToPropsFunc(e,"mapStateToProps"):void 0}function whenMapStateToPropsIsMissing(e){return e?void 0:wrapMapToPropsConstant(function(){return{}})}var defaultMapStateToPropsFactories=[whenMapStateToPropsIsFunction,whenMapStateToPropsIsMissing];function defaultMergeProps(e,t,r){return _extends$1({},r,e,t)}function wrapMergePropsFunc(e){return function(t,r){r.displayName;var o,n=r.pure,i=r.areMergedPropsEqual,a=!1;return function(t,r,s){var c=e(t,r,s);return a?n&&i(c,o)||(o=c):(a=!0,o=c),o}}}function whenMergePropsIsFunction(e){return"function"==typeof e?wrapMergePropsFunc(e):void 0}function whenMergePropsIsOmitted(e){return e?void 0:function(){return defaultMergeProps}}var defaultMergePropsFactories=[whenMergePropsIsFunction,whenMergePropsIsOmitted];function impureFinalPropsSelectorFactory(e,t,r,o){return function(n,i){return r(e(n,i),t(o,i),i)}}function pureFinalPropsSelectorFactory(e,t,r,o,n){var i,a,s,c,u,l=n.areStatesEqual,p=n.areOwnPropsEqual,f=n.areStatePropsEqual,h=!1;return function(n,d){return h?function(n,h){var d,y,v=!p(h,a),g=!l(n,i);return i=n,a=h,v&&g?(s=e(i,a),t.dependsOnOwnProps&&(c=t(o,a)),u=r(s,c,a)):v?(e.dependsOnOwnProps&&(s=e(i,a)),t.dependsOnOwnProps&&(c=t(o,a)),u=r(s,c,a)):g?(d=e(i,a),y=!f(d,s),s=d,y&&(u=r(s,c,a)),u):u}(n,d):(s=e(i=n,a=d),c=t(o,a),u=r(s,c,a),h=!0,u)}}function finalPropsSelectorFactory(e,t){var r=t.initMapStateToProps,o=t.initMapDispatchToProps,n=t.initMergeProps,i=_objectWithoutPropertiesLoose$1(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=r(e,i),s=o(e,i),c=n(e,i);return(i.pure?pureFinalPropsSelectorFactory:impureFinalPropsSelectorFactory)(a,s,c,e,i)}function match(e,t,r){for(var o=t.length-1;o>=0;o--){var n=t[o](e);if(n)return n}return function(t,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function strictEqual(e,t){return e===t}function createConnect(e){var t=void 0===e?{}:e,r=t.connectHOC,o=void 0===r?connectAdvanced:r,n=t.mapStateToPropsFactories,i=void 0===n?defaultMapStateToPropsFactories:n,a=t.mapDispatchToPropsFactories,s=void 0===a?defaultMapDispatchToPropsFactories:a,c=t.mergePropsFactories,u=void 0===c?defaultMergePropsFactories:c,l=t.selectorFactory,p=void 0===l?finalPropsSelectorFactory:l;return function(e,t,r,n){void 0===n&&(n={});var a=n,c=a.pure,l=void 0===c||c,f=a.areStatesEqual,h=void 0===f?strictEqual:f,d=a.areOwnPropsEqual,y=void 0===d?shallowEqual:d,v=a.areStatePropsEqual,g=void 0===v?shallowEqual:v,b=a.areMergedPropsEqual,m=void 0===b?shallowEqual:b,_=_objectWithoutPropertiesLoose$1(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),P=match(e,i,"mapStateToProps"),T=match(t,s,"mapDispatchToProps"),S=match(r,u,"mergeProps");return o(p,_extends$1({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:P,initMapDispatchToProps:T,initMergeProps:S,pure:l,areStatesEqual:h,areOwnPropsEqual:y,areStatePropsEqual:g,areMergedPropsEqual:m},_))}}var connect=createConnect(),storeKey="msaStore";function msaConnect(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o.storeKey=storeKey,connect(e,t,r,o)}function listCacheClear(){this.__data__=[],this.size=0}function eq(e,t){return e===t||e!=e&&t!=t}function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq(e[r][0],t))return r;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,r=assocIndexOf(t,e);return!(r<0||(r==t.length-1?t.pop():splice.call(t,r,1),--this.size,0))}function listCacheGet(e){var t=this.__data__,r=assocIndexOf(t,e);return r<0?void 0:t[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var r=this.__data__,o=assocIndexOf(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root$1.Symbol,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),r=e[symToStringTag];try{e[symToStringTag]=void 0}catch(e){}var o=nativeObjectToString.call(e);return t?e[symToStringTag]=r:delete e[symToStringTag],o}var objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag$1&&symToStringTag$1 in Object(e)?getRawTag(e):objectToString(e)}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var coreJsData=root$1["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject(e)||isMasked(e))&&(isFunction(e)?reIsNative:reIsHostCtor).test(toSource(e))}function getValue(e,t){return null==e?void 0:e[t]}function getNative(e,t){var r=getValue(e,t);return baseIsNative(r)?r:void 0}var Map$1=getNative(root$1,"Map"),nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function hashGet(e){var t=this.__data__;if(nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$2.call(t,e)?t[e]:void 0}var objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashHas(e){var t=this.__data__;return nativeCreate?void 0!==t[e]:hasOwnProperty$3.call(t,e)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function getMapData(e,t){var r=e.__data__;return isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}function mapCacheDelete(e){var t=getMapData(this,e).delete(e);return this.size-=t?1:0,t}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){var r=getMapData(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var LARGE_ARRAY_SIZE=200;function stackSet(e,t){var r=this.__data__;if(r instanceof ListCache){var o=r.__data__;if(!Map$1||o.length<LARGE_ARRAY_SIZE-1)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new MapCache(o)}return r.set(e,t),this.size=r.size,this}function Stack(e){var t=this.__data__=new ListCache(e);this.size=t.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var defineProperty$1=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();function baseAssignValue(e,t,r){"__proto__"==t&&defineProperty$1?defineProperty$1(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function assignMergeValue(e,t,r){(void 0===r||eq(e[t],r))&&(void 0!==r||t in e)||baseAssignValue(e,t,r)}function createBaseFor(e){return function(t,r,o){for(var n=-1,i=Object(t),a=o(t),s=a.length;s--;){var c=a[e?s:++n];if(!1===r(i[c],c,i))break}return t}}var baseFor=createBaseFor(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0;function cloneBuffer(e,t){if(t)return e.slice();var r=e.length,o=allocUnsafe?allocUnsafe(r):new e.constructor(r);return e.copy(o),o}var Uint8Array=root$1.Uint8Array;function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}function cloneTypedArray(e,t){var r=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function copyArray(e,t){var r=-1,o=e.length;for(t||(t=Array(o));++r<o;)t[r]=e[r];return t}var objectCreate=Object.create,baseCreate=function(){function e(){}return function(t){if(!isObject(t))return{};if(objectCreate)return objectCreate(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function overArg(e,t){return function(r){return e(t(r))}}var getPrototype=overArg(Object.getPrototypeOf,Object),objectProto$5=Object.prototype;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$5)}function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype(e)?{}:baseCreate(getPrototype(e))}function isObjectLike(e){return null!=e&&"object"==typeof e}var argsTag="[object Arguments]";function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==argsTag}var objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&hasOwnProperty$4.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArray=Array.isArray,MAX_SAFE_INTEGER=9007199254740991;function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function stubFalse(){return!1}var freeExports$1="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer$1=moduleExports$1?root$1.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,objectTag="[object Object]",funcProto$2=Function.prototype,objectProto$7=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$5=objectProto$7.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject$2(e){if(!isObjectLike(e)||baseGetTag(e)!=objectTag)return!1;var t=getPrototype(e);if(null===t)return!0;var r=hasOwnProperty$5.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&funcToString$2.call(r)==objectCtorString}var argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag$1="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(e){return function(t){return e(t)}}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag$1]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var freeExports$2="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,freeProcess=moduleExports$2&&freeGlobal.process,nodeUtil=function(){try{return freeModule$2&&freeModule$2.require&&freeModule$2.require("util").types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function safeGet(e,t){if("__proto__"!=t)return e[t]}var objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function assignValue(e,t,r){var o=e[t];hasOwnProperty$6.call(e,t)&&eq(o,r)&&(void 0!==r||t in e)||baseAssignValue(e,t,r)}function copyObject(e,t,r,o){var n=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var s=t[i],c=o?o(r[s],e[s],s,r,e):void 0;void 0===c&&(c=e[s]),n?baseAssignValue(r,s,c):assignValue(r,s,c)}return r}function baseTimes(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var r=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER$1:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}var objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function arrayLikeKeys(e,t){var r=isArray(e),o=!r&&isArguments(e),n=!r&&!o&&isBuffer(e),i=!r&&!o&&!n&&isTypedArray(e),a=r||o||n||i,s=a?baseTimes(e.length,String):[],c=s.length;for(var u in e)!t&&!hasOwnProperty$7.call(e,u)||a&&("length"==u||n&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||isIndex(u,c))||s.push(u);return s}function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}var objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function baseKeysIn(e){if(!isObject(e))return nativeKeysIn(e);var t=isPrototype(e),r=[];for(var o in e)("constructor"!=o||!t&&hasOwnProperty$8.call(e,o))&&r.push(o);return r}function keysIn$1(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}function toPlainObject(e){return copyObject(e,keysIn$1(e))}function baseMergeDeep(e,t,r,o,n,i,a){var s=safeGet(e,r),c=safeGet(t,r),u=a.get(c);if(u)assignMergeValue(e,r,u);else{var l=i?i(s,c,r+"",e,t,a):void 0,p=void 0===l;if(p){var f=isArray(c),h=!f&&isBuffer(c),d=!f&&!h&&isTypedArray(c);l=c,f||h||d?isArray(s)?l=s:isArrayLikeObject(s)?l=copyArray(s):h?(p=!1,l=cloneBuffer(c,!0)):d?(p=!1,l=cloneTypedArray(c,!0)):l=[]:isPlainObject$2(c)||isArguments(c)?(l=s,isArguments(s)?l=toPlainObject(s):isObject(s)&&!isFunction(s)||(l=initCloneObject(c))):p=!1}p&&(a.set(c,l),n(l,c,o,i,a),a.delete(c)),assignMergeValue(e,r,l)}}function baseMerge(e,t,r,o,n){e!==t&&baseFor(t,function(i,a){if(isObject(i))n||(n=new Stack),baseMergeDeep(e,t,a,r,baseMerge,o,n);else{var s=o?o(safeGet(e,a),i,a+"",e,t,n):void 0;void 0===s&&(s=i),assignMergeValue(e,a,s)}},keysIn$1)}function identity(e){return e}function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var nativeMax=Math.max;function overRest(e,t,r){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var o=arguments,n=-1,i=nativeMax(o.length-t,0),a=Array(i);++n<i;)a[n]=o[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=o[n];return s[t]=r(a),apply(e,this,s)}}function constant(e){return function(){return e}}var baseSetToString=defineProperty$1?function(e,t){return defineProperty$1(e,"toString",{configurable:!0,enumerable:!1,value:constant(t),writable:!0})}:identity,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var t=0,r=0;return function(){var o=nativeNow(),n=HOT_SPAN-(o-r);if(r=o,n>0){if(++t>=HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var setToString=shortOut(baseSetToString);function baseRest(e,t){return setToString(overRest(e,t,identity),e+"")}function isIterateeCall(e,t,r){if(!isObject(r))return!1;var o=typeof t;return!!("number"==o?isArrayLike(r)&&isIndex(t,r.length):"string"==o&&t in r)&&eq(r[t],e)}function createAssigner(e){return baseRest(function(t,r){var o=-1,n=r.length,i=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(n--,i):void 0,a&&isIterateeCall(r[0],r[1],a)&&(i=n<3?void 0:i,n=1),t=Object(t);++o<n;){var s=r[o];s&&e(t,s,o,i)}return t})}var merge=createAssigner(function(e,t,r){baseMerge(e,t,r)}),StaticSchemeClass=function(e){this.defaultColor="#ffffff",this.type="static",this.map=e,this.getColor=function(e){return void 0!==this.map[e]?this.map[e]:this.defaultColor}},DynSchemeClass=function(e,t){this.type="dyn",this.opt=t,void 0!==e.init?(e.init.call(this),this.getColor=e.run,this.reset=e.init):this.getColor=e},Buried={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},Cinema={A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"},Clustal={A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"#fff",O:"#fff",P:"orange",Q:"#fff",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"},Clustal2={A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"},Helix={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},Hydro={A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"},Lesk={A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"},Mae={A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"},Nucleotide={A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"},Purine={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"},Strand={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},Taylor={A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"},Turn={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},Zappo={A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"},pid={init:function(){this.cons=this.opt.conservation()},run:function(e,t){var r=this.cons[t.pos];return r>.8?"#6464ff":r>.6?"#9da5ff":r>.4?"#cccccc":"#ffffff"}},staticSchemes={buried:Buried,buried_index:Buried,cinema:Cinema,clustal2:Clustal2,clustal:Clustal,helix:Helix,helix_propensity:Helix,hydro:Hydro,lesk:Lesk,mae:Mae,nucleotide:Nucleotide,purine:Purine,purine_pyrimidine:Purine,strand:Strand,strand_propensity:Strand,taylor:Taylor,turn:Turn,turn_propensity:Turn,zappo:Zappo},dynSchemes={pid:pid},Colors=function(e){this.maps=clone(staticSchemes),this.dyn=clone(dynSchemes),this.opt=e};function clone(e){if(null==e||"object"!==_typeof(e))return e;var t=e.constructor();for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}Colors.getScheme=function(e){return staticSchemes[e]},Colors.prototype.getScheme=function(e){var t=this.maps[e];return void 0===t&&(t={},void 0!==this.dyn[e])?new DynSchemeClass(this.dyn[e],this.opt):new StaticSchemeClass(t)},Colors.prototype.addStaticScheme=function(e,t){this.maps[e]=t},Colors.prototype.addDynScheme=function(e,t){this.dyn[e]=t};var schemesMgr=new Colors,ColorScheme=function(){function e(t){_classCallCheck(this,e),this.scheme=schemesMgr.getScheme(t)}return _createClass(e,[{key:"getColor",value:function(e){return this.scheme.getColor(e)}}]),e}();function isColorScheme(e){return e&&"function"==typeof e.getColor}var SequencePropType=PropTypes.shape({name:PropTypes.string,sequence:PropTypes.string}),AllowedColorschemes=["buried_index","clustal","clustal2","cinema","helix_propensity","hydro","lesk","mae","nucleotide","purine_pyrimidine","strand_propensity","taylor","turn_propensity","zappo"],ColorSchemePropType=PropTypes.oneOfType([PropTypes.oneOf(AllowedColorschemes),PropTypes.instanceOf(ColorScheme),function(e,t,r){if(!isColorScheme(e[t]))return new Error("Invalid prop `"+t+"` supplied to `"+r+"`. Validation failed.")}]),PositionPropType=PropTypes.shape({xPos:PropTypes.number,yPos:PropTypes.number}),MSAPropTypes={sequences:PropTypes.arrayOf(SequencePropType).isRequired,width:PropTypes.number,height:PropTypes.number,tileWidth:PropTypes.number,tileHeight:PropTypes.number,textFont:PropTypes.string,position:PositionPropType,colorScheme:ColorSchemePropType,backgroundColor:PropTypes.string,engine:PropTypes.oneOf(["canvas","webl"]),onResidueMouseEnter:PropTypes.func,onResidueMouseLeave:PropTypes.func,onResidueClick:PropTypes.func,onResidueDoubleClick:PropTypes.func},msaDefaultProps={width:500,height:100,tileWidth:20,tileHeight:20,colorScheme:"clustal",backgroundColor:"red",engine:"canvas"};function createAction(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var n=function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];var i;return 0===r.length?i=o[0]:(i={},r.forEach(function(e,t){i[r[t]]=o[t]})),{type:e,payload:i}};return n.toString=function(){return e.toString()},n.key=n.toString(),n}var updateProps=createAction("PROPS_UPDATE"),updateProp=createAction("PROP_UPDATE","key","value"),updateSequences=createAction("SEQUENCES_UPDATE"),actions={updateProp:updateProp,updateProps:updateProps,updateSequences:updateSequences};function handleActions(e,t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,o=arguments.length>1?arguments[1]:void 0,n=o.type,i=o.payload;return e.hasOwnProperty(n)?e[n](r,i):r}}function combineReducers$1(e){var t=Object.keys(e);return function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,n={},i=!1,a=0;a<t.length;a++){var s=t[a],c=e[s](r[s],o);if(void 0===c)throw new Error("A reducer can't return 'undefined'");n[s]=c,i=i||c!==r[s]}return i?n:r}}function arrayReduce(e,t,r,o){var n=-1,i=null==e?0:e.length;for(o&&i&&(r=e[++n]);++n<i;)r=t(r,e[n],n,e);return r}var nativeKeys=overArg(Object.keys,Object),objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function baseKeys(e){if(!isPrototype(e))return nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$9.call(e,r)&&"constructor"!=r&&t.push(r);return t}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function baseForOwn(e,t){return e&&baseFor(e,t,keys)}function createBaseEach(e,t){return function(r,o){if(null==r)return r;if(!isArrayLike(r))return e(r,o);for(var n=r.length,i=t?n:-1,a=Object(r);(t?i--:++i<n)&&!1!==o(a[i],i,a););return r}}var baseEach=createBaseEach(baseForOwn),HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED$2),this}function setCacheHas(e){return this.__data__.has(e)}function SetCache(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new MapCache;++t<r;)this.add(e[t])}function arraySome(e,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(e[r],r,e))return!0;return!1}function cacheHas(e,t){return e.has(t)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(e,t,r,o,n,i){var a=r&COMPARE_PARTIAL_FLAG,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=i.get(e);if(u&&i.get(t))return u==t;var l=-1,p=!0,f=r&COMPARE_UNORDERED_FLAG?new SetCache:void 0;for(i.set(e,t),i.set(t,e);++l<s;){var h=e[l],d=t[l];if(o)var y=a?o(d,h,l,t,e,i):o(h,d,l,e,t,i);if(void 0!==y){if(y)continue;p=!1;break}if(f){if(!arraySome(t,function(e,t){if(!cacheHas(f,t)&&(h===e||n(h,e,r,o,i)))return f.push(t)})){p=!1;break}}else if(h!==d&&!n(h,d,r,o,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function mapToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e,o){r[++t]=[o,e]}),r}function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$1="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(e,t,r,o,n,i,a){switch(r){case dataViewTag$1:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag$1:return!(e.byteLength!=t.byteLength||!i(new Uint8Array(e),new Uint8Array(t)));case boolTag$1:case dateTag$1:case numberTag$1:return eq(+e,+t);case errorTag$1:return e.name==t.name&&e.message==t.message;case regexpTag$1:case stringTag$1:return e==t+"";case mapTag$1:var s=mapToArray;case setTag$1:var c=o&COMPARE_PARTIAL_FLAG$1;if(s||(s=setToArray),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;o|=COMPARE_UNORDERED_FLAG$1,a.set(e,t);var l=equalArrays(s(e),s(t),o,n,i,a);return a.delete(e),l;case symbolTag:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}function arrayPush(e,t){for(var r=-1,o=t.length,n=e.length;++r<o;)e[n+r]=t[r];return e}function baseGetAllKeys(e,t,r){var o=t(e);return isArray(e)?o:arrayPush(o,r(e))}function arrayFilter(e,t){for(var r=-1,o=null==e?0:e.length,n=0,i=[];++r<o;){var a=e[r];t(a,r,e)&&(i[n++]=a)}return i}function stubArray(){return[]}var objectProto$c=Object.prototype,propertyIsEnumerable$1=objectProto$c.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(e){return null==e?[]:(e=Object(e),arrayFilter(nativeGetSymbols(e),function(t){return propertyIsEnumerable$1.call(e,t)}))}:stubArray;function getAllKeys(e){return baseGetAllKeys(e,keys,getSymbols)}var COMPARE_PARTIAL_FLAG$2=1,objectProto$d=Object.prototype,hasOwnProperty$a=objectProto$d.hasOwnProperty;function equalObjects(e,t,r,o,n,i){var a=r&COMPARE_PARTIAL_FLAG$2,s=getAllKeys(e),c=s.length;if(c!=getAllKeys(t).length&&!a)return!1;for(var u=c;u--;){var l=s[u];if(!(a?l in t:hasOwnProperty$a.call(t,l)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var f=!0;i.set(e,t),i.set(t,e);for(var h=a;++u<c;){var d=e[l=s[u]],y=t[l];if(o)var v=a?o(y,d,l,t,e,i):o(d,y,l,e,t,i);if(!(void 0===v?d===y||n(d,y,r,o,i):v)){f=!1;break}h||(h="constructor"==l)}if(f&&!h){var g=e.constructor,b=t.constructor;g!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b)&&(f=!1)}return i.delete(e),i.delete(t),f}var DataView=getNative(root$1,"DataView"),Promise$1=getNative(root$1,"Promise"),Set=getNative(root$1,"Set"),WeakMap=getNative(root$1,"WeakMap"),mapTag$2="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$2="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$2||Map$1&&getTag(new Map$1)!=mapTag$2||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$2||WeakMap&&getTag(new WeakMap)!=weakMapTag$1)&&(getTag=function(e){var t=baseGetTag(e),r=t==objectTag$2?e.constructor:void 0,o=r?toSource(r):"";if(o)switch(o){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$2;case promiseCtorString:return promiseTag;case setCtorString:return setTag$2;case weakMapCtorString:return weakMapTag$1}return t});var getTag$1=getTag,COMPARE_PARTIAL_FLAG$3=1,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",objectTag$3="[object Object]",objectProto$e=Object.prototype,hasOwnProperty$b=objectProto$e.hasOwnProperty;function baseIsEqualDeep(e,t,r,o,n,i){var a=isArray(e),s=isArray(t),c=a?arrayTag$1:getTag$1(e),u=s?arrayTag$1:getTag$1(t),l=(c=c==argsTag$2?objectTag$3:c)==objectTag$3,p=(u=u==argsTag$2?objectTag$3:u)==objectTag$3,f=c==u;if(f&&isBuffer(e)){if(!isBuffer(t))return!1;a=!0,l=!1}if(f&&!l)return i||(i=new Stack),a||isTypedArray(e)?equalArrays(e,t,r,o,n,i):equalByTag(e,t,c,r,o,n,i);if(!(r&COMPARE_PARTIAL_FLAG$3)){var h=l&&hasOwnProperty$b.call(e,"__wrapped__"),d=p&&hasOwnProperty$b.call(t,"__wrapped__");if(h||d){var y=h?e.value():e,v=d?t.value():t;return i||(i=new Stack),n(y,v,r,o,i)}}return!!f&&(i||(i=new Stack),equalObjects(e,t,r,o,n,i))}function baseIsEqual(e,t,r,o,n){return e===t||(null==e||null==t||!isObjectLike(e)&&!isObjectLike(t)?e!=e&&t!=t:baseIsEqualDeep(e,t,r,o,baseIsEqual,n))}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(e,t,r,o){var n=r.length,i=n,a=!o;if(null==e)return!i;for(e=Object(e);n--;){var s=r[n];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++n<i;){var c=(s=r[n])[0],u=e[c],l=s[1];if(a&&s[2]){if(void 0===u&&!(c in e))return!1}else{var p=new Stack;if(o)var f=o(u,l,c,e,t,p);if(!(void 0===f?baseIsEqual(l,u,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,o,p):f))return!1}}return!0}function isStrictComparable(e){return e==e&&!isObject(e)}function getMatchData(e){for(var t=keys(e),r=t.length;r--;){var o=t[r],n=e[o];t[r]=[o,n,isStrictComparable(n)]}return t}function matchesStrictComparable(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}function baseMatches(e){var t=getMatchData(e);return 1==t.length&&t[0][2]?matchesStrictComparable(t[0][0],t[0][1]):function(r){return r===e||baseIsMatch(r,e,t)}}var symbolTag$1="[object Symbol]";function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==symbolTag$1}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol(e))||reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t)}var FUNC_ERROR_TEXT="Expected a function";function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var o=arguments,n=t?t.apply(this,o):o[0],i=r.cache;if(i.has(n))return i.get(n);var a=e.apply(this,o);return r.cache=i.set(n,a)||i,a};return r.cache=new(memoize.Cache||MapCache),r}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize(e,function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e}),r=t.cache;return t}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rePropName,function(e,r,o,n){t.push(o?n.replace(reEscapeChar,"$1"):r||e)}),t});function arrayMap(e,t){for(var r=-1,o=null==e?0:e.length,n=Array(o);++r<o;)n[r]=t(e[r],r,e);return n}var INFINITY=1/0,symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function toString(e){return null==e?"":baseToString(e)}function castPath(e,t){return isArray(e)?e:isKey(e,t)?[e]:stringToPath(toString(e))}var INFINITY$1=1/0;function toKey(e){if("string"==typeof e||isSymbol(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}function baseGet(e,t){for(var r=0,o=(t=castPath(t,e)).length;null!=e&&r<o;)e=e[toKey(t[r++])];return r&&r==o?e:void 0}function get(e,t,r){var o=null==e?void 0:baseGet(e,t);return void 0===o?r:o}function baseHasIn(e,t){return null!=e&&t in Object(e)}function hasPath(e,t,r){for(var o=-1,n=(t=castPath(t,e)).length,i=!1;++o<n;){var a=toKey(t[o]);if(!(i=null!=e&&r(e,a)))break;e=e[a]}return i||++o!=n?i:!!(n=null==e?0:e.length)&&isLength(n)&&isIndex(a,n)&&(isArray(e)||isArguments(e))}function hasIn(e,t){return null!=e&&hasPath(e,t,baseHasIn)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(e,t){return isKey(e)&&isStrictComparable(t)?matchesStrictComparable(toKey(e),t):function(r){var o=get(r,e);return void 0===o&&o===t?hasIn(r,e):baseIsEqual(t,o,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function basePropertyDeep(e){return function(t){return baseGet(t,e)}}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function baseIteratee(e){return"function"==typeof e?e:null==e?identity:"object"==typeof e?isArray(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function baseReduce(e,t,r,o,n){return n(e,function(e,n,i){r=o?(o=!1,e):t(r,e,n,i)}),r}function reduce(e,t,r){var o=isArray(e)?arrayReduce:baseReduce,n=arguments.length<3;return o(e,baseIteratee(t,4),r,n,baseEach)}var calculateSequencesState=function(e,t){var r={raw:t,length:t.length};return r.maxLength=reduce(t,function(e,t){return Math.max(e,t.sequence.length)},0),r};function checkColorScheme(e){isColorScheme(e.colorScheme)||(e.colorScheme=new ColorScheme(e.colorScheme))}var props=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,o=t.payload;switch(r){case actions.updateProps.key:return e=_objectSpread({},e,o),"colorScheme"in o&&checkColorScheme(e),e;case actions.updateProp.key:var n=o.key;return e=_objectSpread({},e,_defineProperty({},n,o.value)),"colorScheme"===n&&checkColorScheme(e),e;default:return void 0!==e.colorScheme&&checkColorScheme(e),e}},sequences=handleActions(_defineProperty({},actions.updateSequences,calculateSequencesState),[]),sequenceStats=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentViewSequence:0,currentViewSequencePosition:0},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;switch(t.type){case actions.updateProp.key:case actions.updateProps.key:case actions.updateSequences.key:if(r.props&&r.props.tileHeight&&r.props.tileWidth&&r.sequences){var o={};return o.nrXTiles=Math.ceil(r.props.width/r.props.tileWidth)+1,o.nrYTiles=Math.ceil(r.props.height/r.props.tileHeight)+1,o.fullWidth=r.props.tileWidth*r.sequences.maxLength,o.fullHeight=r.props.tileHeight*r.sequences.length,o}}return e},statCombineReduce=function(e,t){var r=Object.keys(t);return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=e(o,n);if(o!==i)for(var a=0;a<r.length;a++){var s=r[a],c=t[s](i[s],n,i);if(void 0===c)throw new Error("A reducer can't return 'undefined'");i[s]=c}return i}},positionReducers=statCombineReduce(combineReducers$1({props:props,sequences:sequences}),{sequenceStats:sequenceStats}),env=!1,createMSAStore=function(e){PropTypes.checkPropTypes(MSAPropTypes,e,"prop","MSAViewer");var t=merge({},msaDefaultProps,e),r=t.sequences,o=(t.position,_objectWithoutProperties(t,["sequences","position"])),n=createStore(positionReducers,env&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());return n.dispatch(updateProps(o)),n.dispatch(updateSequences(r)),n},MSAProvider=createProvider(storeKey);function baseSet(e,t,r,o){if(!isObject(e))return e;for(var n=-1,i=(t=castPath(t,e)).length,a=i-1,s=e;null!=s&&++n<i;){var c=toKey(t[n]),u=r;if(n!=a){var l=s[c];void 0===(u=o?o(l,c,s):void 0)&&(u=isObject(l)?l:isIndex(t[n+1])?[]:{})}assignValue(s,c,u),s=s[c]}return e}function basePickBy(e,t,r){for(var o=-1,n=t.length,i={};++o<n;){var a=t[o],s=baseGet(e,a);r(s,a)&&baseSet(i,castPath(a,e),s)}return i}function basePick(e,t){return basePickBy(e,t,function(t,r){return hasIn(e,r)})}var spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable(e){return isArray(e)||isArguments(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}function baseFlatten(e,t,r,o,n){var i=-1,a=e.length;for(r||(r=isFlattenable),n||(n=[]);++i<a;){var s=e[i];t>0&&r(s)?t>1?baseFlatten(s,t-1,r,o,n):arrayPush(n,s):o||(n[n.length]=s)}return n}function flatten(e){return null!=e&&e.length?baseFlatten(e,1):[]}function flatRest(e){return setToString(overRest(e,void 0,flatten),e+"")}var pick=flatRest(function(e,t){return null==e?{}:basePick(e,t)});function castFunction(e){return"function"==typeof e?e:identity}function forOwn(e,t){return e&&baseForOwn(e,castFunction(t))}var RefForwarder=createCommonjsModule(function(e,t){t.__esModule=!0;var r=n(React),o=n(createRef);function n(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(r){!function(e,r){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r));return n.__forwardedRef=(0,o.default)(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.__render=function(){return null},t.prototype.getRef=function(){return this.__forwardedRef.current||this.__forwardedRef.value},t.prototype.render=function(){return this.__render(this.props,this.__forwardedRef)},t}(r.default.Component);i.displayName="ForwardRefPolyfill",t.default=i,e.exports=t.default});function makeEmptyFunction(e){return function(){return e}}unwrapExports(RefForwarder);var emptyFunction=function(){};emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(e){return e};var emptyFunction_1=emptyFunction,warning$2=emptyFunction_1,warning_1=warning$2,forwardRef=createCommonjsModule(function(e,t){t.__esModule=!0;var r=n(React),o=(n(createRef),n(RefForwarder));function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(warning_1),t.default=r.default.forwardRef||function(e){return function(t){function r(){var o,n;!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return o=n=i(this,t.call.apply(t,[this].concat(s))),n.__render=e,i(n,o)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r}(o.default)},e.exports=t.default});unwrapExports(forwardRef);var getRef_1=createCommonjsModule(function(e,t){t.__esModule=!0,t.default=function(e){if(!e)return null;var t=e;return 1===Object.keys(t).length&&(t.hasOwnProperty("current")?t=t.current:t.hasOwnProperty("value")&&(t=t.value)),t instanceof r.default&&(t=t.getRef()),t};var r=o(RefForwarder);function o(e){return e&&e.__esModule?e:{default:e}}o(warning_1),e.exports=t.default});unwrapExports(getRef_1);var createRef=createCommonjsModule(function(e,t){t.__esModule=!0;var r=n(React),o=n(getRef_1);function n(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.createRef||function(){function e(t){e.current=(0,o.default)(t)||null}return e.current=null,e},e.exports=t.default}),createRef$1=unwrapExports(createRef);function withPositionConsumer(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.withX,o=void 0!==r&&r,n=t.withY,i=void 0!==n&&n,a=function(t){function r(e){var t;return _classCallCheck(this,r),_defineProperty(_assertThisInitialized(_assertThisInitialized(t=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,e)))),"updateFromPositionStore",function(){var e=t.context.positionMSAStore.getState();t.position=t.position||{};var r=pick(e,["currentViewSequence","currentViewSequencePosition","xPosOffset","yPosOffset"]);e.position&&(r.xPos=e.position.xPos,r.yPos=e.position.yPos),t.el.current&&t.shouldRerender(r)?(t.position=r,t.setState({position:t.position})):(forOwn(r,function(e,r){t.position[r]=e}),t.el.current&&t.updateScrollPosition())}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"shouldRerender",function(e){var r=t.el.current;if(void 0!==r.shouldRerender)return r.shouldRerender(e);var n=r.props.cacheElements;return!!(i&&Math.abs(e.currentViewSequence-t.position.lastCurrentViewSequence)>=n)||!!(o&&Math.abs(e.currentViewSequencePosition-t.position.lastCurrentViewSequencePosition)>=n)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"updateScrollPosition",function(){var e=t.el.current;if(e&&void 0!==e.updateScrollPosition)e.updateScrollPosition();else if(e&&e.el&&e.el.current){if(o){var r=e.props.tileWidth,n=-t.position.xPosOffset;n+=(t.position.lastCurrentViewSequencePosition-t.position.lastStartXTile)*r,t.position.currentViewSequencePosition!==t.position.lastCurrentViewSequencePosition&&(n+=(t.position.currentViewSequencePosition-t.position.lastCurrentViewSequencePosition)*r),e.el.current.scrollLeft=n}if(i){var a=e.props.tileHeight,s=-t.position.yPosOffset;s+=(t.position.lastCurrentViewSequence-t.position.lastStartYTile)*a,t.position.currentViewSequence!==t.position.lastCurrentViewSequence&&(s+=(t.position.currentViewSequence-t.position.lastCurrentViewSequence)*a),e.el.current.scrollTop=s}}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"dispatch",function(e){t.context.positionMSAStore.dispatch(e)}),t.el=createRef$1(),t}return _inherits(r,PureComponent),_createClass(r,[{key:"componentDidMount",value:function(){this.unsubscribe=this.context.positionMSAStore.subscribe(this.updateFromPositionStore),this.updateScrollPosition(!0)}},{key:"componentDidUpdate",value:function(){this.updateScrollPosition()}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){return this.hasBeenInitialized||(this.updateFromPositionStore(),this.hasBeenInitialized=!0),React.createElement(e,_objectSpread({ref:this.el,position:this.position,positionDispatch:this.dispatch},this.props))}}]),r}();return a.displayName="withPosition(".concat(e.displayName||e.name,")"),a.contextTypes={positionMSAStore:PropTypes.object},a}var metaMap=WeakMap&&new WeakMap,baseSetData=metaMap?function(e,t){return metaMap.set(e,t),e}:identity;function createCtor(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=baseCreate(e.prototype),o=e.apply(r,t);return isObject(o)?o:r}}var WRAP_BIND_FLAG=1;function createBind(e,t,r){var o=t&WRAP_BIND_FLAG,n=createCtor(e);return function t(){return(this&&this!==root$1&&this instanceof t?n:e).apply(o?r:this,arguments)}}var nativeMax$1=Math.max;function composeArgs(e,t,r,o){for(var n=-1,i=e.length,a=r.length,s=-1,c=t.length,u=nativeMax$1(i-a,0),l=Array(c+u),p=!o;++s<c;)l[s]=t[s];for(;++n<a;)(p||n<i)&&(l[r[n]]=e[n]);for(;u--;)l[s++]=e[n++];return l}var nativeMax$2=Math.max;function composeArgsRight(e,t,r,o){for(var n=-1,i=e.length,a=-1,s=r.length,c=-1,u=t.length,l=nativeMax$2(i-s,0),p=Array(l+u),f=!o;++n<l;)p[n]=e[n];for(var h=n;++c<u;)p[h+c]=t[c];for(;++a<s;)(f||n<i)&&(p[h+r[a]]=e[n++]);return p}function countHolders(e,t){for(var r=e.length,o=0;r--;)e[r]===t&&++o;return o}function baseLodash(){}var MAX_ARRAY_LENGTH=4294967295;function LazyWrapper(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=MAX_ARRAY_LENGTH,this.__views__=[]}function noop$1(){}LazyWrapper.prototype=baseCreate(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper;var getData=metaMap?function(e){return metaMap.get(e)}:noop$1,realNames={},objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty;function getFuncName(e){for(var t=e.name+"",r=realNames[t],o=hasOwnProperty$c.call(realNames,t)?r.length:0;o--;){var n=r[o],i=n.func;if(null==i||i==e)return n.name}return t}function LodashWrapper(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function wrapperClone(e){if(e instanceof LazyWrapper)return e.clone();var t=new LodashWrapper(e.__wrapped__,e.__chain__);return t.__actions__=copyArray(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}LodashWrapper.prototype=baseCreate(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper;var objectProto$g=Object.prototype,hasOwnProperty$d=objectProto$g.hasOwnProperty;function lodash(e){if(isObjectLike(e)&&!isArray(e)&&!(e instanceof LazyWrapper)){if(e instanceof LodashWrapper)return e;if(hasOwnProperty$d.call(e,"__wrapped__"))return wrapperClone(e)}return new LodashWrapper(e)}function isLaziable(e){var t=getFuncName(e),r=lodash[t];if("function"!=typeof r||!(t in LazyWrapper.prototype))return!1;if(e===r)return!0;var o=getData(r);return!!o&&e===o[0]}lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash;var setData=shortOut(baseSetData),reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;function getWrapDetails(e){var t=e.match(reWrapDetails);return t?t[1].split(reSplitDetails):[]}var reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function insertWrapDetails(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(reWrapComment,"{\n/* [wrapped with "+t+"] */\n")}function arrayEach(e,t){for(var r=-1,o=null==e?0:e.length;++r<o&&!1!==t(e[r],r,e););return e}function baseFindIndex(e,t,r,o){for(var n=e.length,i=r+(o?1:-1);o?i--:++i<n;)if(t(e[i],i,e))return i;return-1}function baseIsNaN(e){return e!=e}function strictIndexOf(e,t,r){for(var o=r-1,n=e.length;++o<n;)if(e[o]===t)return o;return-1}function baseIndexOf(e,t,r){return t==t?strictIndexOf(e,t,r):baseFindIndex(e,baseIsNaN,r)}function arrayIncludes(e,t){return!(null==e||!e.length)&&baseIndexOf(e,t,0)>-1}var WRAP_BIND_FLAG$1=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512,wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG$1],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]];function updateWrapDetails(e,t){return arrayEach(wrapFlags,function(r){var o="_."+r[0];t&r[1]&&!arrayIncludes(e,o)&&e.push(o)}),e.sort()}function setWrapToString(e,t,r){var o=t+"";return setToString(e,insertWrapDetails(o,updateWrapDetails(getWrapDetails(o),r)))}var WRAP_BIND_FLAG$2=1,WRAP_BIND_KEY_FLAG$1=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG$1=8,WRAP_PARTIAL_FLAG$1=32,WRAP_PARTIAL_RIGHT_FLAG$1=64;function createRecurry(e,t,r,o,n,i,a,s,c,u){var l=t&WRAP_CURRY_FLAG$1;t|=l?WRAP_PARTIAL_FLAG$1:WRAP_PARTIAL_RIGHT_FLAG$1,(t&=~(l?WRAP_PARTIAL_RIGHT_FLAG$1:WRAP_PARTIAL_FLAG$1))&WRAP_CURRY_BOUND_FLAG||(t&=~(WRAP_BIND_FLAG$2|WRAP_BIND_KEY_FLAG$1));var p=[e,t,n,l?i:void 0,l?a:void 0,l?void 0:i,l?void 0:a,s,c,u],f=r.apply(void 0,p);return isLaziable(e)&&setData(f,p),f.placeholder=o,setWrapToString(f,e,t)}function getHolder(e){return e.placeholder}var nativeMin=Math.min;function reorder(e,t){for(var r=e.length,o=nativeMin(t.length,r),n=copyArray(e);o--;){var i=t[o];e[o]=isIndex(i,r)?n[i]:void 0}return e}var PLACEHOLDER="__lodash_placeholder__";function replaceHolders(e,t){for(var r=-1,o=e.length,n=0,i=[];++r<o;){var a=e[r];a!==t&&a!==PLACEHOLDER||(e[r]=PLACEHOLDER,i[n++]=r)}return i}var WRAP_BIND_FLAG$3=1,WRAP_BIND_KEY_FLAG$2=2,WRAP_CURRY_FLAG$2=8,WRAP_CURRY_RIGHT_FLAG$1=16,WRAP_ARY_FLAG$1=128,WRAP_FLIP_FLAG$1=512;function createHybrid(e,t,r,o,n,i,a,s,c,u){var l=t&WRAP_ARY_FLAG$1,p=t&WRAP_BIND_FLAG$3,f=t&WRAP_BIND_KEY_FLAG$2,h=t&(WRAP_CURRY_FLAG$2|WRAP_CURRY_RIGHT_FLAG$1),d=t&WRAP_FLIP_FLAG$1,y=f?void 0:createCtor(e);return function v(){for(var g=arguments.length,b=Array(g),m=g;m--;)b[m]=arguments[m];if(h)var _=getHolder(v),P=countHolders(b,_);if(o&&(b=composeArgs(b,o,n,h)),i&&(b=composeArgsRight(b,i,a,h)),g-=P,h&&g<u){var T=replaceHolders(b,_);return createRecurry(e,t,createHybrid,v.placeholder,r,b,T,s,c,u-g)}var S=p?r:this,C=f?S[e]:e;return g=b.length,s?b=reorder(b,s):d&&g>1&&b.reverse(),l&&c<g&&(b.length=c),this&&this!==root$1&&this instanceof v&&(C=y||createCtor(C)),C.apply(S,b)}}function createCurry(e,t,r){var o=createCtor(e);return function n(){for(var i=arguments.length,a=Array(i),s=i,c=getHolder(n);s--;)a[s]=arguments[s];var u=i<3&&a[0]!==c&&a[i-1]!==c?[]:replaceHolders(a,c);return(i-=u.length)<r?createRecurry(e,t,createHybrid,n.placeholder,void 0,a,u,void 0,void 0,r-i):apply(this&&this!==root$1&&this instanceof n?o:e,this,a)}}var WRAP_BIND_FLAG$4=1;function createPartial(e,t,r,o){var n=t&WRAP_BIND_FLAG$4,i=createCtor(e);return function t(){for(var a=-1,s=arguments.length,c=-1,u=o.length,l=Array(u+s),p=this&&this!==root$1&&this instanceof t?i:e;++c<u;)l[c]=o[c];for(;s--;)l[c++]=arguments[++a];return apply(p,n?r:this,l)}}var PLACEHOLDER$1="__lodash_placeholder__",WRAP_BIND_FLAG$5=1,WRAP_BIND_KEY_FLAG$3=2,WRAP_CURRY_BOUND_FLAG$1=4,WRAP_CURRY_FLAG$3=8,WRAP_ARY_FLAG$2=128,WRAP_REARG_FLAG$1=256,nativeMin$1=Math.min;function mergeData(e,t){var r=e[1],o=t[1],n=r|o,i=n<(WRAP_BIND_FLAG$5|WRAP_BIND_KEY_FLAG$3|WRAP_ARY_FLAG$2),a=o==WRAP_ARY_FLAG$2&&r==WRAP_CURRY_FLAG$3||o==WRAP_ARY_FLAG$2&&r==WRAP_REARG_FLAG$1&&e[7].length<=t[8]||o==(WRAP_ARY_FLAG$2|WRAP_REARG_FLAG$1)&&t[7].length<=t[8]&&r==WRAP_CURRY_FLAG$3;if(!i&&!a)return e;o&WRAP_BIND_FLAG$5&&(e[2]=t[2],n|=r&WRAP_BIND_FLAG$5?0:WRAP_CURRY_BOUND_FLAG$1);var s=t[3];if(s){var c=e[3];e[3]=c?composeArgs(c,s,t[4]):s,e[4]=c?replaceHolders(e[3],PLACEHOLDER$1):t[4]}return(s=t[5])&&(c=e[5],e[5]=c?composeArgsRight(c,s,t[6]):s,e[6]=c?replaceHolders(e[5],PLACEHOLDER$1):t[6]),(s=t[7])&&(e[7]=s),o&WRAP_ARY_FLAG$2&&(e[8]=null==e[8]?t[8]:nativeMin$1(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=n,e}var NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var INFINITY$2=1/0,MAX_INTEGER=1.7976931348623157e308;function toFinite(e){return e?(e=toNumber(e))===INFINITY$2||e===-INFINITY$2?(e<0?-1:1)*MAX_INTEGER:e==e?e:0:0===e?e:0}function toInteger(e){var t=toFinite(e),r=t%1;return t==t?r?t-r:t:0}var FUNC_ERROR_TEXT$1="Expected a function",WRAP_BIND_FLAG$6=1,WRAP_BIND_KEY_FLAG$4=2,WRAP_CURRY_FLAG$4=8,WRAP_CURRY_RIGHT_FLAG$2=16,WRAP_PARTIAL_FLAG$2=32,WRAP_PARTIAL_RIGHT_FLAG$2=64,nativeMax$3=Math.max;function createWrap(e,t,r,o,n,i,a,s){var c=t&WRAP_BIND_KEY_FLAG$4;if(!c&&"function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);var u=o?o.length:0;if(u||(t&=~(WRAP_PARTIAL_FLAG$2|WRAP_PARTIAL_RIGHT_FLAG$2),o=n=void 0),a=void 0===a?a:nativeMax$3(toInteger(a),0),s=void 0===s?s:toInteger(s),u-=n?n.length:0,t&WRAP_PARTIAL_RIGHT_FLAG$2){var l=o,p=n;o=n=void 0}var f=c?void 0:getData(e),h=[e,t,r,o,n,l,p,i,a,s];if(f&&mergeData(h,f),e=h[0],t=h[1],r=h[2],o=h[3],n=h[4],!(s=h[9]=void 0===h[9]?c?0:e.length:nativeMax$3(h[9]-u,0))&&t&(WRAP_CURRY_FLAG$4|WRAP_CURRY_RIGHT_FLAG$2)&&(t&=~(WRAP_CURRY_FLAG$4|WRAP_CURRY_RIGHT_FLAG$2)),t&&t!=WRAP_BIND_FLAG$6)d=t==WRAP_CURRY_FLAG$4||t==WRAP_CURRY_RIGHT_FLAG$2?createCurry(e,t,s):t!=WRAP_PARTIAL_FLAG$2&&t!=(WRAP_BIND_FLAG$6|WRAP_PARTIAL_FLAG$2)||n.length?createHybrid.apply(void 0,h):createPartial(e,t,r,o);else var d=createBind(e,t,r);return setWrapToString((f?baseSetData:setData)(d,h),e,t)}var WRAP_PARTIAL_RIGHT_FLAG$3=64,partialRight=baseRest(function(e,t){var r=replaceHolders(t,getHolder(partialRight));return createWrap(e,WRAP_PARTIAL_RIGHT_FLAG$3,void 0,t,r)});function defaultEqualityCheck(e,t){return e===t}function areArgumentsShallowlyEqual(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var o=t.length,n=0;n<o;n++)if(!e(t[n],r[n]))return!1;return!0}function defaultMemoize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultEqualityCheck,r=null,o=null;return function(){return areArgumentsShallowlyEqual(t,r,arguments)||(o=e.apply(null,arguments)),r=arguments,o}}function getDependencies(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var r=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}function createSelectorCreator(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];var i=0,a=o.pop(),s=getDependencies(o),c=e.apply(void 0,[function(){return i++,a.apply(null,arguments)}].concat(r)),u=e(function(){for(var e=[],t=s.length,r=0;r<t;r++)e.push(s[r].apply(null,arguments));return c.apply(null,e)});return u.resultFunc=a,u.dependencies=s,u.recomputations=function(){return i},u.resetRecomputations=function(){return i=0},u}}partialRight.placeholder={};var createSelector=createSelectorCreator(defaultMemoize);function shallowEqual$1(e,t,r,o){var n=r?r.call(o,e,t):void 0;if(void 0!==n)return!!n;if(e===t)return!0;if("object"!==_typeof(e)||!e||"object"!==_typeof(t)||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),c=0;c<i.length;c++){var u=i[c];if(!s(u))return!1;var l=e[u],p=t[u];if(!1===(n=r?r.call(o,l,p,u):void 0)||void 0===n&&l!==p)return!1}return!0}var shallowSelect=createSelectorCreator(defaultMemoize,shallowEqual$1);function autoBind(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];e[r]=e[r].bind(e)}}var ListComponent=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,PureComponent),_createClass(t,[{key:"renderTile",value:function(e){var t=this.props.tileComponent;if(e in this.props.componentCache)return this.props.componentCache[e];var r=React.createElement(t,{key:e,index:e});return this.props.componentCache[e]=r,r}},{key:"render",value:function(){for(var e=[],t=this.props.startTile;t<this.props.endTile;t++)e.push(this.renderTile(t));return 0===e.length&&console.warn("The TileComponent rendered returned 0 elements from ".concat(this.props.startTile," to ").concat(this.props.endTile)),React.createElement("div",null,e)}}]),t}();ListComponent.propTypes={startTile:PropTypes.number.isRequired,endTile:PropTypes.number.isRequired,componentCache:PropTypes.func.isRequired};var YBarComponent=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).el=createRef$1(),r}return _inherits(t,PureComponent),_createClass(t,[{key:"render",value:function(){var e=this.props,t=(e.yPosOffset,e.tileHeight,e.currentViewSequence,e.sequences,e.height),r=(e.cacheElements,e.tileComponent,e.nrYTiles,e.position,e.positionDispatch,e.componentCache,_objectWithoutProperties(e,["yPosOffset","tileHeight","currentViewSequence","sequences","height","cacheElements","tileComponent","nrYTiles","position","positionDispatch","componentCache"])),o={height:t,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},n=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),i=Math.min(this.props.sequences.length,n+Math.ceil(t/this.props.tileHeight)+2*this.props.cacheElements);return this.props.position.lastCurrentViewSequence=this.props.position.currentViewSequence,this.props.position.lastStartYTile=n,React.createElement("div",r,React.createElement("div",{style:o,ref:this.el},React.createElement(ListComponent,{componentCache:this.props.componentCache,startTile:n,endTile:i,tileComponent:this.props.tileComponent})))}}]),t}();YBarComponent.propTypes={tileComponent:PropTypes.oneOfType([PropTypes.func,PropTypes.object]).isRequired,cacheElements:PropTypes.number.isRequired,tileHeight:PropTypes.number.isRequired,nrYTiles:PropTypes.number.isRequired,componentCache:PropTypes.func.isRequired};var YBar=withPositionConsumer(YBarComponent,{withY:!0});function _createLabel(e){var t=e.sequences,r=e.tileHeight,o=e.labelComponent,n=e.labelStyle,i=e.labelAttributes;return function(e){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,_getPrototypeOf(a).apply(this,arguments))}return _inherits(a,PureComponent),_createClass(a,[{key:"render",value:function(){var e=this.props,a=e.index,s=_objectWithoutProperties(e,["index"]);if(o){var c=o;return React.createElement(c,{sequence:t[a],index:a})}s.style=_objectSpread({},this.props.style,{height:r},n);var u=_objectSpread({},s,i);return React.createElement("div",u,t[a].name)}}]),a}()}var HTMLLabelsComponent=function(e){function t(e){var r;return _classCallCheck(this,t),autoBind(_assertThisInitialized(_assertThisInitialized(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))),"createLabel"),r.label=shallowSelect(partialRight(pick,r.constructor.labelProps),r.createLabel),r}return _inherits(t,PureComponent),_createClass(t,[{key:"createLabel",value:function(e){return this.cache=function(){},_createLabel(e)}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,r=(e.dispatch,e.labelComponent,e.labelStyle,e.labelAttributes,_objectWithoutProperties(e,["cacheElements","dispatch","labelComponent","labelStyle","labelAttributes"]));return React.createElement(YBar,_extends({tileComponent:this.label(this.props),cacheElements:t,componentCache:this.cache},r))}}]),t}();_defineProperty(HTMLLabelsComponent,"labelProps",["sequences","tileHeight","labelComponent","labelStyle","labelAttributes"]),HTMLLabelsComponent.defaultProps={cacheElements:10,labelStyle:{}},HTMLLabelsComponent.propTypes={font:PropTypes.string,labelComponent:PropTypes.oneOfType([PropTypes.object,PropTypes.func]),style:PropTypes.object,labelStyle:PropTypes.object,labelAttributes:PropTypes.object};var mapStateToProps=function(e){return{height:e.props.height,tileHeight:e.props.tileHeight,sequences:e.sequences.raw,nrYTiles:e.sequenceStats.nrYTiles}},Labels=msaConnect(mapStateToProps)(HTMLLabelsComponent),XBarComponent=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).el=createRef$1(),r}return _inherits(t,PureComponent),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.tileWidth,r=e.sequences,o=e.width,n=(e.cacheElements,e.tileComponent),i=(e.nrXTiles,e.maxLength,e.position,e.positionDispatch,e.componentCache,_objectWithoutProperties(e,["tileWidth","sequences","width","cacheElements","tileComponent","nrXTiles","maxLength","position","positionDispatch","componentCache"])),a={width:o,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},s=_objectSpread({},this.props.style,{height:this.props.height}),c={tileWidth:t,sequences:r,tileComponent:n},u=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),l=Math.min(this.props.maxLength,u+this.props.nrXTiles+2*this.props.cacheElements),p=this.props.width+2*this.props.cacheElements*this.props.tileWidth;return this.props.position.lastStartXTile=u,this.props.position.lastCurrentViewSequencePosition=this.props.position.currentViewSequencePosition,React.createElement("div",_extends({style:s},i),React.createElement("div",{style:a,ref:this.el},React.createElement(ListComponent,_extends({},c,{componentCache:this.props.componentCache,startTile:u,endTile:l,maxWidth:p}))))}}]),t}();XBarComponent.propTypes={tileComponent:PropTypes.oneOfType([PropTypes.func,PropTypes.object]).isRequired,cacheElements:PropTypes.number.isRequired,tileWidth:PropTypes.number.isRequired,nrXTiles:PropTypes.number.isRequired,maxLength:PropTypes.number.isRequired,componentCache:PropTypes.func.isRequired};var XBar=withPositionConsumer(XBarComponent,{withX:!0});function _createMarker(e){var t=e.markerSteps,r=e.startIndex,o=e.tileWidth,n=(e.font,e.markerComponent),i=e.markerStyle,a=e.markerAttributes;return function(e){function s(){return _classCallCheck(this,s),_possibleConstructorReturn(this,_getPrototypeOf(s).apply(this,arguments))}return _inherits(s,PureComponent),_createClass(s,[{key:"render",value:function(){var e,s=this.props,c=s.index,u=_objectWithoutProperties(s,["index"]);if(n){var l=n;return React.createElement(l,{index:c})}u.style=_objectSpread({width:o,display:"inline-block",textAlign:"center"},i),e=c%t==0?c+0+r:".";var p=_objectSpread({},u,a);return React.createElement("div",p,e)}}]),s}()}var HTMLPositionBarComponent=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).cache=function(){},autoBind(_assertThisInitialized(_assertThisInitialized(r)),"createMarker"),r.marker=shallowSelect(partialRight(pick,r.constructor.markerAttributes),r.createMarker),r}return _inherits(t,PureComponent),_createClass(t,[{key:"createMarker",value:function(e){return this.cache=function(){},_createMarker(e)}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,r=(e.markerSteps,e.startIndex,e.dispatch,e.markerComponent,e.markerStyle,_objectWithoutProperties(e,["cacheElements","markerSteps","startIndex","dispatch","markerComponent","markerStyle"]));return React.createElement(XBar,_extends({tileComponent:this.marker(this.props),cacheElements:t,componentCache:this.cache},r))}}]),t}();_defineProperty(HTMLPositionBarComponent,"markerAttributes",["markerSteps","startIndex","tileWidth","markerComponent","markerStyle","markerAttributes"]),HTMLPositionBarComponent.defaultProps={style:{font:"12px Arial"},height:15,markerSteps:2,startIndex:1,cacheElements:10,markerStyle:{}},HTMLPositionBarComponent.propTypes={font:PropTypes.string,height:PropTypes.number,markerSteps:PropTypes.number,startIndex:PropTypes.number,markerComponent:PropTypes.oneOfType([PropTypes.object,PropTypes.func]),style:PropTypes.object,markerStyle:PropTypes.object,markerAttributes:PropTypes.object};var mapStateToProps$1=function(e){return{sequences:e.sequences.raw,maxLength:e.sequences.maxLength,width:e.props.width,tileWidth:e.props.tileWidth,nrXTiles:e.sequenceStats.nrXTiles}},PositionBar=msaConnect(mapStateToProps$1)(HTMLPositionBarComponent);function baseFilter(e,t){var r=[];return baseEach(e,function(e,o,n){t(e,o,n)&&r.push(e)}),r}var FUNC_ERROR_TEXT$2="Expected a function";function negate(e){if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$2);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function reject(e,t){return(isArray(e)?arrayFilter:baseFilter)(e,negate(baseIteratee(t,3)))}function baseExtremum(e,t,r){for(var o=-1,n=e.length;++o<n;){var i=e[o],a=t(i);if(null!=a&&(void 0===s?a==a&&!isSymbol(a):r(a,s)))var s=a,c=i}return c}function baseGt(e,t){return e>t}function max(e){return e&&e.length?baseExtremum(e,identity,baseGt):void 0}function mapValues(e,t){var r={};return t=baseIteratee(t,3),baseForOwn(e,function(e,o,n){baseAssignValue(r,o,t(e,o,n))}),r}function baseMap(e,t){var r=-1,o=isArrayLike(e)?Array(e.length):[];return baseEach(e,function(e,n,i){o[++r]=t(e,n,i)}),o}function map(e,t){return(isArray(e)?arrayMap:baseMap)(e,baseIteratee(t,3))}var assignIn=createAssigner(function(e,t){copyObject(t,keysIn$1(t),e)});function forEach(e,t){return(isArray(e)?arrayEach:baseEach)(e,castFunction(t))}var stat=function e(t,r){if(!this||this.constructor!==e)return new e(t);if(void 0===t||"string"==typeof t)throw new TypeError("you need to give the seq stat an array");this.resetSeqs(t),this.alphabetSize=4,this._useBackground=!1,this.useGaps=!1,this.ignoredChars=["-","*"],assignIn(this,r)};stat.prototype.addSeq=function(e){this.seqs.push(e),this._reset()},stat.prototype.removeSeq=function(e){"number"==typeof e?this.seqs.splice(e,1):forEach(this.seqs,function(t,r){e===t&&this.seqs.splice(r,1)}.bind(this)),this._reset()},stat.prototype.addSeqs=function(e){e.forEach(function(e){this.addSeq(e)}.bind(this))},stat.prototype.resetSeqs=function(e){if(this.seqs=[],!e instanceof Array||"at"in e){this.mseqs=e;var t=function(){var e=this.mseqs.pluck("seq");this.resetSeqs(e)};e.on("add change reset ",t,this),t.call(this)}else this.addSeqs(e),this._reset()};var calcValues=["consensus","frequency","maxLength","ic","gaps"];function _createBar(e){var t=e.columnHeights,r=e.tileWidth,o=e.height,n=e.fillColor;return e.barStyle,e.barAttributes,function(e){function i(){return _classCallCheck(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,PureComponent),_createClass(i,[{key:"render",value:function(){var e=this.props,i=e.index,a=_objectWithoutProperties(e,["index"]);return a.style={height:Math.round(t[i]*o),width:r,display:"inline-block",textAlign:"center",backgroundColor:n},React.createElement("div",a)}}]),i}()}stat.prototype._reset=function(){for(var e=0;e<calcValues.length;e++)this["_"+calcValues[e]]=void 0;this._identity=void 0,this._background=void 0},stat.prototype.setBackground=function(e){this._useBackground=e,this._reset()},stat.prototype.useBackground=function(){this.setBackground(!0)},stat.prototype.setDNA=function(){this.alphabetSize=4},stat.prototype.setProtein=function(){this.alphabetSize=20},calcValues.forEach(function(e){stat.prototype[e]=function(){return void 0===this["_"+e]&&(this["_"+e]=this[e+"Calc"]()),this["_"+e]}}),stat.prototype.identity=function(e){var t;return(void 0===this._identity||e)&&(t=this.identityCalc(e),this._identity=void 0),this._identity||t},stat.prototype.background=function(){return void 0!==this.bg?this.bg:(void 0===this._background&&this.backgroundCalc(),this._background)},stat.prototype.frequencyCalc=function(e){var t,r;t=new Array(this.maxLength()),r=new Array(this.seqs.length);var o=this.ignoredChars;return void 0!==e&&e.all&&(o=[]),forEach(this.seqs,function(e){forEach(e,function(e,n){o.indexOf(e)>=0||(void 0===t[n]&&(t[n]={}),void 0===t[n][e]&&(t[n][e]=0),t[n][e]++,void 0===r[n]&&(r[n]=0),r[n]++)})}),forEach(t,function(e,o){return forEach(e,function(e,n){return t[o][n]=e/r[o]})}),this._frequency=t,t},stat.prototype.backgroundCalc=function(){var e={},t=0;return forEach(this.seqs,function(r){forEach(r,function(r){return void 0===e[r]&&(e[r]=0),e[r]++,t++})}),e=mapValues(e,function(e){return e/t}),this._background=e,e},stat.prototype.icCalc=function(){var e=this.frequency();if(this._useBackground)var t=this.background();var r=this.ignoredChars,o=this._useBackground,n=map(e,function(e){return reduce(e,function(e,n,i){return r.indexOf(i)>=0?e:(o&&(n/=t[i]),e-n*(Math.log(n)/Math.log(2)))},0)});return this._ic=n,n},stat.prototype.conservation=function(e){var t=this.ic(),r=this.gaps(),o=this;e=e||this.alphabetSize;var n=Math.log(e)/Math.log(2),i=0;return map(t,function(e){var t=n-e;return o.useGaps&&(t*=1-r[i++]),t})},stat.prototype.conservResidue=function(e){var t,r,o=e?e.alphabetSize:void 0,n=this.ignoredChars;return t=void 0!==e&&e.scaled?this.scale(this.conservation(o)):this.conservation(o),map(this.frequency(),function(e,o){r=reject(r(e),function(e){return n.indexOf(e)>=0});var i={};return forEach(r,function(r){i[r]=e[r]*t[o]}),i})},stat.prototype.conservResidue2=function(e){var t=this.frequency(),r=this.conservation(e),o=this.background();return map(t,function(e,n){return map(e,function(e){var i=reduce(t[n],function(e,t){return e+t/o[n]},0);return e/o[n]/i*r[n]},0)})},stat.prototype.scale=function(e,t){t=t||this.alphabetSize;var r=Math.log(t)/Math.log(2);return map(e,function(e){return e/r})},stat.prototype.maxLengthCalc=function(){return 0===this.seqs.length?0:max(this.seqs,function(e){return e.length}).length},stat.prototype.consensusCalc=function(){var e=new Array(this.maxLength());return forEach(this.seqs,function(t){forEach(t,function(t,r){void 0===e[r]&&(e[r]={}),void 0===e[r][t]&&(e[r][t]=0),e[r][t]++})}),this._consensus=reduce(e,function(e,t){return e+max(Object.keys(t),function(e){return t[e]})},""),this._consensus},stat.prototype.identityCalc=function(e){var t=e||this.consensus();return this._identity=this.seqs.map(function(e){for(var r=0,o=0,n=0;n<e.length;n++)"-"!==e[n]&&"-"!==t[n]&&(o++,e[n]===t[n]&&r++);return r/o}),this._identity},stat.prototype.gapsCalc=function(){var e=this.maxLength();if(e<=1||void 0===e)return[];var t=new Array(this.maxLength());return forEach(this.seqs,function(e){forEach(e,function(e,r){void 0===t[r]&&(t[r]={g:0,t:0}),e="-"===e?"g":"t",t[r][e]++})}),this._gaps=map(t,function(e){return e.g/(e.g+e.t)}),this._gaps};var HTMLOverviewBarComponent=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).cache=function(){},r.initializeColumnHeights(),autoBind(_assertThisInitialized(_assertThisInitialized(r)),"createBar"),r.bar=shallowSelect(function(e){return pick(e,r.constructor.barAttributes)},r.columnHeights,r.createBar),r}return _inherits(t,PureComponent),_createClass(t,[{key:"createBar",value:function(e,t){return this.cache=function(){},_createBar(_objectSpread({},e,{columnHeights:t}))}},{key:"initializeColumnHeights",value:function(){this.columnHeights=createSelector(function(e){return e.sequences},function(e){return e.method},function(e,t){var r,o=stat(e.map(function(e){return e.sequence}));switch(t){case"conservation":r=o.scale(o.conservation());break;case"information-content":r=o.scale(o.ic());break;default:console.error(t+"is an invalid aggregation method for <OverviewBar />")}return r}).bind(this)}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,r=(e.height,e.method,e.fillColor,e.dispatch,e.barStyle,e.barAttributes,_objectWithoutProperties(e,["cacheElements","height","method","fillColor","dispatch","barStyle","barAttributes"]));return React.createElement(XBar,_extends({tileComponent:this.bar(this.props),cacheElements:t,componentCache:this.cache},r))}}]),t}();_defineProperty(HTMLOverviewBarComponent,"barAttributes",["tileWidth","height","fillColor","barStyle","barAttributes"]),HTMLOverviewBarComponent.defaultProps={height:50,fillColor:"#999999",method:"conservation",cacheElements:10},HTMLOverviewBarComponent.propTypes={method:PropTypes.oneOf(["information-content","conservation"]),height:PropTypes.number,fillColor:PropTypes.string,style:PropTypes.object,barStyle:PropTypes.object,barAttributes:PropTypes.object};var mapStateToProps$2=function(e){return{sequences:e.sequences.raw,maxLength:e.sequences.maxLength,width:e.props.width,tileWidth:e.props.tileWidth,nrXTiles:e.sequenceStats.nrXTiles}},OverviewBar=msaConnect(mapStateToProps$2)(HTMLOverviewBarComponent);function isEqual(e,t){return baseIsEqual(e,t)}var nativeMin$2=Math.min;function createRound(e){var t=Math[e];return function(e,r){if(e=toNumber(e),r=null==r?0:nativeMin$2(toInteger(r),292)){var o=(toString(e)+"e").split("e");return+((o=(toString(t(o[0]+"e"+(+o[1]+r)))+"e").split("e"))[0]+"e"+(+o[1]-r))}return t(e)}}var floor=createRound("floor");function baseClamp(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}function clamp(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=toNumber(r))==r?r:0),void 0!==t&&(t=(t=toNumber(t))==t?t:0),baseClamp(toNumber(e),t,r)}function baseAssign(e,t){return e&&copyObject(t,keys(t),e)}function baseAssignIn(e,t){return e&&copyObject(t,keysIn$1(t),e)}function copySymbols(e,t){return copyObject(e,getSymbols(e),t)}var nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols$1?function(e){for(var t=[];e;)arrayPush(t,getSymbols(e)),e=getPrototype(e);return t}:stubArray;function copySymbolsIn(e,t){return copyObject(e,getSymbolsIn(e),t)}function getAllKeysIn(e){return baseGetAllKeys(e,keysIn$1,getSymbolsIn)}var objectProto$h=Object.prototype,hasOwnProperty$e=objectProto$h.hasOwnProperty;function initCloneArray(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&hasOwnProperty$e.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function cloneDataView(e,t){var r=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var reFlags=/\w*$/;function cloneRegExp(e){var t=new e.constructor(e.source,reFlags.exec(e));return t.lastIndex=e.lastIndex,t}var symbolProto$2=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf$1=symbolProto$2?symbolProto$2.valueOf:void 0;function cloneSymbol(e){return symbolValueOf$1?Object(symbolValueOf$1.call(e)):{}}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(e,t,r){var o=e.constructor;switch(t){case arrayBufferTag$2:return cloneArrayBuffer(e);case boolTag$2:case dateTag$2:return new o(+e);case dataViewTag$3:return cloneDataView(e,r);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(e,r);case mapTag$3:return new o;case numberTag$2:case stringTag$2:return new o(e);case regexpTag$2:return cloneRegExp(e);case setTag$3:return new o;case symbolTag$2:return cloneSymbol(e)}}var mapTag$4="[object Map]";function baseIsMap(e){return isObjectLike(e)&&getTag$1(e)==mapTag$4}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$4="[object Set]";function baseIsSet(e){return isObjectLike(e)&&getTag$1(e)==setTag$4}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,argsTag$3="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",symbolTag$3="[object Symbol]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",cloneableTags={};function baseClone(e,t,r,o,n,i){var a,s=t&CLONE_DEEP_FLAG,c=t&CLONE_FLAT_FLAG,u=t&CLONE_SYMBOLS_FLAG;if(r&&(a=n?r(e,o,n,i):r(e)),void 0!==a)return a;if(!isObject(e))return e;var l=isArray(e);if(l){if(a=initCloneArray(e),!s)return copyArray(e,a)}else{var p=getTag$1(e),f=p==funcTag$2||p==genTag$1;if(isBuffer(e))return cloneBuffer(e,s);if(p==objectTag$4||p==argsTag$3||f&&!n){if(a=c||f?{}:initCloneObject(e),!s)return c?copySymbolsIn(e,baseAssignIn(a,e)):copySymbols(e,baseAssign(a,e))}else{if(!cloneableTags[p])return n?e:{};a=initCloneByTag(e,p,s)}}i||(i=new Stack);var h=i.get(e);if(h)return h;if(i.set(e,a),isSet(e))return e.forEach(function(o){a.add(baseClone(o,t,r,o,e,i))}),a;if(isMap(e))return e.forEach(function(o,n){a.set(n,baseClone(o,t,r,n,e,i))}),a;var d=u?c?getAllKeysIn:getAllKeys:c?keysIn:keys,y=l?void 0:d(e);return arrayEach(y||e,function(o,n){y&&(o=e[n=o]),assignValue(a,n,baseClone(o,t,r,n,e,i))}),a}function last(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function baseSlice(e,t,r){var o=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(r=r>n?n:r)<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(n);++o<n;)i[o]=e[o+t];return i}function parent(e,t){return t.length<2?e:baseGet(e,baseSlice(t,0,-1))}function baseUnset(e,t){return null==(e=parent(e,t=castPath(t,e)))||delete e[toKey(last(t))]}function customOmitClone(e){return isPlainObject$2(e)?void 0:e}cloneableTags[argsTag$3]=cloneableTags[arrayTag$2]=cloneableTags[arrayBufferTag$3]=cloneableTags[dataViewTag$4]=cloneableTags[boolTag$3]=cloneableTags[dateTag$3]=cloneableTags[float32Tag$2]=cloneableTags[float64Tag$2]=cloneableTags[int8Tag$2]=cloneableTags[int16Tag$2]=cloneableTags[int32Tag$2]=cloneableTags[mapTag$5]=cloneableTags[numberTag$3]=cloneableTags[objectTag$4]=cloneableTags[regexpTag$3]=cloneableTags[setTag$5]=cloneableTags[stringTag$3]=cloneableTags[symbolTag$3]=cloneableTags[uint8Tag$2]=cloneableTags[uint8ClampedTag$2]=cloneableTags[uint16Tag$2]=cloneableTags[uint32Tag$2]=!0,cloneableTags[errorTag$2]=cloneableTags[funcTag$2]=cloneableTags[weakMapTag$2]=!1;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$1=4,omit=flatRest(function(e,t){var r={};if(null==e)return r;var o=!1;t=arrayMap(t,function(t){return t=castPath(t,e),o||(o=t.length>1),t}),copyObject(e,getAllKeysIn(e),r),o&&(r=baseClone(r,CLONE_DEEP_FLAG$1|CLONE_FLAT_FLAG$1|CLONE_SYMBOLS_FLAG$1,customOmitClone));for(var n=t.length;n--;)baseUnset(r,t[n]);return r}),Mouse=function e(){_classCallCheck(this,e)};_defineProperty(Mouse,"rel",function(e){if(void 0!==e.changedTouches)return Mouse.rel(e.changedTouches[0]);var t=e.offsetX,r=e.offsetY;if(void 0===t){var o=e.target||e.srcElement,n=o.getBoundingClientRect();if(t=e.clientX-n.left,r=e.clientY-n.top,void 0===t&&(t=e.pageX-o.offsetLeft,r=e.pageY-o.offsetTop,void 0===t))return}return[t,r]}),_defineProperty(Mouse,"abs",function(e){if(void 0!==e.changedTouches)return Mouse.abs(e.changedTouches[0]);var t=e.pageX,r=e.pageY;return void 0===t&&(t=e.layerX,r=e.layerY),void 0===t&&(t=e.clientX,r=e.clientY),void 0===t&&(t=e.x,r=e.y),[t,r]}),_defineProperty(Mouse,"wheelDelta",function(e){var t=[e.deltaX,e.deltaY];return void 0===t[0]&&e.mozMovementX&&(t=[0,e.mozMovementX]),isNaN(t[0])&&(t[0]=0),isNaN(t[1])&&(t[1]=0),t});var IconBase=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},o=i(React),n=i(PropTypes);function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t=e.children,n=e.width,i=e.height,a=e.style,s=void 0===a?{}:a,c=function(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}(e,["children","width","height","style"]);return o.default.createElement("svg",r({children:t,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:i,width:n,style:s},c))};a.propTypes={children:n.default.node.isRequired,width:n.default.oneOfType([n.default.number,n.default.string]),height:n.default.oneOfType([n.default.number,n.default.string]),style:n.default.object},t.default=a});unwrapExports(IconBase);var AutoscaleIcon_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},o=i(React),n=i(IconBase);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement(n.default,r({viewBox:"0 0 16 16"},e),o.default.createElement("path",{d:"M4 0H0v4h1V1h3V0zm11 0h-3v1h3v3h1V0h-1zM1 15v-3H0v4h4v-1H1zm14-3v3h-3v1h4v-4h-1zm-2-3l-.008-.003L11.5 10.5 9 8l2.5-2.5L12.971 7H13V3H9v.03l1.5 1.47L8 7 5.5 4.5 7 3.03V3H3v4l1.5-1.5L7 8l-2.5 2.5L3 9v4h4l-1.5-1.5L8 9l2.5 2.5L9 13h4V9z"}))}}),AutoscaleIcon=unwrapExports(AutoscaleIcon_1),ZoomPlusIcon_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},o=i(React),n=i(IconBase);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement(n.default,r({viewBox:"0 0 16 16"},e),o.default.createElement("path",{d:"M.013 1.012V15h13.999V1.012H.013zm10.999 7.995H8.013v2.999h-2V9.007h-3V7.008h3V4.01h2v2.998h2.999v1.999z"}))}}),ZoomPlusIcon=unwrapExports(ZoomPlusIcon_1),ZoomMinusIcon_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},o=i(React),n=i(IconBase);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement(n.default,r({viewBox:"0 0 16 16"},e),o.default.createElement("path",{d:"M.004 1v14h14V1h-14zM11 9H3V7h8v2z"}))}}),ZoomMinusIcon=unwrapExports(ZoomMinusIcon_1);function PlotlyIcon(){return React.createElement("svg",{height:"1em",width:"1.542em",viewBox:"0 0 1542 1000"},React.createElement("path",{d:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)",fill:"rgb(68, 122, 219)"}))}var ModBar=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,PureComponent),_createClass(t,[{key:"render",value:function(){var e=_objectSpread({opacity:.9,backgroundColor:"white"},this.props.style),t={position:"relative",fontSize:"16px",padding:"3px 4px",cursor:"pointer",lineHeight:"normal",textDecoration:"none",color:"black"};return React.createElement("div",{style:e},React.createElement("div",{style:t},React.createElement(ZoomPlusIcon,{width:20,height:20})),React.createElement("div",{style:t},React.createElement(ZoomMinusIcon,{width:20,height:20})),React.createElement("div",{style:t},React.createElement(AutoscaleIcon,{width:20,height:20})),React.createElement("a",{href:"https://plot.ly/",target:"_blank",rel:"noreferrer noopener","data-title":"Produced with Plotly",style:t},React.createElement(PlotlyIcon,{width:20,height:20})))}}]),t}(),updateMainStore=createAction("MAINSTORE_UPDATE"),movePosition=createAction("POSITION_MOVE"),updatePosition=createAction("POSITION_UPDATE"),actions$1={updateMainStore:updateMainStore,updatePosition:updatePosition,movePosition:movePosition};function commonPositionReducer(e,t){var r=e.sequences.maxLength*e.props.tileWidth-e.props.width;t.xPos=clamp(t.xPos,0,r);var o=e.sequences.raw.length*e.props.tileHeight-e.props.height;return t.yPos=clamp(t.yPos,0,o),_objectSpread({},e,{position:t})}var relativePositionReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0}},t=arguments.length>1?arguments[1]:void 0,r=e.position;switch(t.type){case movePosition.key:var o=_objectSpread({},r);return o.xPos+=t.payload.xMovement||0,o.yPos+=t.payload.yMovement||0,commonPositionReducer(e,o);case updatePosition.key:return commonPositionReducer(e,{xPos:t.payload.xPos||r.xPos,yPos:t.payload.yPos||r.yPos});default:return e}};function positionReducer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0}},t=arguments.length>1?arguments[1]:void 0,r=e,o=e.position;switch(t.type){case updateMainStore.key:r=_objectSpread({},pick(r,["props","sequenceStats","sequences"]),t.payload);break;case updatePosition.key:case movePosition.key:o=relativePositionReducer(r,t).position;break;default:return r}return _objectSpread({},r,{xPosOffset:-o.xPos%r.props.tileWidth,yPosOffset:-o.yPos%r.props.tileWidth,currentViewSequence:clamp(floor(o.yPos/r.props.tileHeight),0,r.sequences.length-1),currentViewSequencePosition:clamp(floor(o.xPos/r.props.tileWidth),0,r.sequences.maxLength),position:o})}function requestAnimation(e,t){void 0===e.nextFrame&&(e.nextFrame=window.requestAnimationFrame(function(){t(),this.nextFrame=void 0}.bind(e)))}var FakeScroll=function(e){function t(e){var r;return _classCallCheck(this,t),_defineProperty(_assertThisInitialized(_assertThisInitialized(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))),"onScroll",function(e){requestAnimation(_assertThisInitialized(_assertThisInitialized(r)),function(){var e={xMovement:r.el.current.scrollLeft-r.props.position.xPos,yMovement:r.el.current.scrollTop-r.props.position.yPos};r.props.positionDispatch(movePosition(e))})}),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"updateScrollPosition",function(){r.el&&r.el.current&&(r.el.current.scrollTop=r.props.position.yPos,r.el.current.scrollLeft=r.props.position.xPos)}),r.el=createRef$1(),r}return _inherits(t,PureComponent),_createClass(t,[{key:"checkOverflow",value:function(e,t){var r=t.withX,o=void 0!==r&&r,n=t.withY,i=void 0!==n&&n,a=!1;switch(this.props.overflow){case"auto":o&&(a|=this.props.fullWidth>this.props.width),i&&(a|=this.props.fullHeight>this.props.height);break;case"hidden":a=!1;break;case"scroll":a=!0}return a}},{key:"shouldShow",value:function(){var e={withX:!0},t={withY:!0},r="initial"===this.props.overflowX?this.props.overflow:this.props.overflowX,o="initial"===this.props.overflowY?this.props.overflow:this.props.overflowY;return{showX:this.checkOverflow(r,e)&&this.checkOverflow(this.props.overflow,e),showY:this.checkOverflow(o,t)&&this.checkOverflow(this.props.overflow,t)}}},{key:"render",value:function(){var e=this.props,t=e.width,r=e.height,o=e.fullWidth,n=e.fullHeight,i={position:"absolute",overflowX:"auto",overflowY:"auto",width:t,height:r,transform:""},a=this.shouldShow(),s=a.showX,c=a.showY,u={height:1,width:1};return c||s?(s&&(u.width=o,i.overflowX="scroll","top"===this.props.positionX&&(i.transform+="rotateX(180deg)")),c&&(u.height=n,i.overflowY="scroll","left"===this.props.positionY&&(i.transform+="rotateY(180deg)")),React.createElement("div",{style:i,onScroll:this.onScroll,ref:this.el},React.createElement("div",{style:u}))):React.createElement("div",null)}}]),t}();FakeScroll.defaultProps={overflow:"auto",overflowX:"initial",overflowY:"initial",positionX:"bottom",positionY:"right",scrollBarWidth:5},FakeScroll.propTypes={overflow:PropTypes.oneOf(["hidden","auto","scroll"]),overflowX:PropTypes.oneOf(["hidden","auto","scroll","initial"]),overflowY:PropTypes.oneOf(["hidden","auto","scroll","initial"]),width:PropTypes.number.isRequired,height:PropTypes.number.isRequired,fullHeight:PropTypes.number.isRequired,fullWidth:PropTypes.number.isRequired,positionX:PropTypes.oneOf(["top","bottom"]),positionY:PropTypes.oneOf(["left","right"])};var FakeScroll$1=withPositionConsumer(FakeScroll,{withX:!0,withY:!0}),DraggingComponent=function(e){function t(e){var r;return _classCallCheck(this,t),_defineProperty(_assertThisInitialized(_assertThisInitialized(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))),"state",{mouse:{isMouseWithin:!1,cursorState:"grab"}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"currentContext",1),r.canvasBuffers=[createRef$1(),createRef$1()],r.container=createRef$1(),autoBind(_assertThisInitialized(_assertThisInitialized(r)),"onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onClick","onDoubleClick","draw"),r.onViewpointChange(),r.mouseMovePosition=void 0,r.touchMovePosition=void 0,r.isInDragPhase=void 0,r.mouseHasMoved=void 0,r}return _inherits(t,PureComponent),_createClass(t,[{key:"drawScene",value:function(){console.warn("drawScene is unimplemented.")}},{key:"onPositionUpdate",value:function(){console.warn("onPositionUpdate is unimplemented.")}},{key:"onViewpointChange",value:function(){}},{key:"componentDidMount",value:function(){this.ctxBuffers=[this.canvasBuffers[0].current.getContext("2d",{alpha:"false"}),this.canvasBuffers[1].current.getContext("2d",{alpha:"false"})],this.swapContexts(),this.container.current.addEventListener("mouseenter",this.onMouseEnter),this.container.current.addEventListener("mouseleave",this.onMouseLeave),this.container.current.addEventListener("mousedown",this.onMouseDown),this.container.current.addEventListener("mouseup",this.onMouseUp),this.container.current.addEventListener("mousemove",this.onMouseMove),this.container.current.addEventListener("touchstart",this.onTouchStart),this.container.current.addEventListener("touchmove",this.onTouchMove),this.container.current.addEventListener("touchend",this.onTouchEnd),this.container.current.addEventListener("touchcancel",this.onTouchCancel),this.container.current.addEventListener("click",this.onClick),this.container.current.addEventListener("dblclick",this.onDoubleClick)}},{key:"swapContexts",value:function(){var e=this.currentContext;this.canvasBuffers[e].current.style.visibility="visible";var t=(this.currentContext+1)%2;this.canvasBuffers[t].current.style.visibility="hidden",this.currentContext=t,this.ctx=this.ctxBuffers[t]}},{key:"draw",value:function(){this.ctx&&(this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.onViewpointChange(),this.drawScene(),this.swapContexts())}},{key:"onClick",value:function(e){}},{key:"onDoubleClick",value:function(e){}},{key:"onMouseDown",value:function(e){this.startDragPhase(e)}},{key:"onMouseMove",value:function(e){var t=this;if(void 0!==this.isInDragPhase){this.mouseHasMoved=!0;var r=Mouse.abs(e),o=this.mouseMovePosition;requestAnimation(this,function(){t.mouseMovePosition=r,t.onPositionUpdate(o,t.mouseMovePosition)})}}},{key:"onMouseUp",value:function(){this.stopDragPhase()}},{key:"onMouseEnter",value:function(){this.setState(function(e){return{mouse:_objectSpread({},e.mouse,{isMouseWithin:!0})}})}},{key:"onMouseLeave",value:function(){this.stopHoverPhase(),this.stopDragPhase()}},{key:"onTouchStart",value:function(e){this.startDragPhase(e)}},{key:"onTouchMove",value:function(e){void 0!==this.isInDragPhase&&this.onMouseMove(e)}},{key:"onTouchEnd",value:function(){this.stopDragPhase()}},{key:"onTouchCancel",value:function(){this.stopDragPhase()}},{key:"startDragPhase",value:function(e){this.mouseMovePosition=Mouse.abs(e),this.mouseHasMoved=void 0,this.isInDragPhase=!0,this.setState(function(e){return{mouse:_objectSpread({},e.mouse,{cursorState:"grabbing"})}})}},{key:"stopHoverPhase",value:function(){this.setState(function(e){return{mouse:_objectSpread({},e.mouse,{isMouseWithin:!1})}})}},{key:"stopDragPhase",value:function(){this.isInDragPhase=void 0,this.setState(function(e){return{mouse:_objectSpread({},e.mouse,{cursorState:"grab"})}})}},{key:"isEventWithinComponent",value:function(e){var t=Mouse.rel(e);return 0<=t[0]&&t[0]<=this.props.width&&0<=t[1]&&t[1]<=this.props.height}},{key:"componentWillUnmount",value:function(){this.container.current.removeEventListener("mouseenter",this.onMouseEnter),this.container.current.removeEventListener("mouseleave",this.onMouseLeave),this.container.current.removeEventListener("mouseup",this.onMouseUp),this.container.current.removeEventListener("mousedown",this.onMouseDown),this.container.current.removeEventListener("mousemove",this.onMouseMove),this.container.current.removeEventListener("click",this.onClick),this.container.current.removeEventListener("dblclick",this.onDoubleClick),this.container.current.removeEventListener("touchstart",this.onTouchStart),this.container.current.removeEventListener("touchend",this.onTouchEnd),this.container.current.removeEventListener("touchcancel",this.onTouchCancel),this.container.current.removeEventListener("touchmove",this.onTouchMove),this.stopDragPhase()}},{key:"render",value:function(){var e=_objectSpread({width:this.props.width,height:this.props.height},this.props.style,{cursor:this.state.mouse.cursorState,position:"relative"}),t=this.props.showModBar&&this.state.mouse.isMouseWithin,r={position:"absolute",left:0,top:0},o=omit(this.props,_toConsumableArray(this.constructor.propKeys).concat(["tileWidth","tileHeight","colorScheme","nrXTiles","nrYTiles","dispatch","sequences","fullWidth","fullHeight","position","positionDispatch"]));return React.createElement("div",_extends({style:e,ref:this.container},o),t&&React.createElement(ModBar,{style:{position:"absolute",right:0,opacity:.8}}," Plotly Modbar"),React.createElement("canvas",{style:r,ref:this.canvasBuffers[0],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),React.createElement("canvas",{style:r,ref:this.canvasBuffers[1],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),React.createElement(FakeScroll$1,{overflow:this.props.overflow,overflowX:this.props.overflowX,overflowY:this.props.overflowY,positionX:this.props.scrollBarPositionX,positionY:this.props.scrollBarPositionY,width:this.props.width,height:this.props.height,fullWidth:this.props.fullWidth,fullHeight:this.props.fullHeight}))}}]),t}();_defineProperty(DraggingComponent,"defaultProps",{engine:"canvas",showModBar:!0});var DrawingBase=function(){function e(t){_classCallCheck(this,e),this.el=t,this.state={}}return _createClass(e,[{key:"updateEl",value:function(e){this.el=e}},{key:"font",value:function(e){this.state.font=e}},{key:"globalAlpha",value:function(e){this.state.globalAlpha=e}},{key:"startDrawingFrame",value:function(){this.clear()}},{key:"endDrawingFrame",value:function(){}},{key:"save",value:function(){}},{key:"restore",value:function(){}}]),e}(),CanvasCharCache=function(){function e(t){_classCallCheck(this,e),this.cache={},this.cacheHeight=0,this.cacheWidth=0}return _createClass(e,[{key:"getFontTile",value:function(e,t,r,o){return t===this.cacheWidth&&r===this.cacheHeight&&o===this.font||(this.updateDimensions(t,r),this.font=o),void 0===this.cache[e]&&this.createTile(e,t,r),this.cache[e]}},{key:"createTile",value:function(e,t,r,o){var n=this.cache[e]=document.createElement("canvas");return n.width=t,n.height=r,this.ctx=n.getContext("2d"),this.ctx.font=this.font+"px mono",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(e,t/2,r/2,t,o)}},{key:"updateDimensions",value:function(e,t){this.invalidate(),this.cacheWidth=e,this.cacheHeight=t}},{key:"invalidate",value:function(){this.cache={}}}]),e}(),Canvas=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).ctx=e.getContext("2d"),r.cache=new CanvasCharCache,r}return _inherits(t,DrawingBase),_createClass(t,[{key:"clear",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"fillRect",value:function(e,t,r,o){this.ctx.fillRect(e,t,r,o)}},{key:"fillText",value:function(e,t,r,o,n){return this.ctx.drawImage(this.cache.getFontTile(e,o,n,this.ctx.font),t,r,o,n)}},{key:"font",value:function(e){this.ctx.font=e}},{key:"fillStyle",value:function(e){this.ctx.fillStyle=e}},{key:"globalAlpha",value:function(e){this.ctx.globalAlpha=e}},{key:"save",value:function(){this.ctx.save()}},{key:"restore",value:function(){this.ctx.restore()}}]),t}(),CanvasComponent=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).canvas=createRef$1(),r}return _inherits(t,PureComponent),_createClass(t,[{key:"componentDidMount",value:function(){this.ctx=new Canvas(this.canvas.current),this.draw()}},{key:"componentDidUpdate",value:function(){this._draw()}},{key:"_draw",value:function(){this.ctx&&(this.ctx.startDrawingFrame(),this.ctx.save(),this.draw(),this.ctx.restore(),this.ctx.endDrawingFrame())}},{key:"draw",value:function(){console.error("Implement me.")}},{key:"render",value:function(){return React.createElement("div",{style:this.props.style},React.createElement("canvas",{ref:this.canvas,width:this.props.width,height:this.props.height}))}}]),t}();_defineProperty(CanvasComponent,"defaultProps",{engine:"canvas"}),CanvasComponent.propTypes={width:PropTypes.number.isRequired,height:PropTypes.number.isRequired,style:PropTypes.object,engine:PropTypes.oneOf(["canvas","webgl"])};var CanvasTilingGridComponent=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,CanvasComponent),_createClass(t,[{key:"drawTile",value:function(e){var t=this,r=e.row,o=e.column,n=this.props.tileWidth,i=this.props.tileHeight,a=i*(r-this.props.startYTile),s=n*(o-this.props.startXTile);if(!(r>=this.props.sequences.raw.length)){var c=this.props.sequences.raw[r].sequence;if(!(o>=c.length)){var u=c[o];if(void 0!==u){var l=this.props.colorScheme.getColor(u),p="".concat(u,"-").concat(l),f=this.props.residueTileCache.createTile({key:p,tileWidth:n,tileHeight:i,create:function(e){var n=e.canvas;return t.drawResidue({text:u,canvas:n,row:r,column:o,colorScheme:l})}});this.props.ctx.drawImage(f,0,0,n,i,s,a,n,i)}}}}},{key:"drawResidue",value:function(e){e.row,e.column;var t=e.canvas,r=e.colorScheme,o=e.text;t.globalAlpha=.7,t.fillStyle=r,t.fillRect(0,0,this.props.tileWidth,this.props.tileHeight),this.props.border&&(t.globalAlpha=1,t.lineWidth=this.props.borderWidth,t.strokeStyle=this.props.borderStyle,t.strokeRect(0,0,this.props.tileWidth,this.props.tileHeight)),t.globalAlpha=1,t.fillStyle=this.props.textColor,t.font=this.props.textFont+"px mono",t.textBaseline="middle",t.textAlign="center",t.fillText(o,this.props.tileWidth/2,this.props.tileHeight/2+1,this.props.tileWidth)}},{key:"draw",value:function(e){this.props=e;for(var t=this.props.startYTile;t<this.props.endYTile;t++)for(var r=this.props.startXTile;r<this.props.endXTile;r++)this.drawTile({row:t,column:r})}}]),t}();function baseLt(e,t){return e<t}function minBy(e,t){return e&&e.length?baseExtremum(e,baseIteratee(t,2),baseLt):void 0}var CanvasCache=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).maxElements;_classCallCheck(this,e),this.maxElements=t||200,this.invalidate()}return _createClass(e,[{key:"createTile",value:function(e){var t=this,r=e.key,o=e.tileWidth,n=e.tileHeight,i=e.create;if(r in this.cache)return this.cache[r].value;if(this.cachedElements>=this.maxElements){var a=minBy(Object.keys(this.cache),function(e){return t.cache[e].insertionTime});delete this.cache[a]}var s=document.createElement("canvas");this.cache[r]={value:s,insertionTime:Date.now()},s.width=o,s.height=n;var c=s.getContext("2d");return this.cachedElements++,i({canvas:c}),s}},{key:"updateTileSpecs",value:function(e){return!shallowEqual$1(e,this.spec)&&(this.invalidate(),this.spec=e,!0)}},{key:"invalidate",value:function(){this.cache={},this.spec={},this.cachedElements=0}}]),e}();function roundMod(e,t){return e-e%t}var SequenceViewerComponent=function(e){function t(e){var r;return _classCallCheck(this,t),_defineProperty(_assertThisInitialized(_assertThisInitialized(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))),"renderTile",function(e){var t=e.row,o=e.column,n=t+"-"+o;return r.tileCache.createTile({key:n,tileWidth:r.props.tileWidth*r.props.xGridSize,tileHeight:r.props.tileHeight*r.props.yGridSize,create:function(e){var n=e.canvas;r.tilingGridManager.draw(_objectSpread({ctx:n,startYTile:t,startXTile:o,residueTileCache:r.residueTileCache,endYTile:t+r.props.yGridSize,endXTile:o+r.props.xGridSize},pick(r.props,["sequences","colorScheme","textFont","textColor","tileHeight","tileWidth","border","borderWidth","borderColor"])))}})}),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"onPositionUpdate",function(e,t){var o={xMovement:e[0]-t[0],yMovement:e[1]-t[1]};r.props.positionDispatch(movePosition(o))}),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"updateScrollPosition",function(){r.draw()}),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"onMouseMove",function(e){if(void 0===r.isInDragPhase&&(void 0!==r.props.onResidueMouseEnter||void 0!==r.props.onResidueMouseLeave)){var o=r.currentPointerPosition(e),n=r.currentMouseSequencePosition;isEqual(n,o)||(void 0!==n&&r.sendEvent("onResidueMouseLeave",n),r.currentMouseSequencePosition=o,r.sendEvent("onResidueMouseEnter",o))}_get(_getPrototypeOf(t.prototype),"onMouseMove",_assertThisInitialized(r)).call(_assertThisInitialized(r),e)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"onMouseLeave",function(e){r.sendEvent("onResidueMouseLeave",r.currentMouseSequencePosition),r.currentMouseSequencePosition=void 0,_get(_getPrototypeOf(t.prototype),"onMouseLeave",_assertThisInitialized(r)).call(_assertThisInitialized(r),e)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"onClick",function(e){if(!r.mouseHasMoved){var o=r.currentPointerPosition(e);r.sendEvent("onResidueClick",o)}_get(_getPrototypeOf(t.prototype),"onClick",_assertThisInitialized(r)).call(_assertThisInitialized(r),e)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(r)),"onDoubleClick",function(e){var o=r.currentPointerPosition(e);r.sendEvent("onResidueDoubleClick",o),_get(_getPrototypeOf(t.prototype),"onDoubleClick",_assertThisInitialized(r)).call(_assertThisInitialized(r),e)}),r.tileCache=new CanvasCache,r.residueTileCache=new CanvasCache,r.tilingGridManager=new CanvasTilingGridComponent,r}return _inherits(t,DraggingComponent),_createClass(t,[{key:"drawScene",value:function(){var e=this.getTilePositions();this.updateTileSpecs(),this.drawTiles(e)}},{key:"getTilePositions",value:function(){var e=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),t=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),r=Math.min(this.props.sequences.length,t+this.props.nrYTiles+2*this.props.cacheElements);return{startXTile:e,startYTile:t,endXTile:Math.min(this.props.sequences.maxLength,e+this.props.nrXTiles+2*this.props.cacheElements),endYTile:r}}},{key:"drawTiles",value:function(e){for(var t=e.startXTile,r=e.startYTile,o=e.endXTile,n=e.endYTile,i=this.props.xGridSize,a=this.props.yGridSize,s=roundMod(r,a),c=roundMod(t,i),u=s;u<n;u+=a)for(var l=c;l<o;l+=i){var p=this.renderTile({row:u,column:l,canvas:this.ctx}),f=i*this.props.tileWidth,h=a*this.props.tileHeight,d=(u-this.props.position.currentViewSequence)*this.props.tileHeight+this.props.position.yPosOffset,y=(l-this.props.position.currentViewSequencePosition)*this.props.tileWidth+this.props.position.xPosOffset;this.ctx.drawImage(p,0,0,f,h,y,d,f,h)}}},{key:"positionToSequence",value:function(e){var t=this.props.sequences.raw,r=clamp(floor((this.props.position.yPos+e.yPos)/this.props.tileHeight),0,t.length-1),o=t[r],n=clamp(floor((this.props.position.xPos+e.xPos)/this.props.tileWidth),0,o.sequence.length-1);return{i:r,sequence:o,position:n,residue:o.sequence[n]}}},{key:"currentPointerPosition",value:function(e){var t=_slicedToArray(Mouse.rel(e),2),r=t[0],o=t[1];return this.positionToSequence({xPos:r,yPos:o})}},{key:"sendEvent",value:function(e,t){void 0!==this.props[e]&&this.props[e](t)}},{key:"componentWillUnmount",value:function(){this.tileCache.invalidate(),this.residueTileCache.invalidate()}},{key:"updateTileSpecs",value:function(){var e=["tileWidth","tileHeight","colorScheme","textFont","borderColor"];this.tileCache.updateTileSpecs(pick(this.props,e.concat(["xGridSize","yGridSize","sequences"]))),this.residueTileCache.updateTileSpecs(pick(this.props,e))}},{key:"render",value:function(){return _get(_getPrototypeOf(t.prototype),"render",this).call(this)}}]),t}();SequenceViewerComponent.defaultProps={showModBar:!1,xGridSize:10,yGridSize:10,border:!1,borderColor:"black",borderWidth:1,cacheElements:20,textColor:"black",textFont:"18px Arial",overflow:"hidden",overflowX:"auto",overflowY:"auto",scrollBarPositionX:"bottom",scrollBarPositionY:"right"},SequenceViewerComponent.propTypes={showModBar:PropTypes.bool,onResidueMouseEnter:PropTypes.func,onResidueMouseLeave:PropTypes.func,onResidueClick:PropTypes.func,onResidueDoubleClick:PropTypes.func,xGridSize:PropTypes.number.isRequired,yGridSize:PropTypes.number.isRequired,cacheElements:PropTypes.number.isRequired,border:PropTypes.bool,borderColor:PropTypes.string,borderWidth:PropTypes.number,textColor:PropTypes.string,textFont:PropTypes.string,overflow:PropTypes.oneOf(["hidden","auto","scroll"]),overflowX:PropTypes.oneOf(["hidden","auto","scroll","initial"]),overflowY:PropTypes.oneOf(["hidden","auto","scroll","initial"]),scrollBarPositionX:PropTypes.oneOf(["top","bottom"]),scrollBarPositionY:PropTypes.oneOf(["left","right"])},SequenceViewerComponent.propKeys=Object.keys(SequenceViewerComponent.propTypes);var mapStateToProps$3=function(e){var t=Math.min(e.props.width,e.sequences.maxLength*e.props.tileWidth),r=Math.min(e.props.height,e.sequences.length*e.props.tileHeight);return{sequences:e.sequences,width:t,height:r,tileWidth:e.props.tileWidth,tileHeight:e.props.tileHeight,colorScheme:e.props.colorScheme,nrXTiles:e.sequenceStats.nrXTiles,nrYTiles:e.sequenceStats.nrYTiles,fullWidth:e.sequenceStats.fullWidth,fullHeight:e.sequenceStats.fullHeight}},SV=withPositionConsumer(SequenceViewerComponent,{withX:!0,withY:!0}),SequenceViewer=msaConnect(mapStateToProps$3)(SV),SequenceOverviewComponent=function(e){function t(){var e,r;_classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return _defineProperty(_assertThisInitialized(_assertThisInitialized(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(n))))),"draw",function(){r.drawScene()}),r}return _inherits(t,CanvasComponent),_createClass(t,[{key:"updateScrollPosition",value:function(){this._draw()}},{key:"drawScene",value:function(){this.scene={};var e=this.position;this.scene.xViewPos=e.xPos,this.scene.yViewPos=e.yPos,this.scene.xScalingFactor=1/this.props.globalTileWidth*this.props.tileWidth,this.scene.yScalingFactor=1/this.props.globalTileHeight*this.props.tileHeight,this.drawCurrentViewpoint(),this.drawSequences()}},{key:"drawSequences",value:function(){for(var e=this.scene,t=e.xViewPos,r=e.xScalingFactor,o=this.props.sequences.raw,n=0,i=0;i<o.length;i++){var a=o[i].sequence,s=0,c=clamp(floor(t*r),0,a.length-1);for(c=0;c<a.length;c++){var u=a[c];if(this.ctx.fillStyle(this.props.colorScheme.getColor(u)),this.ctx.globalAlpha(.5),this.ctx.fillRect(s,n,this.props.tileWidth,this.props.tileHeight),(s+=this.props.tileWidth)>this.props.globalWidth)break}if((n+=this.props.tileHeight)>this.props.height)break}}},{key:"drawCurrentViewpoint",value:function(){var e=this.scene,t=e.xViewPos,r=e.xScalingFactor,o=e.yViewPos,n=e.yScalingFactor;this.ctx.globalAlpha(.8),this.ctx.fillRect(t*r,o*n,this.props.globalWidth*r,this.props.globalHeight*n)}},{key:"render",value:function(){return _get(_getPrototypeOf(t.prototype),"render",this).call(this)}}]),t}();SequenceOverviewComponent.defaultProps=_objectSpread({},CanvasComponent.defaultProps,{height:50,tileWidth:5,tileHeight:5}),SequenceOverviewComponent.propTypes=_objectSpread({},CanvasComponent.propTypes,{height:PropTypes.number,tileWidth:PropTypes.number,tileHeight:PropTypes.number});var SOC=withPositionConsumer(SequenceOverviewComponent),mapStateToProps$4=function(e){return{sequences:e.sequences,width:e.props.width,globalWidth:e.props.width,globalHeight:e.props.height,globalTileWidth:e.props.tileWidth,globalTileHeight:e.props.tileHeight,colorScheme:e.props.colorScheme}},SequenceOverview=msaConnect(mapStateToProps$4)(SOC),reduxActions={sequences:"updateSequences"};Object.keys(MSAPropTypes).forEach(function(e){e in reduxActions||MSAPropTypes[e]===PropTypes.func||(reduxActions[e]="updateProp")});var attributesToStore=Object.keys(reduxActions),mapToActionKeys=function(e){return reduce(e,function(e,t,r){return e[t.key]=t,e},{})},mainStoreActionKeys=mapToActionKeys(actions),positionStoreActionKeys=mapToActionKeys(actions$1),PropsToRedux=function(e){var t=function(t){function r(e){var t;_classCallCheck(this,r),t=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,e));var o=pick(e,attributesToStore)||{};return t.el=createRef$1(),t.msaStore=e.msaStore,void 0!==o.sequences?t.msaStore=createMSAStore(o):console.warn("Check your MSA properties",o),t}return _inherits(r,Component),_createClass(r,[{key:"componentDidMount",value:function(){void 0!==this.props.position&&this.updatePosition(this.props.position)}},{key:"componentDidUpdate",value:function(e){var t=this.props;for(var r in pick(t,attributesToStore))if(!isEqual(e[r],t[r]))if("position"===r)this.updatePosition(t[r]);else if(r in reduxActions){var o=void 0;switch(reduxActions[r]){case"updateProp":o=actions[reduxActions[r]](r,t[r]);break;default:o=actions[reduxActions[r]](t[r])}this.msaStore.dispatch(o)}else console.error(r," is unknown.")}},{key:"dispatch",value:function(e){if(e.type in mainStoreActionKeys)this.msaStore.dispatch(e);else{if(!(e.type in positionStoreActionKeys))throw new Error("Invalid action",e);this.el.current.positionStore.dispatch(e)}}},{key:"render",value:function(){var t=omit(this.props,attributesToStore),r=t.msaStore,o=_objectWithoutProperties(t,["msaStore"]);return void 0===this.msaStore?React.createElement("div",null," Error initializing the MSAViewer. "):React.createElement(e,_extends({ref:this.el,msaStore:r||this.msaStore},o))}}]),r}();return forOwn(actions,function(e,r){t.prototype[r]=function(t){this.msaStore.dispatch(e(t))}}),forOwn(actions$1,function(e,r){t.prototype[r]=function(t){var r=this;requestAnimation(this,function(){r.el.current.positionStore.dispatch(e(t))})}}),t},same="FORWARD_SAME_PROP_NAME",defaultEvents={onResidueClick:"residueClick"},MSAViewerComponent=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).el=createRef$1(),forOwn(defaultEvents,function(e,t){r["_"+t]=function(t){var o=new CustomEvent(e,{detail:t,bubbles:!0});r.el.current.dispatchEvent(o)}}),r._setupStores(),r}return _inherits(t,Component),_createClass(t,[{key:"forwardProps",value:function(e){var t=this,r={};return forOwn(e,function(e,o){void 0!==t.props[o]?r[e===same?o:e]=t.props[o]:o in defaultEvents&&(r[o]=t["_"+o])}),r}},{key:"_setupStores",value:function(){var e=this;this.positionStore=createStore(positionReducer),this.positionStore.dispatch(actions$1.updateMainStore(this.props.msaStore.getState())),this.msaStoreUnsubscribe=this.props.msaStore.subscribe(function(){e.positionStore.dispatch(actions$1.updateMainStore(e.props.msaStore.getState()))})}},{key:"componentWillUnmount",value:function(){this.msaStoreUnsubscribe()}},{key:"getChildContext",value:function(){return{positionMSAStore:this.positionStore}}},{key:"render",value:function(){var e=this.props,r=e.children,o=e.msaStore,n=_objectWithoutProperties(e,["children","msaStore"]);if(r)return React.createElement(MSAProvider,{store:o},React.createElement("div",_extends({},n,{ref:this.el}),r));var i={paddingTop:o.getState().props.tileHeight+50};return React.createElement(MSAProvider,{store:o},React.createElement("div",{style:{display:"flex"},ref:this.el},React.createElement(Labels,_extends({style:i},this.forwardProps(t.labelsProps))),React.createElement("div",null,React.createElement(OverviewBar,_extends({height:50},this.forwardProps(t.overviewBarProps))),React.createElement(PositionBar,this.forwardProps(t.positionBarProps)),React.createElement(SequenceViewer,this.forwardProps(t.sequenceViewerProps)),React.createElement("div",{style:{height:10}}))))}}]),t}();_defineProperty(MSAViewerComponent,"sequenceViewerProps",{showModBar:same,onResidueMouseEnter:same,onResidueMouseLeave:same,onResidueClick:same,onResidueDoubleClick:same,sequenceBorder:"border",sequenceBorderColor:"borderColor",sequenceBorderWidth:"borderWidth",sequenceTextColor:"textColor",sequenceTextFont:"textFont",sequenceOverflow:"overflow",sequenceOverflowX:"overflowX",sequenceOverflowy:"overflowY",sequenceScrollBarPositionX:"scrollBarPositionX",sequenceScrollBarPositionY:"scrollBarPositionY"}),_defineProperty(MSAViewerComponent,"labelsProps",{labelComponent:same,labelStyle:same,labelAttributes:same}),_defineProperty(MSAViewerComponent,"positionBarProps",{markerComponent:same,markerStyle:same,markerAttributes:same}),_defineProperty(MSAViewerComponent,"overviewBarProps",{barComponent:same,barStyle:same,barAttributes:same}),MSAViewerComponent.childContextTypes={positionMSAStore:PropTypes.object};var MSAViewer=PropsToRedux(MSAViewerComponent);MSAViewer.defaultProps=msaDefaultProps,MSAViewer.propTypes=_objectSpread({msaStore:PropTypes.object},MSAPropTypes);var VERSION="0.0.12",actions$2=_objectSpread({},actions,actions$1);export default MSAViewer;export{actions$2 as actions,ColorScheme,createMSAStore,msaConnect,MSAProvider,MSAViewer,withPositionConsumer as withPositionStore,VERSION as version,Labels,OverviewBar,PositionBar,SequenceOverview,SequenceViewer};
//# sourceMappingURL=index.esm.min.js.map